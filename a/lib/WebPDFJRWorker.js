!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(()=>(()=>{var __webpack_modules__={7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",o="hour",s="day",u="week",c="month",l="quarter",d="year",f="date",h="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},_=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},m={s:_,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+_(r,2,"0")+":"+_(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),a=n-i<0,o=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:u,d:s,D:f,h:o,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",S={};S[y]=v;var b="$isDayjsObject",D=function(e){return e instanceof w||!(!e||!e[b])},P=function e(t,n,r){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();S[a]&&(i=a),n&&(S[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;S[s]=t,i=s}return!r&&i&&(y=i),i||!r&&y},I=function(e,t){if(D(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new w(n)},A=m;A.l=P,A.i=D,A.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function v(e){this.$L=P(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var _=v.prototype;return _.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(A.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(g);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},_.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},_.$utils=function(){return A},_.isValid=function(){return!(this.$d.toString()===h)},_.isSame=function(e,t){var n=I(e);return this.startOf(t)<=n&&n<=this.endOf(t)},_.isAfter=function(e,t){return I(e)<this.startOf(t)},_.isBefore=function(e,t){return this.endOf(t)<I(e)},_.$g=function(e,t,n){return A.u(e)?this[t]:this.set(n,e)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(e,t){var n=this,r=!!A.u(t)||t,l=A.p(e),h=function(e,t){var i=A.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},g=function(e,t){return A.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},p=this.$W,v=this.$M,_=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case d:return r?h(1,0):h(31,11);case c:return r?h(1,v):h(0,v+1);case u:var y=this.$locale().weekStart||0,S=(p<y?p+7:p)-y;return h(r?_-S:_+(6-S),v);case s:case f:return g(m+"Hours",0);case o:return g(m+"Minutes",1);case a:return g(m+"Seconds",2);case i:return g(m+"Milliseconds",3);default:return this.clone()}},_.endOf=function(e){return this.startOf(e,!1)},_.$set=function(e,t){var n,u=A.p(e),l="set"+(this.$u?"UTC":""),h=(n={},n[s]=l+"Date",n[f]=l+"Date",n[c]=l+"Month",n[d]=l+"FullYear",n[o]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],g=u===s?this.$D+(t-this.$W):t;if(u===c||u===d){var p=this.clone().set(f,1);p.$d[h](g),p.init(),this.$d=p.set(f,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](g);return this.init(),this},_.set=function(e,t){return this.clone().$set(e,t)},_.get=function(e){return this[A.p(e)]()},_.add=function(r,l){var f,h=this;r=Number(r);var g=A.p(l),p=function(e){var t=I(h);return A.w(t.date(t.date()+Math.round(e*r)),h)};if(g===c)return this.set(c,this.$M+r);if(g===d)return this.set(d,this.$y+r);if(g===s)return p(1);if(g===u)return p(7);var v=(f={},f[a]=t,f[o]=n,f[i]=e,f)[g]||1,_=this.$d.getTime()+r*v;return A.w(_,this)},_.subtract=function(e,t){return this.add(-1*e,t)},_.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=A.z(this),a=this.$H,o=this.$m,s=this.$M,u=n.weekdays,c=n.months,l=n.meridiem,d=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},f=function(e){return A.s(a%12||12,e,"0")},g=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return A.s(t.$y,4,"0");case"M":return s+1;case"MM":return A.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return t.$D;case"DD":return A.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,u,2);case"ddd":return d(n.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(a);case"HH":return A.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return g(a,o,!0);case"A":return g(a,o,!1);case"m":return String(o);case"mm":return A.s(o,2,"0");case"s":return String(t.$s);case"ss":return A.s(t.$s,2,"0");case"SSS":return A.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(r,f,h){var g,p=this,v=A.p(f),_=I(r),m=(_.utcOffset()-this.utcOffset())*t,y=this-_,S=function(){return A.m(p,_)};switch(v){case d:g=S()/12;break;case c:g=S();break;case l:g=S()/3;break;case u:g=(y-m)/6048e5;break;case s:g=(y-m)/864e5;break;case o:g=y/n;break;case a:g=y/t;break;case i:g=y/e;break;default:g=y}return h?g:A.a(g)},_.daysInMonth=function(){return this.endOf(c).$D},_.$locale=function(){return S[this.$L]},_.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=P(e,t,!0);return r&&(n.$L=r),n},_.clone=function(){return A.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},v}(),C=w.prototype;return I.prototype=C,[["$ms",r],["$s",i],["$m",a],["$H",o],["$W",s],["$M",c],["$y",d],["$D",f]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,w,I),e.$i=!0),I},I.locale=P,I.isDayjs=D,I.unix=function(e){return I(1e3*e)},I.en=S[y],I.Ls=S,I.p={},I}()},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,a),!0;case 6:return l.fn.call(l.context,t,r,i,a,o),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},5733:(e,t,n)=>{
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
e.exports=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return i(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,o,s,u,c,l=[],d=0,f=e.length,h=f,g="string"!==r.getTypeOf(e);d<e.length;)h=f-d,i=g?(t=e[d++],n=d<f?e[d++]:0,d<f?e[d++]:0):(t=e.charCodeAt(d++),n=d<f?e.charCodeAt(d++):0,d<f?e.charCodeAt(d++):0),o=t>>2,s=(3&t)<<4|n>>4,u=1<h?(15&n)<<2|i>>6:64,c=2<h?63&i:64,l.push(a.charAt(o)+a.charAt(s)+a.charAt(u)+a.charAt(c));return l.join("")},n.decode=function(e){var t,n,r,o,s,u,c=0,l=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var f,h=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&h--,e.charAt(e.length-2)===a.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|h):new Array(0|h);c<e.length;)t=a.indexOf(e.charAt(c++))<<2|(o=a.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(s=a.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(u=a.indexOf(e.charAt(c++))),f[l++]=t,64!==s&&(f[l++]=n),64!==u&&(f[l++]=r);return f}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),a=e("./utils"),o=e("./stream/GenericWorker"),s=r?"uint8array":"array";function u(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",a.inherits(u,o),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,e.data),!1)},u.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new u("Deflate",e)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,o,l){var d,f,h=e.file,g=e.compression,p=l!==s.utf8encode,v=a.transformTo("string",l(h.name)),_=a.transformTo("string",s.utf8encode(h.name)),m=h.comment,y=a.transformTo("string",l(m)),S=a.transformTo("string",s.utf8encode(m)),b=_.length!==h.name.length,D=S.length!==m.length,P="",I="",A="",w=h.dir,C=h.date,k={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(k.crc32=e.crc32,k.compressedSize=e.compressedSize,k.uncompressedSize=e.uncompressedSize);var E=0;t&&(E|=8),p||!b&&!D||(E|=2048);var G=0,T=0;w&&(G|=16),"UNIX"===o?(T=798,G|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(h.unixPermissions,w)):(T=20,G|=function(e){return 63&(e||0)}(h.dosPermissions)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,f=C.getUTCFullYear()-1980,f<<=4,f|=C.getUTCMonth()+1,f<<=5,f|=C.getUTCDate(),b&&(I=r(1,1)+r(u(v),4)+_,P+="up"+r(I.length,2)+I),D&&(A=r(1,1)+r(u(y),4)+S,P+="uc"+r(A.length,2)+A);var F="";return F+="\n\0",F+=r(E,2),F+=g.magic,F+=r(d,2),F+=r(f,2),F+=r(k.crc32,4),F+=r(k.compressedSize,4),F+=r(k.uncompressedSize,4),F+=r(v.length,2),F+=r(P.length,2),{fileRecord:c.LOCAL_FILE_HEADER+F+v+P,dirRecord:c.CENTRAL_FILE_HEADER+r(T,2)+F+r(y.length,2)+"\0\0\0\0"+r(G,4)+r(i,4)+v+P+y}}var a=e("../utils"),o=e("../stream/GenericWorker"),s=e("../utf8"),u=e("../crc32"),c=e("../signature");function l(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(l,o),l.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,o){var s=a.transformTo("string",o(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},l.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var a=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},u=n.dir,c=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:u,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(a)})),a.entriesCount=o}catch(e){a.error(e)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),a=e("./utf8"),o=e("./zipEntries"),s=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function c(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new o(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var a=0;a<r.length;a++)n.push(c(r[a]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),a=i.files,o=0;o<a.length;o++){var s=a[o],u=s.fileNameStr,c=r.resolve(s.fileNameStr);n.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(c).unsafeOriginalName=u)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(a,i),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=a.getTypeOf(t),s=a.extend(n||{},u);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=p(e)),s.createFolders&&(r=g(e))&&v.call(this,r,!0);var d="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!d),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var _=null;_=t instanceof c||t instanceof o?t:f.isNode&&f.isStream(t)?new h(e,t):a.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var m=new l(e,_,s);this.files[e]=m}var i=e("./utf8"),a=e("./utils"),o=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),u=e("./defaults"),c=e("./compressedObject"),l=e("./zipObject"),d=e("./generate"),f=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),g=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},p=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:u.createFolders,e=p(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function _(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var m={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(_(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(_(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=v.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");a.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new o("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=m},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),a=e("./ArrayReader"),o=e("./StringReader"),s=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new u(r.transformTo("uint8array",e)):new a(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function a(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,r),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,r),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),a=e("./GenericWorker"),o=e("../base64"),s=e("../support"),u=e("../external"),c=null;if(s.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function l(e,t){return new u.Promise((function(n,i){var a=[],s=e._internalType,u=e._outputType,c=e._mimeType;e.on("data",(function(e,n){a.push(e),t&&t(n)})).on("error",(function(e){a=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(u,function(e,t){var n,r=0,i=null,a=0;for(n=0;n<t.length;n++)a+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(a),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,a),c);n(e)}catch(e){i(e)}a=[]})).resume()}))}function d(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return l(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),a=e("./nodejsUtils"),o=e("./stream/GenericWorker"),s=new Array(256),u=0;u<256;u++)s[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function l(){o.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,n,r,a,o,s=e.length,u=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),a=o=0;o<u;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,a,o=e.length,u=new Array(2*o);for(t=n=0;t<o;)if((i=e[t++])<128)u[n++]=i;else if(4<(a=s[i]))u[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&t<o;)i=i<<6|63&e[t++],a--;1<a?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,o),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),u=t;o!==t.length&&(i.uint8array?(u=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(u=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(u),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(l,o),l.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),o=e("./external");function s(e){return e}function u(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,a=e.length;if(a<=n)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,a)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,a)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function l(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=l;var f={};f.string={string:s,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,a.allocBuffer(e.length))}},f.array={string:l,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},f.arraybuffer={string:function(e){return l(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:l,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return a.newBufferFrom(e)}},f.nodebuffer={string:l,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return f[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,a,s,c){return o.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var l=n.getTypeOf(t);return l?("arraybuffer"===l?t=n.transformTo("uint8array",t):"string"===l&&(c?t=i.decode(t):a&&!0!==s&&(t=function(e){return u(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),a=e("./signature"),o=e("./zipEntry"),s=e("./support");function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),a=e("./compressedObject"),o=e("./crc32"),s=e("./utf8"),u=e("./compressions"),c=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(Object.prototype.hasOwnProperty.call(u,t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),o=e("./utf8"),s=e("./compressedObject"),u=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=l;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,o=new i(l),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var a={},o=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return a.reject(e,r)}r===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,a.reject(e,t))}function i(t){n||(n=!0,a.resolve(e,t))}var o=g((function(){t(i,r)}));"error"===o.status&&r(o.value)}function g(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==u?d(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){a.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},a.resolve=function(e,t){var n=g(f,t);if("error"===n.status)return a.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:a.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return a.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,u=-1,c=new this(i);++u<n;)l(e[u],u);return c;function l(e,i){t.resolve(e).then((function(e){o[i]=e,++s!==n||r||(r=!0,a.resolve(c,o))}),(function(e){r||(r=!0,a.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o,s=-1,u=new this(i);++s<n;)o=e[s],t.resolve(o).then((function(e){r||(r=!0,a.resolve(u,e))}),(function(e){r||(r=!0,a.reject(u,e))}));return u}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/messages"),s=e("./zlib/zstream"),u=Object.prototype.toString,c=0,l=-1,d=0,f=8;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({level:l,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var g;if(g="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,g))!==c)throw new Error(o[n]);this._dict_set=!0}}function g(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}h.prototype.push=function(e,t){var n,o,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,o))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),!(s.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=h,n.deflate=g,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,g(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,g(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/constants"),s=e("./zlib/messages"),u=e("./zlib/zstream"),c=e("./zlib/gzheader"),l=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,u,c,d,f,h=this.strm,g=this.options.chunkSize,p=this.options.dictionary,v=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?h.input=a.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(g),h.next_out=0,h.avail_out=g),(n=r.inflate(h,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(f="string"==typeof p?a.string2buf(p):"[object ArrayBuffer]"===l.call(p)?new Uint8Array(p):p,n=r.inflateSetDictionary(this.strm,f)),n===o.Z_BUF_ERROR&&!0===v&&(n=o.Z_OK,v=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&n!==o.Z_STREAM_END&&(0!==h.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(u=a.utf8border(h.output,h.next_out),c=h.next_out-u,d=a.buf2string(h.output,u),h.next_out=c,h.avail_out=g-c,c&&i.arraySet(h.output,h.output,u,c,0),this.onData(d)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(v=!0)}while((0<h.avail_in||0===h.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(h.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=f,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},a={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function u(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,i,a,o,s=e.length,u=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),a=o=0;o<u;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return u(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,a,s=t||e.length,c=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)c[r++]=i;else if(4<(a=o[i]))c[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&n<s;)i=i<<6|63&e[n++],a--;1<a?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;a=a+(i=i+t[r++]|0)|0,--o;);i%=65521,a%=65521}return i|a<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),a=e("./trees"),o=e("./adler32"),s=e("./crc32"),u=e("./messages"),c=0,l=4,d=0,f=-2,h=-1,g=4,p=2,v=8,_=9,m=286,y=30,S=19,b=2*m+1,D=15,P=3,I=258,A=I+P+1,w=42,C=113,k=1,E=2,G=3,T=4;function F(e,t){return e.msg=u[t],t}function R(e){return(e<<1)-(4<e?9:0)}function M(e){for(var t=e.length;0<=--t;)e[t]=0}function O(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function x(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,O(e.strm)}function B(e,t){e.pending_buf[e.pending++]=t}function N(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-A?e.strstart-(e.w_size-A):0,c=e.window,l=e.w_mask,d=e.prev,f=e.strstart+I,h=c[a+o-1],g=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+o]===g&&c[n+o-1]===h&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<f);if(r=I-(f-a),a=f-I,o<r){if(e.match_start=t,s<=(o=r))break;h=c[a+o-1],g=c[a+o]}}}while((t=d[t&l])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead}function j(e){var t,n,r,a,u,c,l,d,f,h,g=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-A)){for(i.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=n=e.hash_size;r=e.head[--t],e.head[t]=g<=r?r-g:0,--n;);for(t=n=g;r=e.prev[--t],e.prev[t]=g<=r?r-g:0,--n;);a+=g}if(0===e.strm.avail_in)break;if(c=e.strm,l=e.window,d=e.strstart+e.lookahead,h=void 0,(f=a)<(h=c.avail_in)&&(h=f),n=0===h?0:(c.avail_in-=h,i.arraySet(l,c.input,c.next_in,h,d),1===c.state.wrap?c.adler=o(c.adler,l,h,d):2===c.state.wrap&&(c.adler=s(c.adler,l,h,d)),c.next_in+=h,c.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=P)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+P-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<P)););}while(e.lookahead<A&&0!==e.strm.avail_in)}function U(e,t){for(var n,r;;){if(e.lookahead<A){if(j(e),e.lookahead<A&&t===c)return k;if(0===e.lookahead)break}if(n=0,e.lookahead>=P&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+P-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-A&&(e.match_length=L(e,n)),e.match_length>=P)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-P),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=P){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+P-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(x(e,!1),0===e.strm.avail_out))return k}return e.insert=e.strstart<P-1?e.strstart:P-1,t===l?(x(e,!0),0===e.strm.avail_out?G:T):e.last_lit&&(x(e,!1),0===e.strm.avail_out)?k:E}function W(e,t){for(var n,r,i;;){if(e.lookahead<A){if(j(e),e.lookahead<A&&t===c)return k;if(0===e.lookahead)break}if(n=0,e.lookahead>=P&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+P-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=P-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-A&&(e.match_length=L(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===P&&4096<e.strstart-e.match_start)&&(e.match_length=P-1)),e.prev_length>=P&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-P,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-P),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+P-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=P-1,e.strstart++,r&&(x(e,!1),0===e.strm.avail_out))return k}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&x(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return k}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<P-1?e.strstart:P-1,t===l?(x(e,!0),0===e.strm.avail_out?G:T):e.last_lit&&(x(e,!1),0===e.strm.avail_out)?k:E}function H(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*b),this.dyn_dtree=new i.Buf16(2*(2*y+1)),this.bl_tree=new i.Buf16(2*(2*S+1)),M(this.dyn_ltree),M(this.dyn_dtree),M(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(D+1),this.heap=new i.Buf16(2*m+1),M(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*m+1),M(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function K(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=p,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?w:C,e.adler=2===t.wrap?0:1,t.last_flush=c,a._tr_init(t),d):F(e,f)}function J(e){var t=K(e);return t===d&&function(e){e.window_size=2*e.w_size,M(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=P-1,e.match_available=0,e.ins_h=0}(e.state),t}function V(e,t,n,r,a,o){if(!e)return f;var s=1;if(t===h&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),a<1||_<a||n!==v||r<8||15<r||t<0||9<t||o<0||g<o)return F(e,f);8===r&&(r=9);var u=new z;return(e.state=u).strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+P-1)/P),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=o,u.method=n,J(e)}r=[new H(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&t===c)return k;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,x(e,!1),0===e.strm.avail_out))return k;if(e.strstart-e.block_start>=e.w_size-A&&(x(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===l?(x(e,!0),0===e.strm.avail_out?G:T):(e.strstart>e.block_start&&(x(e,!1),e.strm.avail_out),k)})),new H(4,4,8,4,U),new H(4,5,16,8,U),new H(4,6,32,32,U),new H(4,4,16,16,W),new H(8,16,32,32,W),new H(8,16,128,128,W),new H(8,32,128,256,W),new H(32,128,258,1024,W),new H(32,258,258,4096,W)],n.deflateInit=function(e,t){return V(e,t,v,15,8,0)},n.deflateInit2=V,n.deflateReset=J,n.deflateResetKeep=K,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=t,d):f},n.deflate=function(e,t){var n,i,o,u;if(!e||!e.state||5<t||t<0)return e?F(e,f):f;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==l)return F(e,0===e.avail_out?-5:f);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===w)if(2===i.wrap)e.adler=0,B(i,31),B(i,139),B(i,8),i.gzhead?(B(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),B(i,255&i.gzhead.time),B(i,i.gzhead.time>>8&255),B(i,i.gzhead.time>>16&255),B(i,i.gzhead.time>>24&255),B(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),B(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(B(i,255&i.gzhead.extra.length),B(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(B(i,0),B(i,0),B(i,0),B(i,0),B(i,0),B(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),B(i,3),i.status=C);else{var h=v+(i.w_bits-8<<4)<<8;h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=C,N(i,h),0!==i.strstart&&(N(i,e.adler>>>16),N(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),O(e),o=i.pending,i.pending!==i.pending_buf_size));)B(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),O(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,B(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),O(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,B(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&O(e),i.pending+2<=i.pending_buf_size&&(B(i,255&e.adler),B(i,e.adler>>8&255),e.adler=0,i.status=C)):i.status=C),0!==i.pending){if(O(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&R(t)<=R(n)&&t!==l)return F(e,-5);if(666===i.status&&0!==e.avail_in)return F(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var g=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(t===c)return k;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(x(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===l?(x(e,!0),0===e.strm.avail_out?G:T):e.last_lit&&(x(e,!1),0===e.strm.avail_out)?k:E}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=I){if(j(e),e.lookahead<=I&&t===c)return k;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=P&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+I;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=I-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=P?(n=a._tr_tally(e,1,e.match_length-P),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(x(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===l?(x(e,!0),0===e.strm.avail_out?G:T):e.last_lit&&(x(e,!1),0===e.strm.avail_out)?k:E}(i,t):r[i.level].func(i,t);if(g!==G&&g!==T||(i.status=666),g===k||g===G)return 0===e.avail_out&&(i.last_flush=-1),d;if(g===E&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(M(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),O(e),0===e.avail_out))return i.last_flush=-1,d}return t!==l?d:i.wrap<=0?1:(2===i.wrap?(B(i,255&e.adler),B(i,e.adler>>8&255),B(i,e.adler>>16&255),B(i,e.adler>>24&255),B(i,255&e.total_in),B(i,e.total_in>>8&255),B(i,e.total_in>>16&255),B(i,e.total_in>>24&255)):(N(i,e.adler>>>16),N(i,65535&e.adler)),O(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==w&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?F(e,f):(e.state=null,t===C?F(e,-3):d):f},n.deflateSetDictionary=function(e,t){var n,r,a,s,u,c,l,h,g=t.length;if(!e||!e.state)return f;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==w||n.lookahead)return f;for(1===s&&(e.adler=o(e.adler,t,g,0)),n.wrap=0,g>=n.w_size&&(0===s&&(M(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,g-n.w_size,n.w_size,0),t=h,g=n.w_size),u=e.avail_in,c=e.next_in,l=e.input,e.avail_in=g,e.next_in=0,e.input=t,j(n);n.lookahead>=P;){for(r=n.strstart,a=n.lookahead-(P-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+P-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--a;);n.strstart=r,n.lookahead=P-1,j(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=P-1,n.match_available=0,e.next_in=c,e.input=l,e.avail_in=u,n.wrap=s,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,a,o,s,u,c,l,d,f,h,g,p,v,_,m,y,S,b,D,P,I,A,w;n=e.state,r=e.next_in,A=e.input,i=r+(e.avail_in-5),a=e.next_out,w=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,d=n.wnext,f=n.window,h=n.hold,g=n.bits,p=n.lencode,v=n.distcode,_=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;e:do{g<15&&(h+=A[r++]<<g,g+=8,h+=A[r++]<<g,g+=8),y=p[h&_];t:for(;;){if(h>>>=S=y>>>24,g-=S,0==(S=y>>>16&255))w[a++]=65535&y;else{if(!(16&S)){if(0==(64&S)){y=p[(65535&y)+(h&(1<<S)-1)];continue t}if(32&S){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}b=65535&y,(S&=15)&&(g<S&&(h+=A[r++]<<g,g+=8),b+=h&(1<<S)-1,h>>>=S,g-=S),g<15&&(h+=A[r++]<<g,g+=8,h+=A[r++]<<g,g+=8),y=v[h&m];n:for(;;){if(h>>>=S=y>>>24,g-=S,!(16&(S=y>>>16&255))){if(0==(64&S)){y=v[(65535&y)+(h&(1<<S)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(D=65535&y,g<(S&=15)&&(h+=A[r++]<<g,(g+=8)<S&&(h+=A[r++]<<g,g+=8)),u<(D+=h&(1<<S)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=S,g-=S,(S=a-o)<D){if(l<(S=D-S)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(I=f,(P=0)===d){if(P+=c-S,S<b){for(b-=S;w[a++]=f[P++],--S;);P=a-D,I=w}}else if(d<S){if(P+=c+d-S,(S-=d)<b){for(b-=S;w[a++]=f[P++],--S;);if(P=0,d<b){for(b-=S=d;w[a++]=f[P++],--S;);P=a-D,I=w}}}else if(P+=d-S,S<b){for(b-=S;w[a++]=f[P++],--S;);P=a-D,I=w}for(;2<b;)w[a++]=I[P++],w[a++]=I[P++],w[a++]=I[P++],b-=3;b&&(w[a++]=I[P++],1<b&&(w[a++]=I[P++]))}else{for(P=a-D;w[a++]=w[P++],w[a++]=w[P++],w[a++]=w[P++],2<(b-=3););b&&(w[a++]=w[P++],1<b&&(w[a++]=w[P++]))}break}}break}}while(r<i&&a<s);r-=b=g>>3,h&=(1<<(g-=b<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=h,n.bits=g}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),a=e("./crc32"),o=e("./inffast"),s=e("./inftrees"),u=1,c=2,l=0,d=-2,f=1,h=852,g=592;function p(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=f,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(h),t.distcode=t.distdyn=new r.Buf32(g),t.sane=1,t.back=-1,l):d}function m(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,_(e)):d}function y(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,m(e))):d}function S(e,t){var n,r;return e?(r=new v,(e.state=r).window=null,(n=y(e,t))!==l&&(e.state=null),n):d}var b,D,P=!0;function I(e){if(P){var t;for(b=new r.Buf32(512),D=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(u,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,D,0,e.work,{bits:5}),P=!1}e.lencode=b,e.lenbits=9,e.distcode=D,e.distbits=5}function A(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(a=o.wsize-o.wnext)&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}n.inflateReset=m,n.inflateReset2=y,n.inflateResetKeep=_,n.inflateInit=function(e){return S(e,15)},n.inflateInit2=S,n.inflate=function(e,t){var n,h,g,v,_,m,y,S,b,D,P,w,C,k,E,G,T,F,R,M,O,x,B,N,L=0,j=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),_=e.next_out,g=e.output,y=e.avail_out,v=e.next_in,h=e.input,m=e.avail_in,S=n.hold,b=n.bits,D=m,P=y,x=l;e:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(2&n.wrap&&35615===S){j[n.check=0]=255&S,j[1]=S>>>8&255,n.check=a(n.check,j,2,0),b=S=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&S)<<8)+(S>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&S)){e.msg="unknown compression method",n.mode=30;break}if(b-=4,O=8+(15&(S>>>=4)),0===n.wbits)n.wbits=O;else if(O>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<O,e.adler=n.check=1,n.mode=512&S?10:12,b=S=0;break;case 2:for(;b<16;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(n.flags=S,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=S>>8&1),512&n.flags&&(j[0]=255&S,j[1]=S>>>8&255,n.check=a(n.check,j,2,0)),b=S=0,n.mode=3;case 3:for(;b<32;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}n.head&&(n.head.time=S),512&n.flags&&(j[0]=255&S,j[1]=S>>>8&255,j[2]=S>>>16&255,j[3]=S>>>24&255,n.check=a(n.check,j,4,0)),b=S=0,n.mode=4;case 4:for(;b<16;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}n.head&&(n.head.xflags=255&S,n.head.os=S>>8),512&n.flags&&(j[0]=255&S,j[1]=S>>>8&255,n.check=a(n.check,j,2,0)),b=S=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}n.length=S,n.head&&(n.head.extra_len=S),512&n.flags&&(j[0]=255&S,j[1]=S>>>8&255,n.check=a(n.check,j,2,0)),b=S=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(m<(w=n.length)&&(w=m),w&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,h,v,w,O)),512&n.flags&&(n.check=a(n.check,h,w,v)),m-=w,v+=w,n.length-=w),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===m)break e;for(w=0;O=h[v+w++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O)),O&&w<m;);if(512&n.flags&&(n.check=a(n.check,h,w,v)),m-=w,v+=w,O)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===m)break e;for(w=0;O=h[v+w++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O)),O&&w<m;);if(512&n.flags&&(n.check=a(n.check,h,w,v)),m-=w,v+=w,O)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(S!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=S=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}e.adler=n.check=p(S),b=S=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=_,e.avail_out=y,e.next_in=v,e.avail_in=m,n.hold=S,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){S>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}switch(n.last=1&S,b-=1,3&(S>>>=1)){case 0:n.mode=14;break;case 1:if(I(n),n.mode=20,6!==t)break;S>>>=2,b-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}S>>>=2,b-=2;break;case 14:for(S>>>=7&b,b-=7&b;b<32;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if((65535&S)!=(S>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&S,b=S=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(w=n.length){if(m<w&&(w=m),y<w&&(w=y),0===w)break e;r.arraySet(g,h,v,w,_),m-=w,v+=w,y-=w,_+=w,n.length-=w;break}n.mode=12;break;case 17:for(;b<14;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(n.nlen=257+(31&S),S>>>=5,b-=5,n.ndist=1+(31&S),S>>>=5,b-=5,n.ncode=4+(15&S),S>>>=4,b-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}n.lens[U[n.have++]]=7&S,S>>>=3,b-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},x=s(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,x){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;G=(L=n.lencode[S&(1<<n.lenbits)-1])>>>16&255,T=65535&L,!((E=L>>>24)<=b);){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(T<16)S>>>=E,b-=E,n.lens[n.have++]=T;else{if(16===T){for(N=E+2;b<N;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(S>>>=E,b-=E,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}O=n.lens[n.have-1],w=3+(3&S),S>>>=2,b-=2}else if(17===T){for(N=E+3;b<N;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}b-=E,O=0,w=3+(7&(S>>>=E)),S>>>=3,b-=3}else{for(N=E+7;b<N;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}b-=E,O=0,w=11+(127&(S>>>=E)),S>>>=7,b-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=O}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,B={bits:n.lenbits},x=s(u,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,x){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},x=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,x){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=m&&258<=y){e.next_out=_,e.avail_out=y,e.next_in=v,e.avail_in=m,n.hold=S,n.bits=b,o(e,P),_=e.next_out,g=e.output,y=e.avail_out,v=e.next_in,h=e.input,m=e.avail_in,S=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;G=(L=n.lencode[S&(1<<n.lenbits)-1])>>>16&255,T=65535&L,!((E=L>>>24)<=b);){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(G&&0==(240&G)){for(F=E,R=G,M=T;G=(L=n.lencode[M+((S&(1<<F+R)-1)>>F)])>>>16&255,T=65535&L,!(F+(E=L>>>24)<=b);){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}S>>>=F,b-=F,n.back+=F}if(S>>>=E,b-=E,n.back+=E,n.length=T,0===G){n.mode=26;break}if(32&G){n.back=-1,n.mode=12;break}if(64&G){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&G,n.mode=22;case 22:if(n.extra){for(N=n.extra;b<N;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}n.length+=S&(1<<n.extra)-1,S>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;G=(L=n.distcode[S&(1<<n.distbits)-1])>>>16&255,T=65535&L,!((E=L>>>24)<=b);){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(0==(240&G)){for(F=E,R=G,M=T;G=(L=n.distcode[M+((S&(1<<F+R)-1)>>F)])>>>16&255,T=65535&L,!(F+(E=L>>>24)<=b);){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}S>>>=F,b-=F,n.back+=F}if(S>>>=E,b-=E,n.back+=E,64&G){e.msg="invalid distance code",n.mode=30;break}n.offset=T,n.extra=15&G,n.mode=24;case 24:if(n.extra){for(N=n.extra;b<N;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}n.offset+=S&(1<<n.extra)-1,S>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===y)break e;if(w=P-y,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=w>n.wnext?(w-=n.wnext,n.wsize-w):n.wnext-w,w>n.length&&(w=n.length),k=n.window}else k=g,C=_-n.offset,w=n.length;for(y<w&&(w=y),y-=w,n.length-=w;g[_++]=k[C++],--w;);0===n.length&&(n.mode=21);break;case 26:if(0===y)break e;g[_++]=n.length,y--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===m)break e;m--,S|=h[v++]<<b,b+=8}if(P-=y,e.total_out+=P,n.total+=P,P&&(e.adler=n.check=n.flags?a(n.check,g,P,_-P):i(n.check,g,P,_-P)),P=y,(n.flags?S:p(S))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=S=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===m)break e;m--,S+=h[v++]<<b,b+=8}if(S!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=S=0}n.mode=29;case 29:x=1;break e;case 30:x=-3;break e;case 31:return-4;default:return d}return e.next_out=_,e.avail_out=y,e.next_in=v,e.avail_in=m,n.hold=S,n.bits=b,(n.wsize||P!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&A(e,e.output,e.next_out,P-e.avail_out)?(n.mode=31,-4):(D-=e.avail_in,P-=e.avail_out,e.total_in+=D,e.total_out+=P,n.total+=P,n.wrap&&P&&(e.adler=n.check=n.flags?a(n.check,g,P,e.next_out-P):i(n.check,g,P,e.next_out-P)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==D&&0===P||4===t)&&x===l&&(x=-5),x)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,l},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?d:((n.head=t).done=!1,l):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&i(1,t,r,0)!==n.check?-3:A(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,l):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,u,c,l,d,f){var h,g,p,v,_,m,y,S,b,D=f.bits,P=0,I=0,A=0,w=0,C=0,k=0,E=0,G=0,T=0,F=0,R=null,M=0,O=new r.Buf16(16),x=new r.Buf16(16),B=null,N=0;for(P=0;P<=15;P++)O[P]=0;for(I=0;I<u;I++)O[t[n+I]]++;for(C=D,w=15;1<=w&&0===O[w];w--);if(w<C&&(C=w),0===w)return c[l++]=20971520,c[l++]=20971520,f.bits=1,0;for(A=1;A<w&&0===O[A];A++);for(C<A&&(C=A),P=G=1;P<=15;P++)if(G<<=1,(G-=O[P])<0)return-1;if(0<G&&(0===e||1!==w))return-1;for(x[1]=0,P=1;P<15;P++)x[P+1]=x[P]+O[P];for(I=0;I<u;I++)0!==t[n+I]&&(d[x[t[n+I]]++]=I);if(m=0===e?(R=B=d,19):1===e?(R=i,M-=257,B=a,N-=257,256):(R=o,B=s,-1),P=A,_=l,E=I=F=0,p=-1,v=(T=1<<(k=C))-1,1===e&&852<T||2===e&&592<T)return 1;for(;;){for(y=P-E,b=d[I]<m?(S=0,d[I]):d[I]>m?(S=B[N+d[I]],R[M+d[I]]):(S=96,0),h=1<<P-E,A=g=1<<k;c[_+(F>>E)+(g-=h)]=y<<24|S<<16|b|0,0!==g;);for(h=1<<P-1;F&h;)h>>=1;if(0!==h?(F&=h-1,F+=h):F=0,I++,0==--O[P]){if(P===w)break;P=t[n+d[I]]}if(C<P&&(F&v)!==p){for(0===E&&(E=C),_+=A,G=1<<(k=P-E);k+E<w&&!((G-=O[k+E])<=0);)k++,G<<=1;if(T+=1<<k,1===e&&852<T||2===e&&592<T)return 1;c[p=F&v]=C<<24|k<<16|_-l|0}}return 0!==F&&(c[_+F]=P-E<<24|64<<16|0),f.bits=C,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,a=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,u=29,c=256,l=c+1+u,d=30,f=19,h=2*l+1,g=15,p=16,v=7,_=256,m=16,y=17,S=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(l+2));o(A);var w=new Array(2*d);o(w);var C=new Array(512);o(C);var k=new Array(256);o(k);var E=new Array(u);o(E);var G,T,F,R=new Array(d);function M(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function O(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function x(e){return e<256?C[e]:C[256+(e>>>7)]}function B(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function N(e,t,n){e.bi_valid>p-n?(e.bi_buf|=t<<e.bi_valid&65535,B(e,e.bi_buf),e.bi_buf=t>>p-e.bi_valid,e.bi_valid+=n-p):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function L(e,t,n){N(e,n[2*t],n[2*t+1])}function j(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function U(e,t,n){var r,i,a=new Array(g+1),o=0;for(r=1;r<=g;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=j(a[s]++,s))}}function W(e){var t;for(t=0;t<l;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<f;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*_]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function H(e){8<e.bi_valid?B(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function z(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function K(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&z(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!z(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function J(e,t,n){var r,i,a,o,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?L(e,i,t):(L(e,(a=k[i])+c+1,t),0!==(o=b[a])&&N(e,i-=E[a],o),L(e,a=x(--r),n),0!==(o=D[a])&&N(e,r-=R[a],o)),s<e.last_lit;);L(e,_,t)}function V(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=h,n=0;n<u;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)K(e,a,n);for(i=u;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],K(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,K(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,v=t.stat_desc.max_length,_=0;for(a=0;a<=g;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<h;n++)v<(a=u[2*u[2*(r=e.heap[n])+1]+1]+1)&&(a=v,_++),u[2*r+1]=a,c<r||(e.bl_count[a]++,o=0,p<=r&&(o=f[r-p]),s=u[2*r],e.opt_len+=s*(a+o),d&&(e.static_len+=s*(l[2*r+1]+o)));if(0!==_){do{for(a=v-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[v]--,_-=2}while(0<_);for(a=v;0!==a;a--)for(r=e.bl_count[a];0!==r;)c<(i=e.heap[--n])||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),r--)}}(e,t),U(a,c,e.bl_count)}function Y(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<u&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*m]++):s<=10?e.bl_tree[2*y]++:e.bl_tree[2*S]++,a=i,c=(s=0)===o?(u=138,3):i===o?(u=6,3):(u=7,4))}function Z(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<u&&i===o)){if(s<c)for(;L(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==a&&(L(e,i,e.bl_tree),s--),L(e,m,e.bl_tree),N(e,s-3,2)):s<=10?(L(e,y,e.bl_tree),N(e,s-3,3)):(L(e,S,e.bl_tree),N(e,s-11,7));a=i,c=(s=0)===o?(u=138,3):i===o?(u=6,3):(u=7,4)}}o(R);var q=!1;function X(e,t,n,i){N(e,(s<<1)+(i?1:0),3),function(e,t,n,i){H(e),i&&(B(e,n),B(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){q||(function(){var e,t,n,r,i,a=new Array(g+1);for(r=n=0;r<u-1;r++)for(E[r]=n,e=0;e<1<<b[r];e++)k[n++]=r;for(k[n-1]=r,r=i=0;r<16;r++)for(R[r]=i,e=0;e<1<<D[r];e++)C[i++]=r;for(i>>=7;r<d;r++)for(R[r]=i<<7,e=0;e<1<<D[r]-7;e++)C[256+i++]=r;for(t=0;t<=g;t++)a[t]=0;for(e=0;e<=143;)A[2*e+1]=8,e++,a[8]++;for(;e<=255;)A[2*e+1]=9,e++,a[9]++;for(;e<=279;)A[2*e+1]=7,e++,a[7]++;for(;e<=287;)A[2*e+1]=8,e++,a[8]++;for(U(A,l+1,a),e=0;e<d;e++)w[2*e+1]=5,w[2*e]=j(e,5);G=new M(A,b,c+1,l,g),T=new M(w,D,0,d,g),F=new M(new Array(0),P,0,f,v)}(),q=!0),e.l_desc=new O(e.dyn_ltree,G),e.d_desc=new O(e.dyn_dtree,T),e.bl_desc=new O(e.bl_tree,F),e.bi_buf=0,e.bi_valid=0,W(e)},n._tr_stored_block=X,n._tr_flush_block=function(e,t,n,r){var o,s,u=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return a;return i}(e)),V(e,e.l_desc),V(e,e.d_desc),u=function(e){var t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),V(e,e.bl_desc),t=f-1;3<=t&&0===e.bl_tree[2*I[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=o&&(o=s)):o=s=n+5,n+4<=o&&-1!==t?X(e,t,n,r):4===e.strategy||s===o?(N(e,2+(r?1:0),3),J(e,A,w)):(N(e,4+(r?1:0),3),function(e,t,n,r){var i;for(N(e,t-257,5),N(e,n-1,5),N(e,r-4,4),i=0;i<r;i++)N(e,e.bl_tree[2*I[i]+1],3);Z(e,e.dyn_ltree,t-1),Z(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),J(e,e.dyn_ltree,e.dyn_dtree)),W(e),r&&H(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(k[n]+c+1)]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){N(e,2,3),L(e,_,A),function(e){16===e.bi_valid?(B(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,a,o=1,s={},u=!1,c=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",h,!1):e.attachEvent("onmessage",h),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(f,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return s[o]=i,n(o),o++},l.clearImmediate=d}function d(e){delete s[e]}function f(e){if(u)setTimeout(f,0,e);else{var n=s[e];if(n){u=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),u=!1}}}}function h(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},1870:(e,t,n)=>{"use strict";n.d(t,{GO:()=>qe,mA:()=>re,tZ:()=>f,$j:()=>tt,dN:()=>et,dD:()=>c,Qk:()=>_e,EF:()=>nt,Ki:()=>U,z0:()=>B,U:()=>M,qh:()=>R});var r=n(4375),i=n(6721),a=n(7327),o=n(3194);function s(){}var u=n(5136);function c(){return new function e(){var t=this;(0,r._)(this,e),(0,u._)(this,"promise",void 0),(0,u._)(this,"resolve",void 0),(0,u._)(this,"reject",void 0),(0,u._)(this,"isSettled",!1),this.promise=new Promise((function(e,n){t.resolve=function(n){t.isSettled=!0,e(n)},t.reject=function(e){t.isSettled=!0,n(e)}}))}}!function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r._)(this,e),this.lastTaskPromise=Promise.resolve(),this.interval=t,this.pending=!1,this.leading=n,this.flag=0,this.cancelLast=s,this.currentTaskFn=s}(0,i._)(e,[{key:"invokeTask",value:function(e){var t=this,n=e();return(0,a._)(n,Promise)?n.finally((function(){t.pending=!1})):(this.pending=!1,Promise.resolve(n))}},{key:"exec",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.flag++,this.currentTaskFn=(t=e).bind.apply(t,[i].concat((0,o._)(r)));var u=this.currentTaskFn;if(this.pending)return this.lastTaskPromise;this.leading&&(this.lastTaskPromise=this.lastTaskPromise.finally((function(){return u()})),this.currentTaskFn=s);var l=c(),d=function(){n.pending=!0,n.lastTaskPromise=n.lastTaskPromise.finally((function(){var e=setTimeout((function(){if(n.flag>0)n.flag=0,clearTimeout(e),d();else{var t=n.currentTaskFn();(0,a._)(t,Promise)?t=t.finally((function(){n.pending=!1})):n.pending=!1,l.resolve(t)}}),n.interval)}))};return d(),l.promise}},{key:"waitForLastTask",value:function(e){return this.lastTaskPromise||Promise.resolve(e)}},{key:"cancel",value:function(){this.currentTaskFn=s}},{key:"destroy",value:function(){this.cancel()}}])}();var l,d=function(){function e(t){(0,r._)(this,e),(0,u._)(this,"task",void 0),(0,u._)(this,"cancelled",void 0),(0,u._)(this,"defer",void 0),this.task=t,this.cancelled=!1,this.defer=c()}return(0,i._)(e,[{key:"cancel",value:function(){this.defer.resolve(),this.cancelled=!0}},{key:"isCancelled",value:function(){return this.cancelled}},{key:"promise",get:function(){return this.defer.promise}},{key:"reject",value:function(e){this.defer.reject(e)}},{key:"resolve",value:function(e){this.defer.resolve(e)}}]),e}(),f=function(){function e(){(0,r._)(this,e),(0,u._)(this,"executing",void 0),(0,u._)(this,"insertions",[]),(0,u._)(this,"executions",[]),(0,u._)(this,"isRunning",!1)}return(0,i._)(e,[{key:"notifyExecute",value:function(){var e=this;if(!this.isRunning){this.isRunning=!0;var t=function(){var n,r=e.getAndPopNextExecution();if(r){var i=null===(n=e.executing)||void 0===n?void 0:n.promise,a=function(){if(e.executing=r,r.isCancelled())t();else{var n=r.task;Promise.resolve(function(){try{return n()}catch(e){return Promise.reject(e)}}()).then((function(e){r.resolve(e)}),(function(e){r.reject(e)})).finally((function(){t()}))}};i?i.then(a,a):a()}else e.isRunning=!1};t()}}},{key:"execTasks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return this.waitForCurrentRunningTasks();var n,r,i=e.map((function(e){return new d(h(e))}));t?(n=this.executions).unshift.apply(n,(0,o._)(i)):(r=this.executions).push.apply(r,(0,o._)(i));var a=i[i.length-1].promise;return this.notifyExecute(),a}},{key:"execInverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return this.exec(e,t,n,!0)}},{key:"exec",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=("number"==typeof n?Array(n).fill(0).map((function(e,t){return[t]})):n).map((function(n){return(t=e).bind.apply(t,[r].concat((0,o._)(n)))}));return this.execTasks(a,i)}},{key:"insert",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t.map(h).map((function(e){return new d(e)}));(r=this.insertions).push.apply(r,(0,o._)(i));var a=Promise.all(i.map((function(e){return e.promise})));return this.notifyExecute(),a}},{key:"resume",value:function(){}},{key:"cancel",value:function(){var e;this.insertions.forEach((function(e){e.cancel()})),this.executions.forEach((function(e){e.cancel()})),null===(e=this.executing)||void 0===e||e.cancel()}},{key:"waitForCurrentRunningTasks",value:function(){var e=this.insertions.concat(this.executions);return this.executing&&e.push(this.executing),Promise.all(e.map((function(e){return e.promise})))}},{key:"waitUntilQuiet",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise((function(n){var r=function(){setTimeout((function(){e.executions.length>0?r():n(e.waitForCurrentRunningTasks())}),t)};r()}))}},{key:"getRunningTaskCount",value:function(){return this.executions.filter((function(e){return!e.isCancelled()})).length}},{key:"getAndPopNextExecution",value:function(){var e;return this.insertions.length>0?(e=this.insertions[0],this.insertions.shift()):this.executions.length>0&&(e=this.executions[0],this.executions.shift()),e}}]),e}();function h(e){return"function"==typeof e?e:e.context?Array.isArray(e.args)?(t=e.task).bind.apply(t,[e.context].concat((0,o._)(e.args))):e.task.bind(e.context):e.task;var t}!function(e){e.IDLE="idle",e.RUNNING="running",e.CANCELLED="cancelled"}(l||(l={}));!function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r._)(this,e),(0,u._)(this,"interval",void 0),(0,u._)(this,"retainLastTask",void 0),(0,u._)(this,"status",void 0),(0,u._)(this,"lastCompleteTime",void 0),(0,u._)(this,"lastTaskPromise",void 0),(0,u._)(this,"retainTaskTimmerId",void 0),this.interval=t,this.retainLastTask=n,this.status="idle",this.lastCompleteTime=0,this.lastTaskPromise=Promise.resolve()}(0,i._)(e,[{key:"exec",value:function(e,t,n){var r=this,i=function(){if("cancelled"!==r.status){r.status="running";var i=e.apply(n,t||[])||Promise.resolve();r.lastTaskPromise=i.finally((function(){r.lastCompleteTime=Date.now(),"cancelled"!==r.status&&(r.status="idle")}))}else r.status="idle"},a=Date.now();if("idle"===this.status)if(a-this.lastCompleteTime>=this.interval){var o=function(){return i(),r.lastTaskPromise};return this.lastTaskPromise.then(o,o)}return this.retainLastTask?new Promise((function(e){clearTimeout(r.retainTaskTimmerId);var t=r.interval-(Date.now()-r.lastCompleteTime)%r.interval;r.retainTaskTimmerId=setTimeout((function(){i(),e(r.lastTaskPromise)}),t)})):this.lastTaskPromise}},{key:"waitForLastTask",value:function(){return this.lastTaskPromise}},{key:"cancel",value:function(){this.status="cancelled"}},{key:"isRunning",value:function(){return"running"===this.status}}])}();var g=n(6147),p=n(2872);Object.getOwnPropertyDescriptors||(Object.getOwnPropertyDescriptors=function(e){return Object.getOwnPropertyNames(e).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t}),{})});var v=["isProxy","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","apply","arguments","bind","call","caller",Symbol.hasInstance,"valueOf","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"],_=["toSource","watch","unwatch"];function m(e,t){try{delete e[t]}catch(n){e[t]=void 0}}var y=v.concat(["length","name","prototype"]),S="origin",b="$proxy_class_symbol_"+Date.now().toString(32),D=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,null,[{key:"getNoopConstructor",value:function(e){function t(){}return t.prototype=Object.create(e.prototype),t}},{key:"getProxyClass",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return!0};if(a){n=function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this))[S]=e,i}return n}(this.getNoopConstructor(e)),n[b]=!0}else{n=function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return n}("function"==typeof i?i:this.getNoopConstructor(e));var s=this.getStaticDescriptors(e);Object.defineProperties(n,s),n[b]=!0}var u=this.getClassDescriptors(e.prototype);if("function"==typeof t){var c=function(e){var n=u[e];if(!n||!o(e,n))return"continue";if("function"==typeof n.value){var r=n.value;n.value=a?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t.call(this,this[S],r,i,e,"method")}:function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t.call(this,this,r,i,e,"method")}}if("function"==typeof n.get){var i=n.get;n.get=a?function(){return i.call(this[S])}:function(){return t.call(this,this,null,[],e,"getter")}}if("function"==typeof n.set){var s=n.set;n.set=a?function(e){s.call(this[S],e)}:function(n){return t.call(this,this,null,[n],e,"setter")}}};for(var l in u)c(l)}return Object.defineProperties(n.prototype,u),n}},{key:"isProxyClass",value:function(e){return"function"==typeof e&&e.hasOwnProperty(b)}},{key:"getProxyObject",value:function(e,t,n){if(null==e)throw new Error("Cannot proxy a null or undefined object");var r=e.constructor;return new(this.getProxyClass(r,t,r,!0,n))(e)}},{key:"getStaticDescriptors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=function e(t){if(t===Object||t===Function||!t)return{};var n=Object.getPrototypeOf(t),r=e(n);return Object.assign(r,Object.getOwnPropertyDescriptors(t))}(e);return t.forEach((function(e){m(n,e)})),_.forEach((function(t){e[t]===Function.prototype[t]&&m(n,t)})),n}},{key:"getClassDescriptors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=function e(t){if("object"!=typeof t||null===t)return{};var n=Object.getPrototypeOf(t),r=n===t?{}:e(n);return Object.assign(r,Object.getOwnPropertyDescriptors(t))}(e);return t.forEach((function(e){m(n,e)})),_.forEach((function(t){e[t]===Object.prototype[t]&&m(n,t)})),n}}]),e}();!function(){function e(){(0,r._)(this,e)}(0,i._)(e,null,[{key:"isSubClassOf",value:function(e,t){return"function"==typeof e&&"function"==typeof t&&(0,a._)(e.prototype,t)}},{key:"isOverrided",value:function(e,t,n){for(var r=t.prototype;;){var i=r.constructor;if(!i||i===e||i===Object)return!1;if(Object.prototype.hasOwnProperty.call(r,n))return!D.isProxyClass(i);r=Object.getPrototypeOf(r)}}},{key:"mixin",value:function(e,t){var n=function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return n}(e),i=D.getStaticDescriptors(t);Object.defineProperties(n,i);var a=D.getClassDescriptors(t.prototype);return n.prototype=Object.create(n.prototype,a),n}}])}();var P=n(4702),I=n(2834),A=n(6841),w={},C="__lazy__",k=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,null,[{key:"properties",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var r in n){var i=n[r];"function"==typeof i&&e.property(t,r,i)}}},{key:"property",value:function(t,n,r){var i=w;Object.getOwnPropertyDescriptor(t,C)||Object.defineProperty(t,C,{value:{},enumerable:!1,configurable:!1});var a=t[C][n]||{};t[C][n]=a,a.initialized=!1;var o=!1;Object.defineProperty(t,n,{get:function(){if(!a.initialized){if(o)throw new Error("The lazy property is not initialized and cannot be accessed at this time");o=!0;try{i=r()}catch(e){throw o=!1,e}a.initialized=!0,Promise.resolve().then((function(){(a.callbacks||[]).forEach((function(e){e(i)}))})),o=!1}return i},enumerable:!0,configurable:!0});var s=function(){e.release(t,n)};return"function"===t.addDestroyHook&&t.addDestroyHook(s),s}},{key:"value",value:function(t){var n="lazy_variable_"+Math.ceil(Math.random()*Date.now()).toString(34),r={};return e.property(r,n,t),{reset:function(){return e.reset(r,n)},get value(){return r[n]},get initialized(){return e.isPropertyIntialized(r,n)}}}},{key:"loadProperty",value:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&n.get)return n.get.call(e)}},{key:"release",value:function(e,t){C in e&&!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&delete e[C][t],Object.defineProperty(e,t,{get:function(){},enumerable:!1,configurable:!0})}},{key:"reset",value:function(e,t){var n=e[C];if(n){var r=n[t];r&&(r.initialized=!1)}}},{key:"isPropertyIntialized",value:function(e,t){var n=e[C];return!!(n&&n[t]&&n[t].initialized)}},{key:"hasProperty",value:function(e,t){var n=e[C];return!(!n||!(t in n))}},{key:"notNullProperty",value:function(t,n,r){return e.property(t,n,(function(){var i=r();return null==i&&e.reset(t,n),i}))}},{key:"get",value:function(t,n,r){e.isPropertyIntialized(t,n)&&r(t[n])}},{key:"onInitialized",value:function(t,n,r){if(e.isPropertyIntialized(t,n))return r(t[n]),function(){};var i=t[C][n]||{};return t[C][n]=i,i.callbacks=i.callbacks||[],i.callbacks.push(r),function(){var e=i.callbacks.indexOf(r);e>-1&&i.callbacks.splice(e,1)}}}]),e}();const E=k;function G(e){var t=e.services,n=e.inject||t;if("function"==typeof n){var r=n.call(e);return Array.isArray(r)?r.reduce((function(e,t,n){return e["service"+n]=t,e}),{}):"function"==typeof r?{service0:r}:r}return{}}var T;function F(e){return"number"==typeof e}function R(e){return F(e)&&isFinite(e)}function M(e){return F(e)&&Math.floor(e)===e}function O(e){return"function"==typeof e}function x(e){return"string"==typeof e}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;return Math.abs(e-t)<n}function N(e){var t=e.scope;return O(t)&&t.call(e)||T.SINGLETON}!function(e){e.SHARED_SINGLETON="SHARED-SINGLETON",e.SINGLETON="SINGLETON",e.PROTOTYPE="PROTOTYPE"}(T||(T={}));var L="unique_"+Date.now(),j=0;const U=function(e){return[e||"",L,j++].join("_")};var W=n(5171);const H=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,[{key:"format",value:function(e,t,n){return[{type:"string",value:"[".concat(this.levelText(t),"]")},{type:"string",value:"{".concat(e,"}")}].concat(n.map((function(e){return null==e?{type:void 0===e?"undefined":(0,W._)(e),value:e+""}:{type:void 0===e?"undefined":(0,W._)(e),value:e}})))}},{key:"levelText",value:function(e){switch(e){case 0:return"DEBUG";case 2:return"INFO";case 4:return"WARN";case 8:return"ERROR"}return"UNKNOWN LEVEL"}}]),e}();var z={logLevel:function(e){switch(e){case"debug":return 0;case"info":return 2;case"warn":return 4;default:return 8}}("warn"),logLayout:"complex",logAppenders:["console"]||0,logOff:!1,setLogLevel:K,toggleLogOff:J};function K(e){switch(e){case 0:case 2:case 4:case 8:z.logLevel=e}}function J(e){z.logOff="boolean"==typeof e?e:!z.logOff}var V=function(){function e(t,n,i){(0,r._)(this,e),this.appender=t,this.layout=n,this.module=i,this.logOff=!1}return(0,i._)(e,[{key:"getMinLevel",value:function(){return void 0===this.minLevel?z.logLevel:this.minLevel}},{key:"toggle",value:function(e){this.logOff="boolean"==typeof e?e:!this.logOff}},{key:"setLevel",value:function(e){this.minLevel=e}},{key:"doLog",value:function(e,t){if(!this.isLogOff(e)){var n=this.layout.format(this.module,e,t);this.appender.print(n,e)}}},{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.doLog(e,n)}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doLog(0,t)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doLog(2,t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doLog(4,t)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doLog(8,t)}},{key:"isLogOff",value:function(e){return this.logOff||z.logOff||e<this.getMinLevel()}}]),e}();!function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}(0,i._)(n,[{key:"doLog",value:function(){}}])}(V);const Y=V;const Z=function(e){throw new Error("Method not implemented".concat(e?":"+e:""))};const q=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,[{key:"print",value:function(e,t){Z(e,t)}}]),e}();var X=function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"print",value:function(e,t){var n=e.map((function(e){return"string"!==e.type?" %o":" %c"+e.value})).join("").trim(),r=e.map((function(e){return"string"===e.type?e.style:e.value}));switch(r.splice(0,0,n),t){case 0:var i;(i=console).debug.apply(i,(0,o._)(r));break;case 2:var a;(a=console).info.apply(a,(0,o._)(r));break;case 4:var s;(s=console).warn.apply(s,(0,o._)(r));break;case 8:var u;(u=console).error.apply(u,(0,o._)(r));break;default:var c;(c=console).log.apply(c,(0,o._)(r))}}}]),n}(q);const Q=X;const $=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,[{key:"format",value:function(e,t,n){var r,i=this,a=(new Error).stack;a&&(r="\n  "+a.split("\n")[4].trim());return[{type:"string",style:"color: ".concat(this.levelColor(t),";"),value:"[".concat(this.levelText(t),"]")},{type:"string",style:"color: magenta",value:"{".concat(e,"}")}].concat(n.map((function(e){return null==e?{type:void 0===e?"undefined":(0,W._)(e),style:"color: megenta;font-weight: bold",value:e+""}:"string"==typeof e?{type:void 0===e?"undefined":(0,W._)(e),style:"color: ".concat(i.levelColor(t)),value:e}:{type:void 0===e?"undefined":(0,W._)(e),value:e}}))).concat({type:"string",style:"color: grey;",value:r})}},{key:"levelColor",value:function(e){switch(e){case 0:return"blue";case 2:return"green";case 4:return"#FCDCA0";case 8:return"red"}return"#000"}},{key:"levelText",value:function(e){switch(e){case 0:return"DEBUG";case 2:return"INFO";case 4:return"WARN";case 8:return"ERROR"}return"UNKNOWN LEVEL"}}]),e}();var ee=function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this)).appenders=e||[],i}return(0,i._)(n,[{key:"print",value:function(e,t){this.appenders.forEach((function(n){return n.print(e,t)}))}}]),n}(q);const te=ee;var ne={},re=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,null,[{key:"toggleLogger",value:function(e){J(e)}},{key:"setLogLevel",value:function(e){K(e)}},{key:"getLogger",value:function(e){return ne[e]=ne[e]||this.createLogger(e)}},{key:"createLogger",value:function(e){var t,n;if("complex"===z.logLayout)t=new $;else t=new H;return n=z.logAppenders.map((function(e){switch(e){case"console":return new Q;case"websocket":return new WebsocketAppender}})).filter((function(e){return(0,a._)(e,q)})),new Y(new te(n),t,e)}}]),e}();const ie=re;function ae(e,t){O(e.pullout)&&e.pullout(t)}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;O(e.addDestroyHook)&&(i=e).addDestroyHook.apply(i,(0,o._)(n))}var se=function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"singleton",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return(0,r._)(this,n),e=t.call(this),(0,u._)((0,P._)(e),"name",void 0),(0,u._)((0,P._)(e),"level",void 0),e.name=i,e.level=a,e}return(0,i._)(n,[{key:"generateInstanceName",value:function(){return U(this.name)}},{key:"registerComponentInstance",value:function(e){var t=e.constructor;this.saveComponentInstance(t,e)}},{key:"registerComponentInstanceByName",value:function(e,t){this.saveComponentInstance(t,e)}}]),n}(function(){function e(){(0,r._)(this,e),(0,u._)(this,"map",new Map)}return(0,i._)(e,[{key:"getComponentInstance",value:function(e,t){if(x(e))return this.map.get(e);var n=e.$$ioc_instance_name;if(x(n)&&this.map.has(n))return this.map.get(n);e.length>0&&ie.getLogger(this+"").warn("Relying on other object instances through constructors is not a good practice",e);var r=1===e.length?new e(t):new e;return this.saveComponentInstance(e,r),r}},{key:"saveComponentInstance",value:function(e,t){var n;if(x(e)?n=e:(n=e.$$ioc_instance_name||this.generateInstanceName(),e.$$ioc_instance_name=n),this.map.has(n))throw new Error("[IoC] An unknown error has occurred: Duplicate requests to create instances of the same type: (".concat(e,")!"));this.map.set(n,t)}},{key:"onInject",value:function(e){var t=e.targetStrategy,n=e.injectInto,r=e.component,i=e.propertyName;t.level>this.level&&oe(r,(function(){ae(n,i)}))}},{key:"destroyComponents",value:function(){this.map.forEach((function(e){var t;O((t=e).destroy)&&t.destroy()})),this.map.clear()}},{key:"define",value:function(e){}}]),e}()),ue="object"==typeof window?window:globalThis,ce=function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(){return(0,r._)(this,n),t.call(this,"shared",1/0)}return(0,i._)(n,[{key:"destroyComponents",value:function(){}}]),n}(se),le=ue.__SHARED_IOC_STRATEGY__||new ce;ue.__SHARED_IOC_STRATEGY__=le;var de=function(){function e(){(0,r._)(this,e),(0,u._)(this,"level",Number.MIN_SAFE_INTEGER)}return(0,i._)(e,[{key:"getComponentInstance",value:function(e,t){return new e}},{key:"onInject",value:function(e){var t=e.targetStrategy,n=e.injectInto,r=e.component,i=e.propertyName;t.level>this.level&&oe(r,(function(){ae(n,i)}))}},{key:"destroyComponents",value:function(){}},{key:"define",value:function(){}}]),e}(),fe=function(){function e(){(0,r._)(this,e),this.destroyHooks=[],this.isDestroyed=!1}return(0,i._)(e,[{key:"ownsTo",value:function(t){if(!(0,a._)(t,e))throw new Error("Cannot owns to non Disposable instance");var n=t.addDestroyHook(this);this.addDestroyHook(n)}},{key:"addDestroyHook",value:function(){for(var t,n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=this.destroyHooks).push.apply(t,(0,o._)(i.filter((function(t){if("function"!=typeof t&&!(0,a._)(t,e))throw new Error("[Illegal Argument] Invalid destroy hook:".concat(t,", It's not a function!"));return!0})))),function(){i.forEach((function(e){var t=n.destroyHooks.indexOf(e);t>-1&&n.destroyHooks.splice(t,1)}))}}},{key:"destroy",value:function(){this.destroyHooks.slice(0).forEach((function(t){try{"function"==typeof t?t():(0,a._)(t,e)&&t.destroy()}catch(e){throw e}})),this.destroyHooks=[],this.isDestroyed=!0}}]),e}();const he=fe;var ge=U("$$ioc-component-instance-initialized");!function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,r._)(this,n),e=t.call(this),(0,u._)((0,P._)(e),"strategies",new Map),e.setStrategy(T.SHARED_SINGLETON,le),e.setStrategy(T.PROTOTYPE,new de),e.setStrategy(T.SINGLETON,new se),e}(0,i._)(n,[{key:"define",value:function(e){var t=N(e),n=this.getStrategy(t);null==n||n.define(e)}},{key:"getInstanceByClass",value:function(e,t){if(this.isDestroyed)throw new Error("IoC has been destroyed!");if("string"==typeof e){var n=this.getStrategy(T.SINGLETON).getComponentInstance(e,t);return n&&this.initInstance(n)}if("function"==typeof e){var r=N(e),i=this.getStrategy(r).getComponentInstance(e,t);return this.initInstance(i)}}},{key:"initInstance",value:function(e){var t=function(t){if(E.hasProperty(e,t))return"continue";if(t in e&&e[t])throw new Error("Unable to inject instance, the same property name(".concat(t,") already exists in target instance."));E.property(e,t,(function(){var r=N(i),s=G(i),u=n.getStrategy(r);if(u.level<o.level)throw new Error("[IoC] Instances of scope '".concat(a,"' cannot depend on scope '").concat(r,"'"));var c=n.getInstanceByClass(s[t],e);if(!c)throw new Error("Unexpected ioc component class ".concat(s[t],", name: ").concat(t,", owner: ").concat(e));return function(e,t,n){O(e.injected)&&e.injected(t,n)}(e,t,c),o.onInject({component:c,injectInto:e,propertyName:t,targetStrategy:u}),c})),function(e){return!!O(e.isLazy)&&e.isLazy()}(i)||E.loadProperty(e,t)},n=this;if(this.isDestroyed)throw new Error("IoC has been destroyed!");if(!e||!e.constructor)throw new Error("".concat(e," is not a valid IoC Component instance!"));if(e[ge])return e;Object.defineProperty(e,ge,{get:function(){return!0},configurable:!1,enumerable:!1});var r,i=e.constructor,a=N(i),o=this.getStrategy(a),u=G(i);for(var c in u)t(c);return O((r=e).serviceInjected)&&(r.serviceInjected(),r.serviceInjected=s),O(r.allInjected)&&(r.allInjected(),r.allInjected=s),e}},{key:"setStrategy",value:function(e,t){this.strategies.set(e,t)}},{key:"getStrategy",value:function(e){var t=this.strategies.get(e);if(!t)throw new Error("[IoC] Incorrect scope: ".concat(e));return t}},{key:"hasStrategy",value:function(e){return this.strategies.has(e)}},{key:"destroy",value:function(){(0,I._)((0,A._)(n.prototype),"destroy",this).call(this),this.strategies.forEach((function(e){e.destroyComponents()}))}}])}(he);var pe=function(){};!function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r._)(this,e),(0,u._)(this,"delay",void 0),(0,u._)(this,"leading",void 0),(0,u._)(this,"handle",void 0),(0,u._)(this,"flag",void 0),(0,u._)(this,"pending",void 0),this.delay=t,this.leading=n,this.handle=pe,this.flag=0,this.pending=!1}(0,i._)(e,[{key:"exec",value:function(e){var t=this;if(this.flag++,this.handle=e,!this.pending){this.leading&&(e(),this.flag=0,this.handle=pe);var n=function(){t.pending=!0,setTimeout((function(){if(t.flag>1)t.flag=0,n();else{var e=t.handle;t.handle=pe,e(),t.pending=!1}}),t.delay)};n()}}},{key:"cancel",value:function(){this.handle=pe}}])}();var ve={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"};function _e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=!0;"boolean"==typeof e&&(i=e,e=n[0],n=n.slice(1)),(null===e||"object"!=typeof e&&"function"!=typeof e)&&(e={});for(var a=0,o=n.length;a<o;a++){var s=n[a];if(null!=s)for(var u in s){var c=e[u],l=s[u];if(e!==l){var d=void 0;if(i&&l&&(ye(l)||(d=Array.isArray(l)))){var f=void 0;d?(d=!1,f=c&&Array.isArray(c)?c:[]):f=c&&ye(c)?c:{},e[u]=_e(i,f,l)}else void 0!==l&&(e[u]=l)}}}return e}function me(e,t){return null!=e&&{}.hasOwnProperty.call(e,t)}function ye(e){if(!e||"object"!==function(e){if(null===e)return"null";switch(void 0===e?"undefined":(0,W._)(e)){case"object":case"function":return ve[Object.prototype.toString(e)]||"object"}return void 0===e?"undefined":(0,W._)(e)}(e)||e.nodeType||null!=e&&e==e.window)return!1;if(e.constructor&&!me(e,"constructor")&&!me(e.constructor.prototype,"isPrototypeOf"))return!1;var t=void 0;for(t in e);return void 0===t||me(e,t)}var Se=Promise.resolve(),be=function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,r._)(this,n),e=t.call(this),(0,u._)((0,P._)(e),"__data",{}),(0,u._)((0,P._)(e),"subscribers",{}),(0,u._)((0,P._)(e),"reducers",[]),(0,u._)((0,P._)(e),"filters",[]),e.addDestroyHook((function(){e.reducers.length=0,e.filters.length=0,e.subscribers={},e.clear()})),e}return(0,i._)(n,[{key:"getCurrentValue",value:function(e,t){if(arguments.length>1&&!this.has(e))return t;var n=this.__data[e];return this.reducers.reduce((function(t,n){return n(t,e)}),n)}},{key:"forEach",value:function(e){if("function"!=typeof e)throw new Error((void 0===e?"undefined":(0,W._)(e))+" is not a function!");for(var t in this.__data)e(this.getCurrentValue(t),t)}},{key:"has",value:function(e){return e in this.__data}},{key:"dispatch",value:function(e,t){var n=this;if(this.isDestroyed)return Se;this.__data[e]=t;var r=this.subscribers[e]||[],i=this.getCurrentValue(e),a=0===this.filters.length||this.filters.some((function(e){return e(t)}));return a&&r.length?Promise.all(r.slice(0).map((function(t){return t.call(n,i,e)}))):Se}},{key:"unDispatch",value:function(e){this.remove(e)}},{key:"remove",value:function(e){this.isDestroyed||(delete this.__data[e],this.subscribers[e]=[])}},{key:"subscribe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if(this.isDestroyed)return function(){};var r,i=!1,a=this.subscribers[e]||(this.subscribers[e]=[]),o=function(){if(!i)return n.call(t,t.getCurrentValue(e),e)};return a.push(o),e in this.__data&&Promise.resolve().then(o),function(){if(i)return r;i=!0;var e=a.indexOf(o);return r=e>-1&&a.splice(e,1).length>0}}},{key:"subscribeOnce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=this.subscribe(e,(function(e,r){return n&&n(),t.apply(this,[e,r])}));return n}},{key:"takeWhile",value:function(e){var t=this;return new Promise((function(n){var r=t.subscribe(e,(function(e){try{r&&r()}finally{n(e)}}))}))}},{key:"reducer",value:function(e){var t=this;if(this.isDestroyed)return s;if("function"!=typeof e)return s;var n=e.bind(this);return this.reducers.push(n),function(){var e=t.reducers.indexOf(n);return e>-1&&t.reducers.splice(e,1).length>0}}},{key:"filter",value:function(e){var t=this;if(!this.isDestroyed){if("function"!=typeof e)return s;var n=function(t){return e(t)};return this.filters.push(n),function(){var e=t.filters.indexOf(n);-1!==e&&t.filters.splice(e,1)}}}},{key:"clear",value:function(){this.__data={}}}]),n}(he),De=(function(e){(0,g._)(n,e);var t=(0,p._)(n);function n(e){var i;return(0,r._)(this,n),i=t.call(this),(0,u._)((0,P._)(i),"store",new be),(0,u._)((0,P._)(i),"key","k"),i.addDestroyHook(i.store),e&&i.dispatch(e),i}(0,i._)(n,[{key:"getCurrentValue",value:function(e){return this.store.getCurrentValue(this.key)||e}},{key:"dispatch",value:function(e){this.store.dispatch(this.key,e)}},{key:"subscribe",value:function(e){return this.store.subscribe(this.key,(function(t){return e(t)}))}},{key:"subscribeOnce",value:function(e){return this.store.subscribeOnce(this.key,(function(t){return e(t)}))}},{key:"takeWhile",value:function(){return this.store.takeWhile(this.key)}},{key:"filter",value:function(e){return this.store.filter(e)}},{key:"reduce",value:function(e){return this.store.reducer((function(t){return e(t)}))}},{key:"remove",value:function(){this.store.unDispatch(this.key)}}])}(he),n(7990)),Pe=n.n(De),Ie=n(8366),Ae=n.n(Ie),we=n(4231),Ce=n.n(we),ke=n(1434),Ee=n.n(ke),Ge=n(1128),Te=n.n(Ge),Fe=n(579),Re=n.n(Fe),Me=n(7074),Oe=n.n(Me),xe=n(890),Be=n.n(xe),Ne=n(8990),Le=n.n(Ne),je=n(5522),Ue=n.n(je),We=n(3765),He=n.n(We),ze=n(5576),Ke=n.n(ze),Je=n(859),Ve=n.n(Je),Ye=n(4883),Ze=n.n(Ye);Pe().locale(Te()),Pe().locale(Re()),Pe().locale(Oe()),Pe().locale(Be()),Pe().locale(Le()),Pe().locale(Le()),Pe().locale(Ue()),Pe().locale(He()),Pe().locale(Ke()),Pe().locale(Ve()),Pe().locale(Le()),Pe().locale(Ze()),Pe().extend(Ae()),Pe().extend(Ce()),Pe().extend(Ee());var qe=function(){function e(t){(0,r._)(this,e),this.originfn=t,this.beforeHooks=[],this.afterHooks=[],this.thrownHooks=[],this.aroundHooks=[]}return(0,i._)(e,[{key:"before",value:function(e){return"function"==typeof e&&this.beforeHooks.push(e),this}},{key:"after",value:function(e){return"function"==typeof e&&this.afterHooks.push(e),this}},{key:"thrown",value:function(e){return"function"==typeof e&&this.thrownHooks.push(e),this}},{key:"around",value:function(e){return"function"==typeof e&&this.aroundHooks.push(e),this}},{key:"proxy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.before,n=e.after,r=e.thrown,i=e.around;return this.before(t),this.after(n),this.thrown(r),this.around(i),this}},{key:"extract",value:function(){var e=this,t=e.beforeHooks,n=e.afterHooks,r=e.thrownHooks,i=e.aroundHooks,o=e.originfn;function s(){for(var e=this,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];t.forEach((function(t){return t.call(e,s)}));try{var c=o.apply(this,s);return(0,a._)(c,Promise)?(c.then((function(t){n.forEach((function(n){return n.call(e,t,s)}))})),c.catch((function(t){r.forEach((function(n){return n.call(e,t,s)}))}))):n.forEach((function(t){return t.call(e,c,s)})),c}catch(t){r.length,r.forEach((function(n){return n.call(e,t,s)}))}}return s.origin=o,i.reduceRight((function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t(this,e,r)}}),s)}}],[{key:"on",value:function(t){if("function"==typeof t)return new e(t);if((0,a._)(t,e))return new e(t.extract());throw new TypeError("Unexpected type: ".concat(void 0===t?"undefined":(0,W._)(t)))}}]),e}(),Xe=n(2531);!function(){function e(t,n,i,a){(0,r._)(this,e),(0,u._)(this,"r",void 0),(0,u._)(this,"g",void 0),(0,u._)(this,"b",void 0),(0,u._)(this,"a",void 0),this.r=t,this.g=n,this.b=i,this.a=a}(0,i._)(e,[{key:"toCSS_Hex",value:function(){return"#".concat(Qe(this.r)).concat(Qe(this.g)).concat(Qe(this.b))}},{key:"toCSS_RGB",value:function(){return"rgb(".concat(this.r,",").concat(this.g,",").concat(this.b,")")}},{key:"toRGB",value:function(){return this.r<<16|this.g<<8|this.b}},{key:"toCSS_RGBA",value:function(){return"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a/255,")")}},{key:"toHSL",value:function(){var e=this.r/255,t=this.g/255,n=this.b/255,r=Math.min(e,t,n),i=Math.max(e,t,n),a=i-r,o=0,s=0;return(o=0===a?0:i===e?(t-n)/a%6:i===t?(n-e)/a+2:(e-t)/a+4)<0&&(o+=360),s=(i+r)/2,{h:o,s:+(100*(0===a?0:a/(1-Math.abs(2*s-1)))).toFixed(1),l:s=+(100*s).toFixed(1)}}},{key:"toCSS_HSL",value:function(){var e=this.toHSL(),t=e.h,n=e.s,r=e.l;return"hsl(".concat(t,",").concat(n,"%,").concat(r,"%)")}},{key:"toCSS_HSLA",value:function(){var e=this.toHSL(),t=e.h,n=e.s,r=e.l;return"hsla(".concat(t,",").concat(n,"%,").concat(r,"%, ").concat(this.a/255,")")}},{key:"toCMYK",value:function(){return e.convertRGB2CMYK(this.r,this.g,this.b)}},{key:"toHSV",value:function(){return e.convertRGB2HSV(this.r,this.g,this.b)}},{key:"clone",value:function(){return new(0,this.constructor)(this.r,this.g,this.b,this.a)}},{key:"isSameAs",value:function(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}},{key:"asArray",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"fromHSLA",value:function(t,n,r,i){var a=(0,Xe._)(e.convertHSL2rgb(t,n,r),3);return new e(a[0],a[1],a[2],i)}},{key:"fromRGBA",value:function(t,n){var r=(0,Xe._)(e.separateRGBNumber(t),3);return new e(r[0],r[1],r[2],n)}},{key:"fromARGB",value:function(t){if(t<=16777215)return e.fromRGBA(t,255);var n=255&t>>24,r=16777215&t;return e.fromRGBA(r,n)}},{key:"fromRGB",value:function(t){return e.fromRGBA(t,255)}},{key:"convertHSL2rgb",value:function(e,t,n){e=Math.min(359,Math.max(0,e)),t=Math.min(100,Math.max(0,t)),n=Math.min(100,Math.max(0,n)),n/=100;var r,i,a,o,s=(t/=100)*(1-Math.abs(2*n-1)),u=s*(1-Math.abs(e/60%2-1)),c=n-s/2;if(e>=0&&e<60)r=(o=[s,u,0])[0],i=o[1],a=o[2];else if(e>=60&&e<120){var l;r=(l=[u,s,0])[0],i=l[1],a=l[2]}else if(e>=120&&e<180){var d;r=(d=[0,s,u])[0],i=d[1],a=d[2]}else if(e>=180&&e<240){var f;r=(f=[0,u,s])[0],i=f[1],a=f[2]}else if(e>=240&&e<300){var h;r=(h=[u,0,s])[0],i=h[1],a=h[2]}else{var g;r=(g=[s,0,u])[0],i=g[1],a=g[2]}return[r,i,a].map((function(e){return Math.round(255*(e+c))}))}},{key:"convertRGB2CMYK",value:function(e,t,n){var r=e/255,i=t/255,a=n/255,o=1-Math.max(r,i,a);return{c:(1-r-o)/(1-o),m:(1-i-o)/(1-o),y:(1-a-o)/(1-o),k:o}}},{key:"convertRGB2HSV",value:function(e,t,n){var r=e/255,i=t/255,a=n/255,o=Math.max(r,i,a),s=o-Math.min(r,i,a);return{h:0===s?0:o===r?(i-a)/s*60%6:o===i?60*((a-r)/s+2):60*((r-i)/s+4),s:0===o?0:s/o,v:o}}},{key:"separateRGBNumber",value:function(e){return[e>>16&255,e>>8&255,255&e]}}])}();function Qe(e){var t=e.toString(16);return 1===t.length?"0"+t:t}var $e=Math.pow(2,24);function et(e){var t;return e<16777216?t=255:(t=e/$e&255,e&=16777215),{r:e>>16&255,g:e>>8&255,b:255&e,a:t}}function tt(e){var t,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s="";if(e>4294967295)throw new Error("Incorrect color");switch("number"==typeof e&&(e=["int",e]),e[0]){case"int":t=(16711680&e[1])>>16,n=(65280&e[1])>>8,r=255&e[1];break;case"T":t=0,n=0,r=0,o=0;break;case"G":t=n=r=255*e[1];break;case"RGB":t=255*e[1],n=255*e[2],r=255*e[3];break;case"CMYK":t=(1-e[4])*(1-e[1])*255,n=(1-e[4])*(1-e[2])*255,r=(1-e[4])*(1-e[3])*255;break;case"r":t=+(i=e.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/))[1],n=+i[2],r=+i[3];var u=i[4];void 0!==u&&(o=+u);break;case"#":var c=4==e.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;i=e.match(c),t=parseInt(i[1],16),n=parseInt(i[2],16),r=parseInt(i[3],16);break;default:throw new Error("Unsupported color format")}switch(a){case"HTML":s=t===n&&n===r&&-1===r?"transparent":"rgba("+parseInt(t)+","+parseInt(n)+","+parseInt(r)+","+o+")";break;case"RGB":s=["RGB",t/255,n/255,r/255];break;case"#":s+=t<16?"#0"+t.toString(16):"#"+t.toString(16),s+=n<16?"0"+n.toString(16):n.toString(16),s+=r<16?"0"+r.toString(16):r.toString(16);break;case"int":s=0,s|=(o*=255)<<24,s|=t<<16,s|=n<<8,s|=r,s>>>=0;break;case"CMYK":var l=255-t,d=255-n,f=255-r;return["CMYK",l/255,d/255,f/255,Math.min(l,d,f)/255];case"GRAY":return["GRAY",(.3*t+.59*n+.11*r)/255]}return s}function nt(){return{x:96,y:96}}},8164:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(4375),i=n(6721),a=n(6147),o=n(8490),s=n(6841);var u=n(548);function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return(0,o.L)(e,arguments,(0,s.X)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,u.b)(r,e)},c(e)}var l=n(2872),d="InvalidJRObjectError",f=function(e){(0,a._)(n,e);var t=(0,l._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this,e)).name=d,i}return(0,i._)(n,null,[{key:"is",value:function(e){return!!e&&e.name===d}}]),n}(c(Error))},952:(e,t,n)=>{"use strict";n.d(t,{Kq:()=>l,Xd:()=>d,cP:()=>c});var r=n(4375),i=n(5136),a=n(3883),o=function e(t,n,a){(0,r._)(this,e),(0,i._)(this,"fileData",void 0),(0,i._)(this,"byteRange",[]),(0,i._)(this,"filter",void 0),(0,i._)(this,"subfilter",void 0),this.fileData=t,this.filter=n,this.subfilter=a},s={},u=function(e,t){var n=!0;return e.StreamCallback.implement({Retain:function(){return u(e,t)},Release:function(){n=!0},Flush:function(){return!0},GetSize:function(){return t.totalSize},WriteBlock:function(r,i,a){for(var o=[],s=i;s<i+a;s++)o.push(e.HEAPU8[r+s-i]);if(n)n=!1,t.blob=0!=i?new Blob([new Uint8Array(i),new Uint8Array(o)]):new Blob([t.blob,new Uint8Array(o)]);else{var u=t.blob.size;i>=0&&i<u&&i+a<u?t.blob=new Blob([t.blob.slice(0,i),new Uint8Array(o),t.blob.slice(i+a,u)]):i>=0&&i<u&&i+a>u?t.blob=new Blob([t.blob.slice(0,i),new Uint8Array(o)]):i>=u&&(t.blob=new Blob([t.blob,new Uint8Array(i-u),new Uint8Array(o)]))}return t.totalSize=t.blob.size,!0},ReadBlock:function(n,r,i){var a=t.blob.slice(r,r+i),o=(new self.FileReaderSync).readAsArrayBuffer(a);return e.HEAPU8.set(new Uint8Array(o),n),!0}})},c=function(e,t,n,r,i){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filter",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filter",r=e.SignatureCallback.implement({Release:function(){},StartCalcDigest:function(t,n,r,i,a){var o=s[i.GetDict().GetObjNum()];if(o)for(var u=0;u<r;u+=2)o.byteRange.push(e.HEAP32[n/4+u]),o.byteRange.push(e.HEAP32[n/4+u+1]);return!0},ContinueCalcDigest:function(t,n){return e.ProgressiveState.e_Finished},GetDigest:function(t){var n=new Uint8Array([0,10,10,0]),r=new e.String,i=e._malloc(n.length);return e.HEAPU8.set(n,i),r.Load(i,n.length),r},Sign:function(t,n,r,i,a,o){var s=new Uint8Array([0,10,10,0]),u=e._malloc(s.length);e.HEAPU8.set(s,u);var c=new e.String;return c.Load(u,s.length),c},VerifySigState:function(t,n,r,i,a){return e.States.e_StateVerifyNoChange.value},IsNeedPadData:function(){return!1},CheckCertificateValidity:function(t,n,r){return e.CertValidity.e_CertValid}});e.Library.RegisterSignatureCallback((0,a.n5)(e,t),(0,a.n5)(e,n),r)}(e,r,i);var c={blob:new Blob([]),totalSize:0,getBuffer:function(e,t){var n=(new self.FileReaderSync).readAsArrayBuffer(this.blob.slice(e,e+t));return Array.from(new Uint8Array(n))}},l=t.GetDict().GetObjNum();s[l]=new o(c,r,i);try{t.StartSign({value:n},u(e,c),l).Continue()}catch(e){console.warn(e)}return l},l=function(e){var t=s[e],n=t.fileData.blob,r=t.byteRange;return delete s[e],{buffer:n,byteRange:r}};function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"",buffer:null},r=n.path,i=n.buffer;if(r){var a=new XMLHttpRequest;a.open("GET",r,!1),a.responseType="arraybuffer",a.send(null),t=a.response}else t=i||new ArrayBuffer(0);var o=0,s=!1,u=0,c=0,l=e.StreamCallback.implement({Release:function(){console.log("Release file stream")},GetSize:function(){return s?c:t.byteLength},Flush:function(){return!0},WriteBlock:function(n,r,i){if(s&&(r+=u),t.byteLength<r+i){var a=t;if(t=new ArrayBuffer(r+i),0!==a.byteLength){var o=new Uint8Array(a);new Uint8Array(t).set(o)}}var c=new Uint8Array(t,r,i),l=e.HEAPU8.subarray(n,n+i);return c.set(l),!0},GetPosition:function(){return s?o-u:o},SetPosition:function(e){s&&(e+=u),o=e},IsEOF:function(){var e=s?c:t.byteLength;return o===e},ReadBlock:function(n,r,i){if(s&&(r+=u)+i>c)return!1;var a=new Uint8Array(t,r,i);return e.HEAPU8.set(a,n),!0},SetRange:function(e,t){u=e,c=t,s=!0},ClearRange:function(){s=!1}});return l.GetBuffer=function(){return t},l.GetBlob=function(){return new Blob([t],{type:"application/pdf"})},l}},4335:(e,t,n)=>{"use strict";n.d(t,{$h:()=>l,ZP:()=>d,tJ:()=>c});var r=n(4375),i=n(6721),a=n(5136),o=n(1870);function s(e,t){var n=Array.prototype.slice.call(t).join(",");throw new Error("Illegal operations on virtual page: ".concat(e,"(").concat(n,")"))}function u(e,t,n){var r=new e.Bitmap(t,n,e.DIBFormat.e_DIBRgb32,0,0);r.FillRect(4294638330,null);var i=r.GetBuffer(),a=r.GetHeight()*r.GetPitch(),o=i+a;return{buffer:e.HEAPU8.buffer.slice?e.HEAPU8.buffer.slice(i,o):new Uint8Array(e.HEAPU8.buffer,i,a).buffer,bitmap:r}}var c=800,l=300,d=function(){function e(t,n){(0,r._)(this,e),(0,a._)(this,"index",void 0),(0,a._)(this,"pdfDoc",void 0),(0,a._)(this,"isVirtual",void 0),(0,a._)(this,"id",void 0),(0,a._)(this,"width",void 0),(0,a._)(this,"height",void 0),(0,a._)(this,"engine",void 0),this.index=t,this.pdfDoc=n,this.isVirtual=!0,this.width=c,this.height=l,this.id=(0,o.Ki)("virtual_pdf_page"),this.engine=n.engine}return(0,i._)(e,[{key:"page",get:function(){return s(".page",arguments)}},{key:"preparse",value:function(){}},{key:"addJRAnnot",value:function(){s("addJRAnnot",arguments)}},{key:"clearEnginePage",value:function(){s("clearEnginePage",arguments)}},{key:"reloadAnnots",value:function(){}},{key:"hasAnnot",value:function(){return!1}},{key:"parsedPage",value:function(){s("parsedPage",arguments)}},{key:"reParsePage",value:function(){s("reParsePage",arguments)}},{key:"getIndex",value:function(){return this.index}},{key:"getObjNumber",value:function(){}},{key:"getWidth",value:function(){return Promise.resolve(this.width)}},{key:"getHeight",value:function(){return Promise.resolve(this.height)}},{key:"getAnnots",value:function(){return Promise.resolve([])}},{key:"getAnnotIDList",value:function(){return[]}},{key:"getAnnotById",value:function(){return Promise.resolve(void 0)}},{key:"getThumb",value:function(){var e;return e=this.height/this.width>1.29?258/this.height:200/this.width,this.getImageData(e)}},{key:"getNativeAnnotById",value:function(){s("getNativeAnnotById",arguments)}},{key:"getImageDataByTile",value:function(e,t,n,r){var i=u(this.engine,n,r),a=i.buffer;return i.bitmap.delete(),a}},{key:"getImageData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Math.max(1,this.width*e),n=Math.max(1,this.height*e),r=u(this.engine,t,n),i=r.buffer;return r.bitmap.delete(),Promise.resolve({buffer:i,width:t,height:n})}},{key:"getRotation",value:function(){return 0}},{key:"setRotation",value:function(){}},{key:"destroy",value:function(){}},{key:"resetBitmapCache",value:function(){}},{key:"toJson",value:function(){return{id:this.id,index:this.index,width:this.width,height:this.height,rotation:0,annotCount:0,matrix:[1,0,0,1,0,0],objectNumber:-1,AA:{},mediaWidth:this.width,mediaHeight:this.height,isCropped:!1,isVirtual:!0,cropBox:{left:0,right:this.width,top:this.height,bottom:0}}}},{key:"getBitmap",value:function(e,t,n,r,i,a){if(n.width<1||n.height<1)return Promise.resolve({image:{buffer:void 0},isVirtual:!0});var o=u(this.engine,n.width,n.height),s=o.buffer;return o.bitmap.delete(),Promise.resolve({image:{buffer:s,x:n.x||0,y:n.y||0,width:n.width,height:n.height,isVirtual:!0},isVirtual:!0})}},{key:"renderAnnots",value:function(){}},{key:"getPageAndHighlightBitmap",value:function(e,t,n,r){return this.getBitmap(e,t,n,0,[],!0)}},{key:"getAnnotBitmap",value:function(){s("getAnnotBitmap",arguments)}},{key:"getAnnotBitmapByRange",value:function(){s("getAnnotBitmapByRange",arguments)}},{key:"getAnnotIdAtPoint",value:function(){s("getAnnotIdAtPoint",arguments)}},{key:"getAnnotIdAtDevicePoint",value:function(){s("getAnnotIdAtDevicePoint",arguments)}},{key:"getCharInfoAtPoint",value:function(){s("getCharInfoAtPoint",arguments)}},{key:"getNormalTextPage",value:function(){s("getNormalTextPage",arguments)}},{key:"getNormalTextPageSync",value:function(){s("getNormalTextPageSync",arguments)}},{key:"removeAnnotById",value:function(){s("removeAnnotById",arguments)}},{key:"removeAllAnnot",value:function(){}},{key:"addImage",value:function(){s("addImage",arguments)}},{key:"addAnnot",value:function(){s("addAnnot",arguments)}},{key:"markRedactAnnot",value:function(){s("markRedactAnnot",arguments)}},{key:"addAnnotGroup",value:function(){s("addAnnotGroup",arguments)}},{key:"getTextRectsAtRect",value:function(){s("getTextRectsAtRect",arguments)}},{key:"getTextContinuousRectsAtRect",value:function(){s("getTextContinuousRectsAtRect",arguments)}},{key:"getTextContinuousRectsAtPoints",value:function(){s("getTextContinuousRectsAtPoints",arguments)}},{key:"getTextContinuousCharsAtRect",value:function(){return Promise.resolve("")}},{key:"getDoubleClickTextRectAtPoint",value:function(){s("getDoubleClickTextRectAtPoint",arguments)}},{key:"getTextSearch",value:function(){s("getTextSearch",arguments)}},{key:"update",value:function(){return Promise.resolve({index:this.index,annotIds:[]})}},{key:"flattern",value:function(){s("flattern",arguments)}},{key:"getGraphicsObjectAtPoint_s",value:function(){return Promise.resolve([])}},{key:"getGraphicsObjectsCount",value:function(){return Promise.resolve(0)}},{key:"getGraphicsObjectByIndex",value:function(){s("getGraphicsObjectByIndex",arguments)}},{key:"getGraphicsObjectsInRect",value:function(){s("getGraphicsObjectsInRect",arguments)}},{key:"getGraphicsObjectAtPoint",value:function(){s("getGraphicsObjectAtPoint",arguments)}},{key:"checkPathObjects",value:function(){}},{key:"addWatermark",value:function(){s("addWatermark",arguments)}},{key:"pasteAnnot",value:function(){s("pasteAnnot",arguments)}},{key:"calcContentBBox",value:function(){return{}}},{key:"getBox",value:function(){return{}}},{key:"getAnnotIdArrayByOrder",value:function(){return Promise.resolve([])}},{key:"getPageDictionary",value:function(){return Promise.resolve({})}},{key:"clearDesignerAssitCache",value:function(){}},{key:"getSuggestedFormDesignerRect",value:function(){return Promise.resolve({left:0,right:0,top:0,bottom:0})}},{key:"getSnappedPoint",value:function(e){return e}},{key:"getTextRectCount",value:function(){return Promise.resolve(0)}},{key:"getTextByRectIndex",value:function(){s("getTextByRectIndex",arguments)}},{key:"normalize",value:function(){}}]),e}()},479:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4375),i=n(6721),a=n(5136),o=n(952),s=n(3883),u=n(2699),c=function(){function e(t,n,i){(0,r._)(this,e),(0,a._)(this,"engine",void 0),(0,a._)(this,"pdfPage",void 0),(0,a._)(this,"pdfDoc",void 0),(0,a._)(this,"xfaPage",void 0),(0,a._)(this,"engineField",void 0),this.engine=t,this.pdfPage=n,this.pdfDoc=this.pdfPage.pdfDoc,this.xfaPage=this.pdfPage.xfaPage,this.engineField=this.getSignatureField(i)}return(0,i._)(e,[{key:"getSignatureField",value:function(e){return this.xfaPage.GetWidget(e).GetSignature()}},{key:"sign",value:function(e,t){var n,r=this,i=this.engine,a=i.KeyName,c=Promise.resolve(),l=e.flag||256;if(e.fieldName){(n=this.engineField).GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal&&(n=n.GetPagingSealSignature(),l=e.flag||128);var d=n.GetControl(0).GetWidget().GetPage().GetIndex();c=this.pdfDoc.getPageByIndex(d)}return c.then((function(c){n.CreateSigVDict(new i.String(e.filter),new i.String(e.subfilter)),n.SetFilter(new i.String(e.filter)),n.SetSubFilter(new i.String(e.subfilter)),e.signer&&n.SetKeyValue(a.e_KeyNameSigner,new i.WString(e.signer)),e.reason&&n.SetKeyValue(a.e_KeyNameReason,new i.WString(e.reason)),e.email&&n.SetKeyValue(a.e_KeyNameContactInfo,new i.WString(e.email)),e.distinguishName&&n.SetKeyValue(a.e_KeyNameDN,new i.WString(e.distinguishName)),e.location&&n.SetKeyValue(a.e_KeyNameLocation,new i.WString(e.location));var d,f=e.text||e.signer;0!=e.flag&&f&&256&l&&n.SetKeyValue(a.e_KeyNameText,new i.WString(f)),d=void 0!==e.signTime&&e.signTime>0?new Date(e.signTime):new Date;var h,g=new i.DateTime(d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds(),-d.getTimezoneOffset()/60,0);if(n.SetSignTime(g),e.timeFormat){var p=e.timeFormat,v=p.format,_=p.timeZoneOptions;n.SetTimeDescription((0,s.n5)(i,(0,u.Z)(d,v,_)))}if((h=t&&t.image||e.inkSign)&&640&l&&("object"==typeof h&&(h=h.url),h.length>0)){var m=r.pdfDoc.JR.createReaderCallback(h),y=new i.Image(m).GetFrameBitmap(0);n.SetBitmap(y),l|=128}n.SetDocPermission({value:e.docPermission||0});var S=new r.engine.SignatureAppearanceOptions;if(S.showLogo=1==(1&l),n.SetSignatureAppearanceOptions(S),n.SetAppearanceFlags(l),e.defaultContentsLength&&n.SetDefaultContentsLength(e.defaultContentsLength),e.native){var b=(0,o.Xd)(i,{path:e.certificate,buffer:null}),D=(0,o.Xd)(i),P=n.StartSign_new(b,new i.WString(e.certPWD),{value:e.hashAlgorithm},D,0,null);if(P.Continue(),-1==P.GetRateOfProgress())throw new Error("Sign Error");return D.GetBlob()}var I=(0,o.cP)(r.engine,n,e.hashAlgorithm,e.filter,e.subfilter),A=(0,o.Kq)(I);return Promise.resolve(A)}))}}]),e}()},8895:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(6448),i=n(4375),a=n(6721),o=n(5136),s=n(7582),u=n(2379),c=n(4271),l=function(){function e(t,n,r,a){(0,i._)(this,e),(0,o._)(this,"engine",void 0),(0,o._)(this,"clientId",void 0),(0,o._)(this,"pdfDoc",void 0),(0,o._)(this,"currFocus",{}),(0,o._)(this,"dpr",1),(0,o._)(this,"syncBaseUrl",void 0),(0,o._)(this,"pdfJR",void 0),this.engine=t,this.clientId=n,this.pdfDoc=r,this.syncBaseUrl=a,this.pdfJR=r.JR;var s=new URL(self.location.href);this.dpr=Number(s.searchParams.get("dpr"))||1}return(0,a._)(e,[{key:"Release",value:function(){}},{key:"InvalidateRect",value:function(e,t,n){(t.left||t.top||t.right||t.bottom)&&postMessage({workflow:"xfa",type:"InvalidateRect",msg:{pageIndex:e,rect:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},flag:n.value}})}},{key:"DisplayCaret",value:function(e,t,n){postMessage({workflow:"xfa",type:"DisplayCaret",msg:{pageIndex:e,isVisible:t,rect:{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}})}},{key:"GetPopupPos",value:function(e,t,n,r,i){var a=t===n,o=this.pdfDoc.xfaDoc.GetPage(e),s=o.GetHeight(),u=o.GetWidth(),c=r.bottom-r.top,l=i.right-i.left,f=i.bottom-i.top,h={left:0,top:f,right:l,bottom:0},g=r.left,p=s-r.top,v=(r.right,r.bottom,{left:h.left+g,top:h.top+p,right:h.right+g,bottom:h.bottom+p}),_=f+c,m={left:v.left,top:s-v.top+_,right:v.right,bottom:s-v.bottom+_},y=m.bottom>s;y&&(m.top-=f+c,m.bottom-=f+c);var S=f-c,b={left:h.left,top:h.top-S,right:h.right,bottom:h.bottom-S};if(y&&(S=a?d(f)/this.dpr:f+c,b.top-=S,b.bottom-=S),a){var D=d(i.right-i.left)/this.dpr;if(m.left+D>u){var P=d(m.left+D-u)/this.dpr;b.left-=P,b.right-=P}}return new this.engine.CFX_FloatRect(b.left,b.bottom,b.right,b.top)}},{key:"PopupMenu",value:function(){}},{key:"GetCurrentPage",value:function(){return(0,u.Z)(this.syncBaseUrl,this.clientId,"GetCurrentPageIndex")}},{key:"SetCurrentPage",value:function(){}},{key:"GetTitle",value:function(){}},{key:"ExportData",value:function(){}},{key:"ImportData",value:function(){(0,u.Z)(this.syncBaseUrl,this.clientId,"ActionCallback","alert",{message:"Importing data is currently not supported for dynamic XFA.",title:"",type:0,icon:3})}},{key:"GotoURL",value:function(){}},{key:"Print",value:function(e,t,n,r){(0,u.Z)(this.syncBaseUrl,this.clientId,"ActionCallback","print",{doc:e,start_page_index:t,end_page_index:n,options:r})}},{key:"GetHighlightColor",value:function(){return 2139917567}},{key:"SubmitData",value:function(e,t,n,r,i){postMessage({workflow:"xfa",type:"SubmitData",msg:{target:t.toString(),format:n.value,textEncoding:r.value,content:i.toString()}})}},{key:"SetFocus",value:function(e,t){var n;!e||e.IsEmpty()?(this.resetCurrFocus(),n={}):(this.currFocus.xfa_page=e.GetXFAPage(),this.currFocus.xfaWidgetIndex=e.GetIndex(),n={pageIndex:this.currFocus.xfa_page.GetIndex(),xfaWidget:(0,c.Z)(e,this.pdfJR,!1,this.engine),bRelayout:t}),postMessage({workflow:"xfa",type:"SetFocus",msg:n})}},{key:"PageViewEvent",value:function(e,t){var n=this;return(0,r._)((function(){var r,i,a,o;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return t!==n.engine.PageViewEventType.e_PageViewEventTypeAdded?[3,2]:[4,n.pdfDoc.getPageByIndex(e)];case 1:return i=s.sent(),r={pageViewEventType:t.value,pageIndex:e,pageJson:i.toJson()},[3,3];case 2:t===n.engine.PageViewEventType.e_PageViewEventTypeRemoved&&(a=-1===e?n.pdfDoc.xfaDoc.GetPageCount():e,n.pdfDoc.pageIndexMap[a]&&(o=n.pdfDoc.pageIndexMap[a],delete n.pdfDoc.pageIndexMap[a],delete n.pdfDoc.pageIndexPromise[a],n.pdfDoc.removePageCache(o)),r={pageViewEventType:t.value,pageIndex:a}),s.label=3;case 3:return postMessage({workflow:"xfa",type:"PageViewEvent",msg:r}),[2]}}))}))()}},{key:"SetChangeMark",value:function(e){postMessage({workflow:"xfa",type:"SetChangeMark"})}},{key:"WidgetEvent",value:function(e,t){this.resetCurrFocus()}},{key:"resetCurrFocus",value:function(){this.currFocus={}}},{key:"hasCurrFocus",value:function(){return this.currFocus.xfa_page&&void 0!==this.currFocus.xfaWidgetIndex}},{key:"handleSignature",value:function(e){var t;if(!e||e.IsEmpty())this.resetCurrFocus(),t={};else{this.currFocus.xfa_page=e.GetXFAPage(),this.currFocus.xfaWidgetIndex=e.GetIndex();var n=e.GetSignature().IsSigned();t={pageIndex:e.GetXFAPage().GetIndex(),xfaWidget:(0,c.Z)(e,this.pdfJR,!1,this.engine)},postMessage({workflow:"xfa",type:n?"Verify":"Sign",msg:t})}}},{key:"showMemu",value:function(e){var t,n=e.point,r=e.pageIndex,i=e.xfa_widget;if(!i||i.IsEmpty())this.resetCurrFocus(),t={};else{var a=i.GetSignature().IsSigned();t={point:n,pageIndex:r,xfaWidget:(0,c.Z)(i,this.pdfJR,!1,this.engine),isSigned:a}}postMessage({workflow:"xfa",type:"ShowMemu",msg:t})}}]),e}();function d(e){return 72*e/96}},1407:(e,t,n)=>{"use strict";var r;n.d(t,{f:()=>r}),function(e){e[e.Arc=3]="Arc",e[e.Barcode=0]="Barcode",e[e.CheckButton=2]="CheckButton",e[e.ChoiceList=7]="ChoiceList",e[e.DateTimeEdit=4]="DateTimeEdit",e[e.ExclGroup=15]="ExclGroup",e[e.Image=16]="Image",e[e.ImageEdit=8]="ImageEdit",e[e.Line=9]="Line",e[e.NumericEdit=5]="NumericEdit",e[e.PasswordEdit=10]="PasswordEdit",e[e.PushButton=1]="PushButton",e[e.RadioButton=11]="RadioButton",e[e.Rectangle=12]="Rectangle",e[e.Signature=6]="Signature",e[e.TextEdit=13]="TextEdit",e[e.Unknown=14]="Unknown"}(r||(r={}))},4271:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(1407),i=n(4375),a=n(6721),o=n(1453),s=n(3883),u=(n(703),n(2699),function(){function e(){(0,i._)(this,e)}return(0,a._)(e,null,[{key:"getSignatureInfo",value:function(e,t,n){var r,i=e.GetSignature();t.signatureType=null===(r=i.GetSignatureType())||void 0===r?void 0:r.value;var a=t.isSigned=i.IsSigned(),u=i.GetFieldMDPAction().value;t.lockAction={type:u};var c=t.lockAction.fields=[];if(u>1)for(var l=i.GetFieldMDPActionFields(),d=0;d<l.GetSize();d++)c.push(l.GetAt(d).toString());if(a){t.filter=i.GetFilter().toString(),t.subfilter=i.GetSubFilter().toString(),Object.keys(o._).forEach((function(e){var r=i.GetKeyValue(n.KeyName[e]).toString();t[o._[e]]=r}));var f=i.GetSignTime();f.IsValid()&&(f=f.ToUTCTime(),t.signTime=Date.UTC(f.year,f.month-1,f.day,f.hour,f.minute,f.second,f.milliseconds)),t.apFlag=i.GetAppearanceFlags(),t.isTimeStamp=i.IsTimeStamp();var h=i.GetDict().GetElement((0,s.n5)(n,"V")).GetDict().GetElement((0,s.n5)(n,"ByteRange")).GetArray(),g=t.byteRange=[];if(h)for(var p=h.GetElementCount(),v=0;v<p;v++)g.push(h.GetElement(v).GetInteger())}}},{key:"getFileSizeOfSignedVersion",value:function(e,t){if(!e.IsSigned())return 0;var n=0;try{n=e.GetFileSizeOfSignedVersion()}catch(e){n=0;var r=t.getErrorCode(e);console.error(r)}return n}},{key:"isSignatureFieldInVisible",value:function(e,t,n){var r=t.GetDict(),i=((0,s.n5)(e,"Parent"),(0,s.n5)(e,"Rect"));if(r){var a=r.GetElement(i);if(a||(a=this.getElementFromInheritedElement(e,r,i)),a&&a.GetRect().IsEmpty())return!1}return this.isDocTimeStamp(e,r)||n}},{key:"isDocTimeStamp",value:function(e,t){var n=this.getVDict(e,t);if(n){(0,s.n5)(e,"Parent");var r=(0,s.n5)(e,"Type"),i=n.GetElement(r);if(i||(i=this.getElementFromInheritedElement(e,n,r)),i)return"DocTimeStamp"===i.GetString().toString()}return!1}},{key:"getElementFromInheritedElement",value:function(e,t,n){var r,i=(0,s.n5)(e,"Parent"),a=t.GetElement(i);return a&&a.GetType()===e.PDFObjectType.e_Reference&&a.GetDirectObject()&&a.GetDirectObject().GetDict()&&(r=a.GetDirectObject().GetDict().GetElement(n)),r}},{key:"getVDict",value:function(e,t){var n=null;if(!t)return n;var r=(0,s.n5)(e,"V");if(t.HasKey(r))n=t.GetElement(r).GetDict();else{var i=t.GetElement((0,s.n5)(e,"Parent"));i&&i.GetDirect()&&i.GetDirect().GetDict()&&(n=i.GetDirect().GetDict().GetElement(r).GetDict())}return n}}]),e}());function c(e,t){var n,i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.IsEmpty())return null;var s=e.GetRect(),c=e.GetName({value:0}),l=e.GetName({value:1}),d=e.GetName({value:2}),f=e.GetValue();if(a)return{type:e.GetType().value,toolTip:e.GetToolTip().toString()};var h={index:e.GetIndex(),type:e.GetType().value,fieldName:c.toString(),captionName:l.toString(),fullName:d.toString(),rect:{left:s.left,top:s.top,right:s.right,bottom:s.bottom},value:t.getPDFString(f),isChecked:e.IsChecked(),presence:e.GetPresence().value,hAlign:null===(n=e.GetHAlign())||void 0===n?void 0:n.value,vAlign:null===(i=e.GetVAlign())||void 0===i?void 0:i.value,hasEdgeTop:e.HasEdge({value:0}),hasEdgeRight:e.HasEdge({value:1}),hasEdgeBottom:e.HasEdge({value:2}),hasEdgeLeft:e.HasEdge({value:3})};c.delete(),l.delete(),d.delete(),f.delete(),e.GetType().value===r.f.Signature&&u.getSignatureInfo(e,h,o);try{var g=e.GetToolTip();h.toolTip=g.toString(),g.delete()}catch(e){}return h.type,h}},4020:(e,t,n)=>{"use strict";n.d(t,{jI:()=>f});var r=n(6448),i=n(4375),a=n(6721),o=n(5136),s=n(3194),u=n(7582),c=n(1870);const l={print:4,modify:8,extract:16,annotForm:32,fillForm:256,extractAccess:512,assemble:1024,printHigh:2048};var d,f;!function(e){e[e.FIRST_CHILD=0]="FIRST_CHILD",e[e.LAST_CHILD=1]="LAST_CHILD",e[e.PREVIOUS_SIBLING=2]="PREVIOUS_SIBLING",e[e.NEXT_SIBLING=3]="NEXT_SIBLING",e[e.FIRST_SIBLING=4]="FIRST_SIBLING",e[e.LAST_SIBLING=5]="LAST_SIBLING"}(d||(d={})),function(e){e.ZoomFitBBox="ZoomFitBBox",e.ZoomFitBHorz="ZoomFitBHorz",e.ZoomFitBVert="ZoomFitBVert",e.ZoomFitHorz="ZoomFitHorz",e.ZoomFitVert="ZoomFitVert",e.ZoomFitPage="ZoomFitPage",e.ZoomFitRect="ZoomFitRect",e.ZoomXYZ="ZoomXYZ"}(f||(f={}));!function(){function e(t){(0,i._)(this,e),(0,o._)(this,"doc",void 0),this.doc=t}(0,a._)(e,[{key:"emitEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;(i=this.doc.engine.eventEmitter).emit.apply(i,[e].concat((0,s._)(n)))}},{key:"getBookmarkChildren",value:function(e){return this.doc.api.getBookmarkChildren({path:"jr/doc"},this.doc.id,e)}},{key:"insertBookmark",value:function(e){var t=this;return(0,r._)((function(){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return t.assertPermission(),t.assertRelationship(e.relationship),t.assertPageIndex(e.destination.pageIndex),[4,t.doc.api.insertBookmark({path:"jr/doc"},t.doc.id,e)];case 1:return[2,n.sent()]}}))}))()}},{key:"getBookmarkData",value:function(e){return this.doc.api.getBookmarkData({path:"jr/doc"},this.doc.id,e)}},{key:"getProperties",value:function(e){return this.doc.api.getBookmarkProperties({path:"jr/doc"},this.doc.id,e)}},{key:"setProperties",value:function(e,t){var n=this;return(0,r._)((function(){var r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return n.assertPermission(),void 0!==(r=t.color)&&(r=(0,c.$j)(r,"int")),[4,n.doc.api.setBookmarkProperty(n.doc.id,e,t)];case 1:return[2,i.sent()]}}))}))()}},{key:"remove",value:function(e){var t=this;return(0,r._)((function(){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return t.assertPermission(),[4,t.doc.api.removeBookmark(t.doc.id,e)];case 1:return[2,n.sent()]}}))}))()}},{key:"moveTo",value:function(e){var t=this;return(0,r._)((function(){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return t.assertPermission(),[4,t.doc.api.moveBookmark(t.doc.id,e.srcId,e.destId,e.relationship)];case 1:return n.sent(),[2]}}))}))()}},{key:"setDestination",value:function(e,t){var n=this;return(0,r._)((function(){var r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return[4,n.doc.api.setBookmarkDestination(n.doc.id,e,t)];case 1:return(r=i.sent())?[2,n.doc.engine.actionFactory.createAction(r,n.doc,n.doc.api,n.doc.engine.eventEmitter,n)]:[2]}}))}))()}},{key:"getDestination",value:function(e){var t=this;return(0,r._)((function(){var n;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.doc.api.getBookmarkDestination(t.doc.id,e)];case 1:return(n=r.sent())?[2,t.doc.engine.actionFactory.createAction(n,t.doc,t.doc.api,t.doc.engine.eventEmitter,t)]:[2]}}))}))()}},{key:"getAction",value:function(e){var t=this;return(0,r._)((function(){var n;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.doc.api.getBookmarkAction(t.doc.id,e)];case 1:return(n=r.sent())?[2,t.doc.engine.actionFactory.createAction(n,t.doc,t.doc.api,t.doc.engine.eventEmitter,t)]:[2]}}))}))()}},{key:"setAction",value:function(e,t){return this.doc.api.setBookmarkAction(this.doc.getId(),e,t)}},{key:"assertPermission",value:function(){if(!this.doc.checkPermission(l.assemble))throw new Error("Invalid operation on Bookmark, currently does not have editing permissions.")}},{key:"assertRelationship",value:function(e){switch(e){case 0:case 4:case 1:case 5:case 3:case 2:return;default:throw new Error("Invalid relationship value: ".concat(e,"."))}}},{key:"assertPageIndex",value:function(e){var t=this.doc.getPageCount();if(!(e>=0&&e<t))throw new Error("Invalid page index: ".concat(e))}}])}()},3715:e=>{e.exports={wasmHash:"10cfa70442cbb80745ad083ad7805b28",jsHash:"89021cfe765f629000d1c86f6d68eaac",asmMemHash:"undefined",asmJSHash:"undefined"}},1907:e=>{e.exports={"3d":"4d4082a4597c6e25b7a43592086853d6",ai:"88e78c8c3200a2d478bb8cc4689182a6",compare:"38d68c1cb5776a0acc31d48bd1af7247",docprocess:"2b4b3331ec14b81db21223df28ab9cd5",exporter:"f41bdd3df9e0dad065bbb685c0a9ec4d",lr:"73fb97c0bbe3e4ed56f003fdcaf1f45f",openssl:"2240318970a9f8c821f290c3a09e0ced",optimizer:"bb315ab405bda4f0e636c92cad07b917",pageeditor:"ffd5fa3e5a75a5f76672f88475ffb6b5",pageformat:"5d6119d049c60322e03e7dbf7f797a8f",touchup:"993554765068d93b2c705fad7a53b63e",xfa:"10baeb47dfdcc80300e6ef321a7d0e8a"}},1446:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(4375),i=n(6721),a=n(5136),o=n(3194),s=(function(){function e(t){(0,r._)(this,e),(0,a._)(this,"pdf3D",void 0),this.pdf3D=t}(0,i._)(e,[{key:"GenerateBackground",value:function(e,t){console.log("PDF3DCompositionProvider.GenerateBackground");this.pdf3D.getCache(t);return new this.pdf3D.engine.Bitmap}},{key:"GenerateForeground",value:function(e,t){console.log("PDF3DCompositionProvider.GenerateForeground");this.pdf3D.getCache(t);return new this.pdf3D.engine.Bitmap}}])}(),function(){function e(t){(0,r._)(this,e),(0,a._)(this,"pdf3D",void 0),this.pdf3D=t}return(0,i._)(e,[{key:"NotifyModelImportFailure",value:function(e,t){postMessage({workflow:"3D",type:"notifyModelImportFailure",msg:{isFromScript:e,failReason:t}})}}]),e}()),u=function(){function e(t){var n=this;(0,r._)(this,e),(0,a._)(this,"render",(function(){n.isDestroyed||(n._m3DContext.Update3D(),requestAnimationFrame(n.render))})),this.pdfDoc=t;var i=this.engine=t.engine;this._m3DContext=new i.PDF3DContext(t.doc),this._annot3DCaches=[];var o=i.PDF3DEventHandlerProvider.implement(new s(this));this._m3DContext.Set3DEventHandlerProvider(o),this.hasCompositionProvider=!1,this.isDestroyed=!1}return(0,i._)(e,[{key:"getCache",value:function(e){if(0===this._annot3DCaches.length)return null;var t=!0,n=!1,r=void 0;try{for(var i,a=this._annot3DCaches[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];if(u.offscreenCanvas.handle===e)return u}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"setCanvas",value:function(e,t,n){this.canvas||(this.canvas={}),this.canvas[e]||(this.canvas[e]={}),this.canvas[e][t]=n}},{key:"getAnnot3D",value:function(e,t){var n,r=null===(n=this._annot3DCaches[e])||void 0===n?void 0:n[t];return r||(r=this._getAnnot3D(e,t),(this._annot3DCaches[e]=this._annot3DCaches[e]||{})[t]=r),r}},{key:"getMatchAnnot3DData",value:function(e,t){var n=this._m3DContext;if(!n||n.IsEmpty())return null;var r=this.pdfDoc.doc.GetPage(e);if(r.IsEmpty()||0===r.GetAnnotCount())return null;for(var i=n.GetPage3DAnnotArray(e),a=null,o=0;o<i.GetSize();o++){var s=(a=i.GetAt(o)).GetAnnotIndex(),u=r.GetAnnot(s);if(u.IsEmpty())a.delete();else{if(u.GetDict().GetObjNum()===t)return a;a.delete()}}return null}},{key:"_getAnnot3D",value:function(e,t){var n,r,i=this.engine,a=this._m3DContext;if(a&&!a.IsEmpty()){var o=this.getMatchAnnot3DData(e,t);if(o&&!o.IsEmpty()){var s=this.canvas[e][t]||(null===(n=this._annot3DCaches[e][t])||void 0===n?void 0:n.offscreenCanvas);if(!s)throw new Error("offscreenCanvas is null");var u={width:1,height:1,transferControlToOffscreen:function(){return s},appendChild:function(e){s=e}},c=i.Emval.toHandle(u),l=o.GetActivationState(),d=o.Get3DArtworkInstance(),f=o.GetRichMediaInstances(),h=[];d.IsEmpty()||f.Add(d);for(var g=0;g<f.GetSize();g++){for(var p=f.GetAt(g),v=i.Progressive.e_ToBeContinued;v==i.Progressive.e_ToBeContinued;)v=p.PrepareActivate(null);p.AllocAndActivateCanvasEmbedded(l,c),h.push(p),s&&s.handle&&(p.SetControllerTool(i.PDF3DControllerToolTag.e_ControllerToolTag_Rotate,s.handle),this.hasCompositionProvider&&(a.RequestUpdateForeground(s.handle),a.RequestUpdateBackground(s.handle)))}return this.canvas[e][t]=null,{offscreenCanvas:s||(null===(r=this._annot3DCaches[e][t])||void 0===r?void 0:r.offscreenCanvas),handle:c,annotData:o,richMediaInstances:f,richMediaInstanceList:h,handleObj:u,destroy:function(){f.delete(),d.delete(),o.delete(),h.forEach((function(e){e.delete()}))}}}}}},{key:"destroyAnnot3D",value:function(e,t){var n,r=null===(n=this._annot3DCaches[e])||void 0===n?void 0:n[t];r&&(this._destroyAnnot3D(r),delete this._annot3DCaches[e][t])}},{key:"_destroyAnnot3D",value:function(e){e.destroy(),this.isDestroyed=!0}},{key:"destroy",value:function(){if(this._annot3DCaches.length){var e=!0,t=!1,n=void 0;try{for(var r,i=this._annot3DCaches[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];this._destroyAnnot3D(s)}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this._annot3DCaches=[]}this._m3DContext.delete()}},{key:"setAnnot3DTool",value:function(e,t,n){var r,i=null===(r=this._annot3DCaches[e])||void 0===r?void 0:r[t];if(i)for(var a=i.offscreenCanvas,o=i.richMediaInstanceList,s=this.engine.PDF3DControllerToolTag,u=[s.e_ControllerToolTag_Rotate,s.e_ControllerToolTag_Spin,s.e_ControllerToolTag_Pan,s.e_ControllerToolTag_Zoom][n]||s.e_ControllerToolTag_Rotate,c=0;c<o.length;c++){o[c].SetControllerTool(u,a.handle)}}},{key:"process3DMouseEvent",value:function(e,t,n,r){var i,a=null===(i=this._annot3DCaches[e])||void 0===i?void 0:i[t];if(a){var o=this._m3DContext,s=this.engine,u=a.offscreenCanvas,c=new s.EmscriptenMouseEventStruct;c.Set(n.timeStamp,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,n.button,n.buttons,n.movementX,n.movementY,n.targetX,n.targetY,n.canvasX,n.canvasY),o.OnProcessMouseEvent(u.handle,{value:r},c)}}},{key:"LoadAnnot3DBitmap",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=null===(r=this._annot3DCaches[e])||void 0===r?void 0:r[t];this.relocate(e,t,n,i),a||this.render()}},{key:"relocate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.getAnnot3D(e,t,n);if(i){var a=this._m3DContext,o=i.offscreenCanvas.handle,s=n.right-n.left,u=n.bottom-n.top,c=0,l=0,d=s,f=u;if(r/90%2){d=u,f=s;var h=Math.max(s,u)/Math.min(s,u);if(s>u){var g=u*h;u=s,s=g}else{var p=s*h;s=u,u=p}c=(s-d)/2,l=(u-f)/2}var v=new this.engine.CFX_FloatRect(c,l,d,f);i.handleObj.width=s,i.handleObj.height=u,a.RelocateInPlace(o,v)}}},{key:"setDefaultView",value:function(e,t){var n,r=null===(n=this._annot3DCaches[e])||void 0===n?void 0:n[t];if(r)for(var i=r.richMediaInstances,a=r.offscreenCanvas,o=0;o<i.GetSize();o++){var s=i.GetAt(o);s.SetDefaultView(a.handle),s.delete()}}},{key:"pageRangeTwoDimensionToOne",value:function(e){return JSON.parse(JSON.stringify(e)).reduce((function(e,t){if(2===t.length){for(var n=[],r=t[0];r<t[1];r++)n.push(r);t=n}return e.concat(t)}),[])}},{key:"update3DCacheAfterMovePages",value:function(e,t,n){for(var r,i=this,a=0;a<n;a++)this._annot3DCaches[a]||(this._annot3DCaches[a]={});var s=this.pageRangeTwoDimensionToOne(e).sort((function(e,t){return e-t})),u=s.map((function(e){return i._annot3DCaches[e]}));s.sort((function(e,t){return t-e})).forEach((function(e){i._annot3DCaches.splice(e,1)})),(r=this._annot3DCaches).splice.apply(r,[t,0].concat((0,o._)(u)))}},{key:"update3DCache",value:function(e,t,n,r){if(r)if(n){var i=this._annot3DCaches[t];delete this._annot3DCaches[t],this.update3DCache(e+1,t,n,!1),i&&(this._annot3DCaches[e]=i)}else{var a=this._annot3DCaches[e];delete this._annot3DCaches[e],this.update3DCache(e,t-1,n,!1),a&&(this._annot3DCaches[t]=a)}else if(n)for(var o=t;o>=e;o--)this._annot3DCaches[o-1]&&(this._annot3DCaches[o]=this._annot3DCaches[o-1],delete this._annot3DCaches[o-1]);else for(var s=e;s<=t;s++)s<0||!this._annot3DCaches[s+1]||(this._annot3DCaches[s]=this._annot3DCaches[s+1],delete this._annot3DCaches[s+1])}},{key:"splice3DCache",value:function(e,t,n,r){var i=this._annot3DCaches,a=i[e];(i.splice(e,1),n)?c(i,e<t?t-1:t,a):c(i,r+1,a);return e}}]),e}();function c(e,t,n){t>e.length?e[t]=n:e.splice(t,0,n)}},5065:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4375),i=n(6721),a=n(6666),o=n(7447),s=n(7239),u=n(949),c=function(){function e(t,n){(0,r._)(this,e),this.engine=t,this.doc=n,this.attachments=new t.Attachments(n,new t.PDFNameTree(n,{value:3}))}return(0,i._)(e,[{key:"addFileSpec",value:function(e){var t=s.Z.createFileEx(this.engine,this.doc,null,e.data,(0,a.u)(e.data));return t?(this.setFileSpecProperity(t,e),t):null}},{key:"setFileSpecProperity",value:function(e,t){var n,r,i=this.engine;t.name&&t.name.length>0&&(n=new i.WString(t.name),e.SetFileName(n),n.delete()),t.description&&t.description.length>0&&(n=new i.String(t.description),e.SetDescription(n),n.delete()),t.creationDate?e.SetCreationDateTime(o.Z.ToDateTime(i,t.creationDate)):(r=o.Z.ToDateTime(i,Date.now()),e.SetCreationDateTime(r)),t.modificationDate?e.SetModifiedDateTime(o.Z.ToDateTime(i,t.modificationDate)):(r||(r=o.Z.ToDateTime(i,Date.now())),e.SetModifiedDateTime(r))}},{key:"addEmbeddedFileEx",value:function(e,t){if(!(e&&0!==e.length||(e=t.name)&&0!==e.length))return!1;if(-1!==this.getEmbeddedFileNames().indexOf(e))return!1;var n=this.engine,r=this.addFileSpec(t);if(!r)return!1;var i=new n.WString(e),a=this.attachments.AddEmbeddedFile(i,r);return i.delete(),a}},{key:"addEmbeddedFile",value:function(e,t){var n=this.engine,r=this.doc,i=new n.FileSpec(r,r.GetIndirectObject(t));if(i.IsEmpty())return!1;var a=new n.WString(e),o=this.attachments.AddEmbeddedFile(a,i);return a.delete(),a=null,o}},{key:"setEmbeddedFileEx",value:function(e,t){if(-1===this.getEmbeddedFileNames().indexOf(e))return!1;var n=new this.engine.WString(e),r=this.attachments.GetEmbeddedFile(n);if(t.data&&!s.Z.createFileEx(this.engine,this.doc,r,t.data,(0,a.u)(t.data)))return!1;return this.setFileSpecProperity(r,t),n.delete(),!0}},{key:"setEmbeddedFile",value:function(e,t){var n=this.engine,r=this.doc;return!new n.FileSpec(r,r.GetIndirectObject(t)).IsEmpty()&&(!!this.removeEmbeddedFile(e)&&this.addEmbeddedFile(e,t))}},{key:"removeEmbeddedFile",value:function(e){var t=new this.engine.WString(e),n=this.attachments.RemoveEmbeddedFile(t);return t.delete(),t=null,n}},{key:"removeAllEmbeddedFiles",value:function(){return this.attachments.RemoveAllEmbeddedFiles()}},{key:"getEmbeddedFileNames",value:function(){for(var e=this.attachments,t=e.GetCount(),n=[],r=0;r<t;r++){var i=e.GetKey(r).toString();n.push(i)}return n}},{key:"getEmbeddedFile",value:function(e,t){var n=new this.engine.WString(e),r=this.attachments.GetEmbeddedFile(n);if(n.delete(),r.IsEmpty())return null;var i=new s.Z(r,t),a=i.getFileName(),o=i.getCreationDateTime();o&&(o=(0,u.B)(o));var c=r.GetModifiedDateTime();c=c.IsValid()?(0,u.B)(c):null;var l=i.getDescription();return i.getStreamEx().then((function(e){return i=null,{name:a,creationDate:o,modificationDate:c,description:l,data:e}}))}}]),e}()},2915:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r,i,a=n(4375),o=n(6721),s=n(5171),u="undefined",c=("undefined"==typeof URL?"undefined":(0,s._)(URL))===u?("undefined"==typeof webkitURL?"undefined":(0,s._)(webkitURL))===u?null:webkitURL:URL;("undefined"==typeof FileReaderSync?"undefined":(0,s._)(FileReaderSync))!==u?(r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size;return(new FileReaderSync).readAsArrayBuffer(e.slice(t,t+n))},i=function(e){return new Blob([e])}):c?(r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size,r=c.createObjectURL(e),i=new XMLHttpRequest;i.open("GET",r,!1),i.responseType="arraybuffer",i.send(null);var a=i.status;return a>=200&&a<300||304===a?(c.revokeObjectURL(r),(e=i.response).slice?e.slice(t,t+n):new Uint8Array(e,t,n).buffer):null},i=function(e){return new Blob([e])}):(r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength;return e.slice?e.slice(t,n):new Uint8Array(e,t,n).buffer},i=function(e){return e});const l=function(){function e(t){(0,a._)(this,e),this.size=t,this.blockSize=8388608,this.blocks=[],this.loadingBlocks=[],this.blobCache=[],this.loadingCache={}}return(0,o._)(e,[{key:"push",value:function(e,t){for(var n=this.blocks,r=Math.max(0,e),i=Math.min(e+t,this.size),a=[],o=n.length;o--;){var s=n[o],u=s[0],c=s[1];u<=i&&c>=r&&(r=Math.min(r,u),i=Math.max(i,c),a.push(o))}for(var l=0,d=a.length;l<d;l++)n.splice(a[l],1);n.push([r,i])}},{key:"avail",value:function(e,t){for(var n=e,r=e+t,i=this.blocks,a=i.length;a--;){var o=i[a],s=o[0],u=o[1];if(s<=n&&u>=r)return!0}return!1}},{key:"full",value:function(){1===this.blocks.length&&0===this.blocks[0][0]&&(this.blocks[0][1],this.size)}},{key:"checkLoadBuffer",value:function(e,t){for(var n=e,r=e+t,i=this.loadingBlocks,a=i.length;a--;){var o=i[a],s=o[0],u=o[1];if(s<=n&&u>=r)return!0}return!1}},{key:"loadingBuffer",value:function(e,t){for(var n=this.loadingBlocks,r=Math.max(0,e),i=Math.min(e+t,this.size),a=[],o=n.length;o--;){var s=n[o],u=s[0],c=s[1];u<=i&&c>=r&&(r=Math.min(r,u),i=Math.max(i,c),a.push(o))}for(var l=0,d=a.length;l<d;l++)n.splice(a[l],1);n.push([r,i])}},{key:"addBuffer",value:function(e,t,n){for(var a=new Uint8Array(n),o=this.blockSize,s=this.blobCache,u=e%o,c=0,l=o-u,d=Math.floor(e/o),f=Math.floor((e+t)/o);d<=f;d++){var h=s[d],g=void 0;h&&(g=r(h)),g||(g=new ArrayBuffer(o));var p=new Uint8Array(g);p.set(a.slice(c,l),u),s[d]=i(p),u=0,c+=o,l+=o}this.push(e,t)}},{key:"getBuffer",value:function(e,t){e+t>this.size&&(t=this.size-e);for(var n=new ArrayBuffer(t),i=this.blockSize,a=this.blobCache,o=Math.floor(e/i),s=Math.floor((e+t)/i),u=e%i,c=Math.min(t,i-u),l=0,d=c,f=o,h=s;f<=h;f++){var g=a[f],p=void 0;if(g&&(p=r(g,u,c)),!p)return null;new Uint8Array(n,l,d-l).set(new Uint8Array(p)),u=0,t-=c,l+=c,d+=c=Math.min(t,i-u)}return n}},{key:"_getBufferCacheKey",value:function(e,t){return[e,t].join("-")}},{key:"destroy",value:function(){for(var e=this.blobCache.length;e--;)delete this.blobCache[e]}}]),e}()},6666:(e,t,n)=>{"use strict";n.d(t,{_:()=>a,u:()=>i});var r=n(7327),i=function(e){return(0,r._)(e,Blob)?(e=new Blob([e]),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.size;return(new FileReaderSync).readAsArrayBuffer(e.slice(t,t+n))}):(ArrayBuffer.isView(e)&&(e=e.buffer),e.slice?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.byteLength;return e.slice(t,t+n)}:function(t,n){return new Uint8Array(e,t,n).buffer})},a=function(e){return(new FileReaderSync).readAsArrayBuffer(e.slice(0,e.size))}},1453:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h,_:()=>f});var r=n(4375),i=n(6721),a=n(9422),o=n(2531);const s=function(){function e(t,n,i){(0,r._)(this,e),this.jrDoc=t,this.engineControl=n,this.engine=i}return(0,i._)(e,[{key:"destroy",value:function(){this.engineControl.delete(),this.engineControl=null,this.engine=null}},{key:"toJson",value:function(){var e=this.engineControl,t=e.IsEmpty();if(t)return{};var n,r,i=e.GetIndex(),a=e.IsChecked(),o=e.IsDefaultChecked(),s=e.GetExportValue().toString(),u=e.GetDictionaryObjectNumber(),c="",l="",d="";n=e.GetDefaultAppearance();try{n.font.IsEmpty()||(r=n.font.IsEmbedded(this.jrDoc.doc),c=n.font.GetName().toString(),d=n.font.GetBaseFontName(this.jrDoc.doc).toString(),l=(l=n.font.GetFamilyName().toString()).replace(" ","").replace("-",""),n.font.IsBold()&&(l+="Bold"),n.font.IsItalic()&&(l+="Italic"))}catch(e){isNaN(e)||(e=engine.getErrorCode(e)),console.warn(e)}return Promise.resolve().then((function(e){return Object.assign({},{index:i,isChecked:a,isDefaultChecked:o,isEmpty:t,objectNumber:u,exportValue:s},n?{DA:{flags:n.flags,textColor:n.text_color,textSize:n.text_size,isEmbedded:r,fontName:c,baseName:d,fullName:l}}:{})}))}}]),e}();n(8319);var u=n(3883),c=n(5497),l=n(3846),d=n(703),f=(n(2699),{e_KeyNameSigner:"signer",e_KeyNameLocation:"location",e_KeyNameReason:"reason",e_KeyNameContactInfo:"contact",e_KeyNameDN:"DN",e_KeyNameText:"text"});const h=function(){function e(t,n,i,a,o){(0,r._)(this,e),this.jrDoc=t,this.engineForm=n,this.engineField=i,this.engine=a,this.JR=o,this.label=""}return(0,i._)(e,[{key:"destroy",value:function(){this.engineField.delete(),this.engineForm=null,this.engineField=null,this.engine=null,this.JR=null}},{key:"update",value:function(e,t){var n,r,i=this,a=this.engineField,o=this.engine,s=a.GetValue(),d=!1;switch(e){case"align":a.SetAlignment({value:t});break;case"flag":var f=a.GetDict(),h=(0,u.n5)(o,"Ff"),g=f.GetElement(h);d=16789512&((g?g.GetInteger():0)^t),a.SetFlags(t);break;case"maxLength":if(void 0===t){var p=new o.String("MaxLen");a.GetDict().RemoveAt(p),(0,c.Z)(p)}else a.SetMaxLength(t);break;case"defaultValue":if(void 0===t){var v=new o.String("DV");a.GetDict().RemoveAt(v),(0,c.Z)(v)}else r=new o.WString(t),a.SetDefaultValue(r),(0,c.Z)(r);break;case"clearItems":var _=new o.ChoiceOptionArray;a.SetOptions(_),(0,c.Z)(_);break;case"deleteItems":n=a.GetOptions();for(var m=new o.ChoiceOptionArray,y=0,S=n.GetSize();y<S;y++){var b=n.GetAt(y);if(y!=t)m.Add(b);else{a.GetValue().toString();b.option_value.toString()}}a.SetOptions(m),(0,c.Z)(m);break;case"insertItemAt":var D=new o.ChoiceOption;D.option_value=new o.WString(""+t.value),D.option_label=new o.WString(t.label),D.selected=t.selected,D.default_selected=t.defaultSelected,n=a.GetOptions(),t.index<0||t.index>=n.GetSize()?n.Add(D):n.InsertAt(t.index,D),a.SetOptions(n),(0,c.Z)(D,D.option_value,D.option_label);break;case"alternateName":if(""==t){var P=new o.String("TU");a.GetDict().RemoveAt(P),(0,c.Z)(P);break}r=new o.WString(t),a.SetAlternateName(r),(0,c.Z)(r);break;case"mappingName":if(""==t){var I=new o.String("TM");a.GetDict().RemoveAt(I),(0,c.Z)(I);break}r=new o.WString(t),a.SetMappingName(r),(0,c.Z)(r);break;case"textColor":var A=a.GetDefaultAppearance();A.text_color=+t,a.SetDefaultAppearance(A);break;case"setItems":n=new o.ChoiceOptionArray;t.map((function(e){if(0!==e.value.length&&0!==e.label.length){var t=new o.ChoiceOption;t.option_value=new o.WString(""+e.value),t.option_label=new o.WString(""+e.label),(t.selected=e.selected)&&(!0,i.label=t.option_label),t.default_selected=e.defaultSelected,n.Add(t),(0,c.Z)(t,t.option_value,t.option_label)}})),a.SetOptions(n);break;case"displayValue":a.SetValue((0,u.Dp)(o,t)),this.label=t;break;case"AA":var w,C=t.trigger,k=t.data,E=this.JR.actionManager,G=this.jrDoc.doc;w=E.create(G,k.type),this.jrDoc.form.addAAToDict(a.GetDict(),w,{trigger:C,field:t.field});var T=E.get(w,this.jrDoc,this.JR);return T.create(k),T.toJson()}for(var F=a.GetControlCount(),R=0;R<F;R++){var M=a.GetControl(R),O=M.GetWidget();if(!O.IsEmpty()&&(d||"flag"!=e||t&l.Q9.ButtonRadiosInUnison)){if("textColor"==e){var x=M.GetDefaultAppearance();x.text_color=+t,M.SetDefaultAppearance(x)}O.ResetAppearanceStream()}}this.label.length>0&&a.GetDict().SetAtWString((0,u.n5)(o,"V"),s);4==a.GetType().value&&(this.label="")}},{key:"setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Array.isArray(e)&&(e=e.map((function(e){return"(".concat(e,")")})).join(""));var n=new this.engine.WString(e+"");if(this.engineField.SetValue(n),n.delete(),this.label="",t)for(var r=0;r<this.engineField.GetControlCount();r++){var i=this.engineField.GetControl(r).GetWidget();!i.IsEmpty()&&i.ResetAppearanceStream()}}},{key:"getValue",value:function(){var e=this.engineField.GetFlags(),t=this.engineField.GetType().value;if(256==(256&e)&&5===t){for(var n=this.engineField.GetOptions(),r=[],i=0,a=n.GetSize();i<a;i++){var o=n.GetAt(i);o.selected&&r.push(o.option_value.toString())}return r}return this.engineField.GetValue().toString()}},{key:"getControlsJson",value:function(){for(var e=[],t=this.engineField.GetControlCount(),n=0;n<t;n++){var r=this.engineField.GetControl(n),i=new s(this.jrDoc,r,this.engine);e.push(i.toJson()),i.destroy()}return Promise.all(e)}},{key:"toJson",value:function(e){var t=this;try{for(var n=this.engineField,r=n.GetAlignment().value,i=n.GetAlternateName().toString(),a=[],o=n.GetControlCount(),c=0;c<o;c++){var d=n.GetControl(c);d=new s(this.jrDoc,d,this.engine),a.push(d.toJson()),d.destroy()}return Promise.all(a).then((function(e){var a=n.GetDefaultAppearance(),o=n.GetDefaultValue().toString(),s=0,c=n.GetDict();if(c){var d=(0,u.n5)(t.engine,"Ff"),f=c.GetElement(d);f&&(s=f.GetInteger())}var h=n.GetMappingName().toString(),g=n.GetMaxLength(),p=n.GetName().toString(),v=n.GetValue().toString(),_=n.GetType().value,m=n.GetOptions(),y=[];if(4===_||5===_){for(var S=[],b=0,D=m.GetSize();b<D;b++){var P=m.GetAt(b);y.push({label:P.option_label.toString(),value:P.option_value.toString(),selected:P.selected,defaultSelected:P.default_selected}),P.selected&&S.push(P.option_value.toString())}5===_&&(v=S.length>0?S.length>1?S:S[0]:"")}var I=n.GetTopVisibleIndex(),A=n.IsEmpty(),w="",C=!1;try{if(!a.font.IsEmpty()){var k=t.engineForm.GetDocument();w=t.JR.getPDFString(a.font.GetName()),C=a.font.IsEmbedded(k)}}catch(e){isNaN(e)||(e=engine.getErrorCode(e)),console.warn(e)}var E={alignment:r,alternateName:i,controls:e,DA:{flags:a.flags,fontName:w,textColor:a.text_color,textSize:a.text_size,isEmbedded:C},defaultValue:o,flag:s,mappingName:h,maxLength:g,name:p,options:y,topVisibleIndex:I,type:_,value:v,isEmpty:A,AA:t.getAAJson()};return _===l.fS.Sign&&t.getSignatureInfo(E),E}))}catch(e){return isNaN(e)||(e=engine.getErrorCode(e)),console.warn(e),{}}}},{key:"getAAJson",value:function(){var e={},t=this.engineField.GetDict(),n=this.engine,r=t.GetElement((0,u.n5)(n,"AA"));if(r&&r.GetDict()){9==r.GetType().value&&(r=r.GetDirectObject());for(var i=r.GetDict(),a=new n.AdditionalAction(this.engineForm.GetDocument(),i),o=n.TriggerEvent,s=7;s<17;s++){var c=a.GetAction(o.values[s]);c.IsEmpty()||(e[s]=this.JR.actionManager.get(c,this.jrDoc,this.JR).toJson())}}return e}},{key:"getSignatureInfo",value:function(e){var t,n=this.engine,r=this.engineField;e.signatureType=null===(t=r.GetSignatureType())||void 0===t?void 0:t.value;var i=e.isSigned=r.IsSigned(),a=r.GetFieldMDPAction().value;e.lockAction={type:a};var o=e.lockAction.fields=[];if(a>1)for(var s=r.GetFieldMDPActionFields(),c=0;c<s.GetSize();c++)o.push(s.GetAt(c).toString());if(i){e.filter=r.GetFilter().toString(),e.subfilter=r.GetSubFilter().toString(),Object.keys(f).forEach((function(t){var i=r.GetKeyValue(n.KeyName[t]).toString();e[f[t]]=i}));var l=r.GetSignTime();l.IsValid()&&(l=l.ToUTCTime(),e.signTime=Date.UTC(l.year,l.month-1,l.day,l.hour,l.minute,l.second,l.milliseconds)),e.apFlag=r.GetAppearanceFlags(),e.isTimeStamp=r.IsTimeStamp();var d=r.GetDict().GetElement((0,u.n5)(n,"V")).GetDict().GetElement((0,u.n5)(n,"ByteRange")).GetArray(),h=e.byteRange=[];if(d)for(var g=d.GetElementCount(),p=0;p<g;p++)h.push(d.GetElement(p).GetInteger())}}},{key:"getSignatureBitmap",value:function(){var e=this.engineField;if(!(e.GetType().value===l.fS.Sign))return null;var t=e.GetBitmap();try{return t.IsEmpty()?null:this.bitmapParseBlob(t)}finally{t.delete()}}},{key:"setLockAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.engine,r=new n.WStringArray;0!=e?(t.forEach((function(e){r.Add((0,u.Dp)(n,e))})),this.engineField.SetFieldMDPActionFields({value:e},r)):this.engineField.GetDict().RemoveAt((0,u.n5)(n,"Lock"))}},{key:"bitmapParseBlob",value:function(e){var t=this.engine,n="";if(!e.IsEmpty()){e.ConvertFormat(t.DIBFormat.e_DIBArgb);var r,i=e.GetWidth(),a=e.GetHeight(),o=e.GetBuffer(),s=a*e.GetPitch(),u=o+s;r=t.HEAPU8.buffer.slice?t.HEAPU8.buffer.slice(o,u):new Uint8Array(t.HEAPU8.buffer,o,s).buffer;var c=new Uint8Array(r),l=0,d=0,f=e.GetPitch();for(l=0;l<a;l++)for(d=0;d<i;d++){var h,g=l*f;h=[c[4*d+2+g],c[4*d+g]],c[4*d+g]=h[0],c[4*d+2+g]=h[1]}n={start:o,size:s,width:i,height:a,buffer:r}}return n}},{key:"VerifySignature",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.engine,r={},i=new n.Signature(this.engineField),o=i.GetName().toString();try{var s=(0,d.ew)(n,this.certificateInfo,e,this.JR);if(i.StartVerify(s,0).Continue(),t){var u=i.GetVerifyInfo(),c={isIllegalESignCNBehavior:this.isESignCNSignature().isIllegalESignCNBehavior},l=(0,d.O1)(n,u,c,e.trustedCertificateList,this.JR);r[o]=(0,a._)({},l)}}catch(e){r[o]={verifyException:!0},console.log(e)}return i.delete(),r}},{key:"isESignCNSignature",value:function(){return!1}},{key:"verifySignatureLtv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.is_verify_signature,n=void 0===t||t,r=e.use_expired_tst,i=void 0===r||r,a=e.ignore_doc_info,o=void 0!==a&&a,s=e.time_type,u=void 0===s?0:s,c=e.isCertTrusted,l=e.isCertTrustedRoot,f=e.trustedCertificateList,h=void 0===f?[]:f,g=e.isCertifiedMap,p=void 0===g?{}:g,v={},_=this.engine,m=_.TimeType.values[u]||_.TimeType.e_SignatureCreationTime,y=this.jrDoc.doc;try{var S=new _.LTVVerifier(y,n,i,o,m),b=(0,d.dX)(_,c,l,h);S.SetTrustedCertStoreCallback(b),S.SetVerifyMode(_.VerifyMode.e_VerifyModeAcrobat);var D=S.VerifySignature(this.engineField);(0,d.zF)(v,p,_,D),S=null}catch(e){var P=_.getErrorCode(e);console.error(P)}return v}},{key:"getElementFromInheritedElement",value:function(e,t,n){var r,i=(0,u.n5)(e,"Parent"),a=t.GetElement(i);return a&&a.GetType()===e.PDFObjectType.e_Reference&&a.GetDirectObject()&&a.GetDirectObject().GetDict()&&(r=a.GetDirectObject().GetDict().GetElement(n)),r}},{key:"isSignatureFieldInVisible",value:function(e,t,n){var r=t.GetDict(),i=((0,u.n5)(e,"Parent"),(0,u.n5)(e,"Rect"));if(r){var a=r.GetElement(i);if(a||(a=this.getElementFromInheritedElement(e,r,i)),a&&a.GetRect().IsEmpty())return!1}return this.isDocTimeStamp(e,r)||n}},{key:"isDocTimeStamp",value:function(e,t){var n=this.getVDict(e,t);if(n){(0,u.n5)(e,"Parent");var r=(0,u.n5)(e,"Type"),i=n.GetElement(r);if(i||(i=this.getElementFromInheritedElement(e,n,r)),i)return"DocTimeStamp"===i.GetString().toString()}return!1}},{key:"getVDict",value:function(e,t){var n=null;if(!t)return n;var r=(0,u.n5)(e,"V");if(t.HasKey(r))n=t.GetElement(r).GetDict();else{var i=t.GetElement((0,u.n5)(e,"Parent"));i&&i.GetDirect()&&i.GetDirect().GetDict()&&(n=i.GetDirect().GetDict().GetElement(r).GetDict())}return n}},{key:"getFileSizeOfSignedVersion",value:function(e,t){if(!e.IsSigned())return 0;var n=0;try{n=e.GetFileSizeOfSignedVersion()}catch(e){n=0;var r=t.getErrorCode(e);console.error(r)}return n}},{key:"getCertificateInfoFromBFS",value:function(e,t,n){var r={};try{var i=(0,d.F5)(e,t,n,this.JR);if(Object.keys(i).length){var a=i[Object.keys(i)[0]],o=a.map((function(e){return e.issuerChain[0]})),s=a.map((function(e){return e.issuerInfo})).join(";"),u=a.map((function(e){return e.subjectChain[0]})),c=a.map((function(e){return e.subjectInfo})).join(";"),l=a.map((function(e){return e.serialNumber})).join(";"),f=a.map((function(e){return e.validPeriodFrom})).join(";"),h=a.map((function(e){return e.validPeriodTo})).join(";");o.forEach((function(e,t){e.level=t,e.levelString="0_".concat(t)})),u.forEach((function(e,t){e.level=t,e.levelString="0_".concat(t),e.isLeafNode=t===u.length-1})),r={issuerChain:o,issuerInfo:s,subjectChain:u,subjectInfo:c,serialNumber:l,validPeriodFrom:f,validPeriodTo:h}}}catch(e){console.warn(e),r={}}return r}},{key:"getCertificateInfo",value:function(e,t,n){if(!e.IsSigned()||!this.fileSizeOfSignedVersion)return{};var r={};try{for(var i=e.GetCerts(),a=i.GetSize(),o=this.jrDoc.doc.GetDSSCerts(),s=o.GetSize(),u=new t.StringArray,c=0;c<a-1;c++)u.Add(i.GetAt(c));if(s>0)for(var l=0;l<s;l++)u.Add(o.GetAt(l));var d=n.map((function(e){return e.uniqueSerialNumber}));this.JR.getAllTrustCert(d).forEach((function(e){return u.Add(e.cert)})),r=this.getCertificateInfoFromBFS(t,u,i.GetAt(a-1))}catch(e){r={certificateException:!0};var f=t.getErrorCode(e);console.error(f)}return r}},{key:"GetHashAlgAndSignAlg",value:function(e,t){var n,r;if(!e.IsSigned())return{hashAlg:n,signAlg:r};try{n=e.GetHashAlg().toString(),r=e.GetSignAlg().toString()}catch(e){n="",r="";var i=t.getErrorCode(e);console.error(i)}return{hashAlg:n,signAlg:r}}},{key:"getDigitalSignatureInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},n=this.engine;try{var r=new n.Signature(this.engineField);t.certificateInfo=this.getCertificateInfo(r,n,e),this.certificateInfo=t.certificateInfo;var i=this.GetHashAlgAndSignAlg(r,n),a=i.hashAlg,s=i.signAlg;t.hashAlg=a,t.signAlg=s;var u=this.isESignCNSignature().isESignCNSignature;if(t.isESignCNSignature=u,u){var c=this.jrDoc;return Promise.all([c.getByteRangeHash(r),c.getAfterSignFileHash(r)]).then((function(e){var n=(0,o._)(e,2),i=n[0],a=n[1];return t.byteRnageHash=i,t.afterSignHash=a,r=null,t}))}return r=null,t}catch(e){var l=n.getErrorCode(e);console.error(l)}}},{key:"clearSignature",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1,n=this.engine;try{this.VerifySignature(e,!1);var r=new n.Signature(this.engineField);t=r.ClearSignedData(),r=null}catch(e){var i=n.getErrorCode(e);console.error(i)}return t}},{key:"setSignatureBitmap",value:function(e){var t=this.engine,n=this.engineField;if(n.GetType().value!==l.fS.Sign)return null;var r;this.jrDoc;r="string"==typeof e?this.JR.createReaderCallback(e):this.JR.createReaderCallbackByBuffer(e);var i=new t.Image(r).GetFrameBitmap(0);return n.SetBitmap2AP(i),n.SetAppearanceFlags(128),n.GenerateSignAppearance(),n.ResetSignAppearance(),!0}}]),e}()},9006:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(6448),i=n(4375),a=n(6721),o=n(7582),s=n(1453),u=n(3883),c=n(6544),l=function(){function e(t,n,r,a){(0,i._)(this,e),this.jrDoc=t,this.engineForm=n,this.engine=r,this.JR=a,this.fields={},this.changedWidget={}}return(0,a._)(e,[{key:"destroy",value:function(){this.engine=null,this.JR=null;var e=this.fields;for(var t in e){var n=e[t];0!==Object.keys(n).length&&n.destroy(),e[t]=null}this.fields=null,this.engineForm.delete(),this.engineForm=null}},{key:"removeField",value:function(e){var t=this.fields[e];0!==Object.keys(t).length&&t.destroy(),this.fields[e]=null,delete this.fields[e]}},{key:"getField",value:function(e){return this.fields[e]}},{key:"addJRField",value:function(e,t,n){var r=new s.Z(this.jrDoc,this.engineForm,e,this.engine,this.JR);return this.fields[t||n]=r,r}},{key:"setFieldsValue",value:function(e,t){for(var n in e)this.fields[n].setValue(e[n],t)}},{key:"getFieldsValue",value:function(){var e={};for(var t in this.fields)e[t]=this.fields[t].getValue();return e}},{key:"toJson",value:function(){if(this.json)try{if(this.json.fields.length>0)return Promise.resolve(this.json)}finally{delete this.json}for(var e=this.engineForm,t=e.NeedConstructAppearances(),n=(0,u.Dp)(this.engine,""),r=e.GetFieldCount(n),i=[],a=0;a<r;a++)try{var o=e.GetField(a,n);if(o.IsEmpty()){i.push({}),this.fields[a]={};continue}7==o.GetType().value&&(o=new this.engine.Signature(o));var c=new s.Z(this.jrDoc,e,o,this.engine,this.JR),l=c.toJson(a);this.fields[o.GetName().toString()||a]=c,i.push(l)}catch(e){i.push({}),this.fields[a]={}}return Promise.all(i).then((function(n){for(var r=e.GetFieldsInCalculationOrder(),i=[],a=0;a<r.GetSize();a++){var o=r.GetAt(a);i.push(o.GetName().toString())}r.delete();var s=e.GetAlignment().value;return{needConstructAppearances:t,fields:n,calculationOrder:i,alignment:s}}))}},{key:"afterRemovePage",value:function(e){var t=this.fields;for(var n in t){var r=t[n];0!==Object.keys(r).length&&r.destroy(),t[n]=null}this.fields={};for(var i=this.engineForm,a=(0,u.Dp)(this.engine,""),o=i.GetFieldCount(a),c=0;c<o;c++)try{var l=i.GetField(c,a);if(l.IsEmpty()){this.fields[c]={};continue}7==l.GetType().value&&(l=new this.engine.Signature(l));var d=new s.Z(this.jrDoc,i,l,this.engine,this.JR);this.fields[l.GetName().toString()||c]=d}catch(e){this.fields[c]={}}}},{key:"updateFormControl",value:function(e,t,n,r){var i=this.engineForm.GetDocument(),a=i.GetIndirectObject(t).GetDict(),o=(0,u.n5)(this.engine,"F"),s=0;a.GetElement(o)&&(s=a.GetElement(o).GetInteger());var l=this.engine;switch(this.changedWidget[t]=1,n){case"exportValue":var f=this.getControlByObjNum(e,t);f.SetExportValue((0,u.Dp)(l,r));for(var h=f.GetField(),g=h.GetControlCount(),p=[],v=0;v<g;v++){var _=h.GetControl(v);p.push(_.GetExportValue().toString())}return p;case"display":switch(r){case 0:s&=-2,s&=-3,s&=-33,s|=4;break;case 1:s&=-2,s&=-33,s|=6;break;case 2:s&=-2,s&=-5,s&=-3,s&=-33;break;case 3:s|=32,s|=4,s&=-3}a.SetAtInteger(o,s);break;case"hidden":r?s|=2:s&=-3,a.SetAtInteger(o,s);break;case"fillColor":case"borderColor":d(l,a,n,r);break;case"action":if(!r.data)break;var m=this.JR.actionManager.create(i,r.data.type);-1==r.trigger?a.SetAtReference((0,u.n5)(l,"A"),m.GetDict(),i):this.addAAToDict(a,m,r),this.JR.actionManager.get(m,i,this.JR).create(r.data);break;case"DA":var y=this.getControlByObjNum(e,t);if(!y)return;var S,b=JSON.parse(r),D=void 0!==b.fontName?l.DefAPFlags.e_FlagFont.value:0,P=void 0!==b.textColor?l.DefAPFlags.e_FlagTextColor.value:0,I=void 0!==b.textSize?l.DefAPFlags.e_FlagFontSize.value:0;if(b.fontName){var A=(0,c.T2)(b.fontName);if(null!=A){var w=[l.StandardID.e_StdIDCourier,l.StandardID.e_StdIDCourierB,l.StandardID.e_StdIDCourierBI,l.StandardID.e_StdIDCourierI,l.StandardID.e_StdIDHelvetica,l.StandardID.e_StdIDHelveticaB,l.StandardID.e_StdIDHelveticaBI,l.StandardID.e_StdIDHelveticaI,l.StandardID.e_StdIDTimes,l.StandardID.e_StdIDTimesB,l.StandardID.e_StdIDTimesBI,l.StandardID.e_StdIDTimesI,l.StandardID.e_StdIDSymbol,l.StandardID.e_StdIDZapfDingbats];S=new this.engine.Font(w[A])}else{var C=this.JR.getFontInfoByFontName(b.fontName),k=C.charset,E=C.style;S=new this.engine.Font((0,u.Dp)(l,b.fontName),E,k,0)}}else S=new this.engine.Font(0);var G=new this.engine.DefaultAppearance(D|P|I,S,b.textSize?b.textSize:0,b.textColor?b.textColor:0);try{y.SetDefaultAppearance(G)}catch(e){return isNaN(e)||(e=l.getErrorCode(e)),void console.warn(e)}}}},{key:"getControlByObjNum",value:function(e,t){for(var n,r=this.fields[e].engineField,i=r.GetControlCount(),a=0;a<i;a++){var o=r.GetControl(a);if(t==o.GetDictionaryObjectNumber()){n=o;break}}return n}},{key:"addAAToDict",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.engine,a=this.engineForm;a.GetDocument();if(this.jrDoc.addAA(e,t,n,r),10===n.trigger){for(var o=a.GetFieldsInCalculationOrder(),s=(0,u.Dp)(i,n.field),c=a.GetField(0,s),l=0;l<o.GetSize();l++){if(o.GetAt(l).GetName().toString()==c.GetName().toString())return}o.Add(c),a.SetFieldsInCalculationOrder(o)}}},{key:"hasWidgetChanged",value:function(e){var t=this.changedWidget[e];return delete this.changedWidget[e],t}},{key:"copyControls",value:function(e,t,n){var r=this,i=this.engine,a=this.engineForm,o=(a.GetDocument(),i.TriggerEvent,[]);return n.forEach((function(e){var n=r.getField(e.fieldName),s=n.engineField,c=e.rect,l=c.left,d=c.right,f=c.top,h=c.bottom,g=new i.CFX_FloatRect(l,h,d,f),p=r.getWidget(s,e.srcObjectNumber);if(p){var v=a.AddControl(t.page,(0,u.Dp)(i,e.fieldName),s.GetType(),g);"boolean"==typeof e.isChecked&&v.SetChecked(e.isChecked),o.push(n);var _=v.GetWidget();r.copyWidget(p,_)}})),t.update(),Promise.all(o.map((function(e){return e.getControlsJson()}))).then((function(e){return o.map((function(t,n){return{fieldName:t.engineField.GetName().toString(),controlJsons:e[n]}}))}))}},{key:"getWidget",value:function(e,t){for(var n=0,r=e.GetControlCount();n<r;n++){if(e.GetControl(n).GetDictionaryObjectNumber()==t)return e.GetControl(n).GetWidget()}}},{key:"copyWidget",value:function(e,t){var n=this.engine,r=e.GetMKRotation();4!=r.value&&t.SetMKRotation(r);var i=e.GetMKBorderColor();i&&t.SetMKBorderColor(i),(i=e.GetMKBackgroundColor())&&t.SetMKBackgroundColor(i);var a=e.GetMKNormalCaption();a.toString().length&&t.SetMKNormalCaption(a),(a=e.GetMKRolloverCaption()).toString().length&&t.SetMKRolloverCaption(a),(a=e.GetMKDownCaption()).toString().length&&t.SetMKDownCaption(a);var o=e.GetMKNormalIconBitmap();if(o.IsEmpty()||t.SetMKNormalIconBitmap(o),(o=e.GetMKRolloverIconBitmap()).IsEmpty()||t.SetMKRolloverIconBitmap(o),(o=e.GetMKDownIconBitmap()).IsEmpty()||t.SetMKDownIconBitmap(o),1===e.GetField().GetType().value){var s=e.GetMKIconFit();void 0!==s.scale_way_type&&s.scale_way_type!==n.ScaleWayType.e_ScaleWayNone||(s.scale_way_type=n.ScaleWayType.e_ScaleWayAlways),t.SetMKIconFit(s)}t.SetMKIconCaptionRelation(e.GetMKIconCaptionRelation());var u=e.GetAppearanceState();u.toString().length&&t.SetAppearanceState(u),t.SetBorderInfo(e.GetBorderInfo());var c=e.GetControl(),l=t.GetControl();l.SetDefaultAppearance(c.GetDefaultAppearance()),t.SetFlags(e.GetFlags());var d=c.GetAlignment();void 0!==d&&l.SetAlignment(d);var f=e.GetAction();f.IsEmpty()||t.SetAction(f);for(var h=new n.AdditionalAction.CreateFromAnnot(e),g=new n.AdditionalAction.CreateFromAnnot(t),p=11;p<17;p++){var v=n.TriggerEvent.values[p],_=h.GetAction(v);_.IsEmpty()||g.SetAction(v,_)}t.ResetAppearanceStream()}},{key:"duplicateWidget",value:function(e,t,n){var i=this;return(0,r._)((function(){var r,a,s,c,l,d,f,h,g;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return r=i.getField(t),a=r.engineField,s=i.getWidget(a,n),c=s.GetPage().GetIndex(),[4,i.jrDoc.getPageByIndex(c)];case 1:return[4,o.sent().getHeight()];case 2:return l=o.sent(),d=s.GetRect(),f=d.right-d.left,h=d.top-d.bottom,g=l-d.top,e.forEach((function(e){a.GetControlCount(e.page);var n=e.page.GetHeight(),r=d.left,o=n-g,c=o-h,l=r+f,p=new i.engine.CFX_FloatRect(r,c,l,o),v=i.engineForm.AddControl(e.page,(0,u.Dp)(i.engine,t),a.GetType(),p).GetWidget();i.copyWidget(s,v),e.update()})),[2,r.getControlsJson()]}}))}))()}},{key:"duplicateField",value:function(e,t,n,r,i,a){var o=this,s=this.engine,c=this.engineForm,l=this.jrDoc,d=this.getField(e),f=this.getWidget(d.engineField,n),h=(0,u.Dp)(s,e);return a.map((function(e){var n=e.left,r=e.right,i=e.top,a=e.bottom,o=new s.CFX_FloatRect(n,a,r,i);return c.AddControl(t.page,h,d.engineField.GetType(),o)})).map((function(e){var t=e.GetWidget();return o.copyWidget(f,t),e})).splice(0,0,d.engineField.GetControl(0)),delete l.form,this.destroy(),t.update(),l}},{key:"setCO",value:function(e){var t=this.engine,n=this.engineForm,r=new t.FieldArray;e.forEach((function(e){var i=(0,u.Dp)(t,e);r.Add(n.GetField(0,i))})),n.SetFieldsInCalculationOrder(r)}}]),e}(),d=function(e,t,n,r){try{n="fillColor"==n?"BG":"BC";var i=t.GetElement((0,u.n5)(e,"MK"));if(!i)return void console.error("no MK Dictionary");i=i.GetDict();var a=(0,u.n5)(e,n);if(0===r)return void i.RemoveAt(a);var o=i.GetElement(a);if(o)for(var s=(o=o.GetArray()).GetElementCount(),c=[e.PDFObject.CreateFromFloat(((16711680&r)>>16)/256),e.PDFObject.CreateFromFloat(((65280&r)>>8)/256),e.PDFObject.CreateFromFloat((255&r)/256)],l=0;l<=s-1;l++)c[l]&&o.SetAt(l,c[l]);else(o=e.PDFArray.Create()).AddFloat(((16711680&r)>>16)/256),o.AddFloat(((65280&r)>>8)/256),o.AddFloat((255&r)/256);i.SetAt(a,o)}catch(e){console.error(e)}};const f=l},2012:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4375),i=n(6721),a=n(3883),o=function(){function e(t){(0,r._)(this,e),this.pdfDoc=t,this.doc=t.doc,this.engine=t.engine,this.c_articles=new t.engine.Articles(this.doc),this.articles=this.getArticles()}return(0,i._)(e,[{key:"destroy",value:function(){this.c_articles.delete(),this.c_articles=null,this.articles=null}},{key:"getArticles",value:function(){this.engine;for(var e=this.c_articles.GetArticles(),t=e.GetSize(),n=[],r=0;r<t;r++){var i=e.GetAt(r),a=new s(this.pdfDoc,i,r);n.push(a)}return n}},{key:"toJson",value:function(){for(var e=this.articles,t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.toJson())}return t}},{key:"updateBeadRect",value:function(e,t,n){return this.getThreadInfo(e).getBeadInfo(t).update({rect:n})}},{key:"getThreadInfo",value:function(e){var t,n=0;for(this.engine;n<this.articles.length;n++){var r=this.articles[n];if(r.c_thread.GetDict().GetObjNum()===e){(t=r).index=n;break}}return t}},{key:"insertThread",value:function(e){var t=e.author,n=e.keywords,r=e.subject,i=e.title,a=new this.engine.Thread(this.doc),o=this.articles.length,u=this.c_articles.InsertArticle(o,a);if(u){var c=new s(this.pdfDoc,a,o);u=c.update({author:t,keywords:n,subject:r,title:i}),this.articles.push(c)}return u}},{key:"updateThread",value:function(e){return this.getThreadInfo(e.objNum).update(e)}},{key:"removeThread",value:function(e){var t=this.getThreadInfo(e);if(!t)return!1;var n=t.index,r=(t.thread,this.c_articles.RemoveArticle(n));return r&&this.articles.splice(n,1),r}},{key:"mergeThread",value:function(e,t){var n=this.getThreadInfo(e),r=this.getThreadInfo(t);return n.children.reverse().forEach((function(e){var t=e.toJson(),n=t.pageIndex,i=t.rect;r.insertBead(n,i,0)})),r.toJson()}},{key:"insertBead",value:function(e,t,n,r){return this.getThreadInfo(t).insertBead(e,n,r)}},{key:"removeBead",value:function(e,t){return this.getThreadInfo(e).removeBead(t)}}]),e}(),s=function(){function e(t,n,i){(0,r._)(this,e),this.pdfDoc=t,this.doc=t.doc,this.engine=t.engine,this.c_thread=n,this.children=this.getChildren(),this.index=i}return(0,i._)(e,[{key:"getChildren",value:function(){for(var e=this.c_thread.GetBeads(),t=e.GetSize(),n=[],r=0;r<t;r++){var i=e.GetAt(r),a=new u(this,i,r);n.push(a)}return n}},{key:"getThreadInfoJson",value:function(){var e=this.c_thread,t=e.GetDict().GetObjNum(),n=e.GetThreadInfo();return{objNum:t,author:n.author.toString(),keywords:n.keywords.toString(),subject:n.subject.toString(),title:n.title.toString()}}},{key:"toJson",value:function(){var e=this.getThreadInfoJson();return e.no=this.index+1,e.children=this.children.map((function(e){return e.toJson()})),e}},{key:"update",value:function(e){var t=e.author,n=e.keywords,r=e.subject,i=e.title,o=this.engine,s=this.c_thread,u=s.GetThreadInfo();void 0!==t&&(u.author=(0,a.Dp)(o,t)),void 0!==n&&(u.keywords=(0,a.Dp)(o,n)),void 0!==r&&(u.subject=(0,a.Dp)(o,r)),void 0!==i&&(u.title=(0,a.Dp)(o,i));var c=s.SetThreadInfo(u);return c?this.getThreadInfoJson():c}},{key:"getBeadInfo",value:function(e){var t,n=0;for(this.engine;n<this.children.length;n++){var r=this.children[n];if(r.c_bead.GetDict().GetObjNum()===e){(t=r).index=n;break}}return t}},{key:"insertBead",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.left,r=t.bottom,i=t.right,a=t.top,o=arguments.length>2?arguments[2]:void 0,s=this.engine,c=this.c_thread,l=new s.Bead(this.doc);void 0===o&&(o=this.children.length);var d=new u(this,l,o),f=d.update({pageIndex:e,rect:{left:n,bottom:r,right:i,top:a}}),h=c.InsertBead(o,l);return h&&(this.children.splice(o,0,d),this.children.forEach((function(e,t){e.index=t}))),h?f:h}},{key:"removeBead",value:function(e){var t=this.getBeadInfo(e);if(!t)return!1;var n=t.index,r=this.c_thread.RemoveBead(n);return r&&(this.children.splice(n,1),this.children.forEach((function(e,t){e.index=t}))),r}}]),e}(),u=function(){function e(t,n,i){(0,r._)(this,e);var a=t.pdfDoc;this.parentThread=t,this.pdfDoc=a,this.doc=a.doc,this.engine=a.engine,this.c_bead=n,this.index=i}return(0,i._)(e,[{key:"toJson",value:function(){var e=this.c_bead,t=e.GetBeadInfo(),n=[this.parentThread.index+1,this.index+1].join("-"),r=e.GetDict().GetObjNum(),i=t.page_index,a=t.rect;return{objNum:r,no:n,pageIndex:i,rect:{left:a.left,right:a.right,bottom:a.bottom,top:a.top}}}},{key:"update",value:function(e){var t=e.pageIndex,n=e.rect,r=this.engine,i=this.c_bead,a=i.GetBeadInfo();if(void 0!==t&&(a.page_index=t),void 0!==n){var o=n.left,s=n.bottom,u=n.right,c=n.top,l=r.CFX_FloatRect;a.rect=new l(o,s,u,c)}var d=i.SetBeadInfo(a);return d?this.toJson():d}}]),e}();const c=o},6450:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(4375),i=n(6721),a=n(5136),o=n(5497),s=n(2095),u=n(6550),c=n(8991),l=n(498),d=n(4020),f=n(3883);const h=function(){function e(t,n,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:n;(0,r._)(this,e),this.doc=t,this.engine=t.engine,this.id=n,this.appBookmarkId=u?n:c,this.c_bookmark=i,this.c_doc=a,this.deep=o,this.parent=s,this.children=[],this.isOldVersion=u,this.updateInfo()}return(0,i._)(e,[{key:"getFormatedColor",value:function(){var e=this.c_bookmark;if(e.GetDict().HasKey((0,f.n5)(this.engine,"C"))){var t=e.GetColor();if(0!==t)return"#"+t.toString(16).substr(2)}}},{key:"updateInfo",value:function(){var e=this.c_bookmark;this.title=e.GetTitle().toString(),this.color=this.getFormatedColor();var t=this.c_bookmark.GetStyle();this.isItalic=!!(1&t),this.isBold=!!(2&t),this.dst=e.GetDestination(),this.dst.IsEmpty()?(this.pageIndex=null,this.pageTop=0,this.pageLeft=0,this.zoomMode=this.engine.ZoomMode.e_ZoomFitHorz,this.zoomFactor=0):(this.pageIndex=this.dst.GetPageIndex(this.c_doc),this.pageTop=this.dst.GetTop(),this.pageLeft=this.dst.GetLeft(),this.zoomMode=this.dst.GetZoomMode(),this.zoomFactor=this.dst.GetZoomFactor())}},{key:"updateDestination",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dst||this.c_bookmark.GetDestination();this.dst=e,e.IsEmpty()?(this.pageIndex=null,this.pageTop=0,this.pageLeft=0,this.zoomMode=this.engine.ZoomMode.e_ZoomFitHorz,this.zoomFactor=0):(this.pageIndex=e.GetPageIndex(this.c_doc),this.pageTop=e.GetTop(),this.pageLeft=e.GetLeft(),this.zoomMode=e.GetZoomMode(),this.zoomFactor=e.GetZoomFactor())}},{key:"destroy",value:function(){this.dst.delete(),this.c_bookmark.delete(),this.children.forEach((function(e){return e.destroy()})),this.children=null,this.c_destination=null,this.c_doc=null,this.engine=null,this.c_bookmark=null}},{key:"removeChild",value:function(e){var t=this.children;for(var n in t){var r=t[n];if(r.id==e||r.appBookmarkId==e)return t.splice(n,1),r;var i=r.removeChild(e);if(i)return i}}},{key:"insert",value:function(t){var n,r=t.title,i=t.destination,a=t.color,s=t.style,u=t.newBookmarkId,c=this.engine.BookmarkPosition,l=c.values[t.relationship],d=new this.engine.WString(r);switch(l){case c.e_PosFirstChild:case c.e_PosPrevSibling:case c.e_PosNextSibling:n=this.c_bookmark.Insert(d,l);break;case c.e_PosLastChild:this.getChildren();var f=this.children,h=f[f.length-1];n=h?h.c_bookmark.Insert(d,c.e_PosNextSibling):this.c_bookmark.Insert(d,c.e_PosFirstChild);break;case c.e_PosFirstSibling:n=this.parent.c_bookmark.Insert(d,c.e_PosFirstChild);break;case c.e_PosLastSibling:this.parent.getChildren();var g=this.parent.children,p=g[g.length-1];n=p?p.c_bookmark.Insert(d,c.e_PosNextSibling):this.parent.c_bookmark.Insert(d,c.e_PosFirstChild)}(0,o.Z)(d);var v={destination:i,type:"TypeGoto"};"ZoomXYZ"===i.zoomMode&&(!isFinite(i.zoomFactor)||i.zoomFactor<0)&&(i.zoomFactor=0);var _=this.doc.JR.actionManager,m=_.create(this.c_doc,v.type);n.SetAction(m),_.get(m,this.c_doc,this.doc.JR).create(v);var y=this.deep,S=this.parent;l!==c.e_PosFirstChild&&l!==c.e_PosLastChild||(y=this.deep+1,S=this);var b=n.GetDict().GetObjNum(),D=b;"number"==typeof u&&(D=u);var P=new e(this.doc,b,n,this.c_doc,y,S,this.isOldVersion,D),I=S.children.indexOf(this);switch(l){case c.e_PosFirstChild:this.children.unshift(P);break;case c.e_PosLastChild:this.children.push(P);break;case c.e_PosPrevSibling:S.children.splice(I,0,P);break;case c.e_PosNextSibling:S.children.splice(I+1,0,P);break;case c.e_PosFirstSibling:S.children.unshift(P);break;case c.e_PosLastSibling:S.children.push(P)}var A={};return a>=0&&(A.color=a),"object"!=typeof s&&"number"!=typeof s||(A.style=s),Object.keys(A).length>0&&P.setProperty(A),P}},{key:"getBookmarkById",value:function(e){if(e==this.id||e===this.appBookmarkId)return this;var t=this.children;for(var n in t){var r=t[n].getBookmarkById(e);if(r)return r}}},{key:"remove",value:function(){var e=this.c_doc.RemoveBookmark(this.c_bookmark);return this.destroy(),e}},{key:"getProperties",value:function(){var e=this.gsdkZoomModeToJsZoomMode(this.zoomMode);return{title:this.title,color:this.color,style:{bold:this.isBold,italic:this.isItalic},destination:{left:this.pageLeft,top:this.pageTop,pageIndex:this.pageIndex,zoomMode:e,zoomFactor:this.zoomFactor}}}},{key:"gsdkZoomModeToJsZoomMode",value:function(e){var t,n=this.engine.ZoomMode;return(t={},(0,a._)(t,n.e_ZoomFitBBox.value,d.jI.ZoomFitBBox),(0,a._)(t,n.e_ZoomFitBHorz.value,d.jI.ZoomFitBHorz),(0,a._)(t,n.e_ZoomFitBVert.value,d.jI.ZoomFitBVert),(0,a._)(t,n.e_ZoomFitHorz.value,d.jI.ZoomFitHorz),(0,a._)(t,n.e_ZoomFitPage.value,d.jI.ZoomFitPage),(0,a._)(t,n.e_ZoomFitRect.value,d.jI.ZoomFitRect),(0,a._)(t,n.e_ZoomFitVert.value,d.jI.ZoomFitVert),(0,a._)(t,n.e_ZoomXYZ.value,d.jI.ZoomXYZ),t)[e.value]}},{key:"setProperty",value:function(e){var t=this.getProperties();if("object"==typeof e.style){var n=e.style,r=n.italic,i=n.bold,a=r?l.ZN.italic:l.ZN.normal,o=i?l.ZN.bold:l.ZN.normal;e.style=a|o}for(var s in e)if("title"==s){var c=new this.engine.WString(e[s]);this.c_bookmark.SetTitle(c),c.delete(),this.title=this.c_bookmark.GetTitle().toString()}else if("style"==s&&"number"==typeof e[s]){this.c_bookmark.SetStyle(e[s]);var d=this.c_bookmark.GetStyle();this.isItalic=!!(1&d),this.isBold=!!(2&d)}else if("color"==s&&e[s]>=0)this.c_bookmark.SetColor(e[s]),this.color=this.getFormatedColor();else if("destination"==s){var f=e[s],h=u.Z.create(this.engine,this.c_doc,f);this.c_bookmark.SetDestination(h),this.updateDestination(h)}return{oldProperties:t,newProperties:this.getProperties()}}},{key:"toJson",value:function(){if(this.c_bookmark.IsEmpty())return[];var t=[];if(this.children=[],this.c_bookmark.HasChild())for(var n=this.c_bookmark.GetFirstChild();!n.IsEmpty();){var r=new e(this.doc,n.GetDict().GetObjNum(),n,this.c_doc,this.deep+1,this,this.isOldVersion);n=n.GetNextSibling(),t.push(r.toJson()),this.children.push(r)}return{id:this.id,deep:this.deep,title:this.title,color:this.color,isBold:this.isBold,isItalic:this.isItalic,children:t,page:this.pageIndex,top:this.pageTop,left:this.pageLeft}}},{key:"getInfo",value:function(){return{id:this.appBookmarkId,deep:this.deep,title:this.title,color:this.color,style:{bold:this.isBold,italic:this.isItalic},page:this.pageIndex,top:this.pageTop,left:this.pageLeft,zoomFactor:this.zoomFactor,zoomMode:this.gsdkZoomModeToJsZoomMode(this.zoomMode),hasChild:this.c_bookmark.HasChild()}}},{key:"getChildren",value:function(){var t=[];if(this.c_bookmark.IsEmpty())return t;if(this.c_bookmark.HasChild()){for(var n=this.children.reduce((function(e,t){return e.set(t.id,t),e}),new Map),r=[],i=this.c_bookmark.GetFirstChild();!i.IsEmpty();){var a=i.GetDict().GetObjNum(),o=n.get(a);o?(o.updateInfo(),n.delete(a)):o=new e(this.doc,i.GetDict().GetObjNum(),i,this.c_doc,this.deep+1,this),i=i.GetNextSibling(),t.push(o.getInfo()),r.push(o)}n.forEach((function(e){e.destroy()})),this.children=r}return t}},{key:"moveTo",value:function(e,t){if(this.isOldVersion){var n=e.c_bookmark;return this.c_bookmark.MoveTo(n,this.engine.BookmarkPosition.values[t])}var r,i=e.parent,a=this.engine.BookmarkPosition,o=e.c_bookmark;if(a.values[t]===a.e_PosLastSibling){i.getChildren();var s=i.children,u=s[s.length-1];r=u?this.c_bookmark.MoveTo(u.c_bookmark,a.e_PosNextSibling):this.c_bookmark.MoveTo(o,a.e_PosFirstChild)}else r=this.c_bookmark.MoveTo(o,a.values[t]);if(!r)return!1;switch(this._removeFromParentChildrenList(),a.values[t]){case a.e_PosFirstChild:0===e.children.length?e.getChildren():e.children.unshift(this),this.parent=e;break;case a.e_PosLastChild:0===e.children.length?e.getChildren():e.children.push(this),this.parent=e;break;case a.e_PosFirstSibling:case a.e_PosLastSibling:case a.e_PosPrevSibling:case a.e_PosNextSibling:i._insertChildRelativeTo(e,this,t)}return!0}},{key:"_indexOfChildId",value:function(e){return this.children.findIndex((function(t){return t.id===e||t.appBookmarkId===e}))}},{key:"_removeFromParentChildrenList",value:function(){var e=this.parent,t=e._indexOfChildId(this.id);-1!==t&&e.children.splice(t,1)}},{key:"_insertChildRelativeTo",value:function(e,t,n){0===this.children.length&&this.getChildren();var r=this.engine.BookmarkPosition;t._removeFromParentChildrenList();var i=this._indexOfChildId(e.id);if(-1===i)throw new Error("Cannot insert bookmark that relative to ".concat(e.id,",  it's not child of ").concat(this.id));switch(r.values[n]){case r.e_PosFirstSibling:this.children.unshift(t);break;case r.e_PosLastSibling:this.children.push(t);break;case r.e_PosPrevSibling:this.children.splice(i,0,t);case r.e_PosNextSibling:this.children.splice(i+1,0,t);break;default:return}t.parent=this}},{key:"getDestination",value:function(){var e=new this.engine.String("A");if(!this.c_bookmark.GetDict().HasKey(e)){var t=this.c_bookmark.GetDestination();return t.IsEmpty()?void 0:{destination:new u.Z(t,this.doc,this.engine).toJson(),objNumber:null,subAction:[],subActionCount:0,type:"TypeGoto"}}(0,o.Z)(e)}},{key:"setDestination",value:function(e){var t=this.c_bookmark.GetDict(),n=new this.engine.String("A");t.HasKey(n)&&t.RemoveAt(n),(0,o.Z)(n);var r=u.Z.create(this.engine,this.c_doc,e.destination);return this.c_bookmark.SetDestination(r),this.updateDestination(r),{destination:new u.Z(r,this.doc,this.engine).toJson(),objNumber:null,subAction:[],subActionCount:0,type:"TypeGoto"}}},{key:"getAction",value:function(){var e=new this.engine.String("Dest");if(!this.c_bookmark.GetDict().HasKey(e)){var t=this.c_bookmark.GetAction();return t.IsEmpty()?void 0:this.doc.JR.actionManager.get(t,this.doc,this.doc.JR).toJson()}(0,o.Z)(e)}},{key:"setAction",value:function(e){var t=this.doc.JR.actionManager,n=t.create(this.c_doc,e.type),r=this.c_bookmark.GetAction();if(r.IsEmpty())this.c_bookmark.SetAction(n);else{var i=r.GetSubActionCount();r.InsertSubAction(i,n),this.c_bookmark.SetAction(r)}var a=this.c_bookmark.GetDict(),s=new this.engine.String("Dest");a.HasKey(s)&&a.RemoveAt(s),(0,o.Z)(s),t.get(n,this.c_doc,this.doc.JR).create(e)}},{key:"moveAction",value:function(e){for(var t=e.action,n=e.direction,r=this.c_bookmark.GetAction(),i=r.GetSubActionCount(),a=this.c_bookmark,o=[r],s=0;s<i;s++)o.push(r.GetSubAction(s));var u=o.findIndex((function(e){return e.GetDict().GetObjNum()===t.objNumber}));if(-1!=u){var c=n?u+1:u-1;if(0==c||0==u){a.RemoveAction(),o[0].RemoveAllSubActions();var l=0==u?c:u;a.SetAction(o[l]),o.splice(l,1),r=a.GetAction();for(var d=0;d<o.length;d++)r.InsertSubAction(d,o[d])}else{var f;r.RemoveAllSubActions(),f=[o[c],o[u]],o[u]=f[0],o[c]=f[1];for(var h=1;h<o.length;h++)r.InsertSubAction(h,o[h])}}}},{key:"removeAction",value:function(e){if(e){var t=this.c_bookmark.GetAction();return t=(0,s.Z)(this.engine,this.c_doc,t,e.objNumber),e.objNumber&&t?(this.c_bookmark.SetAction(t),!0):this.c_bookmark.RemoveAction()}return this.c_bookmark.RemoveAction()}},{key:"getCanonicalString",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var r=new this.engine.WString(e),i=this.engine.TextSearchUtils.CanonicalFindText(r,t,n),a=i.canonical_text?i.canonical_text.toString():"";return r.delete(),a}}},{key:"search",value:function(e,t,n){var r=this,i=!t.wholeWordsOnly&&!t.caseSensitive&&t.stemming,a=this.c_bookmark.GetTitle().toString(),o=a,s=null;if(t.isIgnoreDiacritics||t.isIgnoreAsia){var u=new this.engine.WString(o),l=this.engine.TextSearchUtils.CanonicalFindText(u,t.isIgnoreAsia,t.isIgnoreDiacritics);o=l.canonical_text?l.canonical_text.toString():"";var d=l.text_index_of_len_array,f=[];s=[];for(var h=0;h<=d.GetSize();h++)f[h]=0===h?0:f[h-1]+d.GetAt(h-1),s[f[h]]=h;for(var g=0;g<s.length;g++)void 0===s[g]&&(s[g]=s[g-1]);u.delete()}t.caseSensitive||(o=o.toLowerCase()),e.forEach((function(e){var u=e;t.caseSensitive||(u=u.toLowerCase()),(t.isIgnoreDiacritics||t.isIgnoreAsia)&&(u=r.getCanonicalString(u,t.isIgnoreAsia,t.isIgnoreDiacritics));var l,d=o.indexOf(u,0);if(i){var f=(l=(0,c.nT)(r.engine,u,a)).next();f.done?d=-1:(d=f.value.index,u=f.value.oriWord)}for(;-1!==d;){var h=r.getCanonicalString(o[d-1]),g=r.getCanonicalString(o[d+u.length]),p=i?u.length:e.length;if(!t.wholeWordsOnly||!(/[0-9a-zA-Z]/.test(h)&&void 0!==h||/[0-9a-zA-Z]/.test(g)&&void 0!==g)){var v=null,_=null,m=d;s?(v=(0,c.Tg)(a,s[d]),_=(0,c.xF)(a,s[d]+p),m=s[d]):(v=(0,c.Tg)(a,d),_=(0,c.xF)(a,d+p)),n.push({startText:v,endText:_,word:a.substr(m,p),type:"bookmark",index:n.length,id:r.id});break}if(i){var y=l.next();y.done?d=-1:(d=y.value.index,u=y.value.oriWord)}else d=o.indexOf(u,d+1)}})),this.children.forEach((function(r){return r.search(e,t,n)}))}}]),e}()},2595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(4375),i=n(6721),a=n(1870);const o=function(){function e(t){(0,r._)(this,e),this.id=(0,a.Ki)("pdf_object"),this.pdfDoc=t}return(0,i._)(e,[{key:"toJson",value:function(){return{id:this.id}}}]),e}()},8319:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(6448),_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(4375),_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(6721),_swc_helpers_inherits__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(6147),_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7327),_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(9422),_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(6784),_swc_helpers_object_without_properties__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(3236),_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(2531),_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(3194),_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(5171),_swc_helpers_create_super__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(2872),_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(7582),_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1870),_shared_consts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6243),_PDFPage_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6276),_PDFDictionary_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2595),_BufferBlock_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2915),_PDFBookmark_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6450),_PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7083),_pdf_jr_Form_Form__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9006),_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9402),_shared_keyUsageType__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4551),_object_PDFObject__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(3774),_PDFFontMgr__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(8758),_error_code__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1828),_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3883),_headerFooter_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(9927),_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(952),_share_objects_delete_js__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(5497),_share_RendererHelper__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(3481),_base_FileSpec__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(7239),_annot_Annot__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(7447),_Attachments__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(5065),_base_Image_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2998),_share_signature_util__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(703),_shared_IndexDBCache_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2136),_share_InvalidJRObjectError_ts__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(8164),_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(4335),_annot_annotType__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(2165),_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(3886),_PDFArticle__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(2012),_PDFPortfolio__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(8318),_shared_formatDate_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(2699),_pageEditor_DefaultFont__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(6382),_xfa_XFADocProvider__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(8895),_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(9444),_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(9386),_xfa_SignatureField__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(479),_shared_permission_CallNoPermission__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(7021),noop=function(){},logger=_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.mA.getLogger("pdf-jr.PDFDoc"),continueExport=null,eSignCNOptType={SELF_SIGN:0,INIT_SIGN:1,FLOW_SIGN:2,FLOW_END_SIGN:3};function rshift(e,t){return Math.floor(e/Math.pow(2,t))}function and(e,t){var n=2147483648,r=2147483647;return(~~(e/n)&~~(t/n))*n+(e&r&(t&r))}var ESignCNAnnotDictStore=function(){function e(){(0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_35__._)(this,e),this.annotDicts=[]}return(0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_36__._)(e,[{key:"setAnnotDict",value:function(e){var t=e.key,n=e.dict;this.annotDicts.push({key:t,dict:n})}},{key:"getAnnotDict",value:function(e){var t=e.key,n=this.annotDicts.find((function(e){return e.key===t}));if(n)return n.dict;console.error("not exist annotDict ".concat(t," in ESignCNAnnotDictStore"))}},{key:"clean",value:function(){this.annotDicts.length=0}}]),e}(),eSignCNAnnotDictStore=new ESignCNAnnotDictStore;function getPrintRange(e,t){var n=[];if(!e)return n;var r=e.GetElement(t);if(!r)return n;r=r.GetDirectObject().GetArray();for(var i=0;i<r.GetElementCount();i++){var a=r.GetElement(i);n.push(a.GetInteger())}return n}function getAnnotTypeInESignCN(e,t){var n=new t.String("FST"),r=e.GetElement(n);return!!r&&r.GetString().toString()}var PDFDoc=function(){function PDFDoc1(e,t){var n=this,r=t.getBuffer,i=t.size,a=t.release,o=void 0===a?noop:a,s=t.async,u=void 0!==s&&s,c=t.isCreate,l=void 0!==c&&c,d=t.isCreatePortfolio,f=void 0!==d&&d,h=t.initOpenOptions,g=void 0===h?{}:h,p=t.destroyCallback,v=void 0===p?noop:p,_=t.buffer,m=t.docId,y=t.doc,S=t.ReadBlockOption;(0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_35__._)(this,PDFDoc1),this.isLoaded=!1,this.docDeferred=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),this.docPromise=this.docDeferred.promise;var b=i;this.id=m||(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Ki)("pdf_doc"),this.JR=e;var D,P=this.engine=e.engine;if(this.async=u,this.readerBlockLoading=0,this.initOpenOptions=g,this.destroyCallback=v,this.colors={background:null,foreground:null},this.ReadBlockOption=S,this.mIsDynamicXFA=!1,this.mHasXFALicense=!1,this.thumbQueue=new _foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.tZ,this.isHttpLoad=!1,y)this.doc=y,this.docDeferred.resolve(this.doc);else if(l)this.doc=new P.PDFDoc,this.docDeferred.resolve(this.doc);else if(f){var I=P.Portfolio.CreatePortfolio();this.doc=I.GetPortfolioPDFDoc(),this.docDeferred.resolve(this.doc)}else if(_){b=_.byteLength;var A=this.buffer=P._malloc(b);P.HEAPU8.set(new Uint8Array(_),A),this.doc=P.createPDFDocWithBuffer(A,b),this.docDeferred.resolve(this.doc)}else if(this.getBuffer=r,u){var w=0,C=!1,k=0,E=0,G=this.asyncBlock=new _BufferBlock_js__WEBPACK_IMPORTED_MODULE_4__.Z(i);D=P.AsyncReaderCallback.implement({Release:function(){o()},GetSize:function(){return C?E:b},ReadBlock:function(e,t,i){if(!G.avail(t,i))return G.checkLoadBuffer(t,i)||(G.loadingBuffer(t,i),n.readerBlockLoading++,r(t,i).then((function(e){G.addBuffer(t,i,e),n.readerBlockLoading--}))),!1;var a=G.getBuffer(t,i);if(!a)return G.checkLoadBuffer(t,i)||(G.loadingBuffer(t,i),n.readerBlockLoading++,r(t,i).then((function(e){G.addBuffer(t,i,e),n.readerBlockLoading--}))),!1;if(C&&(t+=k)+i>E)return!1;var o=new Uint8Array(a,t,i);return P.HEAPU8.set(o,e),!0},IsDataAvail:function(e,t){return G.avail(e,t)},AddDownloadHint:function(e,t){var i=2097152,a=e+t+i;return a=a>=b?b-e:t+i,G.checkLoadBuffer(e,t)||G.avail(e,t)||(G.loadingBuffer(e,a),n.readerBlockLoading++,r(e,a).then((function(t){G.addBuffer(e,a,t),n.readerBlockLoading--}))),!0},GetPosition:function(){return C?w-k:w},SetPosition:function(e){C&&(e+=k),w=e},SetRange:function(e,t){k=e,E=t,C=!0},ClearRange:function(){C=!1}}),this.doc=P.createPDFDocWithReaderCallback(D,!0)}else{var T=!1;if(g&&g.isHttp){var F=0,R=!1,M=0,O=0;D=P.AsyncReaderCallback.implement({Release:function(){o()},GetSize:function(){var e=R?O:b;return e>2147483647?(P.SetHighBits(rshift(e,31)),P.SetLowBits(and(e,2147483647)),-1):e},ReadBlock:function(e,t,i){var a;if(S&&S.url)return a=n.getDocStreamBuffer(t,i,b,!1),P.HEAPU8.set(a,e),!0;if(R){if((t+=M)+i>O)return!1;a=new Uint8Array(r(t,i),t,i)}else a=new Uint8Array(r(t,i));return P.HEAPU8.set(a,e),!0},IsDataAvail:function(e,t){return!0},AddDownloadHint:function(e,t){return!0},GetPosition:function(){return R?F-M:F},SetPosition:function(e){R&&(e+=M),F=e},SetRange:function(e,t){M=e,O=t,R=!0},ClearRange:function(){R=!1}}),this.doc=P.createPDFDocWithReaderCallback(D,!0),(T=this.doc.IsLinearized())?this.isHttpLoad=!0:(this.doc.delete(),D.delete(),this.isHttpLoad=!1)}if(!T){var x=0,B=!1,N=0,L=0;D=P.ReaderCallback.implement({Release:function(){o()},GetSize:function(){var e=B?L:b;return e>2147483647?(P.SetHighBits(rshift(e,31)),P.SetLowBits(and(e,2147483647)),-1):e},ReadBlock:function(e,t,i){var a;if(S&&S.url)return 0!==i&&(a=n.getDocStreamBuffer(t,i,b,!1),P.HEAPU8.set(a,e),!0);if(B){if((t+=N)+i>L)return!1;a=new Uint8Array(r(t,i),t,i)}else a=new Uint8Array(r(t,i));return P.HEAPU8.set(a,e),!0},GetPosition:function(){return B?x-N:x},SetPosition:function(e){B&&(e+=N),x=e},SetRange:function(e,t){N=e,L=t,B=!0},ClearRange:function(){B=!1}}),this.doc=P.createPDFDocWithReaderCallback(D,!1)}}this.pageCache={},this.pageIndexMap={},this.pageIndexPromise={},this.dictionaryCache={},this.dictionaryMap={},this.blockRanges=[],this.renderFlags=0,this.readerCallback=D,this.destroyHooks=[],this.beforeSaveHooks=[],this.curFileId="",this.taskProgressMap={},this.fixPages=[]}return(0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_36__._)(PDFDoc1,[{key:"getDocStreamBuffer",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.ReadBlockOption;if(a&&a.url){var o=a.chunk,s=void 0===o?1048576:o,u=a.url,c=a.headers,l=parseInt(e/s),d=parseInt((e+t)/s),f=function(e,t){var n=new XMLHttpRequest;for(var r in n.open("GET",u,i),n.responseType="arraybuffer",c)n.setRequestHeader(r,c[r]);var a="bytes=".concat(e,"-").concat(t);return"string"==typeof e&&void 0===t&&(a=e),n.setRequestHeader("Range",a),i?new Promise((function(e,t){n.onreadystatechange=function(){4==n.readyState&&e(n.response)},n.send(null)})):(n.send(null),n.response)};if(this.docReadBlockCache||(this.docReadBlockCache={uint8Array:new Uint8Array(this.doc.GetFileSize()),array:[],test:[]}),i){for(var h=[],g=[],p=function(){var e=g,t=e[e.length-1],n=e[0]*s,i=t*s+s;h.push(f(n,i).then((function(t){e.forEach((function(e){r.docReadBlockCache.array[e]=t.slice(e*s,e*s+s)})),r.docReadBlockCache.uint8Array.set(new Uint8Array(t),n)}))),g=[]},v=l;v<=d;v++){if(!this.docReadBlockCache.array[v]){var _=g[g.length-1];void 0===_||v-_==1?g.push(v):(p(),g=[])}v===d&&(p(),g=[])}Date.now();return Promise.all(h).then((function(){return r.docReadBlockCache.uint8Array.slice(e,e+t)}))}for(var m=l;m<=d;m++)if(!this.docReadBlockCache.array[m]){var y=m*s,S=f(y,y+s>n?n-1:y+s-1);this.docReadBlockCache.array[m]=S,this.docReadBlockCache.uint8Array.set(new Uint8Array(S),y)}return this.docReadBlockCache.uint8Array.slice(e,e+t)}}},{key:"beforeSave",value:function(e){this.beforeSaveHooks.push(e)}},{key:"addDestroyHook",value:function(e){this.destroyHooks.push(e)}},{key:"isLinearized",value:function(){return this.doc.IsLinearized()}},{key:"createCertificateFile",value:function(e){var t=this.engine,n=new t.SG_DATASTRUCT;n.cwName=new t.WString(e.cwName||""),n.cwOU=new t.WString(e.cwOU||""),n.cwON=new t.WString(e.cwON||""),n.cwMail=new t.WString(e.cwMail||""),n.csCR=new t.String(e.csCR||""),n.nKA="number"==typeof e.nKA?e.nKA:0,n.nUDF="number"==typeof e.nUDF?e.nUDF:_shared_keyUsageType__WEBPACK_IMPORTED_MODULE_9__.Z.SignatureAndEncryption,n.cwSavePass=new t.WString(e.cwSavePass||"");var r=function(e){var n=0;return t.WriterCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return n},WriteBlock:function(r,i,a){n+=a;var o,s=t.HEAPU8.buffer;return o=s.slice?s.slice(r,r+a):new Uint8Array(s,r,a).buffer,e.push(o),!0}})},i=[],a=r(i),o=r([]);t.CreateOpenSSLCert(n,a,o);var s=new Blob(i,{type:"application/x-pkcs12"});return this.JR.getCertificateInfo(s,e.cwSavePass)}},{key:"getCertificateSerials",value:function(){var e=this.engine,t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),n=new Set,r=e.CertificateSecurityCallback.implement({Release:function(){t.resolve(Array.from(n))},GetDecryptionKey:function(t,r){for(var i=e.GetSerials(t,r),a=0;a<i.GetSize();a++)n.add(i.GetAt(a).toString());return new e.String("")}}),i=new e.String("Adobe.PubSec");return e.Library.RegisterSecurityCallback(i,r),this.doc.Load(new e.String("")),e.Library.UnregisterSecurityCallback(i),t.promise}},{key:"parseByCertificate",value:function(e){var t=this.engine,n=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),r=e.pfxFile,i=e.password,a=(new FileReaderSync).readAsArrayBuffer(r),o=t.StreamCallback.implement({GetSize:function(){return a.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,n,r){var i=new Uint8Array(a,n,r);return t.HEAPU8.set(i,e),!0}}),s=t.CertificateSecurityCallback.implement({Release:function(){},GetDecryptionKey:function(e,n){return new t.Envelope.CreateWithDataBuffer(e,n).GetDecryptionKey(o,new t.String(i))}}),u=new t.String("Adobe.PubSec");t.Library.RegisterSecurityCallback(u,s);var c=this.doc.Load(new t.String(""));return t.Library.UnregisterSecurityCallback(u),n.resolve({code:c.value}),this.JR.currentDoc=this.doc,n.promise}},{key:"parseByPassword",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isLoaded)return Promise.resolve({code:0});void 0===e&&(e=this.initOpenOptions.password||""),n=Object.assign({},this.initOpenOptions,n);var r,i=this.engine,a=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),o=function(){setTimeout((function(){t.parseByPassword(e,n).then((function(e){a.resolve(e)}))}),200)};if(this.readerBlockLoading)return o(),a.promise;if(this.otherData=n,e){var s=new i.String(e);r=this.doc.Load(s),s.delete()}else if(n.encryptPassword){var u=new i.String(n.encryptPassword);r=this.doc.LoadByAsymmetricEncryption(u),u.delete()}else{var c=new i.String(e);r=this.doc.Load(c),c.delete()}if(r===i.ErrorCode.e_ErrIsAlreadyCDRM&&n.cdrm){var l=new i.String(e),d=new i.String(n.cdrm.appID),f=new i.String(n.cdrm.userToken),h=new i.String(n.cdrm.contentKey),g=n.cdrm.encrptType,p=n.cdrm.hasPermission;void 0===p&&(p=!0),r=this.doc.LoadCDRM(l,d,f,h,g,p),l.delete(),d.delete(),f.delete(),h.delete()}if(r===i.ErrorCode.e_ErrSuccess){this.password=e;var v=Promise.resolve(),_=Array.isArray(n.fdf);if(_||n.fdf&&n.fdf.file){var m=[n.fdf];_&&(m=n.fdf),v=Promise.all(m.map((function(e){var n=e.file,r=e.type;t.importFromFDF(n,r)})))}this.isLoaded=!0,v.then((function(e){t.JR.currentDoc=t.doc,t.mHasXFALicense=t.engine.Library.HasModuleLicenseRight({value:2}),t.isHttpLoad&&t.doc.HasForm(),t.mIsXFA=t.doc.IsXFA();var n=Promise.resolve();return t.mIsXFA&&(n=_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.LK)),n.then((function(){if(0===r.value&&t.mHasXFALicense&&t.mIsXFA){if(t.mInitJse=t.JR.initializeFxjse(),t.mInitJse){t.doc.InitializeDocumentProvider(),t.JR.registerXFAAppProvider();var e=t.xfaDocProvider=new _xfa_XFADocProvider__WEBPACK_IMPORTED_MODULE_30__.Z(t.engine,t.JR.id,t,t.JR.syncBaseUrl);t.XFADocHandler=t.engine.DocProviderCallback.implement(e);var n=t.xfaDoc=new t.engine.XFADoc(t.doc,t.XFADocHandler);n.StartLoad(null);t.mIsDynamicXFA=n.GetType()==t.engine.XFADocType.e_Dynamic}}else t.JR.finalizeFxjse();t.mHasXFALicense&&t.mInitJse||(t.mIsDynamicXFA=t.mIsXFA&&!t.doc.IsStaticXFA()),t.docDeferred.resolve(t.doc),a.resolve({code:r.value}),0!=r.value||t.isDynamicXFA()||(t.loadForm(),setTimeout((function(){var e=t.form;e&&e.toJson().then((function(t){return e.json=t}))}),0))}))}))}else if(r===i.ErrorCode.e_ErrDataNotReady)o();else if(r===i.ErrorCode.e_ErrSecurityHandler){var y,S=(null===(y=n.webPluginSecurity)||void 0===y?void 0:y.map((function(e){return e.filter})))||[],b=formateDictToJson(this.doc.GetEncryptDict());"FoxitDRM"===b.Filter&&n.drm?(this.JR.registerDRMSecurityCallback(),o()):"FOPN_foweb"===b.Filter&&n.fileOpen?(n.fileOpen.$$ptr=this.doc.Handle(),this.JR.registerOpenFileSecurityCallback(n.fileOpen),o()):S.includes(b.Filter)?(n.fileOpen={},n.fileOpen.$$ptr=this.doc.Handle(),n.fileOpen.fileName=this.oriFile.name,n.fileOpen.webPluginSecurity=n.webPluginSecurity.filter((function(e){return e.filter===b.Filter}))[0],this.JR.registerOpenFileSecurityCallback(n.fileOpen),o()):a.resolve({code:r.value,encryptDict:b})}else this.JR.unRegisterSecurityCallback("FOPN_foweb"),a.resolve({code:r.value});return a.promise}},{key:"customProtectDoc",value:function(e){if(!this.JR.customWebPluginSecurityCallback)return!1;try{var t=this.engine,n=new t.CustomSecurityHandler,r=new t.CustomEncryptData(!0,new t.String(e),new t.String(" "));return n.Initialize(r,this.JR.customWebPluginSecurityCallback),this.doc.SetSecurityHandler(n),!0}catch(e){return console.err(e),!1}}},{key:"getCurFileSymbolId",value:function(){return this.curFileId}},{key:"getFadeOutBackground",value:function(e){var t=this.engine,n=_base_Image_js__WEBPACK_IMPORTED_MODULE_20__.Z.createImage(t,e),r=new t.Image,i=n.GetFrameBitmap(0).FadeOutBackground();r.AddFrame(i);var a=[],o=t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(e,n,r){var i,o=t.HEAPU8.buffer;return i=o.slice?o.slice(e,e+r):new Uint8Array(o,e,r).buffer,a=a.concat(i),!0}});return r.SaveAs(o,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(t,".png")),a}},{key:"getConvertToMono",value:function(e){var t=this.engine,n=_base_Image_js__WEBPACK_IMPORTED_MODULE_20__.Z.createImage(t,e),r=new t.Image,i=n.GetFrameBitmap(0).ConvertToMono();r.AddFrame(i);var a=[],o=t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(e,n,r){var i,o=t.HEAPU8.buffer;return i=o.slice?o.slice(e,e+r):new Uint8Array(o,e,r).buffer,a=a.concat(i),!0}});return r.SaveAs(o,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(t,".png")),a}},{key:"updatePageCache",value:function(e){var t=e.id,n=this.pageCache[t];n&&n.destroy(),this.pageCache[t]=e}},{key:"removePageCache",value:function(e){var t=e.id,n=this.pageCache[t];n&&n.destroy(),n!==e&&e.destroy(),delete this.pageCache[t]}},{key:"updatePageIndexMap",value:function(e,t){this.pageIndexMap[e]=t}},{key:"getPageById",value:function(e){return this.pageCache[e]||null}},{key:"getAllLoadedPages",value:function(){var e=[];for(var t in this.pageCache)e.push(this.pageCache[t]);return e}},{key:"extractPrintPages",value:function(e){var t,n=this.engine,r=e.reverse,i=e.type,a=e.bleed,o=e.rangeType,s=e.docs,u=e.range;switch(parseInt(i)){case 1:t=n.PrintWhatType.e_PrintWhatDocumentAndMarkups;break;case 2:t=n.PrintWhatType.e_PrintWhatDocumentAndStamps;break;case 3:t=n.PrintWhatType.e_PrintWhatFormFieldsOnly;break;default:t=n.PrintWhatType.e_PrintWhatDocument}var c,l,d,f="",h=0,g=n.WriterCallback.implement({Release:noop,Flush:function(){return!0},GetSize:function(){return h},WriteBlock:function(e,t,r){h+=r;var i,a=n.HEAPU8.buffer;i=a.slice?a.slice(e,e+r):new Uint8Array(a,e,r).buffer;for(var o=new Uint8Array(i),s=o.byteLength,u=0;u<s;u++)f+=String.fromCharCode(o[u]);return!0}});if("selectedPDF"===o||"allPDF"===o){if(s.length<1)return!1;s.forEach((function(e){if(c){var t=e.oriFile?e.oriFile.name:"temp.pdf",r=new n.WString(t);c.InsertDocument(d,e.doc,n.InsertDocOptions.e_InsertDocOptionAttachments.value|n.InsertDocOptions.e_InsertDocOptionBookmark.value,r)}else c=e.doc;d=c.GetPageCount()})),u=[[0,d-1]]}else c=this.doc,d=c.GetPageCount(),l=this.pdfLayer;var p=this._generateRange(u,n,d),v=p.ranges,_=(p.addCount,new n.ProcessPrintSetting);_.print_what_type=t,_.bleed_marks=!!a,_.reverse_pages=!!r,_.page_index_range=v,l&&(_.layer_context=l.layer_context);var m=null;e.useWorkFlow&&(m=n.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),postMessage({workflow:"printEx",type:"printEx",msg:{state:"start",progress:0}}));for(var y=c.StartExtractPrintPages(g,_,m),S=-1;100!==S;){if(-1===(S=y.GetRateOfProgress()))return!1;e.useWorkFlow&&postMessage({workflow:"printEx",type:"printEx",msg:{state:100!=S?"progress":"end",progress:S}}),y.Continue()}return _.delete(),f}},{key:"getPageFormat",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:324,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:392,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.engine;return this.docPromise.then((function(u){var c;if(t.pageFormat){if(t.pageFormat.utils&&(t.pageFormat.utils.delete(),t.pageFormat.utils=null),t.pageFormat.oldUtils){try{t.pageFormat.oldUtils.delete()}catch(e){}t.pageFormat.oldUtils=null}t.pageFormat.delete(),t.pageFormat=null}var l,d=t._getPageformatProvider(n,r,i,o);if(a&&(u=a),c=new s.PageFormat(d,u),d.delete(),c.IsEmpty())return c.delete(),{res:-1,old:null};switch(t.pageFormat=c,t.pageFormat.isCurrentDoc=!a,t.pageFormat.localFormat=o,e){case"background":l=s.PageFormatType.e_Background;break;case"watermark":l=s.PageFormatType.e_Watermark;break;case"headerfooter":l=s.PageFormatType.e_HeaderFooter;break;case"batesNumbering":l=s.PageFormatType.e_BatesNumber}if(c.StartCheckExistPageFormat(null,l)===s.PageFormatFindRetCode.e_Found){var f,h=t._getPageformatUtil(c,e,!0);switch(e){case"background":f=t._getBackground(h);break;case"watermark":f=t._getWatermark(h);break;case"headerfooter":f=t._getHeaderfooter(h);break;case"batesNumbering":f=t._getBatesNumbering(h)}return{res:1,old:f}}return{res:0,old:null}}))}},{key:"getPageFormatThumb",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.docPromise.then((function(t){if(!r.pageFormat)return null;r.engine;var a=r.pageFormat,o=r._getPageformatUtil(a,e,i);return o?(r.setPageFormat(e,o,n),null):null}))}},{key:"setPageFormat",value:function(e,t,n){switch(e){case"background":this._setBackground(t,n);break;case"watermark":this._setWatermark(t,n);break;case"headerfooter":this._setHeaderfooter(t,n);break;case"batesNumbering":this._setBatesNumbering(t,n)}}},{key:"removeAllPageFormat",value:function(e){var t=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var n,r,i,a,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(s){switch(s.label){case 0:return t.pageFormat?[3,3]:[4,t.getPageFormat(e)];case 1:return s.sent(),t.pageFormat?[3,3]:[2,-1];case 2:return[2,-1];case 3:switch(n=t.engine,r=t.pageFormat,e){case"background":i=n.PageFormatType.e_Background;break;case"watermark":i=n.PageFormatType.e_Watermark;break;case"headerfooter":i=n.PageFormatType.e_HeaderFooter;break;case"batesNumbering":i=n.PageFormatType.e_BatesNumber}switch(a=r.StartRemoveAll(null,i)){case n.PageFormatOperationRetCode.e_Success:return[3,4];case n.PageFormatOperationRetCode.e_Failed:return[3,7];case n.PageFormatOperationRetCode.e_NoChange:return[3,8]}return[3,9];case 4:return(o=t._getPageformatUtil(r,e,!0))?(o.SetPageRange(0,t.doc.GetPageCount()-1),[4,t._pageFormatRemoveFinished(0,t.doc.GetPageCount()-1)]):[3,6];case 5:s.sent(),s.label=6;case 6:return a=1,[3,9];case 7:return a=-2,[3,9];case 8:return a=0,[3,9];case 9:return[2,a]}}))}))()}},{key:"addPageFormat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var i,a,o,s,u;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(c){switch(c.label){case 0:return r.pageFormat?"batesNumbering"!==e?[3,2]:[4,r._addBatesNumber(t)]:[2,-1];case 1:return[2,c.sent()];case 2:if(i=r.engine,a=r.pageFormat,!(o=r._getPageformatUtil(a,e,n)))return[2,-2];switch(r.setPageFormat(e,o,t),e){case"background":u=i.PageFormatType.e_Background;break;case"watermark":u=i.PageFormatType.e_Watermark;break;case"headerfooter":u=i.PageFormatType.e_HeaderFooter}return(s=n?a.StartUpdate(null,u):a.StartInsert(null,u))!==i.PageFormatOperationRetCode.e_Success?[3,4]:[4,r._pageFormatFinished(o,a.isCurrentDoc)];case 3:return c.sent(),[2,1];case 4:return s===i.PageFormatOperationRetCode.e_Failed?[2,-3]:[2,0];case 5:return[2]}}))}))()}},{key:"_addBatesNumber",value:function(e){var t=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var n,r,i,a,o,s,u,c,l,d,f,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(g){switch(g.label){case 0:return n=t.engine,r=t.pageFormat,i=r.isCurrentDoc,a=r.utils,(o=r.oldUtils)?(s=e.sourceDoc,u=s.fileName,c=s.newDoc,l=t._getPageformatProvider(1,1,u,t.pageFormat.localFormat),d=null,c?(d=c,i=!1,[3,3]):[3,1]):[3,4];case 1:return[4,t.docPromise];case 2:d=g.sent(),i=!0,g.label=3;case 3:if(r=new n.PageFormat(l,d),l.delete(),r.IsEmpty())return r.delete(),[2,-1];(a=r.CreateBatesNumberUtils()).JoinBatesNumberUtils(o),t._setBatesNumbering(a,e),g.label=4;case 4:return(f=r.StartInsert(null,n.PageFormatType.e_BatesNumber))!==n.PageFormatOperationRetCode.e_Success?[3,6]:[4,t._pageFormatFinished(a,i)];case 5:return g.sent(),h=a.GetRangeString(new n.WString("-")).toString(),t.pageFormat.oldUtils=a,[2,h];case 6:return f===n.PageFormatOperationRetCode.e_Failed?[2,-3]:[2,0];case 7:return[2]}}))}))()}},{key:"_getPageformatUtil",value:function(e,t,n){var r;if(e.utils&&(n||e.isUtilsCreated))return e.utils;switch(t){case"background":n?r=e.GetBackgroundUtils():(r=e.CreateBackgroundUtils(),e.isUtilsCreated=!0);break;case"watermark":n?r=e.GetWatermarkUtils():(r=e.CreateWatermarkUtils(),e.isUtilsCreated=!0);break;case"headerfooter":n?r=e.GetHeaderFooterUtils():(r=e.CreateHeaderFooterUtils(),e.isUtilsCreated=!0);break;case"batesNumbering":n?r=e.GetBatesNumberUtils():(r=e.CreateBatesNumberUtils(),e.isUtilsCreated=!0)}return r.IsEmpty()?null:(e.utils=r,r)}},{key:"_pageFormatRemoveFinished",value:function(e,t){var n=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(a){switch(a.label){case 0:r=e,a.label=1;case 1:return r<=t?[4,n.getPageByIndex(r)]:[3,5];case 2:return(i=a.sent())?[4,i.reParsePage()]:[3,4];case 3:a.sent(),i.reloadAnnots(),a.label=4;case 4:return r++,[3,1];case 5:return n.reloadLayer(),[2]}}))}))()}},{key:"_pageFormatFinished",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var r,i,a,o,s,u;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(c){switch(c.label){case 0:if(!t)return[2];if(r=e.GetPageRangeStart(),i=e.GetPageRangeEnd(),a=e.IsUseEvenPages(),o=e.IsUseOddPages(),!1===a&&!1===o)return[2];-1===r&&(r=0,i=n.doc.GetPageCount()-1,e.SetPageRange(r,i),e.SetEvenOddFlag(!0,!0)),s=r,c.label=1;case 1:if(!(s<=i))return[3,5];if(o!==a){if(a&&(s+1)%2!=0)return[3,4];if(o&&(s+1)%2==0)return[3,4]}return[4,n.getPageByIndex(s)];case 2:return(u=c.sent())?[4,u.reParsePage()]:[3,4];case 3:c.sent(),u.reloadAnnots(),c.label=4;case 4:return s++,[3,1];case 5:return n.reloadLayer(),[2]}}))}))()}},{key:"_setWatermark",value:function(e,t){if(t){var n=this.engine,r=1===t.sourceType?n.PageFormatSourceType.e_Text:n.PageFormatSourceType.e_ImageFile,i=new n.WString(t.text.replaceAll("\n","\r")),a=t.pageStart,o=t.pageEnd,s=t.pageEven,u=t.pageOdd,c=0;switch(t.unit){case 1:c=n.PageFormatUnitType.e_Inches;break;case 2:c=n.PageFormatUnitType.e_Percent;break;case 3:c=n.PageFormatUnitType.e_Centimeters;break;case 4:c=n.PageFormatUnitType.e_Millimeters;break;case 5:c=n.PageFormatUnitType.e_Picas;break;case 6:c=n.PageFormatUnitType.e_Points}var l=0;switch(t.vFrom){case 1:l=n.PageFormatAlignType.e_Top;break;case 2:l=n.PageFormatAlignType.e_VCenter;break;case 3:l=n.PageFormatAlignType.e_Bottom}var d=0;switch(t.hFrom){case 1:d=n.PageFormatAlignType.e_Left;break;case 2:d=n.PageFormatAlignType.e_HCenter;break;case 3:d=n.PageFormatAlignType.e_Right}if(e.SetSourceType(r),e.SetPageRange(a,o),e.SetEvenOddFlag(s,u),2===t.sourceType){if(t.file){var f=n.ReaderCallback.implement({Release:function(){noop()},GetSize:function(){return t.file.size},ReadBlock:function(e,r,i){var a=new Uint8Array(t.file.getBuffer(r,i));return n.HEAPU8.set(a,e),!0}});e.SetImage(f)}else if(t.doc)e.SetPDFDoc(t.doc.doc);else if(t.bitmap){var h=_base_Image_js__WEBPACK_IMPORTED_MODULE_20__.Z.createImage(n,t.bitmap,!0);e.SetImage(h)}e.SetSourcePageNumber(t.pageNumber),t.scaleCkd?e.SetScale(-t.scale/100):e.SetScale(t.absScale/100)}else{var g="number"==typeof t.fontColor?t.fontColor:parseInt(t.fontColor.replace("#","0x"),16),p=new n.WString(t.fontName);e.SetText(i),e.UnderlineText(t.underLine),e.SetTextColor(g),e.SetFontName(p),t.scaleCkd?e.SetScale(-t.scale/100):(e.SetScale(1),e.SetFontSize(parseFloat(t.fontSize)))}t.isMultiline?(e.SetMultiLineFlag(!0),e.SetRowSpace(t.rowSpace),e.SetColumnSpace(t.columnSpace)):(e.SetMultiLineFlag(!1),e.SetPositionUnit(c),e.SetVerticalAlign(l),e.SetHorizontalAlign(d),e.SetVerticalValue(parseFloat(t.vDistance)),e.SetHorizontalValue(parseFloat(t.hDistance))),e.SetOpacity(t.opacity/100),e.SetRotation(parseFloat(t.rotate)),e.SetShowOnTopFlag(2===t.appear),e.SetFixedPrintFlag(t.isKeep),e.SetVisibleForPrintFlag(t.isPrint),e.SetDisplayOnScreenFlag(t.isScreen)}}},{key:"_setBackground",value:function(e,t){if(t){var n=this.engine,r=1===t.sourceType?n.PageFormatSourceType.e_Color:n.PageFormatSourceType.e_ImageFile,i=t.pageStart,a=t.pageEnd,o=t.pageEven,s=t.pageOdd,u=0;switch(t.unit){case 1:u=n.PageFormatUnitType.e_Inches;break;case 2:u=n.PageFormatUnitType.e_Percent;break;case 3:u=n.PageFormatUnitType.e_Centimeters;break;case 4:u=n.PageFormatUnitType.e_Millimeters;break;case 5:u=n.PageFormatUnitType.e_Picas;break;case 6:u=n.PageFormatUnitType.e_Points}var c=0;switch(t.vFrom){case 1:c=n.PageFormatAlignType.e_Top;break;case 2:c=n.PageFormatAlignType.e_VCenter;break;case 3:c=n.PageFormatAlignType.e_Bottom}var l=0;switch(t.hFrom){case 1:l=n.PageFormatAlignType.e_Left;break;case 2:l=n.PageFormatAlignType.e_HCenter;break;case 3:l=n.PageFormatAlignType.e_Right}if(e.SetSourceType(r),e.SetPageRange(i,a),e.SetEvenOddFlag(o,s),2===t.sourceType){if(t.file){var d=n.ReaderCallback.implement({Release:function(){noop()},GetSize:function(){return t.file.size},ReadBlock:function(e,r,i){var a=new Uint8Array(t.file.getBuffer(r,i));return n.HEAPU8.set(a,e),!0}});e.SetImage(d)}else t.doc&&e.SetPDFDoc(t.doc.doc);e.SetSourcePageNumber(t.pageNumber),t.scaleCkd?e.SetScale(-t.scale/100):e.SetScale(t.absScale/100)}else{var f=t.backgroundColor;f&&7===f.length&&(f="0x"+f.substr(5,2)+f.substr(3,2)+f.substr(1,2),f=parseInt(f,16),e.SetBackgroundColor(f)),e.SetScale(-t.scale/100)}e.SetPositionUnit(u),e.SetVerticalAlign(c),e.SetHorizontalAlign(l),e.SetVerticalValue(parseFloat(t.vDistance)),e.SetHorizontalValue(parseFloat(t.hDistance)),e.SetOpacity(t.opacity/100),e.SetRotation(parseFloat(t.rotate)),e.SetVisibleForPrintFlag(t.isPrint),e.SetDisplayOnScreenFlag(t.isScreen)}}},{key:"_setHeaderfooter",value:function(e,t){if(t){var n=this.engine,r="number"==typeof t.fontColor?t.fontColor:parseInt(t.fontColor.replace("#","0x"),16),i=new n.WString(t.fontName),a=new n.WString(t.leftHeaderText.replaceAll("\n","\r")),o=new n.WString(t.rightHeaderText.replaceAll("\n","\r")),s=new n.WString(t.centerHeaderText.replaceAll("\n","\r")),u=new n.WString(t.leftFooterText.replaceAll("\n","\r")),c=new n.WString(t.centerFooterText.replaceAll("\n","\r")),l=new n.WString(t.rightFooterText.replaceAll("\n","\r")),d="1";switch(t.pageFormat){case"1":d=n.HeaderFooterPageNumberFormat.e_Number;break;case"1 of n":d=n.HeaderFooterPageNumberFormat.e_NumberOfTotal;break;case"1/n":d=n.HeaderFooterPageNumberFormat.e_NumberSlashTotal;break;case"Page 1":d=n.HeaderFooterPageNumberFormat.e_PageNumber;break;case"Page 1 of n":d=n.HeaderFooterPageNumberFormat.e_PageNumberOfTotal;break;case"Page 1 of n":d=n.HeaderFooterPageNumberFormat.e_BatesNumber}var f="m/d";switch(t.dateFormat){case"m/d":f=n.HeaderFooterDateFormat.e_MSlashD;break;case"m/d/yy":f=n.HeaderFooterDateFormat.e_MSlashDSlashYY;break;case"m/d/yyyy":f=n.HeaderFooterDateFormat.e_MSlashDSlashYYYY;break;case"mm/dd/yy":f=n.HeaderFooterDateFormat.e_MMSlashDDSlashYY;break;case"mm/dd/yyyy":f=n.HeaderFooterDateFormat.e_MMSlashDDSlashYYYY;break;case"d/m/yy":f=n.HeaderFooterDateFormat.e_DSlashMSlashYY;break;case"d/m/yyyy":f=n.HeaderFooterDateFormat.e_DSlashMSlashYYYY;break;case"dd/mm/yy":f=n.HeaderFooterDateFormat.e_DDSlashMMSlashYY;break;case"dd/mm/yyyy":f=n.HeaderFooterDateFormat.e_DDSlashMMSlashYYYY;break;case"mm/yy":f=n.HeaderFooterDateFormat.e_MMSlashYY;break;case"mm/yyyy":f=n.HeaderFooterDateFormat.e_MMSlashYYYY;break;case"m.d.yy":f=n.HeaderFooterDateFormat.e_MDotDDotYY;break;case"m.d.yyyy":f=n.HeaderFooterDateFormat.e_MDotDDotYYYY;break;case"mm.dd.yy":f=n.HeaderFooterDateFormat.e_MMDotDDDotYY;break;case"mm.dd.yyyy":f=n.HeaderFooterDateFormat.e_MMDotDDDotYYYY;break;case"mm.yy":f=n.HeaderFooterDateFormat.e_MMDotYY;break;case"d.m.yyyy":d=n.HeaderFooterDateFormat.e_DDotMDotYYYY;break;case"dd.mm.yy":f=n.HeaderFooterDateFormat.e_DDDotMMDotYY;break;case"dd.mm.yyyy":f=n.HeaderFooterDateFormat.e_DDDotMMDotYYYY;break;case"yy-mm-dd":f=n.HeaderFooterDateFormat.e_YYHyphenMMHyphenDD;break;case"yyyy-mm-dd":f=n.HeaderFooterDateFormat.e_YYYYHyphenMMHyphenDD}var h=t.pageStart,g=t.pageEnd,p=t.pageEven,v=t.pageOdd;e.SetEmbedFontFlag(t.fontEmbed),e.UnderlineText(t.underLine),e.SetTextColor(r),e.SetFontName(i),e.SetFontSize(parseFloat(t.fontSize)),e.SetMargin(n.HeaderFooterMargin.e_Left,t.marginLeft),e.SetMargin(n.HeaderFooterMargin.e_Right,t.marginRight),e.SetMargin(n.HeaderFooterMargin.e_Top,t.marginTop),e.SetMargin(n.HeaderFooterMargin.e_Bottom,t.marginBottom),e.SetText(n.HeaderFooterLocation.e_HeaderLeft,a),e.SetText(n.HeaderFooterLocation.e_HeaderMiddle,s),e.SetText(n.HeaderFooterLocation.e_HeaderRight,o),e.SetText(n.HeaderFooterLocation.e_FooterLeft,u),e.SetText(n.HeaderFooterLocation.e_FooterMiddle,c),e.SetText(n.HeaderFooterLocation.e_FooterRight,l),e.SetDateFormat(f),e.SetPageNumberFormat(d),e.SetPageNumberOffset(t.startPage),e.SetPageRange(h,g),e.SetEvenOddFlag(p,v),e.SetFixedPrintFlag(t.isKeep),e.SetShrinkFlag(t.isShrink)}}},{key:"_setBatesNumbering",value:function(e,t){if(t){var n=this.engine,r=parseInt(t.fontColor.replace("#","0x"),16),i=new n.WString(t.fontName),a=new n.WString(t.leftHeaderText.replaceAll("\n","\r")),o=new n.WString(t.rightHeaderText.replaceAll("\n","\r")),s=new n.WString(t.centerHeaderText.replaceAll("\n","\r")),u=new n.WString(t.leftFooterText.replaceAll("\n","\r")),c=new n.WString(t.centerFooterText.replaceAll("\n","\r")),l=new n.WString(t.rightFooterText.replaceAll("\n","\r")),d="1";switch(t.pageFormat){case"1":d=n.HeaderFooterPageNumberFormat.e_Number;break;case"1 of n":d=n.HeaderFooterPageNumberFormat.e_NumberOfTotal;break;case"1/n":d=n.HeaderFooterPageNumberFormat.e_NumberSlashTotal;break;case"Page 1":d=n.HeaderFooterPageNumberFormat.e_PageNumber;break;case"Page 1 of n":d=n.HeaderFooterPageNumberFormat.e_PageNumberOfTotal;break;case"Bates Number":d=n.HeaderFooterPageNumberFormat.e_BatesNumber}var f="m/d";switch(t.dateFormat){case"m/d":f=n.HeaderFooterDateFormat.e_MSlashD;break;case"m/d/yy":f=n.HeaderFooterDateFormat.e_MSlashDSlashYY;break;case"m/d/yyyy":f=n.HeaderFooterDateFormat.e_MSlashDSlashYYYY;break;case"mm/dd/yy":f=n.HeaderFooterDateFormat.e_MMSlashDDSlashYY;break;case"mm/dd/yyyy":f=n.HeaderFooterDateFormat.e_MMSlashDDSlashYYYY;break;case"d/m/yy":f=n.HeaderFooterDateFormat.e_DSlashMSlashYY;break;case"d/m/yyyy":f=n.HeaderFooterDateFormat.e_DSlashMSlashYYYY;break;case"dd/mm/yy":f=n.HeaderFooterDateFormat.e_DDSlashMMSlashYY;break;case"dd/mm/yyyy":f=n.HeaderFooterDateFormat.e_DDSlashMMSlashYYYY;break;case"mm/yy":f=n.HeaderFooterDateFormat.e_MMSlashYY;break;case"mm/yyyy":f=n.HeaderFooterDateFormat.e_MMSlashYYYY;break;case"m.d.yy":f=n.HeaderFooterDateFormat.e_MDotDDotYY;break;case"m.d.yyyy":f=n.HeaderFooterDateFormat.e_MDotDDotYYYY;break;case"mm.dd.yy":f=n.HeaderFooterDateFormat.e_MMDotDDDotYY;break;case"mm.dd.yyyy":f=n.HeaderFooterDateFormat.e_MMDotDDDotYYYY;break;case"mm.yy":f=n.HeaderFooterDateFormat.e_MMDotYY;break;case"d.m.yyyy":d=n.HeaderFooterDateFormat.e_DDotMDotYYYY;break;case"dd.mm.yy":f=n.HeaderFooterDateFormat.e_DDDotMMDotYY;break;case"dd.mm.yyyy":f=n.HeaderFooterDateFormat.e_DDDotMMDotYYYY;break;case"yy-mm-dd":f=n.HeaderFooterDateFormat.e_YYHyphenMMHyphenDD;break;case"yyyy-mm-dd":f=n.HeaderFooterDateFormat.e_YYYYHyphenMMHyphenDD}var h=t.pageStart,g=t.pageEnd,p=t.pageEven,v=t.pageOdd;e.SetEmbedFontFlag(t.fontEmbed),e.UnderlineText(t.underLine),e.SetTextColor(r),e.SetFontName(i),e.SetFontSize(parseFloat(t.fontSize)),e.SetMargin(n.HeaderFooterMargin.e_Left,t.marginLeft),e.SetMargin(n.HeaderFooterMargin.e_Right,t.marginRight),e.SetMargin(n.HeaderFooterMargin.e_Top,t.marginTop),e.SetMargin(n.HeaderFooterMargin.e_Bottom,t.marginBottom),e.SetText(n.HeaderFooterLocation.e_HeaderLeft,a),e.SetText(n.HeaderFooterLocation.e_HeaderMiddle,s),e.SetText(n.HeaderFooterLocation.e_HeaderRight,o),e.SetText(n.HeaderFooterLocation.e_FooterLeft,u),e.SetText(n.HeaderFooterLocation.e_FooterMiddle,c),e.SetText(n.HeaderFooterLocation.e_FooterRight,l),e.SetDateFormat(f),e.SetPageNumberFormat(d),e.SetPageNumberOffset(t.startPage),e.SetPageRange(h,g),e.SetEvenOddFlag(p,v),e.SetFixedPrintFlag(t.isKeep),e.SetShrinkFlag(t.isShrink)}}},{key:"_getWatermark",value:function(e){var t={},n=this.engine,r=parseInt(e.GetTextColor()).toString(16);if(r.length<6)for(var i=6-r.length,a=0;a<i;a++)r="0"+r;r="#"+r;var o=e.GetSourceType().value===n.PageFormatSourceType.e_Text.value?1:2,s=0;switch(e.GetPositionUnit().value){case n.PageFormatUnitType.e_Inches.value:s=1;break;case n.PageFormatUnitType.e_Percent.value:s=2;break;case n.PageFormatUnitType.e_Centimeters.value:s=3;break;case n.PageFormatUnitType.e_Millimeters.value:s=4;break;case n.PageFormatUnitType.e_Picas.value:s=5;break;case n.PageFormatUnitType.e_Points.value:s=6}var u=0;switch(e.GetVerticalAlign().value){case n.PageFormatAlignType.e_Top.value:u=1;break;case n.PageFormatAlignType.e_VCenter.value:u=2;break;case n.PageFormatAlignType.e_Bottom.value:u=3}var c=0;switch(e.GetHorizontalAlign().value){case n.PageFormatAlignType.e_Left.value:c=1;break;case n.PageFormatAlignType.e_HCenter.value:c=2;break;case n.PageFormatAlignType.e_Right.value:c=3}return t.sourceType=o,t.pageNumber=e.GetSourcePageNumber(),t.text=e.GetText().toString().replaceAll("\r","\n"),t.fontSize=parseInt(e.GetFontSize()),t.underLine=e.IsUnderline(),t.fontColor=r,t.fontName=e.GetFontName().toString(),t.opacity=parseInt(100*e.GetOpacity()),t.rotate=e.GetRotation(),t.scale=Math.round(100*e.GetScale()),t.appear=!0===e.IsShowOnTop()?2:1,t.isKeep=e.IsFixedPrint(),t.isPrint=e.IsVisibleForPrint(),t.isScreen=e.IsDisplayOnScreen(),t.unit=s,t.vFrom=u,t.hFrom=c,t.hDistance=parseFloat(e.GetHorizontalValue()),t.vDistance=parseFloat(e.GetVerticalValue()),t.pageStart=e.GetPageRangeStart(),t.pageEnd=e.GetPageRangeEnd(),t.pageEven=e.IsUseEvenPages(),t.pageOdd=e.IsUseOddPages(),t}},{key:"_getBackground",value:function(e){var t={},n=this.engine,r=parseInt(e.GetBackgroundColor()).toString(16);if(r.length<6)for(var i=6-r.length,a=0;a<i;a++)r="0"+r;r="#"+r;var o=e.GetSourceType().value===n.PageFormatSourceType.e_Color.value?1:2,s=0;switch(e.GetPositionUnit().value){case n.PageFormatUnitType.e_Inches.value:s=1;break;case n.PageFormatUnitType.e_Percent.value:s=2;break;case n.PageFormatUnitType.e_Centimeters.value:s=3;break;case n.PageFormatUnitType.e_Millimeters.value:s=4;break;case n.PageFormatUnitType.e_Picas.value:s=5;break;case n.PageFormatUnitType.e_Points.value:s=6}var u=0;switch(e.GetVerticalAlign().value){case n.PageFormatAlignType.e_Top.value:u=1;break;case n.PageFormatAlignType.e_VCenter.value:u=2;break;case n.PageFormatAlignType.e_Bottom.value:u=3}var c=0;switch(e.GetHorizontalAlign().value){case n.PageFormatAlignType.e_Left.value:c=1;break;case n.PageFormatAlignType.e_HCenter.value:c=2;break;case n.PageFormatAlignType.e_Right.value:c=3}return t.sourceType=o,t.pageNumber=e.GetSourcePageNumber(),t.backgroundColor=r,t.opacity=parseInt(100*e.GetOpacity()),t.rotate=e.GetRotation(),t.scale=Math.round(100*e.GetScale()),t.isPrint=e.IsVisibleForPrint(),t.isScreen=e.IsDisplayOnScreen(),t.unit=s,t.vFrom=u,t.hFrom=c,t.hDistance=parseFloat(e.GetHorizontalValue()),t.vDistance=parseFloat(e.GetVerticalValue()),t.pageStart=e.GetPageRangeStart(),t.pageEnd=e.GetPageRangeEnd(),t.pageEven=e.IsUseEvenPages(),t.pageOdd=e.IsUseOddPages(),t}},{key:"_getHeaderfooter",value:function(e){var t={},n=this.engine,r=parseInt(e.GetTextColor()).toString(16);if(r.length<6)for(var i=6-r.length,a=0;a<i;a++)r="0"+r;r="#"+r;var o=e.GetPageNumberFormat().value;switch(o){case n.HeaderFooterPageNumberFormat.e_Number.value:o="1";break;case n.HeaderFooterPageNumberFormat.e_NumberOfTotal.value:o="1 of n";break;case n.HeaderFooterPageNumberFormat.e_NumberSlashTotal.value:o="1/n";break;case n.HeaderFooterPageNumberFormat.e_PageNumber.value:o="Page 1";break;case n.HeaderFooterPageNumberFormat.e_PageNumberOfTotal.value:case n.HeaderFooterPageNumberFormat.e_BatesNumber.value:o="Page 1 of n"}var s=e.GetDateFormat().value;switch(s){case n.HeaderFooterDateFormat.e_MSlashD.value:s="m/d";break;case n.HeaderFooterDateFormat.e_MSlashDSlashYY.value:s="m/d/yy";break;case n.HeaderFooterDateFormat.e_MSlashDSlashYYYY.value:s="m/d/yyyy";break;case n.HeaderFooterDateFormat.e_MMSlashDDSlashYY.value:s="mm/dd/yy";break;case n.HeaderFooterDateFormat.e_MMSlashDDSlashYYYY.value:s="mm/dd/yyyy";break;case n.HeaderFooterDateFormat.e_DSlashMSlashYY.value:s="d/m/yy";break;case n.HeaderFooterDateFormat.e_DSlashMSlashYYYY.value:s="d/m/yyyy";break;case n.HeaderFooterDateFormat.e_DDSlashMMSlashYY.value:s="dd/mm/yy";break;case n.HeaderFooterDateFormat.e_DDSlashMMSlashYYYY.value:s="dd/mm/yyyy";break;case n.HeaderFooterDateFormat.e_MMSlashYY.value:s="mm/yy";break;case n.HeaderFooterDateFormat.e_MMSlashYYYY:s="mm/yyyy";break;case n.HeaderFooterDateFormat.e_MDotDDotYY.value:s="m.d.yy";break;case n.HeaderFooterDateFormat.e_MDotDDotYYYY.value:s="m.d.yyyy";break;case n.HeaderFooterDateFormat.e_MMDotDDDotYY.value:s="mm.dd.yy";break;case n.HeaderFooterDateFormat.e_MMDotDDDotYYYY.value:s="mm.dd.yyyy";break;case n.HeaderFooterDateFormat.e_MMDotYY.value:s="mm.yy";break;case n.HeaderFooterDateFormat.e_DDotMDotYYYY.value:s="d.m.yyyy";break;case n.HeaderFooterDateFormat.e_DDDotMMDotYY.value:s="dd.mm.yy";break;case n.HeaderFooterDateFormat.e_DDDotMMDotYYYY.value:s="dd.mm.yyyy";break;case n.HeaderFooterDateFormat.e_YYHyphenMMHyphenDD.value:s="yy-mm-dd";break;case n.HeaderFooterDateFormat.e_YYYYHyphenMMHyphenDD.value:s="yyyy-mm-dd"}return t.fontSize=parseInt(e.GetFontSize()),t.underLine=e.IsUnderline(),t.fontEmbed=e.IsEmbeddedFont(),t.fontColor=r,t.fontName=e.GetFontName().toString(),t.leftHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderLeft).toString().replaceAll("\r","\n"),t.centerHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderMiddle).toString().replaceAll("\r","\n"),t.rightHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderRight).toString().replaceAll("\r","\n"),t.leftFooterText=e.GetText(n.HeaderFooterLocation.e_FooterLeft).toString().replaceAll("\r","\n"),t.centerFooterText=e.GetText(n.HeaderFooterLocation.e_FooterMiddle).toString().replaceAll("\r","\n"),t.rightFooterText=e.GetText(n.HeaderFooterLocation.e_FooterRight).toString().replaceAll("\r","\n"),t.marginLeft=e.GetMargin(n.HeaderFooterMargin.e_Left),t.marginRight=e.GetMargin(n.HeaderFooterMargin.e_Right),t.marginTop=e.GetMargin(n.HeaderFooterMargin.e_Top),t.marginBottom=e.GetMargin(n.HeaderFooterMargin.e_Bottom),t.pageStart=e.GetPageRangeStart(),t.pageEnd=e.GetPageRangeEnd(),t.pageEven=e.IsUseEvenPages(),t.pageOdd=e.IsUseOddPages(),t.isKeep=e.IsFixedPrint(),t.isShrink=e.IsShrink(),t.dateFormat=s,t.pageFormat=o,t.startPage=e.GetPageNumberOffset(),t}},{key:"_getBatesNumbering",value:function(e){var t={},n=this.engine,r=parseInt(e.GetTextColor()).toString(16);if(r.length<6)for(var i=6-r.length,a=0;a<i;a++)r="0"+r;r="#"+r;var o=e.GetPageNumberFormat().value;switch(o){case n.HeaderFooterPageNumberFormat.e_Number.value:o="1";break;case n.HeaderFooterPageNumberFormat.e_NumberOfTotal.value:o="1 of n";break;case n.HeaderFooterPageNumberFormat.e_NumberSlashTotal.value:o="1/n";break;case n.HeaderFooterPageNumberFormat.e_PageNumber.value:o="Page 1";break;case n.HeaderFooterPageNumberFormat.e_PageNumberOfTotal.value:case n.HeaderFooterPageNumberFormat.e_BatesNumber.value:o="Page 1 of n"}var s=e.GetDateFormat().value;switch(s){case n.HeaderFooterDateFormat.e_MSlashD.value:s="m/d";break;case n.HeaderFooterDateFormat.e_MSlashDSlashYY.value:s="m/d/yy";break;case n.HeaderFooterDateFormat.e_MSlashDSlashYYYY.value:s="m/d/yyyy";break;case n.HeaderFooterDateFormat.e_MMSlashDDSlashYY.value:s="mm/dd/yy";break;case n.HeaderFooterDateFormat.e_MMSlashDDSlashYYYY.value:s="mm/dd/yyyy";break;case n.HeaderFooterDateFormat.e_DSlashMSlashYY.value:s="d/m/yy";break;case n.HeaderFooterDateFormat.e_DSlashMSlashYYYY.value:s="d/m/yyyy";break;case n.HeaderFooterDateFormat.e_DDSlashMMSlashYY.value:s="dd/mm/yy";break;case n.HeaderFooterDateFormat.e_DDSlashMMSlashYYYY.value:s="dd/mm/yyyy";break;case n.HeaderFooterDateFormat.e_MMSlashYY.value:s="mm/yy";break;case n.HeaderFooterDateFormat.e_MMSlashYYYY:s="mm/yyyy";break;case n.HeaderFooterDateFormat.e_MDotDDotYY.value:s="m.d.yy";break;case n.HeaderFooterDateFormat.e_MDotDDotYYYY.value:s="m.d.yyyy";break;case n.HeaderFooterDateFormat.e_MMDotDDDotYY.value:s="mm.dd.yy";break;case n.HeaderFooterDateFormat.e_MMDotDDDotYYYY.value:s="mm.dd.yyyy";break;case n.HeaderFooterDateFormat.e_MMDotYY.value:s="mm.yy";break;case n.HeaderFooterDateFormat.e_DDotMDotYYYY.value:s="d.m.yyyy";break;case n.HeaderFooterDateFormat.e_DDDotMMDotYY.value:s="dd.mm.yy";break;case n.HeaderFooterDateFormat.e_DDDotMMDotYYYY.value:s="dd.mm.yyyy";break;case n.HeaderFooterDateFormat.e_YYHyphenMMHyphenDD.value:s="yy-mm-dd";break;case n.HeaderFooterDateFormat.e_YYYYHyphenMMHyphenDD.value:s="yyyy-mm-dd"}return t.fontSize=parseInt(e.GetFontSize()),t.underLine=e.IsUnderline(),t.fontEmbed=e.IsEmbeddedFont(),t.fontColor=r,t.fontName=e.GetFontName().toString(),t.leftHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderLeft).toString().replaceAll("\r","\n"),t.centerHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderMiddle).toString().replaceAll("\r","\n"),t.rightHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderRight).toString().replaceAll("\r","\n"),t.leftFooterText=e.GetText(n.HeaderFooterLocation.e_FooterLeft).toString().replaceAll("\r","\n"),t.centerFooterText=e.GetText(n.HeaderFooterLocation.e_FooterMiddle).toString().replaceAll("\r","\n"),t.rightFooterText=e.GetText(n.HeaderFooterLocation.e_FooterRight).toString().replaceAll("\r","\n"),t.marginLeft=e.GetMargin(n.HeaderFooterMargin.e_Left),t.marginRight=e.GetMargin(n.HeaderFooterMargin.e_Right),t.marginTop=e.GetMargin(n.HeaderFooterMargin.e_Top),t.marginBottom=e.GetMargin(n.HeaderFooterMargin.e_Bottom),t.pageStart=e.GetPageRangeStart(),t.pageEnd=e.GetPageRangeEnd(),t.pageEven=e.IsUseEvenPages(),t.pageOdd=e.IsUseOddPages(),t.isKeep=e.IsFixedPrint(),t.isShrink=e.IsShrink(),t.dateFormat=s,t.pageFormat=o,t.startPage=e.GetPageNumberOffset(),t}},{key:"_getPageformatProvider",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=this.engine,a=i.PageformatUndoCallback.implement({CanUndoRedo:function(){return!1},OnAddUndo:function(e){},OnUndoRedoBegin:function(){},OnUndoRedoEnd:function(){}}),o=i.PageformatProgressBarCallback.implement({Create:function(){return 0},SetRange:function(e,t,n){},SetText:function(e,t){},SetCurrentValue:function(e,t){},PeekAndPump:function(e){},Destroy:function(e){},GetString:function(e){var t;switch(r||(r={fileName:"File Name",date:"1\\n1 of n\\n1/n\\nPage 1\\nPage 1 of n\\nBates Number",dateLocal:"%d\\n%d of %d\\n%d/%d\\nPage %d\\nPage %d of %d\\nBates Number"}),e){case i.PageFormatProgressBarStringResourceID.e_FileName:t=r.fileName;break;case i.PageFormatProgressBarStringResourceID.e_DateFormat:t="m/d\\nm/d/yy\\nm/d/yyyy\\nmm/dd/yy\\nmm/dd/yyyy\\nd/m/yy\\nd/m/yyyy\\ndd/mm/yy\\ndd/mm/yyyy\\nmm/yy\\nmm/yyyy\\nm.d.yy\\nm.d.yyyy\\nmm.dd.yy\\nmm.dd.yyyy\\nmm.yy\\nd.m.yyyy\\ndd.mm.yy\\ndd.mm.yyyy\\nyy-mm-dd\\nyyyy-mm-dd";break;case i.PageFormatProgressBarStringResourceID.e_PageNumberFormat:t=r.date;break;case i.PageFormatProgressBarStringResourceID.e_PageNumberFormatLocal:t=r.dateLocal;break;default:t=""}return new i.WString(t)}}),s=i.PageformatSysFontCallback.implement({IsStandardFont:function(e){return!1},GetScriptName:function(e,t){return new i.WString("")},GetFaceName:function(e){return new i.WString(e.toString())},GetFontTypeName:function(e){return new i.String("")},GetFontFaceNameBold:function(e,t){return!1},GetFontFaceNameItalic:function(e,t){return!1}}),u=i.PageFormatProviderCallback.implement({Release:function(){},GetPreviewRect:function(n){return new i.FX_RECT(0,0,e,t)},GetPage:function(e,t){return e.GetPage(t)},OnPageChanged:function(e){},GetDocName:function(e){return new i.WString(n)}}),c=new i.PageFormatProvider(u);return c.SetProgressBarCallback(o),c.SetUndoCallback(a),c.SetSysFontCallback(s),c}},{key:"setAllBoxesByIndexes",value:function(e,t,n,r,i,a,o){var s=this,u=this.engine;return this.docPromise.then((function(c){var l,d=s;return Promise.all(e.map((l=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(e){var s,l,f,h,g,p,v,_,m,y,S,b;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(D){switch(D.label){case 0:return s=JSON.parse(JSON.stringify(a)),(l=d.pageIndexMap[e])?f=l.page||c.GetPage(e):(f=c.GetPage(e),(l=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(e,d)).page=f,d.updatePageIndexMap(e,l),d.updatePageCache(l)),h=l.getBox(0),g=h.right-h.left,p=h.top-h.bottom,v=["cropBox","artBox","trimBox","bleedBox"],o?[4,l.calcContentBBox(0)]:[3,2];case 1:_=D.sent(),v.forEach((function(e){s[e]=_})),D.label=2;case 2:return y="number"==typeof n?n:p,(m="number"==typeof t?t:g)>g||y>p?(h={left:0,right:m,bottom:0,top:y},v.forEach((function(e){var t=s[e];t&&(t.right=m-g+t.right,t.top=y-p+t.top)}))):r=i=0,(S=s.cropBox)&&S.right-S.left>=10&&S.top-S.bottom>=10&&(v.forEach((function(e){if("cropBox"!==e){var t=s[e];if(!t)return;var n=S.right-S.left,r=t.right-t.left,i=S.top-S.bottom,a=t.top-t.bottom;r>n&&(t.left=S.left,t.right=S.right),a>i&&(t.bottom=S.bottom,t.top=S.top),t.left=Math.max(S.left,t.left),t.bottom=Math.max(S.bottom,t.bottom),t.right=Math.min(S.right,t.right),t.top=Math.min(S.top,t.top);var o=t.right-t.left,u=t.top-t.bottom;if(o<=0)throw new Error("Incorrect ".concat(e," size, width must be greater then 0, but actual ").concat(o,", ").concat(e,": ").concat(JSON.stringify(t)));if(u<=0)throw new Error("Incorrect ".concat(e," size, height must be greater then 0, but actual ").concat(u,", ").concat(e,": ").concat(JSON.stringify(t)))}})),s.cropBox&&l.setBox(1,s.cropBox),s.trimBox&&l.setBox(2,s.trimBox),s.artBox&&l.setBox(3,s.artBox),s.bleedBox&&l.setBox(4,s.bleedBox)),l.setBox(0,h),f.Reload(!1),(r>0||i>0)&&(b=new u.Matrix(1,0,0,1,Math.floor(r),Math.floor(i)),f.Transform(b,!0),f.StartParse(0,null,!0),b.delete()),[2,l.toJson()]}}))})),function(e){return l.apply(this,arguments)})))}))}},{key:"getAllBoxes",value:function(e){var t=this,n={};return this.docPromise.then((function(e){return[e.GetPageCount(),e]})).then((function(r){for(var i=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(r,2),a=i[0],o=i[1],s=0,u=0,c=a;c--;){var l=o.GetPage(c),d=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(c,t);d.page=l;var f=d.getBox(0),h=f.right-f.left,g=f.top-f.bottom;c===e&&(n={mediaBox:f,cropBox:d.getBox(1),trimBox:l.GetBox(t.engine.BoxType.e_TrimBox).IsEmpty()?{}:d.getBox(2),artBox:l.GetBox(t.engine.BoxType.e_ArtBox).IsEmpty()?{}:d.getBox(3),bleedBox:l.GetBox(t.engine.BoxType.e_BleedBox).IsEmpty()?{}:d.getBox(4),width:h,height:g,pdfPage:d}),s=0===s||s>h?h:s,u=0===u||u>g?g:u}return n.minWidth=s,n.minHeight=u,n.pdfPage.calcContentBBox(0)})).then((function(e){return n.calcBox=e,delete n.pdfPage,n}))}},{key:"getPDFDocInfo",value:function(){return this.docPromise.then((function(e){var t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),n=e.GetInfo();return t.resolve(n),t.promise}))}},{key:"getPageCount",value:function(){return this.docPromise.then((function(e){return e.GetPageCount()}))}},{key:"getIndirectObject",value:function(e){return this.docPromise.then((function(t){var n=t.GetIndirectObject(e);return new _object_PDFObject__WEBPACK_IMPORTED_MODULE_10__.Z(t,n)}))}},{key:"getPagesWidthHeight",value:function(){return this.docPromise.then((function(e){return[e.GetPageCount(),e]})).then((function(e){for(var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(e,2),n=t[0],r=t[1],i=[],a=Date.now(),o=n;o--;){var s=r.GetPage(o);i[o]={width:s.GetWidth(),height:s.GetHeight()}}Date.now();return i}))}},{key:"getPageByIndex",value:function(e,t,n){var r=this,i=this.pageIndexMap[e];if(i)return t&&(i.id=t,this.updatePageCache(i)),Promise.resolve(i);if(this.pageIndexPromise[e])return this.pageIndexPromise[e];var a=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();return i=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(e,this),n&&i.preparse(),this.pageIndexPromise[e]=i.c_pagePromise.then((function(){t&&(i.id=t),r.updatePageIndexMap(e,i),r.updatePageCache(i),delete r.pageIndexPromise[e],a.resolve(i)})).catch((function(t){_share_InvalidJRObjectError_ts__WEBPACK_IMPORTED_MODULE_23__.Z.is(t)?(i=new _virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.ZP(e,r),r.updatePageIndexMap(e,i),r.updatePageCache(i),delete r.pageIndexPromise[e],a.resolve(i)):a.reject(t)})),a.promise}},{key:"hasAnnots",value:function(e){return this.getPageByIndex(e).then((function(e){return e.hasAnnots()}))}},{key:"getAllPageAnnotCount",value:function(){var e=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var t;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(n){switch(n.label){case 0:return[4,e.getPageCount()];case 1:return t=n.sent(),[2,Promise.all(Array(t).fill(0).map((r=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(t,n){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(t){switch(t.label){case 0:return[4,e.getPageByIndex(n)];case 1:return[2,t.sent().hasAnnots()]}}))})),function(e,t){return r.apply(this,arguments)})))]}var r}))}))()}},{key:"getAllAnnotsData",value:function(){var e=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var t,n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(a){switch(a.label){case 0:return t=function(e,t){var n,r=t.map((function(e){return e.getId()}));return r.reduceRight((function(e,t,n){return r.indexOf(t)!==n&&e.push(n),e}),[]).forEach((function(e){t[e].destroy(),t.splice(e,1)})),(n=e._needDestroyAnnots).push.apply(n,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(t)),t},n=function(t,n){var r=t.page.GetAnnot(n);return r.IsEmpty()?null:e.JR.annotManager.get(r,t,n)},[4,e.docPromise];case 1:return r=a.sent(),i=r.GetPageCount(),[2,Promise.all(Array(i).fill(0).map((o=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(r,i){var a,o,s,u,c,l,d;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.getPageByIndex(i,null,!1)];case 1:return(a=r.sent())?(o=a.page,0===(s=o.GetAnnotCount())?[2,[]]:(u=new Array(s).fill(1).map((function(e,t){return n(a,t)})),c=t(a,u.filter((function(e){return"unknowntype"!=e.getType()}))),[2,e.getAnnotsData(c,a)])):[2,[]];case 2:return l=r.sent(),d=e.engine.getErrorCode(l),console.error(d),[3,3];case 3:return[2]}}))})),function(e,t){return o.apply(this,arguments)})))]}var o}))}))()}},{key:"getAnnotsData",value:function(e,t){var n={};e.map((function(e,t){var r=e.annot;if(0===r.GetType().value)return!1;var i=r.GetDict(),a=i.GetObjNum(),o=n[a]=n[a]||{},s=a;o.index=t,o.id=s,o.objectNumber=s;var u=e.engine,c=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(u,"IRT");if(i.HasKey(c)){var l=i.GetElement(c).GetDict().GetObjNum(),d=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(u,"RT"),f=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(u,"State"),h=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(u,"StateModel"),g=n[l]=n[l]||{};if(i.HasKey(f)&&i.HasKey(h)){var p=i.GetElement(h).GetString().toString(),v=r.GetModifiedDateTime(),_=0;switch(v.IsValid()&&(v=v.ToUTCTime(),_=Date.UTC(v.year,v.month-1,v.day,v.hour,v.minute,v.second,v.milliseconds)),p){case"Marked":(g.markedStates=g.markedStates||[]).push({index:t,id:s,time:_,objectNumber:s});break;case"Review":(g.reviewStates=g.reviewStates||[]).push({index:t,id:s,time:_,objectNumber:s})}}else if(i.HasKey(d)){if("Group"===i.GetElement(d).GetString().toString())g.isGroupHeader=!0,g.isGroup=!0,(g.groupElements=g.groupElements||[]).push({index:t,id:s,objectNumber:s}),o.isGroup=!0,o.groupHeader=g;else g.hasReplies=!0,(g.replies=g.replies||[]).push({index:t,id:s,content:r.GetContent().toString(),objectNumber:s})}else{g.hasReplies=!0,(g.replies=g.replies||[]).push({index:t,id:s,content:r.GetContent().toString(),objectNumber:s})}}}));var r,i=e.map((function(e){if(0!==e.annot.GetType().value)return e&&e.toJson(n)})).filter(Boolean);t&&!t.isVirtual&&(r=i).push.apply(r,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(t.getFakeAnnots()));return i}},{key:"getPage",value:function(e){}},{key:"getPDFPageByPageIndex",value:function(e){}},{key:"getPermission",value:function(){return this.stdCipherOptions?this.stdCipherOptions.permission:this.doc.GetUserPermissions()}},{key:"getMetadata",value:function(){for(var e=this.engine,t=new e.Metadata(this.doc),n={Title:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"Title")),Author:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"Author")),Subject:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"Subject")),Keywords:getMetadataValue(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"Keywords")),Creator:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"Creator")),Producer:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"Producer")),Trapped:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"Trapped")),CreationDate:formatMetadataDate(getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"CreationDate"))),ModDate:formatMetadataDate(getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"ModDate"))),pdfaid:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,"pdfaid")),isTagged:this.doc.IsTaggedPDF(),isLinearized:this.doc.IsLinearized(),version:this.doc.GetFileVersion(),count:this.doc.GetPageCount()},r={},i=t.GetCustomerKeys(),a=0;a<i.GetSize();a++){var o=i.GetAt(a),s=t.GetValues(o),u=s.GetSize()>0?s.GetAt(0).toString():"";r[o.toString()]=u}for(var c={},l=t.GetAllRdfXMLKeys(),d=0;d<l.GetSize();d++){var f=l.GetAt(d).toString().split(":");if(!["CreateDate","Keywords","ModifyDate","Producer"].includes(f[1])){var h=t.GetRdfXMLString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,f[0]),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,f[1]));c[f[1]]=h.toString()}}return t.delete(),t=null,n.allXMLKey=c,n.custom=r,n}},{key:"setMetadataValue",value:function(e,t){var n,r=this.engine,i=new r.WString(e.toString());n="CreationDate"===e||"ModDate"===e?this.ToDateTime(t):new r.WString(t.toString());var a=new r.Metadata(this.doc);if("CreationDate"===e)a.SetCreationDateTime(n);else if("ModDate"===e)a.SetModifiedDateTime(n);else{var o=a.GetValues(i);o.RemoveAll(),o.Add(n),a.SetValues(i,o)}a.delete(),a=null}},{key:"ToDateTime",value:function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds(),c=-t.getTimezoneOffset()/60;return new this.engine.DateTime(n,r,i,a,o,s,u,c,0)}},{key:"movePageTo",value:function(e,t){var n=this;return this.docPromise.then((function(r){var i=n.getPageById(e);return i.parsedPage().then((function(e){var a,o,s,u=i.index,c=r.MovePageTo(e,t);c&&(u<t?(a=u,o=t,s=!1):(a=t,o=u,s=!0),n.updatePageIndex(a,o,s,!0));return c}))}))}},{key:"insertPage",value:function(e,t,n){var r=this;return this.docPromise.then((function(i){var a=i.InsertPage(e,t,n);if(!a)return!1;var o,s=a.GetIndex(),u=o=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(s,r);o.page=a;var c=i.GetPageCount()-1;return r.updatePageIndex(s+1,c,!0,!1),r.updatePageIndexMap(s,u),r.updatePageCache(o),o.toJson()}))}},{key:"removePage",value:function(e){var t=this,n=this,r=this.touchup,i=n.doc.GetPageCount();return this.JR.asyncOperation((function(){return t.doc.RemovePage(e)})).then((function(t){if(t){if(r&&delete r.editPages[e],n.pageIndexMap[e]){var a=n.pageIndexMap[e];delete n.pageIndexMap[e],delete n.pageIndexPromise[e],n.removePageCache(a)}var o=i-1-1;n.updatePageIndex(e,o)}return t}))}},{key:"showNameTreePageAtTheEnd",value:function(){var e=this;return this.docPromise.then((function(t){var n=t.GetPageCount()-1,r=t.GetPage(n),i=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(n,e);return i.page=r,e.updatePageIndexMap(n,i),e.updatePageCache(i),i.toJson()}))}},{key:"hideNameTreePage",value:function(e){var t=this.doc.GetPageCount(),n=e;if(e<0&&(n=t),this.pageIndexMap[n]){var r=this.pageIndexMap[n];delete this.pageIndexMap[n],delete this.pageIndexPromise[n],this.removePageCache(r)}return e>=0&&this.updatePageIndex(e,t-1),this.form&&this.form.afterRemovePage(e),!0}},{key:"updatePageIndex",value:function(e,t,n,r){if(r)if(n){var i=this.pageIndexMap[t];delete this.pageIndexMap[t],this.updatePageIndex(e+1,t,n,!1),i&&(this.pageIndexMap[e]=i,this.pageIndexMap[e].index=e)}else{var a=this.pageIndexMap[e];delete this.pageIndexMap[e],this.updatePageIndex(e,t-1,n,!1),a&&(this.pageIndexMap[t]=a,this.pageIndexMap[t].index=t)}else if(n)for(var o=t;o>=e;o--)this.pageIndexMap[o-1]&&(this.pageIndexMap[o]=this.pageIndexMap[o-1],delete this.pageIndexMap[o-1],delete this.pageIndexPromise[o-1],this.pageIndexMap[o].index=o);else for(var s=e;s<=t;s++)s<0||!this.pageIndexMap[s+1]||(this.pageIndexMap[s]=this.pageIndexMap[s+1],delete this.pageIndexMap[s+1],delete this.pageIndexPromise[s+1],this.pageIndexMap[s].index=s);this.update3DCache(e,t,n,r)}},{key:"update3DCache",value:function(){}},{key:"splice3DCache",value:function(){}},{key:"destroyAll3DCache",value:function(){}},{key:"update3DCacheAfterMovePages",value:function(){}},{key:"destroy",value:function(){var e=this;this.beforeSaveHooks=[],this.destroyAll3DCache();var t=this.pageCache,n=[];for(var r in t)n.push(t[r].destroy()),delete t[r];this.destroyHooks.forEach((function(e){return e()})),this.form&&this.form.destroy(),this.form=null,this.pdfLayer&&this.pdfLayer.delete(),this.pdfLayer=null,this.attachments=null,this.asyncBlock&&this.asyncBlock.destroy(),this.password=null,this.stdCipherOptions=null,this.passwordType=null,this.JR.unRegisterSecurityCallback("FOPN_foweb"),this.destroyCallback(),this.docPromise=null,this.docDeferred.promise=null,this.otherData=null;var i=this.rootBookmark;i&&i.destroy(),this.rootBookmark=null,this.buffer&&this.engine._free(this.buffer),this.buffer=null,this.getBuffer=null,this.mInitJse&&this.doc.FinalizeDocumentProvider();var a=Promise.all(n).then((function(t){var n=e.doc;try{n.ClearRenderCache()}catch(e){}n&&n.delete(),e.doc=null,e.readerCallback&&e.readerCallback.delete(),e.readerCallback=null}));return this.destroyHooks=[],(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.EY)(),a}},{key:"destroyPage",value:function(e){var t=this.getPageById(e);t&&(t.destroy(),delete this.pageCache[e])}},{key:"getInfos",value:function(){return{fileSize:this.doc.GetFileSize()}}},{key:"toJson",value:function(){var e,t=this.doc,n=this.engine,r=t.GetPageCount(),i=t.GetFileSize(),a=this.doc.GetOpenAction();a.IsEmpty()||(e=(a=this.JR.actionManager.get(a,this.doc,this.JR)).toJson(),a.destroy());var o=[],s=t.GetTrailer();if(s){var u=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"ID"),c=s.GetElement(u);if(c)for(var l=c.GetArray(),d=0;d<2;d++){for(var f=l.GetElement(d).GetString().GetBuffer(),h="",g=0;g<16;g++){var p=this.engine.HEAP8[f+g]>>>0&255;(p=p.toString(16)).length<2&&(p="0"+p),h+=p}o.push(h)}}var v=t.GetUserPermissions(),_=!0,m=n.PasswordType.e_PwdNoPassword;try{var y=t.GetSecurityHandler();if(y.IsEmpty())_=!0;else{var S=n.EncryptType;switch(y.GetSecurityType()){case S.e_EncryptNone:_=!0;break;case S.e_EncryptPassword:_=(m=t.GetPasswordType())==n.PasswordType.e_PwdOwner;break;case S.e_EncryptFoxitDRM:case S.e_EncryptCDRM:_=t.GetDRMEncryptData().is_owner;break;case S.e_EncryptCertificate:_=!!(2&v);break;case S.e_EncryptCustom:case S.e_EncryptRMS:case S.e_EncryptUnknown:default:_=!0}}}catch(e){_=!1}var b=t.IsXFA()?1:0,D=this.isDynamicXFA(),P={},I=t.GetCatalog(),A=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"Names"),w=I.HasKey(A);D?b=2:w&&(P=this.getNameTree(2));var C=[];if(w){var k=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"AP"),E=I.GetElement(A).GetDict(),G=E&&E.GetElement(k);if(G&&G.GetDirectObject()){var T=G.GetDirectObject().GetDict().GetElement(A);if(T)for(var F=T.GetArray(),R=F&&F.GetElementCount(),M=0;M<R;M+=2){var O=void 0,x=F.GetElement(M).GetString();try{O=x.toString()}catch(e){for(var B="",N=x.GetBuffer(),L=0,j=x.GetLength();L<j;L++){var U=this.engine.HEAP8[N+L]>>>0&255;B+=String.fromCharCode(U)}O=this.JR.pdfNameDecoding(B)}var W=F.GetElement(M+1).GetDirectObject();W&&C.push({name:O,objNum:W.GetObjNum()})}}}var H=!0,z=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"AcroForm");if(I.HasKey(z)){var K=I.GetElement(z).GetDirectObject();if(K.GetType()==n.PDFObjectType.e_Dictionary){var J=K.GetDict(),V=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"SigFlags");if(J.HasKey(V)){var Y=J.GetElement(V).GetInteger();1&Y||2&Y||(H=!1)}}}var Z=[];if(H)for(var q=t.GetSignatureCount(),X=0;X<q;X++){var Q=t.GetSignature(X);if(Q.IsSigned()){_=!1;var $=4294963392;switch(Q.GetDocPermission().value){case 0:$=4294967292;break;case 1:$=4294965972;break;case 2:$=4294966740;break;case 3:$=4294966772}Z.push($)}}8&v&&(v=(1024|v)>>>0),this.isOwner=_;var ee=t.GetUserPermissions();if(this.canGetXFA()){this.isOwner=!1,_=!1,v&=2320,ee&=2320,r=this.xfaDoc.GetPageCount()}var te=this.isCompareDoc(),ne=new n.Metadata(this.doc),re=getMetadataValues(ne,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(n,"pdfaid"));ne.delete();var ie=this.curFileId,ae=t.GetCatalog().GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"Threads")),oe=!(!ae||0===ae.GetDirectObject().GetArray().GetElementCount());return{curFileSymbolId:ie,id:this.id,fileSize:i,sigPerms:Z,fileID:o,pageCount:r,userPermissions:v,oriPerm:ee,action:e,jsNameTree:P,isOwner:_,passwordType:m.value,icons:C,isTagged:t.IsTaggedPDF(),isPortfolio:t.IsPortfolio(),isCompareDoc:te,pdfaid:re,fileType:b,hasArticle:oe}}},{key:"getStream",value:function(e,t){var n=this,r=e.writeStream,i=e.endAllOperations,a=void 0===i||i;this.beforeSaveHooks.forEach((function(e){return e(a)}));var o=this.engine;return _web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.LQ).then((function(e){return n.docPromise.then((function(e){var n=0,i=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),a=o.WriterCallback.implement({Release:function(){a.delete()},Flush:function(){return i.resolve(n),!0},GetSize:function(){return n},WriteBlock:function(e,t,i){n=Math.max(t+i,n);var a,s=o.HEAPU8.buffer;return a=s.slice?s.slice(e,e+i):new Uint8Array(s,e,i).buffer,r(a,t,i),!0}});return o.saveDoc(e,a,t),i.promise}))}))}},{key:"importFromFDF",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r||(r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());var i=new this.engine.Range(0,this.doc.GetPageCount()-1,this.engine.RangeFilter.e_All);try{this.JR.setFontCacheEnabled(!1);var a=this.doc.ImportFromFDF(e,n,i);this.JR.setFontCacheEnabled(!0),r.resolve(a)}catch(i){if(17==(i=this.engine.getErrorCode(i)).value)return void setTimeout((function(){t.importFromFDF(e,n,r)}),200);console.warn(i)}finally{i.delete(),i=null,logger.info("ImportFromFDF","finally")}return r.promise}},{key:"getRootBookmark",value:function(e){var t=this;return this.rootBookmark?Promise.resolve(this.rootBookmark):this.docPromise.then((function(n){if(t.rootBookmark)return t.rootBookmark;var r=n.GetRootBookmark();return e?(r.IsEmpty()||(t.rootBookmark=new _PDFBookmark_js__WEBPACK_IMPORTED_MODULE_5__.Z(t,r.GetDict().GetObjNum(),r,n,-1,null,e)),t.rootBookmark):(r.IsEmpty()&&(r=n.CreateRootBookmark()),t.rootBookmark=new _PDFBookmark_js__WEBPACK_IMPORTED_MODULE_5__.Z(t,r.GetDict().GetObjNum(),r,n,-1,null,e),t.rootBookmark)}))}},{key:"getBookmarks",value:function(){return this.getRootBookmark(!0).then((function(e){return e?e.toJson():null}))}},{key:"getBookmarkChildren",value:function(e){var t=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(n){return[2,t.getRootBookmark(!1).then((function(t){if(!t)return[];var n=null==e?t:t.getBookmarkById(e);return n?n.getChildren():[]}))]}))}))()}},{key:"getBlankPageIndexes",value:function(){return this.docPromise.then((function(e){for(var t=e.GetBlankPageIndexes(),n=[],r=t.GetSize();r--;)n[r]=t.GetAt(r);return n}))}},{key:"createRootBookmark",value:function(){var e=this;return this.docPromise.then((function(t){if(!e.rootBookmark){var n=t.CreateRootBookmark(),r=new _PDFBookmark_js__WEBPACK_IMPORTED_MODULE_5__.Z(e,n.GetDict().GetObjNum(),n,t);e.rootBookmark=r}return e.rootBookmark.toJson()}))}},{key:"addBookmarksFromStructureRoles",value:function(e,t){var n=this;return this.docPromise.then((function(r){var i=r.GetRootBookmark();!0===i.IsEmpty()&&(i=r.CreateRootBookmark());var a=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(n.engine,t),o=i.Insert(a,n.engine.BookmarkPosition.e_PosLastChild),s=new n.engine.WStringArray,u=!0,c=!1,l=void 0;try{for(var d,f=e[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value;s.Add((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(n.engine,h))}}catch(e){c=!0,l=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}return o.AddBookmarksFromStructureRoles(s,null),o.GetDict().GetObjNum()}))}},{key:"insertBookmark",value:function(e){var t=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var n,r,i,a;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(o){switch(o.label){case 0:return t.rootBookmark?[3,2]:[4,t.getRootBookmark(e.isOldVersion)];case 1:o.sent(),o.label=2;case 2:if(!t.rootBookmark.isOldVersion&&"number"==typeof(n=e.newBookmarkId)&&t.rootBookmark.getBookmarkById(n))throw new Error("Duplicate bookmark id: ".concat(n));return[4,"number"==typeof(r=e.destId)?t.rootBookmark.getBookmarkById(r):t.getRootBookmark()];case 3:if(!(i=o.sent()))throw new Error("Failed to insert bookmark. The destination bookmark node ID (".concat(r,") does not exist or has not been loaded."));if(i===t.rootBookmark)switch(e.relationship){case t.engine.BookmarkPosition.e_PosFirstChild.value:case t.engine.BookmarkPosition.e_PosLastChild.value:break;default:throw new Error('When inserting a bookmark into the root, the relationship must be either "BookmarkPosition.e_PosFirstChild" or "BookmarkPosition.e_PosLastChild".')}return(a=i.insert(e)).isOldVersion?[2,a.toJson()]:[2,a.appBookmarkId]}}))}))()}},{key:"setBookmarkProperty",value:function(e,t){var n=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var r,i,a,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(s){switch(s.label){case 0:return n.rootBookmark?[3,2]:[4,n.getRootBookmark()];case 1:s.sent(),s.label=2;case 2:if(!(r=n.rootBookmark.getBookmarkById(e)))throw new Error("Failed update bookmark properties. The destination bookmark node ID's (".concat(e,") does not exist or has not been loaded."));return i=r.setProperty(t),a=i.oldProperties,o=i.newProperties,n.rootBookmark.isOldVersion?[2,r.toJson()]:[2,{oldProperties:a,newProperties:o}]}}))}))()}},{key:"getBookmarkProperties",value:function(e){var t=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var n;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(r){switch(r.label){case 0:return t.rootBookmark?[3,2]:[4,t.getRootBookmark()];case 1:r.sent(),r.label=2;case 2:return(n=t.rootBookmark.getBookmarkById(e))?[2,n.getProperties(e)]:[2]}}))}))()}},{key:"getBookmarkData",value:function(e){var t=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var n;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(r){switch(r.label){case 0:return t.rootBookmark?[3,2]:[4,t.getRootBookmark()];case 1:r.sent(),r.label=2;case 2:return(n=t.rootBookmark.getBookmarkById(e))?[2,n.getInfo()]:[2]}}))}))()}},{key:"removeBookmark",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var r;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(i){switch(i.label){case 0:return n.rootBookmark?[3,2]:[4,n.getRootBookmark(t)];case 1:i.sent(),i.label=2;case 2:if(n.rootBookmark.id==e?(r=n.rootBookmark,n.rootBookmark=null):r=n.rootBookmark.removeChild(e),!r)throw new Error("Failed to delete bookmark, The destination bookmark node's ID (".concat(e,") does not exist or has not been loaded."));return[2,r.remove()]}}))}))()}},{key:"getLayerNodes",value:function(){var e=this.engine,t=this;return this.docPromise.then((function(n){var r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),i=new _PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__.Z(n,e);t.pdfLayer&&t.pdfLayer.delete(),t.pdfLayer=i;var a=i.toJson();return r.resolve(a),r.promise}))}},{key:"getRootLayerNodeChildrenCount",value:function(){var e=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var t,n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(a){switch(a.label){case 0:return t=e.engine,[4,e.docPromise];case 1:if(n=a.sent(),(r=new t.LayerTree(n)).IsEmpty())return[2,0];i=r.GetRootNode();try{return[2,i.GetChildrenCount()]}finally{r.delete(),i.delete()}return[2]}}))}))()}},{key:"createLayerNodes",value:function(e){return new _PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__.Z(this.doc,this.engine,e)}},{key:"getRedaction",value:function(){var e=this.engine,t=this;return this.docPromise.then((function(n){if(!e.Library.HasModuleLicenseRight({value:3}))return Promise.reject(_error_code__WEBPACK_IMPORTED_MODULE_12__.v.noRedactionLicense);if(!t.c_redaction)try{t.c_redaction=new e.Redaction(n)}catch(t){isNaN(t)||(t=e.getErrorCode(t)),console.warn(t)}return t.c_redaction}))}},{key:"applyRedaction",value:function(){var e=this,t=this.engine.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),n="applyRedaction",r=n;postMessage({workflow:n,type:r,msg:{state:"start",progress:0}});for(var i={},a={},o=[],s=0;s<this.doc.GetPageCount();s++)o.push(this.getPageByIndex(s).then((function(e){return a[e.index]=e,e.getAnnots()})));return Promise.all(o).then((function(a){var o=function(t){var n=e.pageCache[t];i[n.index]||(i[n.index]={}),a[n.index].forEach((function(e){var t=e.annot.GetDict().GetObjNum();t&&(i[n.index][t]=e)}))};for(var s in e.pageCache)o(s);return e.getRedaction().then((function(i){for(var a=[],o=i.StartApplyAll(t),s=-1;100!==s;){if(-1===(s=o.GetRateOfProgress()))return postMessage({workflow:n,type:r,msg:{state:"error",progress:-1}}),!1;100!=s&&postMessage({workflow:n,type:r,msg:{state:"progress",progress:s}}),o.Continue()}for(var u in e.pageCache){var c=e.pageCache[u];a.push(c.update())}return Promise.all(a)})).then((function(e){for(var t=[],a=0;a<e.length;a++){var o=e[a],s=o.index,u=i[s],c=[];for(var l in u){var d=u[l];(-1===o.annotIds.indexOf(Number(l))||d.annot.IsEmpty())&&c.push(l)}t.push({pageIndex:s,removedAnnotIds:c})}return postMessage({workflow:n,type:r,msg:{state:"end",progress:100}}),t})).catch((function(t){return-6===t.error||isNaN(t)||(t=e.engine.getErrorCode(t)),Promise.reject(t)}))}))}},{key:"exportToFDF",value:function(e,t,n){var r=this,i=this.engine,a=new i.FDFDoc(e);if(0==Object.keys(n).length){var o=new i.Range(0,this.doc.GetPageCount(),i.RangeFilter.e_All);this.doc.ExportToFDF(a,t,o),o.delete(),o=null}else{var s=this,u=function(e){var t=s.getPageById(e);if(!t)throw new Error("page not loaded: "+e);n[e].forEach((function(e){var n=t._getAnnotIndexById(e),i=t.page.GetAnnot(n);!i.IsEmpty()&&i.IsMarkup()&&r.doc.ExportAnnotToFDF(i,a)}))};for(var c in n)u(c)}var l=0,d=[],f=i.WriterCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return l},WriteBlock:function(e,t,n){l+=n;var r,a=i.HEAPU8.buffer;return r=a.slice?a.slice(e,e+n):new Uint8Array(a,e,n).buffer,d.push(r),!0}});return a.SaveAs(f),new Blob(d,{type:["application/vnd.adobe.fdf","application/vnd.xfdf"][e]})}},{key:"exportToStardardXml",value:function(e,t){var n,r=this.engine,i=this.doc,a=null,o=r.ExportToImageCallback.implement({Release:noop,GetPDFProducer:function(){return new r.WString("")},GetPDFDocAuthor:function(){return new r.WString("")},GetStreamCallbackForImage:function(e){var i=e.toString();return-1!=i.indexOf("\\")&&(i=i.replace("\\","/")),0==i.indexOf("/")&&(i=i.substr(1,i.length-1)),a&&a.byteLength>0&&t({fileName:i,imgBuffer:a,percent:n?n.GetRateOfProgress():0}),a=new ArrayBuffer,r.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return a.byteLength},ReadBlock:function(e,t,n){if(a&&a.byteLength>0){var i=new Uint8Array(a,t,n);return r.HEAPU8.set(i,e),!0}return!1},WriteBlock:function(e,t,n){if(a.byteLength<t+n){var i=a;if(a=new ArrayBuffer(t+n),0!==i.byteLength){var o=new Uint8Array(i);new Uint8Array(a).set(o)}}var s=new Uint8Array(a,t,n),u=r.HEAPU8.subarray(e,e+n);return s.set(u),!0}})}}),s=0,u=[],c=r.WriterCallback.implement({Release:noop,Flush:function(){return!0},GetSize:function(){return s},WriteBlock:function(e,t,n){s+=n;var i,a=r.HEAPU8.buffer;return i=a.slice?a.slice(e,e+n):new Uint8Array(a,e,n).buffer,u.push(i),!0}}),l=new r.WString(e),d=new r.WString(e),f=r.PauseCallback.implement({NeedToPauseNow:function(){return!0}});n=i.StartExportToXML(c,d,l,o,f),t({percent:n.GetRateOfProgress()}),continueExport={exportImageCallback:o,pauseCallback:f};for(var h=r.ProgressiveState.e_ToBeContinued;continueExport&&h===r.ProgressiveState.e_ToBeContinued;)h=n.Continue(),t({percent:n.GetRateOfProgress()});t({imgBuffer:a,xmlBuffer:u,fileName:e,percent:100}),this.cancelExport()}},{key:"exportToTxt",value:function(e,t,n){var r=this.engine,i=new r.Range;if(t&&t.string){var a=t.string,o=t.filter;a.split(",").filter((function(e){return!!e})).forEach((function(e){if(e.indexOf("-")>=0){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(e.split("-"),2),n=t[0],a=t[1];i.AddSegment(Number(n)-1,Number(a)-1,{all:r.RangeFilter.e_All,even:r.RangeFilter.e_Odd,odd:r.RangeFilter.e_Even}[o])}else i.AddSingle(Number(e)-1)}))}var s,u=new r.ExportProvider,c=0,l=[],d=r.StreamCallback.implement({Release:function(){d.delete()},Flush:function(){return!0},GetSize:function(){return c},ReadBlock:function(){return!0},WriteBlock:function(e,t,n){c+=n;var i,a=r.HEAPU8.buffer;return i=a.slice?a.slice(e,e+n):new Uint8Array(a,e,n).buffer,l.push(i),!0}});"convert-pdf-to-accessible-txt"===e?(s=r.ExportAccessibilityTextCallback.implement({Release:function(){},GetEntryKey:function(){return new r.WString("")},GetTxtFileStream:function(){return d}}),u.SetExportAccessibilityTextCallback(s)):(s=r.ExportTextCallback.implement({Release:function(){},GetTxtFileStream:function(){return d}}),u.SetExportTextCallback(s));var f=r.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),h=new r.ExportMgr(u,this.doc),g=h.StartExportPDFToText(i,f);continueExport={range:i,exportTextCallback:s,pauseCallback:f,exportProvider:u,exportMgr:h};for(var p=r.ProgressiveState.e_ToBeContinued;continueExport&&p===r.ProgressiveState.e_ToBeContinued;)p=g.Continue(),n({percent:g.GetRateOfProgress()});n({buffer:l,percent:100}),this.cancelExport()}},{key:"generateImageExportSetting",value:function(e,t,n){var r=null,i=function(e){if(!(["png","jpeg","jpeg2000","tiff","bmp"].indexOf(t.format)<0)){e.SetImageColorSpace({value:t.imageColorSpace});var n=[0,72,96,150,300,600,1200,2400].indexOf(t.imageResolution);n>=0?e.SetImageResolution({value:n}):(e.SetImageResolution({value:-1}),e.SetCustomResolution(t.imageResolution)),"tiff"===t.format&&e.SetImageConvertType({value:t.imageConvertType})}};switch(t.format){case"png":(r=new e.PNGExportSetting).SetInterlace({value:t.pngInterlace}),i(r);break;case"jpeg":case"jpeg2000":(r=new e.JPEGExportSetting("jpeg2000"===t.format)).SetImageGrayscaleQuality({value:t.imageGrayscaleQuality}),r.SetImageColorQuality({value:t.imageColorQuality}),"jpeg2000"===t.format&&r.SetImageTile(t.imageTile),i(r);break;case"tiff":(r=new e.TIFFExportSetting).SetMonochromeCompressType({value:t.monochromeCompressType}),r.SetGrayscaleCompressType({value:t.grayscaleCompressType}),r.SetColorCompressType({value:t.colorCompressType}),i(r);break;case"bmp":i(r=new e.BMPExportSetting)}if(r){if(n)return r.SetImageSettingType(e.ImageSettingType.e_PageToImage),r;switch(t.type){case"pageToImage":r.SetImageSettingType(e.ImageSettingType.e_PageToImage);break;case"imageObjsOfPage":r.SetImageSettingType(e.ImageSettingType.e_ImageObjsOfPage),r.SetImageMinInch({value:t.imageMinInch})}return r}}},{key:"exportToImage",value:function(e,t,n,r){var i=this.engine,a=this.generateImageExportSetting(i,e),o=new i.Range;if(n&&n.string){var s=n.string,u=n.filter;s.split(",").filter((function(e){return!!e})).forEach((function(e){if(e.indexOf("-")>=0){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(e.split("-"),2),n=t[0],r=t[1];o.AddSegment(Number(n)-1,Number(r)-1,{all:i.RangeFilter.e_All,even:i.RangeFilter.e_Odd,odd:i.RangeFilter.e_Even}[u])}else o.AddSingle(Number(e)-1)}))}var c=null,l=null,d=i.ExportImageCallback.implement({Release:function(){},GetDeviceCapsX:function(){return e.dpi&&e.dpi.x||96},GetDeviceCapsY:function(){return e.dpi&&e.dpi.y||96},CallBackError:function(){return!0},GetImageFileStream:function(e,n){c&&c.byteLength>0&&r({fileName:l,buffer:c,percent:p?p.GetRateOfProgress():0}),c=new ArrayBuffer;var a=t.lastIndexOf("."),o=t.substr(0,a),s=t.substr(a);return l=n<=0?o+"_Page"+e.toString()+s:o+"_Page"+e.toString()+"_Image"+n.toString()+s,i.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return c.byteLength},ReadBlock:function(e,t,n){if(c&&c.byteLength>0){var r=new Uint8Array(c,t,n);return i.HEAPU8.set(r,e),!0}return!1},WriteBlock:function(e,t,n){if(c.byteLength<t+n){var r=c;if(c=new ArrayBuffer(t+n),0!==r.byteLength){var a=new Uint8Array(r);new Uint8Array(c).set(a)}}var o=new Uint8Array(c,t,n),s=i.HEAPU8.subarray(e,e+n);return o.set(s),!0}})}}),f=i.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),h=new i.ExportProvider;h.SetExportImageCallback(d);var g=new i.ExportMgr(h,this.doc),p=g.StartExportPDFToImage(a,o,f);r({percent:p.GetRateOfProgress()}),continueExport={imageExportSetting:a,engineRange:o,exportImageCallback:d,pauseCallback:f,exportProvider:h,exportMgr:g};for(var v=i.ProgressiveState.e_ToBeContinued;continueExport&&v===i.ProgressiveState.e_ToBeContinued;)v=p.Continue(),r({percent:p.GetRateOfProgress()});r({buffer:c,fileName:l,percent:100}),this.cancelExport()}},{key:"exportImageObjectToImage",value:function(e,t,n,r){var i=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var a,o,s,u,c,l,d,f,h,g,p,v;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(_){switch(_.label){case 0:return a=i.engine,o=i.generateImageExportSetting(a,t,e),s=i.doc.GetPage(e.index),[4,new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(e.index,i).getGraphicsObjectAtPoint(e.selectPosition,0,3)];case 1:for(u=_.sent(),c=u.graphicsObject,l=null,d=a.ExportImageCallback.implement({Release:function(){},GetDeviceCapsX:function(){return t.dpi&&t.dpi.x||96},GetDeviceCapsY:function(){return t.dpi&&t.dpi.y||96},CallBackError:function(){return!0},GetImageFileStream:function(){l&&l.byteLength>0&&r({fileName:n,buffer:l,percent:p?p.GetRateOfProgress():0}),l=new ArrayBuffer;var e=a.StreamCallback.implement({Release:function(){e.delete()},Flush:function(){return!0},GetSize:function(){return l.byteLength},ReadBlock:function(e,t,n){if(l&&l.byteLength>0){var r=new Uint8Array(l,t,n);return a.HEAPU8.set(r,e),!0}return!1},WriteBlock:function(e,t,n){if(l.byteLength<t+n){var r=l;if(l=new ArrayBuffer(t+n),0!==r.byteLength){var i=new Uint8Array(r);new Uint8Array(l).set(i)}}var o=new Uint8Array(l,t,n),s=a.HEAPU8.subarray(e,e+n);return o.set(s),!0}});return e}}),f=a.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),(h=new a.ExportProvider).SetExportImageCallback(d),g=new a.ExportMgr(h,i.doc),p=g.StartExportImageObjToImage(c,s,o,f),r({percent:p.GetRateOfProgress()}),continueExport={imageExportSetting:o,exportImageCallback:d,pauseCallback:f,exportProvider:h,exportMgr:g},v=a.ProgressiveState.e_ToBeContinued;continueExport&&v===a.ProgressiveState.e_ToBeContinued;)v=p.Continue(),r({percent:p.GetRateOfProgress()});return r({buffer:l,fileName:n,percent:100}),i.cancelExport(),[2]}}))}))()}},{key:"cancelExport",value:function(){if(continueExport){for(var e in continueExport)continueExport[e]=null;continueExport=null}}},{key:"loadForm",value:function(){if(this.form)return this.form;var e=this.engine,t=new e.Form(this.doc);return this.form=new _pdf_jr_Form_Form__WEBPACK_IMPORTED_MODULE_7__.Z(this,t,e,this.JR),this.form}},{key:"destroyForm",value:function(){this.form&&(this.form.destroy(),this.form=null)}},{key:"setOpenAction",value:function(e,t){var n=this.JR.actionManager.create(this.doc,e);return this.doc.SetOpenAction(n),(n=this.JR.actionManager.get(n,this.doc,this.JR)).create(t),n.toJson()}},{key:"getSecurityType",value:function(){return this.doc.GetSecurityHandler().GetSecurityType().value}},{key:"setCertificateAndPermission",value:function(e,t,n){var r=this.engine,i=new FileReaderSync,a=new r.EnvelopeArray;e.forEach((function(e){var t=e.cerFile,n=e.permission,o=i.readAsArrayBuffer(t),s=r.StreamCallback.implement({GetSize:function(){return o.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,t,n){var i=new Uint8Array(o,t,n);return r.HEAPU8.set(i,e),!0}}),u=null;if(n){var c=n.print,l=n.change,d=n.accessibility,f=n.copy;(u=new r.CertPermission).bEnableCopy=f,u.bEnableTextAccess=d,u.printPer={value:c},u.changePer={value:l}}var h=new r.Envelope(s,u);a.Add(h)}));var o=r.CipherType.e_CipherNone;t===_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES128||t===_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256?o=r.CipherType.e_CipherAES:t===_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.RC4&&(o=r.CipherType.e_CipherRC4);var s=new r.CertificateSecurityHandler;return s.Initialize(a,o,n),this.doc.SetSecurityHandler(s),!0}},{key:"setPasswordAndPermission",value:function(e,t,n,r,i){var a=this,o=this.engine;return this.docPromise.then((function(s){var u,c;if(r==_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.None)u=o.CipherType.e_CipherNone,c=0;else if(r==_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.RC4)u=o.CipherType.e_CipherRC4,c=16;else if(r==_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES128)u=o.CipherType.e_CipherAES,c=16;else{if(r!=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256)throw new Error("cipher error");u=o.CipherType.e_CipherAES,c=32}var l,d,f,h,g,p,v=s.GetEncryptionType(),_=s.GetSecurityHandler(),m=_.GetSecurityType();try{v!==o.EncryptType.e_EncryptNone&&1===m.value?((d=s.GetStdEncryptData()).cipher=u,d.is_encrypt_metadata=i,d.key_length=c,d.user_permissions=n,l=new o.StdSecurityHandler(_)):(d=new o.StdEncryptData(i,n,u,c),l=new o.StdSecurityHandler)}catch(e){d=new o.StdEncryptData(i,n,u,c),l=new o.StdSecurityHandler}r==_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256?(l.SetAES256ModifyFlags(7),-1===e?(f=new o.WString(""),h=new o.WString(t),l.InitializeW(d,f,h)):(f=new o.WString(e),h=new o.WString(t),l.InitializeW(d,f,h)),f.delete(),h.delete()):(g=new o.String(-1===e?"":e),p=new o.String(t),l.Initialize(d,g,p),g.delete(),p.delete());var y=s.SetSecurityHandler(l);return y&&(a.stdCipherOptions={isEncryptMetadata:i,permission:n,cipherType:r}),d.delete(),l.delete(),y}))}},{key:"removeSecurity",value:function(){var e=this;return this.docPromise.then((function(t){return e.registerDRMSecurityCallback=!1,t.RemoveSecurity()}))}},{key:"checkPassword",value:function(e){var t=this,n=this.engine;return this.docPromise.then((function(r){var i=new n.String(e),a=r.CheckPassword(i);return i.delete(),t.isOwner=3==a.value,a.value}))}},{key:"getStdCipherOptions",value:function(){var e=this;return this.docPromise.then((function(t){if(e.stdCipherOptions)return e.stdCipherOptions;var n={},r=t.GetSecurityHandler();if(!r||r.IsEmpty())return n;if(1==r.GetSecurityType().value){var i=t.GetStdEncryptData();n.isEncryptMetadata=i.is_encrypt_metadata,n.permission=i.user_permissions,0===i.cipher.value?n.cipherType=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.None:1===i.cipher.value?n.cipherType=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.RC4:2===i.cipher.value&&(16===i.key_length?n.cipherType=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES128:n.cipherType=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256)}return n}))}},{key:"getUserPassword",value:function(e){var t,n=this,r=this.engine;return this.docPromise.then((function(e){return t=e,n.getStdCipherOptions()})).then((function(i){if(i.cipherType===_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256)return n.password||"";var a,o=new r.String(e);try{a=t.GetUserPassword(o).toString()}catch(e){a=n.password||""}return o.delete(),a}))}},{key:"getFileVersion",value:function(){return this.docPromise.then((function(e){return e.GetFileVersion()}))}},{key:"setRenderFlag",value:function(e){this.renderFlags=e}},{key:"getRenderFlags",value:function(){return this.renderFlags}},{key:"drmEncrypt",value:function(e){var t=this.engine;return this.docPromise.then((function(e){var n=e.GetSecurityHandler();if(n&&!n.IsEmpty()){var r=n.GetSecurityType();if(r!==t.EncryptType.e_EncryptUnknown&&r!==t.EncryptType.e_EncryptNone){var i=new Error("This document has been encrypted and cannot be encrypted again!");return i.error=-1,Promise.reject(i)}}return e})).then((function(n){var r=new t.String(e.subFilter),i=new t.DRMEncryptData(e.isEncryptMetadata,r,t.CipherType.values[e.cipher],e.keyLength,e.isOwner,e.userPermissions);r.delete();var a=new t.DRMSecurityHandler;if(e.values){var o=e.values;for(var s in o){var u=new t.String(s),c=new t.WString(o[s]);a.SetDRMValue(u,c)}}if(a.Initialize(i,new t.String(e.fileId),new t.String(e.initialKey)))return i.delete(),[n,a];i.delete();var l=new Error("Document encryption failed!");return l.error=2,Promise.reject(l)})).then((function(e){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(e,2),n=t[0],r=t[1];return n.SetSecurityHandler(r)}))}},{key:"getTemplates",value:function(){var e=this.doc.GetCatalog();if(!e)return null;var t=this.engine,n=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t,"Names"),r=e.GetElement(n);if(!r)return null;var i=r.GetDict();if(!i)return null;var a=new Array,o=i.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t,"Templates"));if(o){var s=o.GetDict();if(s){var u=s.GetElement(n);if(u){var c=u.GetArray();if(c)for(var l=c.GetElementCount(),d=0;d<l;d+=2){var f=c.GetElement(d).GetString(),h=this.JR.getPDFString(f);if(h&&""!==h&&d+1<l){var g=c.GetElement(d+1);g.GetType()===this.engine.PDFObjectType.e_Reference&&(g=g.GetDirectObject());var p={name:h,objNum:g.GetObjNum()};a.push(p)}}}}}var v=[],_=i.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t,"Pages"));if(_){var m=_.GetDict();if(m){var y=m.GetElement(n);if(y){var S=y.GetArray();if(S)for(var b=S.GetElementCount(),D=0;D<b;D+=2){var P=S.GetElement(D).GetString(),I=this.JR.getPDFString(P);if(I&&""!==I&&D+1<b){var A=S.GetElement(D+1);A.GetType()===this.engine.PDFObjectType.e_Reference&&(A=A.GetDirectObject());var w={name:I,objNum:A.GetObjNum()};v.push(w)}}}}}return{visibleArr:v,invisibleArr:a}}},{key:"removeTemplate",value:function(e){var t=this.doc.GetCatalog();if(!t)return!0;var n=this.engine,r=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"Names"),i=t.GetElement(r);if(!i)return!0;var a=i.GetDict();if(!a)return!0;var o=a.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"Templates")),s=o?o.GetDict():null;if(s){var u=s.GetElement(r);if(u){var c=u.GetArray();if(c)for(var l=c.GetElementCount(),d=0;d<l;d+=2){var f=c.GetElement(d).GetString().toString();if(f&&""!==f&&f===e&&d+1<l){c.RemoveAt(d),c.RemoveAt(d);break}}}}var h=a.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"Pages")),g=h?h.GetDict():null;if(g){var p=g.GetElement(r);if(p){var v=p.GetArray();if(v)for(var _=v.GetElementCount(),m=0;m<_;m+=2){var y=v.GetElement(m).GetString().toString();if(y&&""!==y&&y===e&&m+1<_){v.RemoveAt(m),v.RemoveAt(m);break}}}}return!0}},{key:"hideTemplate",value:function(e,t){var n=this.doc.GetCatalog();if(!n)return!1;var r=this.engine,i=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)("Names"),a=n.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Names"));if(!a)return!1;var o=a.GetDict();if(!o)return!1;var s=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Templates"),u=o.GetElement(s),c=u?u.GetDict():null;c||(c=this.engine.PDFDictionary.Create(),o.SetAtReference(s,c,this.doc));var l=c.GetElement(i);l||(l=this.engine.PDFArray.Create(),c.SetAt(i,l));var d=l.GetArray(),f=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Pages"),h=o.GetElement(f),g=h?h.GetDict():null;g||(g=this.engine.PDFDictionary.Create(),o.SetAtReference(f,g,this.doc));var p=g.GetElement(i);p||(p=this.engine.PDFArray.Create(),g.SetAt(i,p));var v=p.GetArray(),_=v,m=d,y="Page";t&&(_=d,m=v,y="Template");var S=new this.engine.WString(e.name);_.AddString(S),S.delete();var b=this.engine.PDFObject.CreateReference(this.doc,e.objNum);_.AddElement(b);for(var D=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Type"),P=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,y),I=m.GetElementCount(),A=0;A<I;A+=2){var w=m.GetElement(A).GetString().toString();if(w&&""!==w&&w===e.name&&A+1<I){var C=m.GetElement(A+1);if(C.GetType()===this.engine.PDFObjectType.e_Reference&&(C=C.GetDirectObject()),C.GetObjNum()===e.objNum){(C=C.GetDict()).SetAtName(D,P),m.RemoveAt(A),m.RemoveAt(A);break}}}}},{key:"spawnPage",value:function(e,t,n,r,i){var a=t.name,o=this.doc.GetPageCount();(-1===n||n>o)&&(n=o);var s=new this.engine.WString(a);if(this.doc.SpawnPage(s,n,r,i)){var u,c=u=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(n,this);u.page=this.doc.GetPage(n);var l=this.doc.GetPageCount()-1;return this.updatePageIndex(n+1,l,!0,!1),this.updatePageIndexMap(n,c),this.updatePageCache(u),u.toJson()}}},{key:"hasForm",value:function(){try{var e=this.engine,t=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"AcroForm"),n=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"Fields");return this.doc.GetCatalog().GetElement(t).GetDict().GetElement(n).GetDirectObject().GetArray().GetElementCount()>0}catch(e){return!1}}},{key:"reloadPageAnnots",value:function(e){var t=this;e.forEach((function(e){t.pageIndexMap[e]&&t.pageIndexMap[e].reloadAnnots()}))}},{key:"getFontBufferByName",value:function(e){for(var t=this.doc.GetFontCount(),n=0;n<t;n++){var r=this.doc.GetFont(n);if(r.GetName().toString()==e)return _PDFFontMgr__WEBPACK_IMPORTED_MODULE_11__.Z.getWoffDataBuffer(r.GetWoffData(this.doc),this.engine)}}},{key:"getStructureRoles",value:function(){var e=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var t,n,r,i,a,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(s){if(t=e.doc,!t.IsTaggedPDF())return[2];for(n=[],r=t.GetStructureRoles(),i=r.GetSize(),a=0;a<i;a++)o=r["operator[]"](a).toString(),n.push(o);return[2,n]}))}))()}},{key:"getPageSizes",value:function(e,t){if(this.canGetXFA())return this.getXFAPageSizes(e,t);var n={},r=this.engine,i=this.doc,a=r.ErrorCode.e_ErrDataNotReady;function o(e,t){var n,s=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();try{n=i.GetPageBasicInfo(t)}catch(l){var u=r.getErrorCode(l);if(u===r.ErrorCode.e_ErrUnknown)n={width:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.tJ,height:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.$h,rotation:{value:0}};else{if(u===a)return setTimeout((function(){o(e,t).then(s.resolve,s.reject)}),30),s.promise;var c;try{if((c=i.GetPage(t)).IsEmpty())return c.delete(),s.reject(u.value),s.promise;n={width:c.GetWidth(),height:c.GetHeight(),rotation:{value:c.GetRotation&&c.GetRotation().value||0}}}catch(e){return s.reject(u.value),c&&c.delete(),s.promise}}}return e[t]={width:n.width,height:n.height,rotation:n.rotation.value},s.resolve(),s.promise}for(var s=[],u=e;u<e+t;u++)s.push(o(n,u));return Promise.all(s).then((function(){return n}))}},{key:"getXFAPageSizes",value:function(e,t){var n={},r=this.engine,i=this.xfaDoc,a=r.ErrorCode.e_ErrDataNotReady;function o(e,t){var n,s,u=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();try{(s=i.GetPage(t)).IsEmpty()||(n={width:s.GetWidth(),height:s.GetHeight(),rotation:{value:0}})}catch(i){var c=r.getErrorCode(i);if(c!==r.ErrorCode.e_ErrUnknown)return c!==a?(u.reject(c.value),s&&s.delete(),u.promise):(setTimeout((function(){o(e,t).then(u.resolve,u.reject)}),30),u.promise);n={width:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.tJ,height:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.$h,rotation:{value:0}}}return e[t]={width:n.width,height:n.height,rotation:n.rotation.value},u.resolve(),u.promise}for(var s=[],u=e;u<e+t;u++)s.push(o(n,u));return Promise.all(s).then((function(){return n}))}},{key:"_generateRange",value:function(e,t,n){var r,i=0;return e.forEach((function(e){if(1===e.length){var a=e[0];(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.U)(a)||(a=0),a<0?a=0:a>n-1&&(a=n-1),i++,r?r.AddSingle(a):r=new t.Range(a)}else if(2===e.length){var o=e[0];(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.U)(o)||(o=0),o<0?o=0:o>n-1&&(o=n-1);var s=e[1];(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.U)(s)||(s=0),s<0?s=0:s>n-1&&(s=n-1),o>s&&(o=+s,o-=s=o-s),r?o===s?(i++,r.AddSingle(o)):(i+=s-o+1,r.AddSegment(o,s,0)):o===s?(i++,r=new t.Range(o)):(i+=s-o+1,r=new t.Range(o,s,0))}})),{ranges:r,addCount:i}}},{key:"copyPages",value:function(e,t){var n=this,r=this.engine,i=this.doc,a=i.GetPageCount();(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.U)(t)||(t=0);var o=this._generateRange(e,r,a),s=o.ranges,u=o.addCount,c=[],l=new r.String(""),d=i.StartImportPages(t,i,0,l,s);l.delete();for(var f=[],h=0;h<u;h++)f.push(t+h);return 100===d.GetRateOfProgress()&&f.map((function(e){var t,r=i.GetPage(e),a=r.GetIndex(),o=t=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(a,n);t.page=r,n.updatePageIndex(a+1,i.GetPageCount()-1,!0,!1),n.updatePageIndexMap(a,o),n.updatePageCache(t),c.push(t.toJson())})),s&&s.delete(),c}},{key:"saveCopyPagesData",value:function(e){var t=this.engine,n=this.doc;this.pageEditor&&this.pageEditor.generateContent();for(var r=n.GetPageCount(),i=0,a=[],o=t.WriterCallback.implement({Release:noop,Flush:function(){return!0},GetSize:function(){return i},WriteBlock:function(e,n,r){i+=r;var o,s=t.HEAPU8.buffer;return o=s.slice?s.slice(e,e+r):new Uint8Array(s,e,r).buffer,a.push(o),!0}}),s=this._generateRange(e,t,r),u=s.ranges,c=(s.addCount,t.ExtractPagesOptions.e_ExtractPagesOptionAnnotation.value|t.ExtractPagesOptions.e_ExtractPagesOptionOCProperties.value),l=n.StartExtractPages(o,c,u,null),d=-1;100!==d;){if(-1===(d=l.GetRateOfProgress()))return;l.Continue()}for(var f=new Uint8Array(i),h=0,g=0,p=a.length;g<p;g++){var v=a[g];f.set(new Uint8Array(v),h),h+=v.byteLength}f=f.slice(0),getDB().set("COPY_PAGES_BUFFERS",f)}},{key:"pastePages",value:function(e){var t=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var n,r,i,a,o,s,u,c,l,d;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(f){switch(f.label){case 0:return n=t.engine,[4,getDB().get("COPY_PAGES_BUFFERS")];case 1:if(r=f.sent(),r.byteLength,i=new PDFDoc1(t.JR,{buffer:r}),a=new n.String(""),i.doc.Load(a)!==n.ErrorCode.e_ErrSuccess)throw"pastePages fail: source doc load error";for(o=new n.String(""),s=new n.Range,u=i.doc.GetPageCount(),c=0;c<u;c++)s.AddSingle(c);if(t.doc.StartImportPages(e,i.doc,0,o,s).GetErrorCode()===n.ErrorCode.e_ErrFormat)throw"format error";return l=t.doc.GetPageCount()-1,d=Array.from(Array(u).keys(),(function(n){var r=n+e,i=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(r,t);return i.page=t.doc.GetPage(r),t.updatePageIndex(r+1,l,!0,!1),t.updatePageIndexMap(r,i),t.updatePageCache(i),i.toJson()})),[2,d]}}))}))()}},{key:"_renderThumbnailToBitmap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=this.engine;e.IsParsed()||e.StartParse(0,null,!1);var r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.EF)(),i=76.5*r.x/72+.5>>0,a=99*r.y/72+.5>>0,o=new n.Bitmap(i,a,n.DIBFormat.e_DIBArgb,0,0),s=new n.Renderer(o,!1);s.SetRenderContentFlags(t);var u=e.GetDisplayMatrix(0,0,i,a,{value:0});return s.StartRender(e,u,null).Continue(),s.delete(),o}},{key:"_calcStep",value:function(e){var t=10;return e>1e3?t=e/100:e>100&&(t=e/10),t}},{key:"embedAllPageThumbnail",value:function(){var e,t,n,r,i,a,o,s,u;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(c){switch(c.label){case 0:this._embedCancel=!1,e=this.doc,t=e.GetPageCount(),n=e.GetPage(0).LoadThumbnail(),r=n.IsEmpty(),i=this._calcStep(t),a=0,o=0,c.label=1;case 1:if(!(o<t))return[3,4];if(this._embedCancel)throw{msg:"cancel",status:r};return s=e.GetPage(o),u=this._renderThumbnailToBitmap(s),s.SetThumbnail(u),u.delete(),a<=o+1||t===o+1?(a+=i,[4,(o+1)/t]):[3,3];case 2:c.sent(),c.label=3;case 3:return o++,[3,1];case 4:return[2,r]}}))}},{key:"removeEmbeddedPageThumbnail",value:function(){var e,t,n,r,i,a,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(s){switch(s.label){case 0:this._removeEmbeddedCancel=!1,e=this.doc,t=e.GetPageCount(),n=e.GetPage(0).LoadThumbnail(),r=n.IsEmpty(),i=this._calcStep(t),a=0,o=0,s.label=1;case 1:if(!(o<t))return[3,4];if(this._removeEmbeddedCancel)throw{msg:"cancel",status:!r};return e.GetPage(o).RemoveThumbnail(),a<=o+1||t===o+1?(a+=i,[4,(o+1)/t]):[3,3];case 2:s.sent(),s.label=3;case 3:return o++,[3,1];case 4:return[2,!r]}}))}},{key:"cancelEmbedAllPageThumbnail",value:function(){this._embedCancel=!0}},{key:"cancelRemoveEmbeddedPageThumbnail",value:function(){this._removeEmbeddedCancel=!0}},{key:"_isFullPage",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this).doc.GetPageCount();return e.length===t&&(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(Array(t).keys()).every((function(t){return t===e[t]}))}},{key:"importPagesFromPDFDocs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var i,a,o,s,u,c;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(l){switch(l.label){case 0:return i=r.engine,a=new i.String(n),o=t.reverse().reduce((function(t,o){var s=t.successfulCount,u=t.errs,c=o.srcDoc,l=o.srcPages,d=(c.oriFile?c.oriFile.name:void 0)||"temp.pdf",f=new i.Range,h=c.doc.GetPageCount();l.sort((function(e,t){return e>t?1:-1})),new Set(l).size!==h&&l.forEach((function(e){return f.AddSingle(e)}));var g=new i.LayerTree(c.doc),p=0;if(!g.IsEmpty()){var v=g.GetRootNode();v.GetChildrenCount()>0&&n&&(p=i.ImportPageFlags.e_ImportFlagWithLayers.value),v.delete()}g.delete();var _=c.doc.GetPage(0);_.IsParsed()||_.StartParse(0,null,!1);for(var m=r.doc.StartImportPages(e,c.doc,p,a,f),y=-1;y<100;){if(-1===(y=m.GetRateOfProgress()))return{successfulCount:s,errs:(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(u).concat([{name:d,err:"rate of progress is -1"}])};m.Continue()}return{successfulCount:s+l.length,errs:u}}),{successfulCount:0,errs:[]}),s=o.successfulCount,u=o.errs,a.delete(),c=Array.from(Array(s).keys()).map((function(t){return t+e})).map((function(e){var t=r.doc.GetPage(e),n=t.GetIndex(),i=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(n,r);return i.page=t,r.updatePageIndex(n+1,r.doc.GetPageCount()-1,!0,!1),r.updatePageIndexMap(n,i),r.updatePageCache(i),i.toJson()})),[4,r.getBookmarks()];case 1:return[2,{bookmarks:l.sent(),pagesJson:c,errs:u}]}}))}))()}},{key:"exportPagesToPDFDocs",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=this.engine,o=new a.String(r),s=new a.WString(i),u=this._isFullPage(e),c=null;u||(c=new a.Range,e.forEach((function(e){return c.AddSingle(e)})));var l=n.reverse().map((function(e){var n=e.destDoc,r=e.destIndex,i=n.oriFile?n.oriFile.name:"temp.pdf";if(u)try{return n.doc.InsertDocument(r,t.doc,a.InsertDocOptions.e_InsertDocOptionAttachments.value|a.InsertDocOptions.e_InsertDocOptionBookmark.value,s),{name:i,doc:n}}catch(e){return{name:i,err:e}}for(var l=n.doc.StartImportPages(r,t.doc,0,o,c),d=-1;d<100;){if(-1===(d=l.GetRateOfProgress()))return{name:i,err:"rate of progress is -1"};l.Continue()}return{name:i,doc:n}}));return o.delete(),s.delete(),l}},{key:"startImportPages",value:function(e,t){var n=this,r=t.size,i=t.getBuffer,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_shared_consts__WEBPACK_IMPORTED_MODULE_1__.cm,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6?arguments[6]:void 0,l=this.engine,d=l.ReaderCallback.implement({Release:function(){release()},GetSize:function(){return r},ReadBlock:function(e,t,n){var r=new Uint8Array(i(t,n));return l.HEAPU8.set(r,e),!0}}),f=l.createPDFDocWithReaderCallback(d,!1),h=new l.String(a);f.Load(h);var g=f.GetPageCount(),p=g-1,v=this.doc.GetPageCount();(u=Math.min(p,u))<0&&(u=(u+g)%g),(c=Math.min(p,c))<0&&(c=(c+g)%g);var _=Math.min(u,c),m=Math.max(u,c),y=new l.String(s),S=new l.Range(_,m,0);e<0&&(e=e%v+v),e=Math.max(0,Math.min(v,e));for(var b=this.doc.StartImportPages(e,f,o,y,S),D=[],P=0;P<=m-_;P++)D.push(e+P);var I=[];return 100===b.GetRateOfProgress()&&D.map((function(e){var t,r=n.doc.GetPage(e),i=r.GetIndex(),a=t=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(i,n);t.page=r,n.updatePageIndex(i+1,n.doc.GetPageCount()-1,!0,!1),n.updatePageIndexMap(i,a),n.updatePageCache(t),I.push(t.toJson())})),I}},{key:"extractPages",value:function(e,t,n){var r=t.writeStream,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_shared_consts__WEBPACK_IMPORTED_MODULE_1__.cm,a=this.engine,o=new a.PDFDoc,s=new a.String("");o.Load(s);var u,c=this.doc;n&&(u=a.ReaderCallback.implement({Release:function(){release()},GetSize:function(){return n.size},ReadBlock:function(e,t,r){var i=new Uint8Array(n.getBuffer(t,r));return a.HEAPU8.set(i,e),!0}}),c=a.createPDFDocWithReaderCallback(u,!1),s=new a.String(i||""),c.Load(s));var l=c.GetPageCount(),d=new a.String("");e.reverse().forEach((function(e){if(1===e.length){if(e[0]>=l||isNaN(e[0]))return;e[0]<0&&(e[0]=e[0]%l+l);var t=new a.Range((e[0]+l)%l);o.StartImportPages(0,c,0,d,t)}else if(2===e.length){if(isNaN(e[0])||isNaN(e[1]))return;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);if(n<0&&(n=n%l+l),r<0&&(r=r%l+l),n>=l)return;r=Math.min(r,l-1);var i=new a.Range((n+l)%l,(r+l)%l,0);o.StartImportPages(0,c,0,d,i)}}));var f=0,h=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();return o.GetPageCount()>0?a.saveDoc(o,a.WriterCallback.implement({Release:function(){},Flush:function(){return h.resolve(f),!0},GetSize:function(){return f},WriteBlock:function(e,t,n){f+=n;var i,o=a.HEAPU8.buffer;return i=o.slice?o.slice(e,e+n):new Uint8Array(o,e,n).buffer,r(i,t,n),!0}}),a.SaveFlags.e_SaveFlagNormal.value):h.reject(new Error("Cannot extract pages on none page document")),h.promise}},{key:"getHeaderFooter",value:function(e){var t=this;e||(e=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());try{if(!this.doc.HasHeaderFooter())return e.resolve(null);var n=this.doc.GetEditableHeaderFooter(),r=n.page_range,i={start:r.start_number,end:r.end_number,filter:r.filter.value},a=n.content,o={TopLeft:a.header_left_content.toString(),TopCenter:a.header_center_content.toString(),TopRight:a.header_right_content.toString(),BottomLeft:a.footer_left_content.toString(),BottomCenter:a.footer_center_content.toString(),BottomRight:a.footer_right_content.toString()},s=n.page_margin;e.resolve({font:this.JR.getPDFString(n.font.GetBaseFontName(this.doc)),textSize:n.text_size,textColor:n.text_color,hasTextShrinked:n.has_text_shrinked,hasFixedSized:n.has_fixedsize_for_print,ranges:i,margin:{left:s.left,right:s.right,top:s.top,bottom:s.bottom},startPageNumber:n.start_page_number,contents:o,contentFormats:{},underline:n.is_underline})}catch(n){isNaN(n)||(n=this.engine.getErrorCode(n)),n.value&&17==n.value?setTimeout((function(){t.getHeaderFooter(e)}),200):e.reject(n)}return e.promise}},{key:"addHeaderFooter",value:function(e,t){var n=this,r=this.doc;t||(t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());try{var i=(0,_headerFooter_js__WEBPACK_IMPORTED_MODULE_14__.Z)(this.engine,r,e);r.AddHeaderFooter(i),i.delete(),this.getHeaderFooter(t)}catch(r){isNaN(r)||17!=this.engine.getErrorCode(r).value?t.reject(r):setTimeout((function(){n.addHeaderFooter(e,t)}),200)}return t.promise}},{key:"updateHeaderFooter",value:function(e,t){var n=this,r=this.doc;t||(t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());try{var i=(0,_headerFooter_js__WEBPACK_IMPORTED_MODULE_14__.Z)(this.engine,r,e);r.UpdateHeaderFooter(i),this.getHeaderFooter(t)}catch(r){if("number"==typeof r){var a=this.engine.getErrorCode(r).value;if("number"==typeof a&&17==a)return void setTimeout((function(){n.updateHeaderFooter(e,t)}),200)}t.reject(r)}return t.promise}},{key:"removeHeaderFooter",value:function(e){var t=this;e||(e=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());try{this.doc.RemoveAllHeaderFooters(),e.resolve()}catch(n){if(17!=this.engine.getErrorCode(n).value)throw n;setTimeout((function(){t.removeHeaderFooter(e)}),200)}return e.promise}},{key:"getAnnotsRawData",value:function(e){var t=this;try{var n=this.engine,r=[];for(var i in e){var a=e[i];r.push(this.getPageByIndex(a.page))}return Promise.all(r).then((function(n){var r=[];for(var i in e){var a=e[i],o=a.page=t.pageIndexMap[a.page];a.iterator=r.length,r.push(o.getAnnotById(a.index))}return Promise.all(r)})).then((function(t){var r=[];for(var i in e){var a=t[e[i].iterator].annot,o=a.GetDict(),s={};switch(a.GetType().value){case 13:var u=o.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"AP"));if(u){var c=u.GetDirectObject().GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"N"));c&&(s.N=retriveDict(n,s,"",c.GetDirectObject()))}break;case 17:var l=o.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"FS"));l&&(s.FS=retriveDict(n,s,"",l.GetDirectObject()));break;case 18:var d=o.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"Sound"));d&&(s.Sound=retriveDict(n,s,"",d.GetDirectObject()))}r.push({index:i,raw:s})}return r}))}catch(e){throw console.error(engine.getErrorCode(e)),new Error(e)}}},{key:"generateHashData",value:function(e){var t=e.data;var n=function(e,t){var n=new e.String,r=e._malloc(t.length);return e.HEAPU8.set(t,r),n.Load(r,t.length),n}(this.engine,t);return this.engine.Library.GenerateHashData(this.engine.CryptType.e_Crypt_SHA256,n,n.GetLength()).toString()}},{key:"sign",value:function(e,t){var n,r,i=this,a=this.engine,o=a.KeyName;if(this.isDynamicXFA()){var s=this;return this.getPageByIndex(e.pageIndex).then((n=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(n){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(r){switch(r.label){case 0:return[3,2];case 1:r.sent(),r.label=2;case 2:return[4,_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.LQ)];case 3:return r.sent(),[2,new _xfa_SignatureField__WEBPACK_IMPORTED_MODULE_33__.Z(s.engine,n,e.widgetIndex).sign(e,t)]}}))})),function(e){return n.apply(this,arguments)}))}if(Array.isArray(e.fieldNames)&&e.fieldNames.length){var u,c=[];c.push(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.LQ));var l,d=this.loadForm(),f=e.shareVDictType||0,h=e.flag||256;if(0===f)return Promise.resolve();l=void 0!==e.signTime&&e.signTime>0?new Date(e.signTime):new Date;var g,p,v=new a.DateTime(l.getFullYear(),l.getMonth()+1,l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds(),-l.getTimezoneOffset()/60,0);if((g=t&&t.image||e.inkSign)&&640&h&&("object"==typeof g&&(g=g.url),g.length>0)){var _=this.JR.createReaderCallback(g),m=new a.Image(_);p=m.GetFrameBitmap(0),h|=128}var y=new this.engine.SignatureAppearanceOptions;y.showLogo=!!(!0&h);return e.fieldNames.forEach((function(t,n){var r=d.getField(t).engineField;if(0===n){var s=r.GetFieldMDPAction().value;if(s===a.FieldMDPAction.e_FieldMDPActionAll.value)Object.values(d.fields).forEach((function(e){e.update("flag",1)}));else if(s===a.FieldMDPAction.e_FieldMDPActionInclude.value)for(var l=r.GetFieldMDPActionFields(),g=0;g<l.GetSize();g++){d.getField(l.GetAt(g).toString()).update("flag",1)}else if(s===a.FieldMDPAction.e_FieldMDPActionExclude.value){for(var _=r.GetFieldMDPActionFields(),m=[],S=0;S<_.GetSize();S++)m.push(_.GetAt(S).toString());Object.keys(d.fields).forEach((function(e){-1===m.indexOf(e)&&d.getField(e).update("flag",1)}))}u=r}c.push(function(t){var n=t.GetControl(0).GetWidget().GetPage().GetIndex();return i.getPageByIndex(n).then((function(){if(0===f)t.CreateSigVDict(new a.String(e.filter),new a.String(e.subfilter));else if("string"==typeof f){var n=d.getField(f).engineField;if(e.filter=n.GetFilter().toString(),e.subfilter=n.GetSubFilter().toString(),!e.filter||!e.subfilter)throw new Error("filter and subfilter in V dictionary can't be null.");e.signer=n.GetKeyValue(o.e_KeyNameSigner).toString(),e.reason=n.GetKeyValue(o.e_KeyNameReason).toString(),e.email=n.GetKeyValue(o.e_KeyNameContactInfo).toString(),e.distinguishName=n.GetKeyValue(o.e_KeyNameDN).toString(),e.location=n.GetKeyValue(o.e_KeyNameLocation).toString(),e.text=n.GetKeyValue(o.e_KeyNameText).toString()}t.SetFilter(new a.String(e.filter)),t.SetSubFilter(new a.String(e.subfilter)),e.signer&&t.SetKeyValue(o.e_KeyNameSigner,new a.WString(e.signer)),e.reason&&t.SetKeyValue(o.e_KeyNameReason,new a.WString(e.reason)),e.email&&t.SetKeyValue(o.e_KeyNameContactInfo,new a.WString(e.email)),e.distinguishName&&t.SetKeyValue(o.e_KeyNameDN,new a.WString(e.distinguishName)),e.location&&t.SetKeyValue(o.e_KeyNameLocation,new a.WString(e.location));var r=e.text||e.signer;0!=e.flag&&r&&256&h&&t.SetKeyValue(o.e_KeyNameText,new a.WString(r)),t.SetSignTime(v),p&&t.SetBitmap(p),t.SetDocPermission({value:e.docPermission||0}),t.SetSignatureAppearanceOptions(y),t.SetAppearanceFlags(h),e.defaultContentsLength&&t.SetDefaultContentsLength(e.defaultContentsLength),t.GenerateSignAppearance(),t.ResetSignAppearance()}))}(r))})),Promise.all(c).then((function(){var t=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.cP)(a,u,e.hashAlgorithm,e.filter,e.subfilter),n=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.Kq)(t);return Promise.resolve(n)}))}var S=!1,b=Promise.resolve(),D=e.flag||256,P=e.fieldName,I=this.loadForm();if(P){if((r=I.getField(P).engineField).GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal)r=r.GetPagingSealSignature(),D=e.flag||128;else{var A=r.GetFieldMDPAction().value;if(A===a.FieldMDPAction.e_FieldMDPActionAll.value)Object.values(I.fields).forEach((function(e){e.update("flag",1)}));else if(A===a.FieldMDPAction.e_FieldMDPActionInclude.value)for(var w=r.GetFieldMDPActionFields(),C=0;C<w.GetSize();C++){I.getField(w.GetAt(C).toString()).update("flag",1)}else if(A===a.FieldMDPAction.e_FieldMDPActionExclude.value){for(var k=r.GetFieldMDPActionFields(),E=[],G=0;G<k.GetSize();G++)E.push(k.GetAt(G).toString());Object.keys(I.fields).forEach((function(e){-1===E.indexOf(e)&&I.getField(e).update("flag",1)}))}}var T=r.GetControl(0).GetWidget().GetPage().GetIndex();b=this.getPageByIndex(T)}var F=!this.isOwner;return b.then((function(e){return!1})).then((function(e){return _web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.LQ)})).then((function(n){if(!r){if(e.pagingSigConfig){var s=i.addPagingSealSignature({pagingSigConfig:e.pagingSigConfig}).pagingSig;r=s,D=e.flag||128}else{var u=i.doc.GetPage(e.pageIndex);if(u.IsEmpty())return"NoPage";var c=new a.WString(P),l=e.rect;r=u.AddSignature(new a.CFX_FloatRect(l.left,l.bottom,l.right,l.top),c,{value:0},F)}S=!0}r.CreateSigVDict(new a.String(e.filter),new a.String(e.subfilter)),r.SetFilter(new a.String(e.filter)),r.SetSubFilter(new a.String(e.subfilter)),e.signer&&r.SetKeyValue(o.e_KeyNameSigner,new a.WString(e.signer)),e.reason&&r.SetKeyValue(o.e_KeyNameReason,new a.WString(e.reason)),e.email&&r.SetKeyValue(o.e_KeyNameContactInfo,new a.WString(e.email)),e.distinguishName&&r.SetKeyValue(o.e_KeyNameDN,new a.WString(e.distinguishName)),e.location&&r.SetKeyValue(o.e_KeyNameLocation,new a.WString(e.location));var d,f=e.text||e.signer;0!=e.flag&&f&&256&D&&r.SetKeyValue(o.e_KeyNameText,new a.WString(f)),d=void 0!==e.signTime&&e.signTime>0?new Date(e.signTime):new Date;var h,g=new a.DateTime(d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds(),-d.getTimezoneOffset()/60,0);if(r.SetSignTime(g),e.timeFormat){var p=e.timeFormat,v=p.format,_=p.timeZoneOptions;r.SetTimeDescription((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,(0,_shared_formatDate_js__WEBPACK_IMPORTED_MODULE_28__.Z)(d,v,_)))}if((h=t&&t.image||e.inkSign)&&640&D&&("object"==typeof h&&(h=h.url),h.length>0)){var m=i.JR.createReaderCallback(h),y=new a.Image(m).GetFrameBitmap(0);r.SetBitmap(y),D|=128}r.SetDocPermission({value:e.docPermission||0});var b=new i.engine.SignatureAppearanceOptions;if(b.showLogo=!!(!0&D),r.SetSignatureAppearanceOptions(b),r.SetAppearanceFlags(D),e.defaultContentsLength&&r.SetDefaultContentsLength(e.defaultContentsLength),e.native){var I=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.Xd)(a,{path:e.certificate}),A=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.Xd)(a),w=r.StartSign_new(I,new a.WString(e.certPWD),{value:e.hashAlgorithm},A,0,null);if(w.Continue(),-1==w.GetRateOfProgress())throw new Error("Sign Error");return A.GetBlob()}var C=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.cP)(i.engine,r,e.hashAlgorithm,e.filter,e.subfilter);if(S){if(e.pagingSigConfig){for(var k=[],E=e.pagingSigConfig.pageRange[0]-1;E<e.pagingSigConfig.pageRange[1];E++)k.push(i.getPageByIndex(E).then((function(e){if(e)return e.reParsePage().then((function(){e.reloadAnnots()}))})));return Promise.all(k).then((function(e){return(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.Kq)(C)}))}return i.getPageByIndex(e.pageIndex).then((function(e){return e.reloadAnnots()})).then((function(e){return(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.Kq)(C)}))}var G=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.Kq)(C);return Promise.resolve(G)}))}},{key:"signForESignCN",value:function(e){var t=this,n=1,r=2,i=function(e){var i,a,o=function(e,n){return"pagingSignature"===(e.config.pagingSigConfig?"pagingSignature":"normalSignature")?function(e){var n;return n=e.config.pagingSigConfig.pagingSigObjNum?e.config.pagingSigConfig.pagingSigObjNum:t.addPagingSealSignature({pagingSigConfig:e.config.pagingSigConfig}).pagingSigObjNum,t.getPagingSealSignature({sigObjNum:n})}(e):function(e,n){var r=function(e){if(e.fieldName)return e.fieldName;for(var n,r=t.doc.GetPage(e.pageIndex),i=r.GetAnnotCount(),a=0;a<i;a++){var o=r.GetAnnot(a);o.GetDict().GetObjNum()===e.fieldId&&(n=o.GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"T")).GetWideString().toString())}return n}(e.fields[n]),i=t.loadForm().getField(r).engineField;return i.GetSignatureType()===t.engine.SignatureType.e_SignatureTypePagingSeal&&(i=i.GetPagingSealSignature()),i}(e,n)},s=function(e){var n=e.CreateSigVDict((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,""),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,""));return t.doc.AddIndirectObject(n),n},u=function(e,n,r){var i=e.GetDict(),a=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"V");i.SetAtReference(a,r,t.doc),e.ResetSignAppearance()},c=function(e,n,r){var i=n.config.flag||256,a=n.fields[r].inkSign?n.fields[r].inkSign:n.config.inkSign;if(a&&128&i){if(e.GetSignatureType()===t.engine.SignatureType.e_SignatureTypePagingSeal)!function(e,n){var r=t.JR.createReaderCallbackByBuffer(n),i=new t.engine.Image(r).GetFrameBitmap(0);e.SetBitmap(i),e.GenerateAppearance()}(e,a);else{var o;o="string"==typeof a?t.JR.createReaderCallback(a):t.JR.createReaderCallbackByBuffer(a);var s=new t.engine.Image(o).GetFrameBitmap(0);e.SetBitmap2AP(s),e.SetAppearanceFlags(i);var u=new t.engine.SignatureAppearanceOptions;u.showLogo=!1,e.SetSignatureAppearanceOptions(u),0===r?e.GenerateSignAppearance():e.ResetSignAppearance()}}},l=function(e,n){var r=e.GetDict(),i=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.n6)(t.engine,t.doc,n);i&&r.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"Signer"),i,t.doc)},d=function(n){var r=n.GetDict();r.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"FoxitSignFT"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"FoxitSignDate")),eSignCNOptType.FLOW_SIGN===e.config.optType&&r.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"FST"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"FullSignature"))},f=e.fields;f=function(n){for(var r=0,i=0;i<n.length;i++){o(e,i).GetSignatureType()===t.engine.SignatureType.e_SignatureTypePagingSeal&&(r=i)}if(r>0){var a=n.splice(r,1);n.unshift(a[0])}return n}(f);for(var h=[],g=0;g<f.length;g++){var p=o(e,g);h.push(p),0===g?(i=p,a=s(p)):u(p,0,a),c(p,e,g),e.config.optType===eSignCNOptType.SELF_SIGN&&f[g].foxitSignFieldType===n&&d(p),[eSignCNOptType.FLOW_SIGN,eSignCNOptType.FLOW_END_SIGN].includes(e.config.optType)&&(f[g].foxitSignFieldType===n&&(d(p),l(p,e.config.signIndex),(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.h2)(t.doc,t.engine,p,e.config.signIndex)),f[g].foxitSignFieldType===r&&l(p,e.config.signIndex))}return i}(e),a=function(e,n){!function(e,n){n.config.optType===eSignCNOptType.SELF_SIGN&&t.setESignCNSelfSignMode();var r=t.engine.KeyName;if(n.config.signer||n.config.phone){var i=n.config.signer||n.config.phone;e.SetKeyValue(r.e_KeyNameSigner,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(t.engine,i))}n.config.reason=n.config.reason?n.config.reason:"",e.SetKeyValue(r.e_KeyNameReason,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(t.engine,n.config.reason));var a=n.config.signer||n.config.phone||"";e.SetKeyValue(r.e_KeyNameContactInfo,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(t.engine,a)),n.config.distinguishName&&e.SetKeyValue(r.e_KeyNameDN,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(t.engine,n.config.distinguishName)),n.config.location=n.config.location?n.config.location:"",e.SetKeyValue(r.e_KeyNameLocation,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(t.engine,n.config.location));var o=n.config.text||n.config.signer,s=n.config.flag||256;o&&256&s&&e.SetKeyValue(r.e_KeyNameText,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(t.engine,o));var u=new Date,c=new t.engine.DateTime(u.getFullYear(),u.getMonth()+1,u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds(),-u.getTimezoneOffset()/60,0);e.SetSignTime(c),e.SetAppearanceFlags(s),e.SetFilter((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,n.config.filter)),e.SetSubFilter((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,n.config.subfilter)),n.config.docPermission&&e.SetDocPermission({value:n.config.docPermission})}(e,n),function(e,n){if(n.config.signer||n.config.phone){var r={signerName:n.fields[n.fields.length-1].signerName,operatorName:n.fields[n.fields.length-1].operatorName,authType:n.fields[n.fields.length-1].authType,email:n.config.signer,phone:n.config.phone,authTime:n.fields[n.fields.length-1].authTime,signType:n.fields[n.fields.length-1].signType,willAuthType:n.fields[n.fields.length-1].willAuthType,willAuthTime:n.fields[n.fields.length-1].willAuthTime,signId:n.config.signId};"in"===n.fields[n.fields.length-1].signType&&(r=Object.assign(r,{companyId:n.fields[n.fields.length-1].companyId,companyName:n.fields[n.fields.length-1].companyName,samlResponse:n.fields[n.fields.length-1].samlResponse})),t.addAuditTrail(e,r)}else console.error("pdf-jr/PDFDoc.js signForESignCN error: signer can't be null",n.config)}(e,n);var r=function(e,n){var r=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.cP)(t.engine,e,n.config.hashAlgorithm,n.config.filter,n.config.subfilter);return(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.Kq)(r)}(e,n);return r}(i,e);return a}},{key:"setESignCNSelfSignMode",value:function(){var e=this.doc.GetCatalog(),t=new this.engine.String("ESignSelfMode"),n=new this.engine.String("1");e.SetAtString(t,n)}},{key:"setESignCNFlowSignMode",value:function(e){var t;switch(e){case 1:t="external";break;case 2:t="internal";break;default:t=""}if(!t)throw Error("invalid modeValue");var n=this.doc.GetCatalog(),r=new this.engine.String("ESignMode"),i=new this.engine.String(t);return n.SetAtString(r,i),!0}},{key:"getESignCNFlowSignMode",value:function(){var e=this.doc.GetCatalog(),t=new this.engine.String("ESignMode"),n=e.GetElement(t);return n&&n.GetString().toString()}},{key:"getESignCNMode",value:function(e){var t=e.GetSignatureDict(),n=new this.engine.String("Signer"),r=t.GetElement(n);if(!r)return"";var i=new this.engine.String("AuthMethod");r.GetType()===this.engine.PDFObjectType.e_Reference&&(r=r.GetDirectObject());var a=r.GetDict().GetElement(i),o=new this.engine.String("Subtype"),s="out";if(a.GetType()===this.engine.PDFObjectType.e_Array)for(var u=a.GetArray(),c=u.GetElementCount(),l=0;l<c;l++){var d=u.GetElement(l);if(d)if(d.GetType()===this.engine.PDFObjectType.e_Reference&&(d=d.GetDirectObject()),d.GetType()===this.engine.PDFObjectType.e_Dictionary&&(d=d.GetDict()),"SAML_Response"===d.GetElement(o).GetString().toString()){s="in";break}}return s}},{key:"addPagingSealSignature",value:function(e){var t,n=this,r=e.pagingSigConfig,i=e.refresh,a=void 0===i||i,o=r.inkSign,s=r.pageRange,u=r.width,c=r.height,l=r.sealPosition,d=void 0===l?this.engine.PagingSealPosition.e_PagingSealPositionRight:l,f=r.sealOffset,h=r.firstPagePercent,g=r.isOnPerforation,p=void 0!==g&&g,v=r.isDisplayMultipleSeal,_=void 0!==v&&v,m=r.pageCountForEachSeal,y=void 0===m?3:m,S=!this.isOwner;switch(d){case"right":default:t=this.engine.PagingSealPosition.e_PagingSealPositionRight;break;case"left":t=this.engine.PagingSealPosition.e_PagingSealPositionLeft;break;case"top":t=this.engine.PagingSealPosition.e_PagingSealPositionTop;break;case"bottom":t=this.engine.PagingSealPosition.e_PagingSealPositionBottom}var b=new this.engine.Range(s[0],s[1],0),D=this.doc.AddPagingSealSignature(b,u,c,S),P=new this.engine.PagingSealConfig(t,f,h,p,_,y);D.SetPagingSealConfig(P);var I=D.GetDict().GetObjNum();if(o&&this.setSignatureAP({pagingSig:D,inkSignBuffer:o}),D.GenerateAppearance(),a)for(var A=this,w=function(e){A.getPageByIndex(e).then((function(e){return e.reParsePage(),e})).then((function(t){t.reloadAnnots(),e===s[1]-1&&n.reloadLayer()}))},C=s[0]-1;C<s[1];C++)w(C);return{pagingSigObjNum:I,addedObjNums:this.getAllPagingSealSignatures(I),pagingSig:D}}},{key:"getAllPagingSealSignatures",value:function(e){var t=this.doc.GetSignatureCount();if(!t)return[];if(e){for(var n={},r=0;r<t;r++){var i=this.doc.GetSignature(r),a=i.GetSignatureType();if(!i.IsEmpty()&&a===this.engine.SignatureType.e_SignatureTypePagingSeal){var o=i.GetPagingSealSignature();if(!o.IsEmpty()){var s=o.GetDict().GetObjNum(),u=n[s]||[];u.push(i.GetDict().GetObjNum()),n[s]=u,i.delete()}}}var c=Object.values(n).find((function(t){return t.includes(e)}));return Array.from(new Set(c))}for(var l=[],d=0;d<t;d++){var f=this.doc.GetSignature(d);f.GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal&&l.push(f.GetDict().GetObjNum()),f.delete()}return Array.from(new Set(l))}},{key:"getPageObjNumOfSig",value:function(e){var t=new this.engine.String("P"),n=e.GetDict().GetElement(t);n.GetType()===this.engine.PDFObjectType.e_Reference&&(n=n.GetDirectObject()),n.GetType()===this.engine.PDFObjectType.e_Dictionary&&(n=n.GetDict());var r=n.GetObjNum();return t.delete(),r}},{key:"getAllPagingSigsInfo",value:function(e){var t=this.engine,n=this.doc,r=n.GetSignatureCount(),i=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.J5)(t,n);if(!r)return[];for(var a={},o=0;o<r;o++){var s=this.doc.GetSignature(o),u=this.getPageObjNumOfSig(s),c=i.indexOf(u),l=s.GetSignatureType();if(!s.IsEmpty()&&l===this.engine.SignatureType.e_SignatureTypePagingSeal){var d=s.GetPagingSealSignature();if(!d.IsEmpty()){var f=d.GetDict().GetObjNum(),h=a[f]||[],g={objNum:s.GetDict().GetObjNum(),pageIndex:c};h.push(g),a[f]=h}}}a=Object.values(a),e&&(a=a.filter((function(t){return t.some((function(t){return t.objNum===e}))})));var p=[];return a.filter((function(e){return e.filter((function(e){var t="".concat(e.pageIndex,"-").concat(e.objNum);return-1===p.indexOf(t)&&(p.push(t),!0)}))}))}},{key:"updatePagingSealSignature",value:function(e){for(var t=this,n=function(e){t.getPageByIndex(e).then((function(e){return e.reParsePage(),e})).then((function(t){t.reloadAnnots(),e===r.doc.GetPageCount()-1&&r.reloadLayer()}))},r=this,i=e.pagingSigObjNum,a=e.pagingSigConfig,o=this.removePagingSealSignature({pagingSigObjNum:i,refresh:!1}).removedObjNums,s=this.addPagingSealSignature({pagingSigConfig:a,refresh:!1}),u=s.pagingSigObjNum,c=s.addedObjNums,l=0;l<this.doc.GetPageCount();l++)n(l);return{pagingSigObjNum:u,removedObjNums:o,addedObjNums:c}}},{key:"removePagingSealSignature",value:function(e){var t=this,n=e.pagingSigObjNum,r=e.refresh,i=void 0===r||r,a=this.getAllPagingSealSignatures(n),o=this.getPagingSealSignature({sigObjNum:n});if(this.doc.RemoveSignature(o),i)for(var s=this,u=function(e){s.getPageByIndex(e).then((function(e){return e.reParsePage(),e})).then((function(n){n.reloadAnnots(),e===t.doc.GetPageCount()-1&&t.reloadLayer()}))},c=0;c<this.doc.GetPageCount();c++)u(c);return{removedObjNums:a}}},{key:"getPagingSealSignature",value:function(e){var t,n=e.sigObjNum,r=this.doc.GetSignatureCount();if(r)for(var i=0;i<r;i++){var a=this.doc.GetSignature(i);if(a.GetDict().GetObjNum()===n&&a.GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal){t=a.GetPagingSealSignature();break}}return t}},{key:"isESignCNFile",value:function(){for(var e,t=this.doc.GetCatalog(),n=new this.engine.String("ESignMode"),r=t.GetElement(n),i=!!r&&r.GetString().toString(),a=this.doc.GetPageCount(),o=0;o<a;o++)for(var s=this.doc.GetPage(o),u=s.GetAnnotCount(),c=0;c<u;c++){var l=s.GetAnnot(c);if(l){var d=l.GetType();if(this.engine.AnnotType.e_Widget==d){var f=l.GetDict();if(f){var h=this.getSignatureFTValue(f);if(h)if("Sig"==h.GetString().toString()){var g=!1,p=new this.engine.String("V"),v=f.GetElement(p);if(v&&v.GetType()===this.engine.PDFObjectType.e_Reference&&v.GetDirectObject()&&(g=!!(v=v.GetDirectObject().GetDict())),g){var _=new this.engine.String("Signer");if(e=!!v.GetElement(_))break}}}}}}return i||e}},{key:"assignSignerForESignCN",value:function(e){var t=this,n=this.doc,r=this.engine,i=e.configInfo,a=e.recipients,o=function(e,i,a,o){var u=n.GetCatalog(),c=function(e){var r=new t.engine.PDFArray.Create;return e.forEach((function(e){r.AddReference(e,n)})),r}(e),l=s(c,a,i);u.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"DocESign"),l,n);var d="outer"===o?"external":"internal";u.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"ESignMode"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,d))},s=function(e,t,i){var a=new r.PDFDictionary.Create;return a.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Type"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"DocESign")),a.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Signers"),e),a.SetAtInteger((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Ordered"),t),a.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"FlowSignConfigInfo"),i,n),n.AddIndirectObject(a),a},u=function(e,i){var a=e.docStore,o=e.processId,s=e.taskName,u=[],c=function(e,t,i){var a=new r.PDFDictionary.Create;return a.SetAtInteger((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"DocStore"),e),a.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"ProcessID"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,t)),a.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"TaskName"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,i)),n.AddIndirectObject(a),a}(a,o,s);return i.forEach((function(e){var i=function(e){var i={Email:e.email,Phone:e.mobile,Company:e.company};"inner"===e.signMode&&(i.EnterpriseId=e.companyId,i.Enterprise=e.companyName);var a=new t.engine.PDFArray.Create;return Object.keys(i).forEach((function(e){if(i[e]){var t=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.Np)(n,r,{type:"AuthMethod",subType:e,id:i[e]});a.AddReference(t,n)}})),a}(e),a=function(e,t){var i=e.color,a=e.signOrder,o=e.name,s=e.authType,u=e.freeRectItem,c=new r.PDFDictionary.Create;return c.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Type"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Signer")),c.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Name"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,o)),c.SetAtInteger((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"SignOrder"),a),c.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Color"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,i)),c.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"AuthMethod"),t),c.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"AuthType"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,s)),c.SetAtBoolean((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"FreeRectItem"),!!u),n.AddIndirectObject(c),c}(e,i);if(u.push(a),!e.freeRectItem){var o=function(e,t,i){var a=e.fields,o=[];return a.forEach((function(e){var a=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.z4)(n,r,{objNumber:e.id,pageIndex:e.pageIndex});a&&(a.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"FST"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,e.fieldType)),a.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"FlowSignConfigInfo"),t,n),a.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Signer"),i,n),o.push(a))})),o}(e,c,a);!function(e,i){var a=new t.engine.PDFArray.Create;i.forEach((function(e){a.AddReference(e,n)})),e.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,"Annots"),a)}(a,o)}})),{signersArray:u,flowSignConfigInfoDict:c}}(i,a),c=u.signersArray,l=u.flowSignConfigInfoDict,d=function(e){var t=new Set(e.map((function(e){return e.signOrder})));return t.size===e.length?_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.Yv.ORDERED:1===t.size?_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.Yv.UNORDERED:_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.Yv.PARTIAL}(a);!function(e,t,n,r){o(e,t,n,r)}(c,l,d,a[0].signMode)}},{key:"getSignatureFTValue",value:function(e){var t=new this.engine.String("FT"),n=new this.engine.String("Parent"),r=e.GetElement(t);if(!r){var i=e.GetElement(n);i&&i.GetType()===this.engine.PDFObjectType.e_Reference&&i.GetDirectObject()&&i.GetDirectObject().GetDict()&&(r=i.GetDirectObject().GetDict().GetElement(t))}return r}},{key:"addAuditTrail",value:function(e,t){t.authTime=t.authTime?t.authTime:"",t.authType=t.authType?t.authType:"",t.signerName=t.signerName?t.signerName:"",t.operatorName=t.operatorName?t.operatorName:"",t.phone=t.phone?t.phone:"";var n=this.doc,r=e.GetSignatureDict();return this.add_doc_audit_trail(n,r,t),!0}},{key:"updatePropAuthDictForESignCN",value:function(e){var t=e.fieldName,n=e.willingnessInfo,r=this.loadForm().getField(t).engineField.GetDict(),i=new this.engine.String("Prop_Auth"),a=r.GetElement(i);if(a&&a.GetType()===this.engine.PDFObjectType.e_Reference&&(a=a.GetDirectObject()).GetType()===this.engine.PDFObjectType.e_Dictionary){a=a.GetDict();var o=new this.engine.String("AuthAddData"),s=JSON.stringify(n),u=new this.engine.WString(s);a.SetAtWString(o,u)}}},{key:"add_new_enents_to_prop_events",value:function(e,t,n){var r=n.realName,i=new this.engine.String("Prop_Events"),a=t.GetElement(i);if(a&&a.GetType()==this.engine.PDFObjectType.e_Array){new this.engine.String("EventType"),new this.engine.String("Message");var o=new this.engine.String("Time"),s=a.GetArray();if(s){var u=new this.engine.String("EventType"),c=new this.engine.String("Message"),l=(new this.engine.PDFArray.Create,new this.engine.PDFDictionary.Create),d=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?new Date(e):new Date,r=n.getFullYear(),i=t?"0".concat(n.getMonth()+1).slice(-2):n.getMonth()+1,a=t?"0".concat(n.getDate()).slice(-2):n.getDate(),o=t?"0".concat(n.getHours()).slice(-2):n.getHours(),s=t?"0".concat(n.getMinutes()).slice(-2):n.getMinutes(),u=t?"0".concat(n.getSeconds()).slice(-2):n.getSeconds(),c=n.getMilliseconds();return{year:r,month:i,day:a,hour:o,minute:s,second:u,milliseconds:c}}(),f=d.year,h=d.month,g=d.day,p=d.hour,v=d.minute,_=d.second,m=d.milliseconds,y=new this.engine.DateTime(f,parseInt(h),parseInt(g),parseInt(p),parseInt(v),parseInt(_),m,0,0),S=new this.engine.String("Info"),b=new this.engine.WString("".concat(r,"于").concat(f,"-").concat(h,"-").concat(g," ").concat(p,":").concat(v,":").concat(_,"完成XXX部分的签署"));l.SetAtDateTime(o,y),l.SetAtString(u,S),l.SetAtWString(c,b),e.AddIndirectObject(l),s.AddReference(l,e)}}}},{key:"getSignatureSignTimeStamp",value:function(e){var t=function(e){return"0".concat(e).slice(-2)},n=e.GetSignTime(),r="".concat(n.year,"-").concat(t(n.month),"-").concat(t(n.day)," ").concat(t(n.hour),":").concat(t(n.minute),":").concat(t(n.second));return new Date(r).getTime()}},{key:"add_doc_audit_trail",value:function(e,t,n){var r,i=(0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_41__._)({},{INDIVIDUAL_TELECOM_3_FACTOR:"个人运营商三要素",INDIVIDUAL_BANKCARD_4_FACTOR:"个人银行卡四要素",INDIVIDUAL_ARTIFICIAL:"个人人工实名",FACEAUTH_ZMXY:"个人人脸识别：支付宝刷脸",FACEAUTH_TECENT_CLOUD:"个人人脸识别：微众刷脸",FACEAUTH_ESIGN:"e签宝刷脸",FACEAUTH_DING_TALK:"钉钉刷脸",FACEAUTH_WE_CHAT_FACE:"微信小程序刷脸",ORGANIZATION_INFO_AUTH:"企业信息比对",ORGANIZATION_TRANSFER_RANDOM_AMOUNT:"随机金额打款校验",ORGANIZATION_REVERSE_PAYMENT:"企业反向打款",ORGANIZATION_ZMXY:"企业芝麻信用认证",LEGAL_REP_SIGN_AUTHORIZE:"企业人工实名",LEGAL_REP_AUTH:"法定代表人认证"},{CODE_SMS:"短信验证码",FACE_ZHIMA_XY:"蚂蚁区块链刷脸",FACE_TECENT_CLOUD_H5:"腾讯云刷脸",FACE_FACE_LIVENESS_RECOGNITION:"e签宝自研刷脸",VIDEO_AUDIO_VIDEO_DUAL:"智能视频双录",EMAIL:"邮箱认证"}),a=n.signerName,o=n.operatorName,s=n.authType,u=n.authTime,c=n.willAuthType,l=n.willAuthTime,d=n.email,f=n.phone,h=(n.signType,n.samlResponse),g=n.companyId,p=n.companyName,v=n.signId,_=i[s]?i[s]:s,m=c&&i[c]?i[c]:c,y=new this.engine.String("Signer"),S=new this.engine.String("AuthMethod"),b=new this.engine.String("AuthName"),D=new this.engine.String("OperatorName"),P=new this.engine.String("Email"),I=new this.engine.String("Phone"),A=new this.engine.String("EnterpriseId"),w=new this.engine.String("Enterprise"),C=new this.engine.String("SAML_Response"),k=(new this.engine.String("SignID"),new this.engine.String("Type")),E=new this.engine.String("Name"),G=new this.engine.String("Subtype"),T=new this.engine.String("ID"),F=new this.engine.String(a),R=o?new this.engine.String(o):null,M=d?new this.engine.String(d):null,O=f?new this.engine.String(f):null,x=h?new this.engine.String(h):null,B=g?new this.engine.String(g):null,N=p?new this.engine.String(p):null,L=t.GetElement(y);if(L){L.GetType()===this.engine.PDFObjectType.e_Reference&&(L=L.GetDirectObject());var j=L.GetDict().GetElement(S);j&&j.GetType()===this.engine.PDFObjectType.e_Array&&(r=j.GetArray())}else{var U=new this.engine.PDFDictionary.Create;U.SetAtName(k,y),U.SetAtString(E,F),r=new this.engine.PDFArray.Create,U.SetAt(S,r),e.AddIndirectObject(U),t.SetAtReference(y,U,e)}var W=new this.engine.PDFDictionary.Create;if(W.SetAtString(k,S),W.SetAtName(G,b),W.SetAtString(T,F),e.AddIndirectObject(W),r.AddReference(W,e),R){var H=new this.engine.PDFDictionary.Create;H.SetAtString(k,S),H.SetAtName(G,D),H.SetAtString(T,R),e.AddIndirectObject(H),r.AddReference(H,e)}if(d){var z=new this.engine.PDFDictionary.Create;z.SetAtString(k,S),z.SetAtName(G,P),z.SetAtString(T,M),e.AddIndirectObject(z),r.AddReference(z,e)}if(f){var K=new this.engine.PDFDictionary.Create;K.SetAtString(k,S),K.SetAtName(G,I),K.SetAtString(T,O),e.AddIndirectObject(K),r.AddReference(K,e)}if(x){var J=new this.engine.PDFDictionary.Create;J.SetAtString(k,S),J.SetAtName(G,C),J.SetAtString(T,x),e.AddIndirectObject(J),r.AddReference(J,e)}if(B){var V=new this.engine.PDFDictionary.Create;V.SetAtString(k,S),V.SetAtName(G,A),V.SetAtString(T,B),e.AddIndirectObject(V),r.AddReference(V,e)}if(N){var Y=new this.engine.PDFDictionary.Create;Y.SetAtString(k,S),Y.SetAtName(G,w),Y.SetAtString(T,N),e.AddIndirectObject(Y),r.AddReference(Y,e)}var Z=new this.engine.PDFDictionary.Create,q=new this.engine.PDFDictionary.Create,X=new this.engine.PDFArray.Create,Q=new this.engine.String("R"),$=new this.engine.String("TrustedMode"),ee=new this.engine.String("OS"),te=new this.engine.String("Foxit PDF Editor Cloud"),ne=new this.engine.String("alpine-release:3.11.6");q.SetAtName(E,te),q.SetAtInteger(Q,30913),q.SetAtBoolean($,!0),X.AddName(ne),q.SetAt(ee,X);var re=new this.engine.String("App");if(e.AddIndirectObject(q),Z.SetAtReference(re,q,e),v){var ie=new this.engine.PDFDictionary.Create,ae=new this.engine.String("SignId"),oe=new this.engine.String(v);ie.SetAtString(ae,oe);var se=new this.engine.String("Evidence");e.AddIndirectObject(ie),Z.SetAtReference(se,ie,e)}e.AddIndirectObject(Z);var ue=new this.engine.PDFDictionary.Create,ce=new this.engine.String("Method"),le=new this.engine.String("Time"),de=new this.engine.String("AuthAddData"),fe=_,he=new this.engine.String(fe);ue.SetAtName(ce,he);var ge=u?new this.engine.String(u):null;if(ge&&ue.SetAtString(le,ge),m){var pe=JSON.stringify({willingnessType:m,willingnessDate:l,status:"成功"}),ve=new this.engine.WString(pe);ue.SetAtWString(de,ve)}e.AddIndirectObject(ue);var _e=new this.engine.String("Prop_Build");t.SetAtReference(_e,Z,e);var me=new this.engine.String("Prop_Auth");t.SetAtReference(me,ue,e)}},{key:"getSignIdForEvidence",value:function(){for(var e=this,t=[],n=this.doc,r=[],i=n.GetSignatureCount(),a=[],o=0;o<i;o++){var s=n.GetSignature(o);if(s.IsSigned()){var u=s.GetSignatureDict(),c=new this.engine.String("Signer"),l=new this.engine.String("Name"),d=u.GetElement(c);if(d)if(d.GetType()===this.engine.PDFObjectType.e_Reference&&(d=d.GetDirectObject()),d.GetDict().GetElement(l))if("out"===this.getESignCNMode(s)){var f=u.GetObjNum();a.includes(f)||(r.push(s),a.push(f))}}}try{r.sort((function(e,t){return e.GetFileSizeOfSignedVersion()-t.GetFileSizeOfSignedVersion()}))}catch(t){console.error("pdf-jr/PDFDoc.js getDocAuditTrail  s.GetFileSizeOfSignedVersion error:",t),r.sort((function(t,n){return e.getSignatureSignTimeStamp(t)-e.getSignatureSignTimeStamp(n)}))}var h=new this.engine.String("DocESign");return!!n.GetCatalog().GetElement(h)&&(r=r.slice(1)),r.forEach((function(n){var r={};r.fieldId=n.GetDict().GetObjNum();var i=n.GetSignatureDict(),a=new e.engine.String("Prop_Build"),o=new e.engine.String("Evidence"),s=new e.engine.String("SignId"),u=i.GetElement(a);if(u){u.GetType()==e.engine.PDFObjectType.e_Reference&&(u=u.GetDirectObject());var c=u.GetDict();if(c){var l=c.GetElement(o);if(!l)return;if(l.GetType()==e.engine.PDFObjectType.e_Reference&&(l=l.GetDirectObject()),l.GetType()==e.engine.PDFObjectType.e_Dictionary&&(l=l.GetDict()),l){var d=l.GetElement(s);if(d){var f=d.GetString().toString();r.signId=f}}}}t.push(r)})),t}},{key:"isESignCNSignature",value:function(e,t){var n=this;return this.getPageByIndex(t).then((function(t){return t.getAnnotById(e)})).then((function(e){var t,r={},i=e.annot.GetDict(),a=new n.engine.String("Signer"),o=!!i.GetElement(a),s=new n.engine.Signature(n.doc,i);t=s.IsSigned();var u=s.GetSignatureDict();if((r=o?t?{isESignCNSignature:!!u.GetElement(a),isSigned:t}:{isESignCNSignature:!0,isSigned:t}:{isESignCNSignature:!!t&&!!u.GetElement(a),isSigned:t}).isESignCNSignature){var c=s.GetSignatureType();r.isPagingSig=c===n.engine.SignatureType.e_SignatureTypePagingSeal}return r}))}},{key:"getDocAuditTrail",value:function(e,t){var n=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var r,i,a,o,s,u,c,l,d,f,h,g,p,v,_,m,y,S,b,D,P,I,A,w,C,k,E,G,T,F,R,M,O,x,B,N,L,j,U,W,H,z,K,J,V,Y,Z,q,X,Q,$,ee,te,ne,re,ie,ae,oe,se,ue,ce,le,de,fe,he,ge,pe,ve,_e,me,ye,Se,be,De,Pe,Ie,Ae;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(we){switch(we.label){case 0:for(r=function(e,t,r,a){if(e.length<1)return null;var o=[],s=new a.String("DocESign");!!i.GetCatalog().GetElement(s)&&t.forEach((function(e,t){if(r.indexOf(e.id)<0){var n={fieldId:e.id,pageIndex:e.pageIndex,assignUserName:e.company?"".concat(e.company,"（").concat(e.assignUserName,"）"):e.assignUserName,assignUserEmail:e.assignUserEmail,flowSignOrder:t+1};o.push(n)}}));var u=[];return o.length>0&&o.forEach((function(e){var t=n.getPageByIndex(e.pageIndex).then((function(t){t.getAnnotById(e.fieldId).then((function(t){e.signatureName=t.annot.GetField().GetName().toString()}))}));u.push(t)})),Promise.all(u).then((function(){var t={};return t.base={pageNumbers:e[0].build.pageNumbers,hash:e[0].hash||"暂无",type:e[0].build.type},t.auth=e.map((function(e){var t=(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_42__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_41__._)({},e.certfile,e.auth),{signerName:e.signer.signerName,operatorName:e.signer.operatorName,companyId:e.signer.companyId,companyName:e.signer.companyName,fileSizeOfSignedVersion:e.fileSizeOfSignedVersion,fieldId:e.fieldId,SAMLResponse:e.signer.SAMLResponse,email:e.signer.email,phone:e.signer.phone,byteRangeHash:e.byteRangeHash,signedHash:e.signedHash});return e.assignUserName&&(t.assignUserName=e.assignUserName),e.assignUserEmail&&(t.assignUserEmail=e.assignUserEmail),t})),t.certfile=e.map((function(e,t){var n=(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_42__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_41__._)({},e.auth,e.certfile),{signerName:e.signer.signerName,operatorName:e.signer.operatorName,fileSizeOfSignedVersion:e.fileSizeOfSignedVersion,fieldId:e.fieldId,byteRangeHash:e.byteRangeHash,signedHash:e.signedHash});return e.assignUserName&&(n.assignUserName=e.assignUserName),e.assignUserEmail&&(n.assignUserEmail=e.assignUserEmail),n})),"signFlow"===e[0].build.type&&(t.base.startSignDate=e[0].certfile.signDate,t.base.endSignDate=e[e.length-1].certfile.signDate),t.illegalSignatures=o,t}))},i=n.doc,a=[],o=[],s=[],u=i.GetSignatureCount(),c=[],l=0;l<u;l++)(d=i.GetSignature(l)).IsSigned()&&(f=d.GetSignatureDict(),h=new n.engine.String("Signer"),g=new n.engine.String("Name"),(p=f.GetElement(h))&&(p.GetType()===n.engine.PDFObjectType.e_Reference&&(p=p.GetDirectObject()),v=p.GetDict(),v.GetElement(g)&&(s.push(d.GetDict().GetObjNum()),_=f.GetObjNum(),c.includes(_)||(o.push(d),c.push(_)))));try{o.sort((function(e,t){return e.GetFileSizeOfSignedVersion()-t.GetFileSizeOfSignedVersion()}))}catch(e){console.error("pdf-jr/PDFDoc.js getDocAuditTrail  s.GetFileSizeOfSignedVersion error:",e),o.sort((function(e,t){return n.getSignatureSignTimeStamp(e)-n.getSignatureSignTimeStamp(t)}))}m=0,we.label=1;case 1:if(!(m<o.length))return[3,5];y=o[m],S={};try{S.fileSizeOfSignedVersion=y.GetFileSizeOfSignedVersion()}catch(e){console.error("pdf-jr/PDFDoc.js getDocAuditTrail  s.GetFileSizeOfSignedVersion error:",e),S.fileSizeOfSignedVersion=n.getSignatureSignTimeStamp(y)}return S.hash="",0===m&&(b=function(e,t){var n=t.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"ByteRange")).GetArray(),r=[];if(n){for(var i=n.GetElementCount(),a=0;a<i;a++)r.push(n.GetElement(a).GetInteger());return r}}(n.engine,y.GetSignatureDict()),b&&(D=function(e,t){for(var n=Array.from(e),r=[],i=0;i<t.length;i+=2){var a=t[i],o=t[i+1];r=r.concat(n.slice(a,a+o))}return r}(e,b),P=n.generateDocHash(new Uint8Array(D)),S.hash=P)),[4,n.getByteRangeHash(y)];case 2:return I=we.sent(),[4,n.getAfterSignFileHash(y)];case 3:if(A=we.sent(),S.byteRangeHash=I,S.signedHash=A,w=y.GetSignatureDict(),C=y.GetDict(),S.fieldId=C.GetObjNum(),k={},E=new n.engine.String("AuthMethod"),G=new n.engine.String("Signer"),T=void 0,!(F=w.GetElement(G)))return[2];if(F.GetType()===n.engine.PDFObjectType.e_Reference&&(F=F.GetDirectObject()),T=F.GetDict(),R=T.GetElement(E),M=new n.engine.String("Subtype"),O=new n.engine.String("ID"),R.GetType()===n.engine.PDFObjectType.e_Array)for(x=R.GetArray(),B=x.GetElementCount(),N=0;N<B;N++)(L=x.GetElement(N))&&(L.GetType()===n.engine.PDFObjectType.e_Reference&&(L=L.GetDirectObject()),L.GetType()===n.engine.PDFObjectType.e_Dictionary&&(L=L.GetDict()),j=L.GetElement(M),"AuthName"===(U=j.GetString()).toString()&&(W=L.GetElement(O),k.signerName=W.GetString().toString()),"OperatorName"===U.toString()?(H=L.GetElement(O),k.operatorName=H.GetString().toString()):"EnterpriseId"===U.toString()?(z=L.GetElement(O),k.companyId=z.GetString().toString()):"Enterprise"===U.toString()?(K=L.GetElement(O),k.companyName=K.GetString().toString()):"SAML_Response"===U.toString()?(J=L.GetElement(O),k.SAMLResponse=J.GetString().toString()):"Email"===U.toString()?(V=L.GetElement(O),k.email=V.GetString().toString()):"Phone"===U.toString()&&(Y=L.GetElement(O),k.phone=Y.GetString().toString()));if(S.signer=k,Z=new n.engine.String("Prop_Build"),q=w.GetElement(Z)){if(X={},Q=i.GetPageCount(),X.pageNumbers=Q,q.GetType()==n.engine.PDFObjectType.e_Reference&&(q=q.GetDirectObject()),$=q.GetDict()){if(ee=new n.engine.String("App"),!(te=$.GetElement(ee)))return[2];if(te.GetType()==n.engine.PDFObjectType.e_Reference&&(te=te.GetDirectObject()),te.GetType()==n.engine.PDFObjectType.e_Dictionary&&(te=te.GetDict()),te){if(ne=new n.engine.String("Name"),re=new n.engine.String("R"),ie=new n.engine.String("TrustedMode"),ae=new n.engine.String("OS"),(oe=te.GetElement(ne))&&(X.name=oe.GetString().toString()),(se=te.GetElement(re))&&(X.version=se.GetInteger()),(ue=te.GetElement(ie))&&(X.trustedModeValue=ue.GetBoolean()),ce=te.GetElement(ae))for(le=ce.GetArray(),de=le.GetElementCount(),fe=0;fe<de;fe++)(he=le.GetElement(fe))&&(X.os=he.GetString().toString());ge=new n.engine.String("DocESign"),pe=i.GetCatalog(),ve=pe.GetElement(ge),X.type=ve?"signFlow":"signSelf"}}S.build=X}if(_e=new n.engine.String("Prop_Auth"),me=w.GetElement(_e)){if(ye={},me.GetType()==n.engine.PDFObjectType.e_Reference&&(me=me.GetDirectObject()),me.GetType()==n.engine.PDFObjectType.e_Dictionary&&(me=me.GetDict()),Se=new n.engine.String("Method"),be=new n.engine.String("Time"),De=new n.engine.String("AuthAddData"),(Pe=me.GetElement(Se))&&(ye.method=Pe.GetString().toString()),(Ie=me.GetElement(be))&&(ye.time=Ie.GetString().toString()),Ae=me.GetElement(De),ye.additionalInfo=null,Ae)try{ye.additionalInfo=JSON.parse(Ae.GetWideString().toString())}catch(e){console.error("pdf-jr/PDFDoc.js getDocAuditTrail error:",e)}ye.mode=n.getESignCNMode(y),S.auth=ye}S.certfile=n.getcertfileinfo(y),S.auth.serialNumber=S.certfile.serialNumber,a.push(S),we.label=4;case 4:return m++,[3,1];case 5:return[2,r(a,t,s,n.engine)]}}))}))()}},{key:"getByteRangeHash",value:function(e){var t=this,n=e.GetSignatureDict(),r=function(e,t){var n=t.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"ByteRange")).GetArray(),r=[];if(n){for(var i=n.GetElementCount(),a=0;a<i;a++)r.push(n.GetElement(a).GetInteger());return r}}(this.engine,n),i=Promise.resolve();return r&&(i=this.getOriginalStream()),i.then((function(e){if(e){var n=function(e,t){for(var n=Array.from(e),r=[],i=0;i<t.length;i+=2){var a=t[i],o=t[i+1];r=r.concat(n.slice(a,a+o))}return r}(e,r);return t.generateDocHash(new Uint8Array(n))}}))}},{key:"getAfterSignFileHash",value:function(e){var t=this;if(e.IsSigned()){var n=e.GetFileSizeOfSignedVersion();return this.getOriginalStream().then((function(e){var r=new Uint8Array(e).slice(0,n);return t.generateDocHash(new Uint8Array(r))}))}}},{key:"getcertfileinfo",value:function(e){var t={};if(t.signatureName=e.GetName().toString(),this.doc&&e){var n=new this.engine.String("SerialNumber"),r=new this.engine.String("Subject"),i=new this.engine.String("Issuer"),a=new this.engine.String("ValidPeriodFrom"),o=new this.engine.String("ValidPeriodTo"),s=new this.engine.String(";");t.format="",t.serialNumber="";try{var u=e.GetCertificateInfo(n).toString().split(s);if(u){var c=u.pop();t.serialNumber=c.toString()}t.format="X.509"}catch(e){console.error("getcertfileinfo error: ",e)}t.subject="";try{var l=e.GetCertificateInfo(r).toString().split(s);if(l){var d=l.pop(),f=JSON.parse(d.toString());t.subject=f.CN||""}}catch(e){console.error("getcertfileinfo error: ",e)}t.issuer="";try{var h=e.GetCertificateInfo(i).toString().split(s);if(h){var g=h.pop(),p=JSON.parse(g.toString());t.issuer=p.CN||p.O||""}}catch(e){console.error("getcertfileinfo error: ",e)}t.validPeriodFrom="";try{var v=e.GetCertificateInfo(a).toString().split(s);if(v){var _=v.pop();t.validPeriodFrom=_.toString()}}catch(e){console.error("getcertfileinfo error: ",e)}t.valid_period_to="";try{var m=e.GetCertificateInfo(o).toString().split(s);if(m){var y=m.pop();t.validPeriodTo=y.toString()}}catch(e){console.error("getcertfileinfo error: ",e)}var S=e.GetSignTime();t.signDate="".concat(S.year,"-").concat(b(S.month),"-").concat(b(S.day)," ").concat(b(S.hour),":").concat(b(S.minute),":").concat(b(S.second)),t.mode=this.getESignCNMode(e)}return t;function b(e){return"0".concat(e).slice(-2)}}},{key:"geAssignInfoForESignCNV0",value:function(){var e=function(e){if("FoxitSignDate"===(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.FN)(n,e,"FoxitSignFT","string"))return!1;var t=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.FN)(n,e,"Signer","pdfDict");return!!t&&!!(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.FN)(n,t,"AuthMethod","pdfArray")},t=function(e,t,i){var a=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.$U)(n,r,e,t,i),o=function(e){var t=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.qQ)(n,r,e);return t.signerDictObjNum=e.GetObjNum(),t}((0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.FN)(n,e,"Signer","pdfDict")),s=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.FN)(n,e,"FlowSignConfigInfo","pdfDict"),u=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.PB)(n,r,s);return(0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_41__._)({},a,o,u)},n=this.engine,r=this.doc,i=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.Lg)(r),a=[],o=this.getAllPagingSigsInfo(),s=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.J5)(n,r);return i.forEach((function(n){var r=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.Ox)(n);(r=r.filter(e)).forEach((function(e){var n=t(e,s,o);a.push(n)}))})),(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.ol)(n,r,a)}},{key:"getAssignInfoForESignCN",value:function(){var e=this.engine,t=this.doc,n=this.JR;if(!(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.uJ)(e,t))return{};if((0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.pw)(e,t))return this.geAssignInfoForESignCNV0();var r=this.getAllPagingSigsInfo(),i=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.lo)(e,t),a=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.lm)(e,t),o=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.J5)(e,t),s=[];return i.forEach((function(i,a){var u=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.a_)(e,t,i,o,r,n);u.sort=a+1,s.push(u)})),s.some((function(e){return e.freeRectItem}))&&(s=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_32__.KL)(e,t,s,i,o,n)),{configInfo:a,recipients:s}}},{key:"getOrderOfSignFlowFile",value:function(){var e=new this.engine.String("DocESign"),t=new this.engine.String("Signers"),n=(new this.engine.String("AuthType"),new this.engine.String("AuthMethod")),r=new this.engine.String("ID"),i=new this.engine.String("Subtype"),a=this.doc.GetCatalog().GetElement(e),o=[];if(a){a.GetType()==this.engine.PDFObjectType.e_Reference&&(a=a.GetDirectObject());var s=a.GetDict().GetElement(t);if(s.GetType()==this.engine.PDFObjectType.e_Array)for(var u=s.GetArray(),c=u.GetElementCount(),l=0;l<c;l++){var d=u.GetElement(l);if(d){d.GetType()==this.engine.PDFObjectType.e_Reference&&(d=d.GetDirectObject()),d.GetType()==this.engine.PDFObjectType.e_Dictionary&&(d=d.GetDict());var f,h=d.GetElement(n),g={};if(h.GetType()==this.engine.PDFObjectType.e_Array)for(var p=h.GetArray(),v=p.GetElementCount(),_=0;_<v;_++){var m=p.GetElement(_);if(m){m.GetType()==this.engine.PDFObjectType.e_Reference&&(m=m.GetDirectObject()),m.GetType()==this.engine.PDFObjectType.e_Dictionary&&(m=m.GetDict());var y=m.GetElement(i).GetString().toString();if(["Email","Phone","Company"].includes(y)){var S=m.GetElement(r),b=S&&S.GetString().toString();g[y]=b}}}f="".concat(g.Email?g.Email:"").concat(g.Phone?g.Phone:"").concat(g.Company?g.Company:""),o.push(f)}}}return Array.from(new Set(o))}},{key:"setSignatureAP",value:function(e){var t=this,n=e.pageIndex,r=e.annotId,i=e.inkSignBuffer,a=e.pagingSig,o=e.pagingSigObjNum;return o&&(a=this.getPagingSealSignature({sigObjNum:o})),a?function(e,n){var r=t.JR.createReaderCallbackByBuffer(n),i=new t.engine.Image(r).GetFrameBitmap(0);return e.SetBitmap(i),e.GenerateAppearance(),!0}(a,i):this.getPageByIndex(n).then((function(e){return e.getAnnotById(r)})).then((function(e){var n=e.annot.GetField().GetName().toString(),r=t.loadForm().getField(n).engineField,a=t.JR.createReaderCallbackByBuffer(i),o=new t.engine.Image(a).GetFrameBitmap(0);r.SetBitmap2AP(o),r.SetAppearanceFlags(128);var s=new t.engine.SignatureAppearanceOptions;return s.showLogo=!1,r.SetSignatureAppearanceOptions(s),r.ResetSignAppearance(),!0})).catch((function(e){console.error("setSignatureAP",e)}))}},{key:"getFlowSignInfo",value:function(){for(var e=this,t=this.doc,n={initiator:{email:null,phone:null,name:null}},r=[],i=t.GetSignatureCount(),a=0;a<i;a++){var o=t.GetSignature(a);if(o.IsSigned()){var s=t.GetCatalog(),u=new this.engine.String("DocESign");if(s.GetElement(u)){var c=o.GetSignatureDict(),l=new this.engine.String("Signer"),d=new this.engine.String("Name"),f=c.GetElement(l);if(f)f.GetType()===this.engine.PDFObjectType.e_Reference&&(f=f.GetDirectObject()),f.GetDict().GetElement(d)&&r.push(o)}}}try{r.sort((function(e,t){return e.GetFileSizeOfSignedVersion()-t.GetFileSizeOfSignedVersion()}))}catch(t){console.error("pdf-jr/PDFDoc.js getDocAuditTrail  s.GetFileSizeOfSignedVersion error:",t),r.sort((function(t,n){return e.getSignatureSignTimeStamp(t)-e.getSignatureSignTimeStamp(n)}))}if(r&&r.length>0){var h=r[0].GetSignatureDict(),g=new this.engine.String("Signer"),p=new this.engine.String("AuthMethod"),v=new this.engine.String("ID"),_=new this.engine.String("Subtype"),m=h.GetElement(g);if(!m)return;m.GetType()===this.engine.PDFObjectType.e_Reference&&(m=m.GetDirectObject());var y=m.GetDict().GetElement(p);if(y.GetType()===this.engine.PDFObjectType.e_Array)for(var S=y.GetArray(),b=S.GetElementCount(),D=0;D<b;D++){var P=S.GetElement(D);if(P){P.GetType()===this.engine.PDFObjectType.e_Reference&&(P=P.GetDirectObject()),P.GetType()===this.engine.PDFObjectType.e_Dictionary&&(P=P.GetDict());var I=P.GetElement(v),A=P.GetElement(_);"Phone"===A.GetString().toString()&&(n.initiator.phone=I.GetString().toString()),"Email"===A.GetString().toString()&&(n.initiator.email=I.GetString().toString()),"AuthName"===A.GetString().toString()&&(n.initiator.name=I.GetString().toString()),"SAML_Response"===A.GetString().toString()&&(n.initiator.samlResponse=I.GetString().toString()),"EnterpriseId"===A.GetString().toString()&&(n.initiator.companyId=I.GetString().toString())}}}return n}},{key:"attachFile",value:function(e){}},{key:"getFontsInfo",value:function(){for(var e=this.doc,t=[],n=0,r=e.GetFontCount();n<r;n++){var i=e.GetFont(n),a=i.GetFontType(e).value;t.push({isEmbedded:i.IsEmbedded(e),isBold:i.IsBold(),isItalic:i.IsItalic(),baseFontName:this.JR.getPDFString(i.GetBaseFontName(e)),fontType:1===a?"Type1":2===a?"TrueType":3===a?"Type3":4===a?"TrueType(CID)":"",name:this.JR.getPDFString(i.GetName()),familyName:this.JR.getPDFString(i.GetFamilyName()),index:n,docId:this.id,encodingType:i.getEncodingType(e).toString(),actualFontName:i.getActualFontName(e).toString(),actualFontStyle:i.getActualFontStyle(e).toString()})}return t}},{key:"getAdditionalActions",value:function(){var e=this.engine,t=this.doc.GetCatalog().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"AA")),n={};if(!t)return n;for(var r=new e.AdditionalAction(this.doc,t.GetDict()),i=e.TriggerEvent,a=2;a<7;a++){var o=r.GetAction(i.values[a]);o.IsEmpty()||(n[a]=this.JR.actionManager.get(o,this,this.JR).toJson())}return(0,_share_objects_delete_js__WEBPACK_IMPORTED_MODULE_43__.Z)(r),n}},{key:"syncDataCache",value:function(e){var t=[];for(var n in e)t.push(this.getPageByIndex(e[n],n));return Promise.all(t)}},{key:"setColors",value:function(e){Object.assign(this.colors,e)}},{key:"setPageDisplayPreferences",value:function(e){this.pageDisplayPreferences=e}},{key:"setOriginalStream",value:function(e){this.oriFile=e}},{key:"getOriginalStream",value:function(){var e,t=this,n=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();if("string"==typeof this.oriFile.url){var r=this.oriFile,i=new XMLHttpRequest;if(i.open(r.type||"GET",r.url,!0,r.user,r.password),i.responseType="arraybuffer",r.headers){var a=r.headers;for(var o in a)i.setRequestHeader(o,a[o])}i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||304===i.status?n.resolve(i.response):n.reject(i))},i.send(r.data)}else if((0,_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_44__._)(this.oriFile,Blob)){var s=new FileReaderSync;(e=this.oriFile,e.slice(0,5).text().then((function(e){return!e||"\0\0\0\0\0"===e}))).then((function(e){if(e){var r=[];t.getStream({writeStream:function(e){r.push(e)}},0).then((function(e){for(var t=new Uint8Array(e),i=0,a=0,o=r.length;a<o;a++){var s=r[a];t.set(new Uint8Array(s),i),i+=s.byteLength}t=t.slice(0),n.resolve(t)}))}else{var i=s.readAsArrayBuffer(t.oriFile),a=new Uint8Array(i);n.resolve(a)}}))}else n.resolve(new Uint8Array(this.oriFile).slice(0).buffer);return n.promise}},{key:"moveAnnotsToPage",value:function(e,t,n){var r=this;return Promise.all([this.getPageById(e),this.getPageById(t)]).then((function(e){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(e,2),i=t[0],a=t[1];return a.isVirtual?[]:Promise.all([i.parsedPage(),a.parsedPage()]).then((function(e){var t=function(e){var t=i._getAnnotIndexById(Number(e)),a=s.GetAnnot(t),o=n[e].rect,u=a.GetDict(),l=u.GetObjNum();if(Object.keys(o).length){var f=new c.CFX_FloatRect(o.left,o.bottom,o.right,o.top),p=a.GetRect(),v=p.Width()/2,_=p.Height()/2,m=new c.Matrix;m.Translate(-p.left-v,-p.bottom-_,!1),m.Rotate(-d*Math.PI/2,!1),m.Translate(p.left+v,p.bottom+_,!1),m.SetReverse(m);var y=a.GetRect();m.TransformRect(y),f.right=f.left+y.Width(),f.top=f.bottom+y.Height();var S=a.GetType().value,b=o.left-y.left,D=o.bottom-y.bottom;switch(S){case 3:var P,I=(360+90*d)%360,A=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(c,"Rotate"),w=u.GetElement(A);P=w?w.GetInteger():0,u.SetAt(A,c.PDFObject.CreateFromInteger((P+I)%360));var C=new c.FreeText(a);if("FreeTextCallout"==C.GetIntent().toString()){for(var k=C.GetCalloutLinePoints(),E=0,G=k.GetSize();E<G;E++){var T=k.GetAt(E);(T=m.TransformPoint(T.x,T.y)).x+=b,T.y+=D,k.SetAt(E,T)}C.SetCalloutLinePoints(k);var F=C.GetInnerRect();m.TransformRect(F),F.left+=b,F.right+=b,F.top+=D,F.bottom+=D;var R=new c.CFX_FloatRect(F.left-f.left,F.bottom-f.bottom,f.right-F.right,f.top-F.top);u.SetAtRect((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(c,"RD"),R),u.SetAtRect((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(c,"Rect"),f),a.ResetAppearanceStream()}break;case 4:var M=new c.Line(a),O=M.GetStartPoint();(O=m.TransformPoint(O.x,O.y)).x+=b,O.y+=D,M.SetStartPoint(O);var x=M.GetEndPoint();(x=m.TransformPoint(x.x,x.y)).x+=b,x.y+=D,M.SetEndPoint(x);break;case 7:case 8:[c.PolyLine,c.Polygon].find((function(e,t){if(7==S&&0==t)return!1;var n=new e(a),i=n.GetPath();if(i.GetPointCount()>0){var o=new r.engine.Path,s=i.GetPointCount();o.IncreasePointCount(s);for(var u=0;u<s;u++){var c=i.GetPoint(u),l=m.TransformPoint(c.x,c.y);l.x+=b,l.y+=D,o.SetPoint(u,l,i.GetPointType(u))}n.SetPath(o)}else{for(var d=n.GetVertexes(),f=0,h=d.GetSize();f<h;f++){var g=d.GetAt(f);(g=m.TransformPoint(g.x,g.y)).x+=b,g.y+=D,d.SetAt(f,g)}n.SetVertexes(d)}return!0}));break;case 9:case 10:case 11:case 12:for(var B=function(e,t){var n=L.GetAt(e),r=new c.QuadPoints;[n.first,n.second,n.third,n.fourth].forEach((function(e,t){var n=m.TransformPoint(e.x,e.y);switch(n.x+=b,n.y+=D,t){case 0:r.first=n;break;case 1:r.second=n;break;case 2:r.third=n;break;case 3:r.fourth=n}})),j.Add(r)},N=new c.TextMarkup(a),L=N.GetQuadPoints(),j=new c.QuadPointsArray,U=0,W=L.GetSize();U<W;U++)B(U);N.SetQuadPoints(j);break;case 15:for(var H=new c.Ink(a),z=H.GetInkList(),K=z.GetPointCount(),J=0;J<K;J++){var V=z.GetPoint(J),Y=m.TransformPoint(V.x,V.y);Y.x+=b,Y.y+=D;var Z=z.GetPointType(J);z.SetPoint(J,Y,Z)}H.SetInkList(z);break;case 13:var q,X=(360+90*d)%360,Q=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(c,"Rotate"),$=u.GetElement(Q);q=$?$.GetInteger():0,new c.Stamp(a).SetRotation(((-q-X)%360+360)%360);break;case 17:var ee=a.GetFlags();a.SetFlags(24|ee);break;case 20:var te=(4+d)%4,ne=new c.Widget(a),re=ne.GetMKRotation().value;4===re&&(re=0);var ie=4-((-re-te)%4+4)%4,ae=c.Rotation.e_Rotation0;switch(ie){case 1:ae=c.Rotation.e_Rotation90;break;case 2:ae=c.Rotation.e_Rotation180;break;case 3:ae=c.Rotation.e_Rotation270}ne.SetMKRotation(ae)}26!==S&&u.SetAtRect((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(c,"Rect"),f),a.ResetAppearanceStream()}u.RemoveAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(c,"P")),h.AddElement(c.PDFObject.CreateReference(r.doc,l)),g[l]=e},o=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(e,2),s=o[0],u=o[1],c=r.engine,l=s.GetRotation().value,d=u.GetRotation().value-l,f=getAnnotsArray(c,s),h=getAnnotsArray(c,u),g={};for(var p in n)t(p);for(var v in g)for(var _=f.GetElementCount(),m=0;m<_;m++){var y=f.GetElement(m).GetDirectObject().GetDict(),S=y.GetObjNum();if(g[S]){f.RemoveAt(m);break}var b=y.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(c,"NM")),D=b&&b.GetString().toString();if(g[S]==D&&b){f.RemoveAt(m);break}}return i.page.UpdateAnnotList(),a.page.UpdateAnnotList(),i.reloadAnnots(),a.reloadAnnots(),a.getAnnots(null,g).then((function(e){return e.forEach((function(e){e.updateModifyTime()})),e}))}))}))}},{key:"setTabOrder",value:function(e,t){var n=this,r=Object.freeze({none:"e_None",row:"e_Row",column:"e_Column",structure:"e_Structure"});return this.getPageByIndex(e).then((function(e){if(e.isVirtual)return[];var i=n.engine.OrderType[r[t]||r.none],a=new n.engine.TabOrderMgr(e.page);a.SetOrderType(i),a.Reload();e.page.GetAnnotCount();for(var o=a.GetFirstAnnot(),s=[];!o.IsEmpty();)s.push(o.GetDict().GetObjNum()),o=a.GetNextAnnot(o);return s}))}},{key:"getTabOrder",value:function(e){var t=this,n=this.engine;return this.getPageByIndex(e).then((function(e){if(e.isVirtual)return"e_None";var r=new t.engine.TabOrderMgr(e.page).GetOrderType();switch(r){case n.OrderType.e_Row:r="e_Row";break;case n.OrderType.e_Column:r="e_Column";break;case n.OrderType.e_Structure:r="e_Structure";break;default:r="e_None"}return r}))}},{key:"setStructureOrder",value:function(e,t){var n=this,r=this.engine;return this.getPageByIndex(e).then((function(e){return e.isVirtual?[]:e.getAnnots(t).then((function(t){var i=new n.engine.TabOrderMgr(e.page),a=new r.AnnotArray;return t.forEach((function(e){a.Add(e.annot)})),i.AdjustStructureOrder(a),e.reloadAnnots()}))}))}},{key:"renderTemplatesByObjNum",value:function(e){var t=this.engine,n=this.doc.GetTemplateSize(e),r=new t.Bitmap(n.x,n.y,t.DIBFormat.e_DIBRgb32,0,0);r.FillRect(4294967295,null);var i=(0,_share_RendererHelper__WEBPACK_IMPORTED_MODULE_16__.I)(t,r);return i.RenderTemplates(this.doc,e,r),(0,_share_RendererHelper__WEBPACK_IMPORTED_MODULE_16__.v)(t,r,i)}},{key:"getPageIndexByObjNum",value:function(e){return this.doc.GetPageIndex(e)}},{key:"getFileSpecDict",value:function(e){for(var t=this.doc,n=this.engine,r=new n.PDFNameTree(t,n.PDFNameTreeType.e_EmbeddedFiles),i=null,a=0,o=r.GetCount();a<o;a++){var s=r.GetName(a);if(s.GetLength()){if(s.toString()===e){i=r.GetObj(s),s.delete(),s=null;break}s.delete(),s=null}}return i}},{key:"getNameTree",value:function(e){for(var t={value:e},n=this.doc,r=this.engine,i={},a=new r.PDFNameTree(n,t),o=0,s=a.GetCount();o<s;o++){var u=a.GetName(o);if(u.GetLength()){var c=a.GetObj(u);if(c){var l=u.toString();if(t.value===r.PDFNameTreeType.e_JavaScript.value){var d=new r.Action(n,c.GetDict());if(d.IsEmpty())continue;var f=new r.JavaScriptAction(d),h=f.GetScript();i[l]=this.JR.getPDFString(h),d=null,f=null,h=null}else if(4===t.value||5===t.value){var g=c.GetDict().GetObjNum();i[l]=g,g=null}else if(t.value===r.PDFNameTreeType.e_EmbeddedFiles.value){var p=new r.FileSpec(n,c),v=new _base_FileSpec__WEBPACK_IMPORTED_MODULE_17__.Z(p,this);i[l]=v.toJson(),i[l].name=l,v=null}u.delete(),u=null}}}return a.delete(),a=null,i}},{key:"addNameTreeObj",value:function(e,t,n){var r=this.engine,i=this.doc,a=new r.PDFNameTree(i,{value:e}),o=new r.WString(t),s=i.GetIndirectObject(n).GetDirectObject(),u=a.Add(o,s);return o.delete(),o=null,u}},{key:"removeNameTreeObj",value:function(e,t){var n=this.engine,r=this.doc,i=new n.PDFNameTree(r,{value:e}),a=new n.WString(t),o=i.RemoveObj(a);return a.delete(),a=null,o}},{key:"replaceNameTreeObj",value:function(e,t,n){var r=this.engine,i=this.doc,a=new r.PDFNameTree(i,{value:e}),o=new r.WString(t),s=i.GetIndirectObject(n).GetDirectObject(),u=a.SetObj(o,s);return o.delete(),o=null,u}},{key:"renameNameTreeObj",value:function(e,t,n){var r=this.engine,i=this.doc,a=new r.PDFNameTree(i,{value:e}),o=new r.WString(t),s=new r.WString(n),u=a.Rename(o,s);return o.delete(),o=null,s.delete(),s=null,u}},{key:"nameTreeTemplatesToPages",value:function(e){var t=this.engine,n=this.doc,r=new t.WString(e),i=n.InsertPageFromTemplate(r);return r.delete(),r=null,i}},{key:"nameTreePagesToTemplates",value:function(e){var t=this.engine,n=this.doc,r=new t.WString(e);return n.RemovePageFromTemplate(r),r.delete(),r=null,!0}},{key:"addFileSpec",value:function(e,t,n){var r=this.engine,i=this.doc,a=_base_FileSpec__WEBPACK_IMPORTED_MODULE_17__.Z.createFile(r,i,t),o=new r.WString(e);return a.SetFileName(o),o.delete(),o=null,a.SetModifiedDateTime(_annot_Annot__WEBPACK_IMPORTED_MODULE_18__.Z.ToDateTime(r,n)),a.GetDict().GetObjNum()}},{key:"setFileSpecDesc",value:function(e,t){var n=this.engine,r=this.doc;if(!t)return!0;var i=new n.FileSpec(r,r.GetIndirectObject(t));if(!i.IsEmpty()){var a=new n.String(e);i.SetDescription(a),a.delete(),a=null}return!0}},{key:"getArticle",value:function(){return!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.article||(this.article=new _PDFArticle__WEBPACK_IMPORTED_MODULE_26__.Z(this)),this.article}},{key:"getFileSpecStream",value:function(e,t){return e<1?Promise.reject():this._getFileSpecStream(this.doc.GetIndirectObject(e),t)}},{key:"getFileSpecStreamByName",value:function(e,t){if(0===e.length)return Promise.reject();var n=this.getFileSpecDict(e);return n?this._getFileSpecStream(n,t):Promise.reject()}},{key:"_getFileSpecStream",value:function(e,t){var n=this.engine,r=this.doc,i=new n.FileSpec(r,e);if(i.IsEmpty())return Promise.reject();var a=new _base_FileSpec__WEBPACK_IMPORTED_MODULE_17__.Z(i,this),o=a.getStream(t);return a=null,o}},{key:"attachments",get:function(){return this._attachments||(this._attachments=new _Attachments__WEBPACK_IMPORTED_MODULE_19__.Z(this.engine,this.doc)),this._attachments},set:function(e){this._attachments=e}},{key:"addEmbeddedFile",value:function(e,t){return this.attachments.addEmbeddedFileEx(e,t)}},{key:"setEmbeddedFile",value:function(e,t){return this.attachments.setEmbeddedFileEx(e,t)}},{key:"getEmbeddedFile",value:function(e){return this.attachments.getEmbeddedFile(e,this)}},{key:"getFormControlPage",value:function(e){for(var t=this,n=[],r=0;r<this.doc.GetPageCount();r++)n.push(this.getPageByIndex(r));return Promise.all(n).then((function(n){for(var r=0;r<n.length;r++){var i=t.pageIndexMap[r].page.GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"Annots"));if(i&&(i=i.GetDirectObject()))for(var a=i.GetArray(),o=0;o<a.GetElementCount();o++){var s=a.GetElement(o);if(s&&((s=s.GetDirectObject())&&s.GetDict().GetObjNum()==e))return r}}}))}},{key:"getPDFDictInfo",value:function(){var e=this.dictionaryMap[this.id];if(e)return e.toJson();var t=this;return this.docPromise.then((function(e){var n=e.GetInfo(),r=new _PDFDictionary_js__WEBPACK_IMPORTED_MODULE_3__.Z(t);return t.updateDictCache(n,r),t.updateDictMap(t.id,r),r.toJson()}))}},{key:"getPageLabels",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this,r=this.engine;return this.docPromise.then((function(e){return e.GetPageCount()})).then((function(n){return Promise.all(t.map((function(r){if(r>0&&r<n)return e.getPageByIndex(r).then((function(e){if(e.isVirtual){var n=t.indexOf(r);t.split(n,1)}}))})))})).then((function(){return e.docPromise})).then((function(e){n.pageLabels=n.pageLabels||new r.PageLabels(e);var i=[],a=e.GetPageCount();if(!t||!t.length){for(var o=0;o<a;o++){var s=n.pageLabels.GetPageLabelTitle(o);i.push(s.toString())}return i}return t.forEach((function(e){if(e<0||e>=a)i.push("");else{var t=n.pageLabels.GetPageLabelTitle(e);i.push(t.toString())}})),i}))}},{key:"startFormDesignerAssit",value:function(){for(var e in this.isDesignerMode=!0,this.pageCache){this.pageCache[e].resetBitmapCache()}}},{key:"stopFormDesignerAssit",value:function(){for(var e in this.isDesignerMode=!1,this.pageCache){this.pageCache[e].resetBitmapCache()}}},{key:"updateDictCache",value:function(e,t){var n=t.id;this.dictionaryCache[n]=e}},{key:"updateDictMap",value:function(e,t){this.dictionaryMap[e]=t}},{key:"hasKey",value:function(e,t){var n=this.dictionaryCache[e];if(!n)return!1;var r=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(this.engine,t);return n.HasKey(r)}},{key:"setAt",value:function(e,t,n){var r=this.dictionaryCache[e],i=this.engine,a=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(i,t);switch(void 0===n?"undefined":(0,_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_45__._)(n)){case"string":return r.SetAtString(a,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(i,n)),!0;case"number":return n%1==0?(r.SetAtInteger(a,n),!0):!isNaN(n)&&(r.SetAtFloat(a,n),!0);case"boolean":return r.SetAtBoolean(a,n),!0}return!1}},{key:"getAt",value:function(e,t){var n=this.dictionaryCache[e],r=this.engine;try{var i=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(r,t),a=n.GetElement(i);switch(a.GetType().value){case 1:return a.GetBoolean();case 2:return a.GetFloat();case 3:return a.GetString().toString()}}catch(e){throw new Error("The specified key does not exist in the dictionary or the value type is unaccepted")}}},{key:"autoRecognitionForm",value:function(){var e=this.doc.AutoRecognitionForm(!1),t=[];return this.getAllLoadedPages().forEach((function(e){t.push(e.index)})),this.reloadPageAnnots(t),e}},{key:"isStaticXFA",value:function(){return this.doc.IsStaticXFA()}},{key:"isDynamicXFA",value:function(){return this.mIsDynamicXFA}},{key:"isXFA",value:function(){return this.doc.IsXFA()}},{key:"removeXFA",value:function(){return this.doc.RemoveXFA()}},{key:"reversePages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.engine;return this.docPromise.then((function(r){if(!Array.isArray(t))return[];if(t.length<2)return[];if(!t.every((function(e){return"number"==typeof e})))return[];for(var i=function(e,t,n,r){var i=new t.Range;return i.AddSingle(n),e.MovePagesTo(i,r)},a=0,o=t.length-1;a<o;a++,o--){var s=i(r,n,a,o);if(s&&(s=i(r,n,o-1,a)),s){var u=e.pageIndexMap[a],c=function(t,n){var r;return(0,_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_44__._)(t,_PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z)&&(t.index=n,r=t.id),e.pageIndexMap[n]=t,r};c(e.pageIndexMap[o],a),c(u,o)}}return t}))}},{key:"movePagesTo",value:function(e,t){var n=this,r=this.engine,i=new r.Range;return e.forEach((function(e){"object"!=typeof e?i.AddSingle(e):1===e.length?i.AddSingle(e[0]):2===e.length&&i.AddSegment(e[0],e[1],r.RangeFilter.e_All)})),this.docPromise.then((function(r){var a,o=r.GetPageCount(),s=t;e[0]<t&&(s=t-1),s<0&&(s=0),s>=o&&(s=o-1);var u=r.MovePagesTo(i,s);if(!u)return u;(a=Math).max.apply(a,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(e).concat([t]));for(var c=0;c<o;c++)n.pageIndexMap[c]||(n.pageIndexMap[c]={});var l,d=Object.values(n.pageIndexMap);return e.map((function(e){return d[e]})).forEach((function(e,n){var r=d.indexOf(e);if(d.splice(r,1),0===n)r<t?d.splice(t-1,0,e):d.splice(t,0,e);else{var i=d.indexOf(l);d.splice(i+1,0,e)}l=e})),u=[],d.forEach((function(e,t){var r;(0,_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_44__._)(e,_PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z)?(e.index=t,r=e.id):e=null,u.push(r),n.pageIndexMap[t]=e})),n.update3DCacheAfterMovePages(e,s,o),u}))}},{key:"startReplacePages",value:function(e,t,n,r){var i=this,a=this.engine,o=new a.Range,s=this.doc;s.GetPageCount();r.forEach((function(e){"object"!=typeof e?o.AddSingle(e):1===e.length?o.AddSingle(e[0]):2===e.length&&o.AddSegment(e[0],e[1],a.RangeFilter.e_All)}));var u=[],c=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),l=0,d="",f=a.StreamCallback.implement({Release:function(){},Flush:function(){return c.resolve(l),!0},GetSize:function(){return l},WriteBlock:function(e,t,n){l+=n;var r,i=a.HEAPU8.buffer;return r=i.slice?i.slice(e,e+n):new Uint8Array(i,e,n).buffer,u.push(r),!0},ReadBlock:function(e,t,n){var r=(new FileReaderSync).readAsArrayBuffer(new Blob(u).slice(t,t+n));return r=new Uint8Array(r),a.HEAPU8.set(r,e),!0}}),h=a.PauseCallback.implement({NeedToPauseNow:function(){return!1}});try{s.StartReplacePages(e,t,n.doc,o,f,h)}catch(e){d=e}if(d)return{error:d};for(var g=r.length,p=0;p<t;p++){var v=p+e;if(this.pageIndexMap[v]){var _=this.pageIndexMap[v];delete this.pageIndexMap[v],delete this.pageIndexPromise[v],delete this.pageCache[_.id]}}t!==g&&Object.keys(this.pageIndexMap).reverse().map((function(n,r){+n>=e+t-1&&(i.pageIndexMap[+n+g-t]=i.pageIndexMap[+n],i.pageIndexMap[+n+g-t].index=+n+g-t,delete i.pageIndexMap[+n])}));var m=new Array(g).fill(0).map((function(t,n){return e+n})).map((function(e){var t=s.GetPage(e),n=t.GetIndex(),r=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(n,i);return r.page=t,i.updatePageIndexMap(n,r),i.updatePageCache(r),r.toJson()}));return o&&o.delete(),m}},{key:"setPageTransition",value:function(e,t,n,r){var i=this.JR.engine,a=new i.PDFDictionary.Create,o=new i.String("S"),s=new i.String(e);if(a.SetAtName(o,s),"Split"===e){var u=new i.String("Dm"),c=new i.String("M"),l=new i.String("H"),d=new i.String("V"),f=new i.String("I"),h=new i.String("O");"Horizontal Inward"===t?(a.SetAtName(u,l),a.SetAtName(c,f)):"Horizontal Outward"==t?(a.SetAtName(u,l),a.SetAtName(c,h)):"Vertical Inward"==t?(a.SetAtName(u,d),a.SetAtName(c,f)):(a.SetAtName(u,d),a.SetAtName(c,h)),u.delete(),c.delete(),l.delete(),d.delete(),f.delete(),h.delete()}else if("Blinds"===e){var g=new i.String("Dm"),p=new i.String("H"),v=new i.String("V");"Horizontal"===t?a.SetAtName(g,p):a.SetAtName(g,v),g.delete(),p.delete(),v.delete()}else if("Box"==e){var _=new i.String("M"),m=new i.String("I"),y=new i.String("O");"Inward"===t?a.SetAtName(_,m):a.SetAtName(_,y),_.delete(),m.delete(),y.delete()}else if("Wipe"===e||"Glitter"===e||"Cover"===e||"Uncover"===e){var S=new i.String("Di"),b=0;b="Right"===t?0:"Right Up"===t?1:"Up"===t?2:"Left Up"===t?3:"Left"===t?4:"Left Down"===t?5:"Down"===t?6:7,a.SetAtInteger(S,45*b),S.delete()}else if("Push"==e){var D=new i.String("Di"),P=0;P="Right"===t?0:"Up"===t?1:"Left"===t?2:3,a.SetAtInteger(D,45*P),D.delete()}else if("Fly"===e){var I=new i.String("Di"),A=0;A="Right"===t?0:"Up"===t?1:"Left"===t?2:3,a.SetAtInteger(I,90*A),I.delete()}var w=new i.String("D");"Fast"===n?a.SetAtFloat(w,.333328):"Medium"===n&&a.SetAtFloat(w,.666656);var C=this.doc,k=new i.String("Trans");if(C.AddIndirectObject(a),"NoTransition"!==e)for(var E=0;E<r.length;E++){C.GetPage(r[E]).GetDict().SetAtReference(k,a,C)}else for(var G=0;G<r.length;G++){C.GetPage(G).GetDict().RemoveAt(k)}return o.delete(),s.delete(),w.delete(),k.delete(),!0}},{key:"getPageTransitionByIndex",value:function(e){var t,n=this.JR.engine,r=this.doc.GetPage(e).GetDict(),i="NoTransition",a=new n.String("Trans"),o=r.GetElement(a);if(null===o)return{transName:"NoTransition",direction:"",speed:""};o.GetType()===n.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o.GetType()==n.PDFObjectType.e_Dictionary&&(t=o.GetDict());var s=new n.String("S"),u=t.GetElement(s);u&&"R"===(i=u.GetString().toString())&&(i="NoTransition");var c="",l=new n.String("Dm"),d=t.GetElement(l);if("Split"===i){var f=new n.String("M"),h=t.GetElement(f);c=d&&"V"===d.GetString().toString().toLocaleUpperCase()?h&&"O"===h.GetString().toString().toLocaleUpperCase()?"Vertical Outward":"Vertical Inward":h&&"O"===h.GetString().toString().toLocaleUpperCase()?"Horizontal Outward":"Horizontal Inward",f.delete()}else if("Blinds"===i)c=d&&"V"===d.GetString().toString().toLocaleUpperCase()?"Vertical":"Horizontal";else if("Box"===i){var g=new n.String("M"),p=t.GetElement(g);c=p&&"O"===p.GetString().toString().toLocaleUpperCase()?"Outward":"Inward",g.delete()}else if("Wipe"==i||"Glitter"==i||"Cover"==i||"Uncover"==i){var v=new n.String("Di"),_=t.GetElement(v);if(null===_)c="Right";else switch(_.GetInteger()/45%8){case 0:c="Right";break;case 1:c="Right Up";break;case 2:c="Up";break;case 3:c="Left Up";break;case 4:c="Left";break;case 5:c="Left Down";break;case 6:c="Down";break;case 7:c="Right Down"}v.delete()}else if("Push"===i){var m=new n.String("Di"),y=t.GetElement(m);if(null===y)c="Right";else switch(y.GetInteger()/45%8){case 0:c="Right";break;case 1:default:c="Up";break;case 2:c="Left";break;case 3:c="Down"}m.delete()}else if("Fly"==i){var S=new n.String("Di"),b=t.GetElement(S);if(null===b)c="Right";else switch(b.GetInteger()){case 0:c="Right";break;case 90:default:c="Up";break;case 180:c="Left";break;case 270:c="Down"}S.delete()}var D="";if("NoTransition"!==i){var P=new n.String("D");if(null===t.GetElement(P))D="Slow";else{var I=t.GetElement(P).GetFloat();D=I-.333328<.001&&I-.333328>-.001?"Fast":I-.666656<.001&&I-.666656>-.001?"Medium":"Slow"}P.delete()}return a.delete(),s.delete(),l.delete(),{transName:i,direction:c,speed:D}}},{key:"getStampTypeByPageIndex",value:function(e){var t=this.JR.engine,n=this.doc.GetPage(e).GetDict(),r=new t.String("PieceInfo"),i=n.GetElement(r);if(!i)return!1;var a=i.GetDict(),o=new t.String("FXSConfi"),s=a.GetElement(o);if(!s)return!1;var u=s.GetDict(),c=new t.String("Private"),l=u.GetElement(c);if(!l)return!1;var d=l.GetDict(),f=new t.String("Dynamic"),h=new t.String("Favorite"),g=new t.String("DefaultW"),p=new t.String("DefaultH"),v=d.GetElement(f),_=d.GetElement(h),m=d.GetElement(g),y=d.GetElement(p);return{isDynamic:v.GetBoolean(),isFavorite:_.GetBoolean(),width:m.GetFloat(),height:y.GetFloat()}}},{key:"removePages",value:function(e){var t=this,n=pageRangeTwoDimensionToOne(e).sort((function(e,t){return t-e}));try{var r=[];return n.forEach((function(e){r.push(t.removePage(e))})),syncPromisesTask(r).then((function(e){return!0}))}catch(e){return console.warn(e),!1}}},{key:"insertBlankPages",value:function(e,t,n){var r=this,i=pageRangeTwoDimensionToOne(e).sort((function(e,t){return e-t})),a=[];return i.forEach((function(e,i){a.push(r.insertPage(e+i,t,n))})),syncPromisesTask(a)}},{key:"insertBlankPages2",value:function(e,t,n){var r=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var i,a,o,s,u,c,l,d,f,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(g){switch(g.label){case 0:i=pageRangeTwoDimensionToOne(e).sort((function(e,t){return e-t})),a=[],o=!0,s=!1,u=void 0,g.label=1;case 1:g.trys.push([1,6,7,8]),c=i[Symbol.iterator](),g.label=2;case 2:return(o=(l=c.next()).done)?[3,5]:(d=l.value,[4,r.insertPage(d,t,n)]);case 3:f=g.sent(),a.push(f),g.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return h=g.sent(),s=!0,u=h,[3,8];case 7:try{o||null==c.return||c.return()}finally{if(s)throw u}return[7];case 8:return[2,a]}}))}))()}},{key:"rotatePages",value:function(e,t){var n=pageRangeTwoDimensionToOne(e),r=[];return pageIndexesToPages(this,n).then((function(e){return e.forEach((function(e){r.push(e.setRotation(t))})),Promise.all(r)}))}},{key:"moveBookmark",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var a,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(s){switch(s.label){case 0:return i.rootBookmark?[3,2]:[4,i.getRootBookmark(r)];case 1:s.sent(),s.label=2;case 2:return a=i.rootBookmark.getBookmarkById(e),o=i.rootBookmark.getBookmarkById(t),i.rootBookmark.isOldVersion&&(i.rootBookmark=null),[2,a.moveTo(o,n)]}}))}))()}},{key:"getFolioTreeRoot",value:function(){if(this.doc.IsPortfolio()){var e=this.engine.Portfolio.CreatePortfolio(this.doc),t=e.GetRootNode();if(!t.IsEmpty()){var n,r=t.GetNodeType();return r==this.engine.PortfolioNodeType.e_TypeFolder&&(t=new this.engine.PortfolioFolderNode(t),n=this.portfolioFolderNodeToJSON(t)),r==this.engine.PortfolioNodeType.e_TypeFile&&(t=new this.engine.PortfolioFileNode(t),n=this.portfolioFileNodeToJSON(t)),e.delete(),n}e.delete()}}},{key:"getFolioFileInfo",value:function(){if(!this.doc.IsPortfolio())return{};var e=this.engine.Portfolio.CreatePortfolio(this.doc);try{return{initialFileSpecKeyName:e.GetInitialFileSpecKeyName().toString(),initialViewMode:e.GetInitialViewMode().value}}finally{e.delete()}}},{key:"getPortfolioFileStream",value:function(e,t){var n=t.writeStream,r=this.JR.GetJSObjectFromPtr(e);return new _base_FileSpec__WEBPACK_IMPORTED_MODULE_17__.Z(r.GetFileSpec(),this).getStream(n)}},{key:"getPortfolioSubNodes",value:function(e){var t=[],n=this.JR.GetJSObjectFromPtr(e);if(!n)throw new Error("Nonexistent portfolio folder node!");var r=n.GetNodeType();if(r!==this.engine.PortfolioNodeType.e_TypeFolder)return t;for(var i=n.GetSortedSubNodes(),a=i.GetSize(),o=0;o<a;o++){var s=i.GetAt(o);(r=s.GetNodeType())==this.engine.PortfolioNodeType.e_TypeFolder&&(s=new this.engine.PortfolioFolderNode(s),t.push(this.portfolioFolderNodeToJSON(s))),r==this.engine.PortfolioNodeType.e_TypeFile&&(s=new this.engine.PortfolioFileNode(s),t.push(this.portfolioFileNodeToJSON(s)))}return t}},{key:"removeSubNode",value:function(e,t){var n=this.JR.GetJSObjectFromPtr(e);if(!n)throw new Error("Nonexistent portfolio folder node!");if(n.GetNodeType()!==this.engine.PortfolioNodeType.e_TypeFolder)return!1;var r=this.JR.GetJSObjectFromPtr(t);if(!r)throw new Error("Nonexistent portfolio node!");n.RemoveSubNode(r)}},{key:"portfolioFolderNodeToJSON",value:function(e){var t=gsdkDateToLocal(e.GetCreationDateTime()),n=gsdkDateToLocal(e.GetModifiedDateTime());return{type:1,fileName:e.GetName().toString(),description:e.GetDescription().toString(),creationDateTime:t?t.getTime():-1,modifiedDateTime:n?n.getTime():t,handle:this.JR.SetJSObjectRef(e)}}},{key:"portfolioFileNodeToJSON",value:function(e){var t=e.GetFileSpec(),n=gsdkDateToLocal(t.GetCreationDateTime()),r=gsdkDateToLocal(t.GetModifiedDateTime()),i=e.GetKeyName().toString();return{type:0,fileName:t.GetFileName().toString(),fileSize:t.GetFileSize(),description:t.GetDescription().toString(),creationDateTime:n?n.getTime():-1,modifiedDateTime:r?r.getTime():n,subtype:t.GetSubtype().toString(),keyName:i,handle:this.JR.SetJSObjectRef(e)}}},{key:"pdfPortfolio",get:function(){if(this.doc.IsPortfolio())return this._pdfPortfolio||(this._pdfPortfolio=new _PDFPortfolio__WEBPACK_IMPORTED_MODULE_27__.Z(this,this.engine)),this._pdfPortfolio},set:function(e){this._pdfPortfolio=e}},{key:"isCPDF",value:function(){return this.doc.IsCPDF()}},{key:"getDocURI",value:function(){return this.isCPDF()?this.doc.GetDocURI().toString():null}},{key:"getVersionID",value:function(){return this.isCPDF()?this.doc.GetVersionID().toString():null}},{key:"convertToCPDF",value:function(e,t,n,r){var i=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var a,o,s,u,c,l,d,f,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(g){switch(g.label){case 0:if([e,t,n,r].some((function(e){return"string"!=typeof e||0===e.length})))throw"[ERROR] All arguments must be string.";if(a=i.engine,o={endPoint:new a.String(t)},u=function(e){return e.split("\r\n").reduce((function(e,t){var n=t.split(": ");return 2===n.length&&(e[n[0]]=n[1]),e}),{})},p=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(e,t,n){var r,i,o,s,c,l,d,f;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(h){switch(h.label){case 0:return r=function(e){var t=e.GetURL().toString(),n=u(e.GetHTTPHeader().toString());switch(e.GetUsageType()){case a.RequestUsageType.e_RequestUsagePOST:return{url:t,headers:n,method:"post",body:e.GetRequestData().toString()};case a.RequestUsageType.e_RequestUsagePUT:return{url:t,headers:n,method:"put",body:e.GetRequestData().toString()};case a.RequestUsageType.e_RequestUsageGET:return{url:t,headers:n,method:"get",params:e.GetRequestData().toString()};case a.RequestUsageType.e_RequestUsageNone:default:throw"[ERROR] Not valid request."}},i=r(t),o=i.url,s=(0,_swc_helpers_object_without_properties__WEBPACK_IMPORTED_MODULE_46__._)(i,["url"]),[4,fetch(o,s)];case 1:return[4,h.sent().json()];case 2:if(c=h.sent(),l=new a.ResponseParser,d=function(e){return e!==a.ErrorCode.e_ErrSuccess},c&&210007===c.ret&&"TOKEN_ERROR"===c.message)throw new Error("Token Error");if(f=l.Parse(new a.String(JSON.stringify(c)),n),d(f))throw"[ERROR] Fail to parse response for ".concat(e);if(f=l.GetResultStatus(),d(f))throw"[ERROR] Response result status: ".concat(f.value.toString());return[2,l]}}))})),c=function(e,t,n){return p.apply(this,arguments)},i.isCPDF())throw"[ERROR] Already a ConnectedPDF file, so no need to do conversion.";return l=a.ConnectedPDF.GenerateRequestToCheckEndpoint(o.endPoint),[4,c("CheckEndPoint",l,a.ResponsePurposeType.e_ResponsePurposeCheckServer)];case 1:if(!(s=g.sent()).IsValidCPDFServer())throw"[FAILED] ".concat(o.endPoint," is not a valid CPDF server.");return(d=new a.ConnectedPDFClientInfo).device_id=new a.String("Device ID"),d.device_name=new a.String("Device Name"),d.device_model=new a.String("Device Model"),d.mac_address=new a.String("MAC Address"),d.os=new a.String("OS"),d.product_name=new a.String("Product Name"),d.product_vendor=new a.String("Product Vendor"),d.product_version=new a.String("1.0.0.0"),d.product_language=new a.String("en-us"),l=a.ConnectedPDF.GenerateRequestToGetClientID(d),[4,c("GetClientID",l,a.ResponsePurposeType.e_ResponsePurposeClientID)];case 2:return s=g.sent(),f=s.GetClientID(),h=new a.ConnectedPDF(f,new a.String(n),new a.String(""),a.CPDFEncryptType.e_CPDFEncryptTypeAES,i.doc),l=h.GenerateRequestToConvertToCPDF(o.endPoint,new a.String(r),new a.WString(e)),[4,c("ConvertToCPDF",l,a.ResponsePurposeType.e_ResponsePurposeCommon)];case 3:if(s=g.sent(),!h.UpdateInfoToPDFDoc(l))throw"[FAILED] Fail to convert to Connected PDF file.";return[2]}var p}))}))()}},{key:"removeCDocId",value:function(e,t,n,r){var i=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var a,o,s,u,c,l,d,f,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(g){switch(g.label){case 0:if([e,t,n,r].some((function(e){return"string"!=typeof e||0===e.length})))throw"[ERROR] All arguments must be string.";return o=i.engine,s={endPoint:new o.String(t)},u=function(e){return e.split("\r\n").reduce((function(e,t){var n=t.split(": ");return 2===n.length&&(e[n[0]]=n[1]),e}),{})},p=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(e,t,n){var r,i,a,s,c,l,d,f,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(g){switch(g.label){case 0:return r=function(e){var t=e.GetURL().toString(),n=u(e.GetHTTPHeader().toString());switch(e.GetUsageType()){case o.RequestUsageType.e_RequestUsagePOST:return{url:t,headers:n,method:"post",body:e.GetRequestData().toString()};case o.RequestUsageType.e_RequestUsagePUT:return{url:t,headers:n,method:"put",body:e.GetRequestData().toString()};case o.RequestUsageType.e_RequestUsageGET:return{url:t,headers:n,method:"get",params:e.GetRequestData().toString()};case o.RequestUsageType.e_RequestUsageNone:default:throw"[ERROR] Not valid request."}},i=r(t),a=i.url,s=(0,_swc_helpers_object_without_properties__WEBPACK_IMPORTED_MODULE_46__._)(i,["url"]),[4,fetch(a,s)];case 1:return c=g.sent(),l=new o.ResponseParser,d=function(e){return e!==o.ErrorCode.e_ErrSuccess},[4,c.json()];case 2:if(h=g.sent(),f=l.Parse(new o.String(JSON.stringify(h)),n),d(f))throw"[ERROR] Fail to parse response for ".concat(e);if(f=l.GetResultStatus(),d(f))throw"[ERROR] Response result status: ".concat(f.value.toString());return[2,l]}}))})),c=function(e,t,n){return p.apply(this,arguments)},l=o.ConnectedPDF.GenerateRequestToCheckEndpoint(s.endPoint),[4,c("CheckEndPoint",l,o.ResponsePurposeType.e_ResponsePurposeCheckServer)];case 1:if(!(a=g.sent()).IsValidCPDFServer())throw"[FAILED] ".concat(s.endPoint," is not a valid CPDF server.");return(d=new o.ConnectedPDFClientInfo).device_id=new o.String("Device ID"),d.device_name=new o.String("Device Name"),d.device_model=new o.String("Device Model"),d.mac_address=new o.String("MAC Address"),d.os=new o.String("OS"),d.product_name=new o.String("Product Name"),d.product_vendor=new o.String("Product Vendor"),d.product_version=new o.String("1.0.0.0"),d.product_language=new o.String("en-us"),l=o.ConnectedPDF.GenerateRequestToGetClientID(d),[4,c("GetClientID",l,o.ResponsePurposeType.e_ResponsePurposeClientID)];case 2:return a=g.sent(),f=a.GetClientID(),(h=new o.ConnectedPDF(f,new o.String(n),new o.String(""),o.CPDFEncryptType.e_CPDFEncryptTypeAES,i.doc)).RemoveDocumentID(),h.RemoveVersionID(),[2]}var p}))}))()}},{key:"saveAsReload",value:function(){var e=this,t=[];return this.getStream({writeStream:function(e){t.push(e)}},0).then((function(n){for(var r=new Uint8Array(n),i=0,a=0,o=t.length;a<o;a++){var s=t[a];r.set(new Uint8Array(s),i),i+=s.byteLength}r=r.slice(0);var u=new PDFDoc1(e.JR,{buffer:r,docId:e.id});return u.parseByPassword(""),u}))}},{key:"getAllPages",value:function(){var e=this;return this.getPageCount().then((function(t){for(var n=[],r=0;r<t;r++)n.push(e.getPageByIndex(r).then((function(e){return e.page.IsParsed()||e.parsedPage(),e})));return Promise.all(n)}))}},{key:"getDestinationsArray",value:function(){var e=this;return this.docPromise.then((function(t){var n=new e.engine.CNP_Destinations(t),r=new e.engine.WStringArray,i=new e.engine.Int32Array,a=new e.engine.Int32Array;n.GetAllDestinations(r,i,a);for(var o=[],s=0;s<r.GetSize();s++){var u=r.GetAt(s),c=i.GetAt(s),l={title:u.toString(),page:c};o.push(l)}return o}))}},{key:"removeMetadata",value:function(e){var t=this.engine,n=new t.WString(e.toString()),r=new t.Metadata(this.doc),i=r.RemoveCustomerKey(n);return n=null,r=null,i}},{key:"setViewPreference",value:function(e,t){var n=this.engine,r=this.doc.GetCatalog(),i=this.getVPDict(),a=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,e),o=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,t+"");switch(e){case"PageMode":"FullScreen"===(f=getDictName(this.JR,n,r,"PageMode","UseNone"))?i.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"NonFullScreenPageMode"),o):r.SetAtString(a,o);break;case"PageLayout":"Default"==t?r.RemoveAt(a):r.SetAtString(a,o);break;case"Lang":"none"==t?r.RemoveAt(a):r.SetAtString(a,o);break;case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":i.SetAtBoolean(a,t);break;case"PrintScaling":case"Duplex":case"Direction":i.SetAtName(a,o);break;case"NumCopies":if("Default"==t)i.RemoveAt(a);else{var s=+t;i.SetAtInteger(a,s)}break;case"PrintPageRange":var u=n.PDFArray.Create(),c=new Set;(t=t.replace(/ /g,"")).split(",").forEach((function(e){if(e.indexOf("-")>0)for(var t,n,r=e.split("-"),i=(t=Math).min.apply(t,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(r))-1,a=(n=Math).max.apply(n,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(r))-1,o=i;o<=a;o++)c.add(o);else""!==e&&(e=+e-1,c.add(e))})),c.forEach((function(e){e>=0&&u.AddInteger(e)})),i.SetAt(a,u);break;case"FullScreen":var l=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"PageMode"),d=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"NonFullScreenPageMode");if(t){var f=getDictName(this.JR,n,r,"PageMode","UseNone");r.SetAtString(l,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,"FullScreen")),i.SetAtName(d,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,f))}else{var h=getDictName(this.JR,n,i,"NonFullScreenPageMode");r.SetAtString(l,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(n,h)),i.RemoveAt(d)}}}},{key:"getVPDict",value:function(){var e=this.engine,t=this.doc.GetCatalog(),n=t.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"ViewerPreferences"));return n?n=n.GetDict():(n=e.PDFDictionary.Create(),t.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"ViewerPreferences"),n)),n}},{key:"getViewerPreference",value:function(){var e=this;this.initPage0||setTimeout((function(){e.getPageByIndex(0,void 0,!0).then((function(e){if(!e.isVirtual)return e.parsedPage()})).catch(),e.initPage0=1}),0);var t=this.engine,n=this.doc.GetCatalog(),r=getDictName(this.JR,t,n,"PageLayout"),i=getDictName(this.JR,t,n,"PageMode","UseNone"),a=getDictName(this.JR,t,n,"Lang","en-us"),o={},s=n.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t,"ViewerPreferences"));return s&&(s=s.GetDict()),[["HideToolbar",!1],["HideMenubar",!1],["HideWindowUI",!1],["FitWindow",!1],["CenterWindow",!1],["DisplayDocTitle",!1],["NonFullScreenPageMode"],["PickTrayByPDFSize",!1],["PrintScaling","AppDefault"],["Duplex","Simplex"],["NumCopies"],["Direction","L2R"]].forEach((function(n){var r=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(n,2),i=r[0],a=r[1];o[i]=getDictName(e.JR,t,s,i,a)})),o.PrintPageRange=getPrintRange(s,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t,"PrintPageRange")),{pageLayout:r,uiLayout:i,language:a,viewerPreference:o}}},{key:"getEmbeddedFontData",value:function(){for(var e=this.doc.GetEmbeddedFontData(),t=e.nonstandard_font_name_array,n=e.standard_font_name_array,r=[],i=[],a=0;a<t.GetSize();a++){var o=t.GetAt(a);i.push(o.toString())}for(var s=0;s<n.GetSize();s++){var u=n.GetAt(s);r.push(u.toString())}return{standard:r,nostandard:i}}},{key:"computeAuditSpace",value:function(){this.doc;var e=this.engine,t=new e.FX_AuditSpaceSize,n=(e.Optimizer.ComputeAuditSpace(this.doc,t),{});for(var r in t){var i=t[r];"function"!=typeof i&&(n[r]=i)}return n}},{key:"getStreamBySpecifiedDoc",value:function(e,t){var n=this.engine,r=Promise.resolve(e);return e||(r=this.docPromise),r.then((function(e){var r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),i=new ArrayBuffer,a=0,o=!1,s=0,u=0,c=n.WriterCallback.implement({Release:function(){c.delete()},Flush:function(){return r.resolve(i),!0},GetSize:function(){return o?u:i.byteLength},WriteBlock:function(e,t,r){if(o&&(t+=s),i.byteLength<t+r){var a=i;if(i=new ArrayBuffer(t+r),0!==a.byteLength){var u=new Uint8Array(a);new Uint8Array(i).set(u)}}var c=new Uint8Array(i,t,r),l=n.HEAPU8.subarray(e,e+r);return c.set(l),!0},GetPosition:function(){return o?a-s:a},SetPosition:function(e){o&&(e+=s),a=e},IsEOF:function(){var e=o?u:i.byteLength;return a===e},ReadBlock:function(e,t,r){if(o&&(t+=s)+r>u)return!1;var a=new Uint8Array(i,t,r);return n.HEAPU8.set(a,e),!0},SetRange:function(e,t){s=e,u=t,o=!0},ClearRange:function(){o=!1}});return n.saveDoc(e,c,t),r.promise}))}},{key:"optimizer",value:function optimizer(option,portfolioNodeHandle){var doc=this.doc;portfolioNodeHandle&&this.pdfPortfolio&&(doc=this.pdfPortfolio.getPDFDocByNodeHandle(portfolioNodeHandle));var engine=this.engine,opSetting=new engine.OptimizerSettings;if(option.DC_Algorithm){var imgSetting=new engine.ImageSettings;imgSetting.SetStretchMode(engine.ImageStretchMode[option.DC_Algorithm]),imgSetting.SetCompressionMode(engine.ImageCompressMode.e_ImageCompressjpeg2000),imgSetting.SetQuality(engine.ImageCompressQuality[option.CC_Level]),imgSetting.SetImageDPI(+option.DC_DPISet),imgSetting.SetImageDPILimit(+option.DC_DPIAbove),"e_ImageCompressjpeg2000"===option.CC_Algorithm&&imgSetting.SetTitleSize(+option.compressiontileSize),opSetting.SetColorGrayImageSettings(imgSetting)}if(option.DM_Algorithm){var monoSetting=new engine.MonoImageSettings;monoSetting.SetCompressionMode(engine.MonoImageCompressMode.e_ImageCompressjbig2),monoSetting.SetStretchMode(engine.MonoStretchMode[option.DM_Algorithm]),monoSetting.SetImageDPI(+option.DM_DPISet),monoSetting.SetImageDPILimit(+option.DM_DPIAbove),-1===["e_ImageCompressjbig2","e_ImageCompressHigh"].indexOf(option.CM_Algorithm)&&(option.CM_Level=""),"e_ImageCompressQualityLossless"===option.CM_Level||"e_ImageCompressQualityLossy"===option.CM_Level?monoSetting.SetQuality(engine.MonoImageCompressQuality[option.CM_Level]):option.CM_Level&&monoSetting.SetQuality(engine.ImageCompressQuality[option.CM_Level]),opSetting.SetMonoImageSettings(monoSetting)}if(option.unembededFonts&&option.unembededFonts.length>0){var unembeddedFontSettings=new engine.UnembeddedFontSettings,wsArray=new this.engine.WStringArray;option.unembededFonts.forEach((function(e){wsArray.Add((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(engine,e))})),unembeddedFontSettings.SetUnembeddedFontNameArray(wsArray),opSetting.SetUnembeddedFontSettings(unembeddedFontSettings)}if(option.D_IntList){var D_IntList_Arr=option.D_IntList.split(",")||[];D_IntList_Arr=D_IntList_Arr.map((function(e){return engine.DiscardObjectsOptions[e].value})),D_IntList_Arr=D_IntList_Arr.join("|"),D_IntList_Arr=eval(D_IntList_Arr),opSetting.SetDiscardObjectsOptions(D_IntList_Arr)}if(option.D_IntList_User){var D_IntList_User_Arr=option.D_IntList_User.split(",")||[];D_IntList_User_Arr=D_IntList_User_Arr.map((function(e){return engine.DiscardUserDataOptions[e].value})),D_IntList_User_Arr=D_IntList_User_Arr.join("|"),D_IntList_User_Arr=eval(D_IntList_User_Arr),opSetting.SetDiscardUserDataOptions(D_IntList_User_Arr)}var isSaveFlagLinearized=doc.IsLinearized();if(option.CL_IntList){var CL_IntList_Arr=option.CL_IntList.split(",")||[];isSaveFlagLinearized=CL_IntList_Arr.indexOf("e_SaveFlagLinearized")>-1,CL_IntList_Arr.splice(CL_IntList_Arr.indexOf("e_SaveFlagLinearized"),1),CL_IntList_Arr=CL_IntList_Arr.map((function(e){return engine.CleanUpOptions[e].value})),CL_IntList_Arr=CL_IntList_Arr.join("|"),CL_IntList_Arr=eval(CL_IntList_Arr),CL_IntList_Arr&&opSetting.SetCleanUpOptions(CL_IntList_Arr)}for(var streamCallback=engine.ImageCompressionCallback.implement({Release:function(){},GetTempFileStream:function(){var e=0,t=engine.StreamCallback.implement({Release:function(){t.delete()},Flush:function(){return!0},GetSize:function(){return e},ReadBlock:function(e,t,n){return!1},WriteBlock:function(t,n,r){return e+=r,!0}});return t}}),pauseCallback=engine.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),progressive=engine.Optimizer.Optimize(doc,opSetting,streamCallback,pauseCallback),optimize_state=engine.ProgressiveState.e_ToBeContinued;optimize_state===engine.ProgressiveState.e_ToBeContinued;)optimize_state=progressive.Continue();var linearizedFlag=engine.SaveFlags.e_SaveFlagLinearized.value|engine.SaveFlags.e_SaveFlagRemoveRedundantObjects.value;return this.getStreamBySpecifiedDoc(doc,isSaveFlagLinearized?linearizedFlag:engine.SaveFlags.e_SaveFlagRemoveRedundantObjects.value).then((function(e){return[e]}))}},{key:"optimizeScannedPDF",value:function(e,t){var n=e.pageRange,r=e.scannedImageCompressMode,i=void 0===r?"e_ImageCompressHigh":r,a=e.quality,o=void 0===a?80:a,s=e.scannedMonoImageCompressMode,u=void 0===s?"e_MonoImageCompressjbig2LossLess":s,c=this.doc,l=this.engine,d=new l.OptimizeScannedPDFSettings;if(n.length>0){var f=new l.Range;n.forEach((function(e){return f.AddSingle(e)})),d.SetOptimizedPages(f)}d.SetColorGrayImageCompressionMode(l.ScannedImageCompressMode[i]),["e_ImageCompressjpeg","e_ImageCompressHigh"].indexOf(i)>-1&&d.SetColorGrayImageCompressionQuality(o),d.SetMonoImageCompressionMode(l.ScannedMonoImageCompressMode[u]);var h=l.ImageCompressionCallback.implement({Release:function(){},GetTempFileStream:function(){var e=new ArrayBuffer,t=l.StreamCallback.implement({Release:function(){t.delete()},Flush:function(){return!0},GetSize:function(){return e.byteLength},ReadBlock:function(t,n,r){var i=new Uint8Array(e,n,r);return l.HEAPU8.set(i,t),!0},WriteBlock:function(t,n,r){if(e.byteLength<n+r){var i=e;if(e=new ArrayBuffer(n+r),0!==i.byteLength){var a=new Uint8Array(i);new Uint8Array(e).set(a)}}var o=new Uint8Array(e,n,r),s=l.HEAPU8.subarray(t,t+r);return o.set(s),!0}});return t}}),g=l.PauseCallback.implement({NeedToPauseNow:function(){return!0}});try{for(var p=l.Optimizer.OptimizeScannedPDF(c,d,h,g),v=-1,_=0;v<100;){if(v=p.GetRateOfProgress(),t&&t(v),3===_)return!1;if(-1===v)throw new Error("optimizeScannedPDF error");0===v?_+=1:p.Continue()}return this.getStreamBySpecifiedDoc(c,0).then((function(e){return[e]}))}catch(e){return!1}}},{key:"importAsLayer",value:function(e){var t=e.sourcePdfDoc,n=e.sourceFileName,r=e.sourcePageIndex,i=void 0===r?0:r,a=e.importType,o=void 0===a?"e_ImportToCreateNewLayer":a,s=e.newLayerName,u=e.targetLayerName,c=e.targetPageIndex,l=void 0===c?0:c,d=e.targetFileName,f=e.rotateAngle,h=void 0===f?0:f,g=e.isAbsoluteScale,p=void 0!==g&&g,v=e.scale,_=void 0===v?1:v,m=e.verticalOffsetFrom,y=void 0===m?"e_OffsetFromCenter":m,S=e.horizontalOffsetFrom,b=void 0===S?"e_OffsetFromCenter":S,D=e.verticalOffset,P=void 0===D?0:D,I=e.horizontalOffset,A=void 0===I?0:I,w=e.opacity,C=void 0===w?100:w,k=e.appearBehindTarget,E=void 0!==k&&k,G=this.engine;this.doc.GetInfo();y=G.OffsetFrom[y],b=G.OffsetFrom[b],o=G.ImportAsLayerOperationType[o];var T=new G.ImportAsLayerSetting(o,new G.WString(s),new G.WString(u),h,p,_,y,P,b,A,C,E);try{this.doc.ImportAsLayer(l,new G.WString(d),t,new G.WString(n),i,T),this.getPageByIndex(l).then((function(e){e.reParsePage()}));var F=this.pdfLayer.layer_context,R=this.pdfLayer.layer_tree.IsEmpty(),M=new _PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__.Z(this.doc,G);return R||M.layer_context.CopyStates(F),this.pdfLayer=M,this.pdfLayer.toJson()}catch(e){throw new Error("ImportAsLayer error: "+e)}}},{key:"previewImportLayer",value:function(e){var t=e.sourcePdfDoc,n=e.sourcePageIndex,r=void 0===n?0:n,i=e.importType,a=void 0===i?"e_ImportToCreateNewLayer":i,o=e.targetPageIndex,s=void 0===o?0:o,u=e.rotateAngle,c=void 0===u?0:u,l=e.isAbsoluteScale,d=void 0!==l&&l,f=e.scale,h=void 0===f?1:f,g=e.verticalOffsetFrom,p=void 0===g?"e_OffsetFromCenter":g,v=e.horizontalOffsetFrom,_=void 0===v?"e_OffsetFromCenter":v,m=e.verticalOffset,y=void 0===m?0:m,S=e.horizontalOffset,b=void 0===S?0:S,D=e.opacity,P=void 0===D?100:D,I=e.appearBehindTarget,A=void 0!==I&&I,w=this.engine,C=this.doc.GetPage(s);C.StartParse(w.ParseFlags.e_ParsePageNormal.value,null,!0);var k=C.GetWidth(),E=C.GetHeight(),G=w.DIBFormat.e_DIBArgb,T=new w.Bitmap(k,E,G,0,0);T.FillRect(0,null);var F=w.Rotation.e_Rotation0,R=C.GetDisplayMatrix(0,0,k,E,F),M=new w.Renderer(T,!0),O=w.ContentFlag.e_RenderPage.value|w.ContentFlag.e_RenderAnnot.value;if(!t){var x=this.pdfLayer;return M.SetLayerContext(x.layer_context),M.SetRenderContentFlags(O),M.StartRender(C,R,null),(0,_share_RendererHelper__WEBPACK_IMPORTED_MODULE_16__.v)(w,T,M)}p=w.OffsetFrom[p],_=w.OffsetFrom[_],a=w.ImportAsLayerOperationType[a];var B=new w.ImportAsLayerSetting(a,new w.WString(""),new w.WString,c,d,h,p,y,_,b,P,A),N=t.GetPage(r);N.StartParse(w.ParseFlags.e_ParsePageNormal.value,null,!1);var L=C.GetBox(w.BoxType.e_MediaBox),j=N.GetBox(w.BoxType.e_MediaBox),U=new w.Matrix(1,0,0,1,0,0),W=3.14*B.rotate_angle/180,H=new w.Matrix(1,0,0,1,0,0);H.Rotate(W,!1),H.TransformRect(j),U.Concat(H.a,H.b,H.c,H.d,H.e,H.f,!1);var z=new w.Matrix(1,0,0,1,0,0);if(0==B.is_absolute_scale){var K=L.Width()/j.Width(),J=L.Height()/j.Height(),V=parseFloat(K)<parseFloat(J)?K:J;z.Scale(V,V,!1)}z.Scale(B.scale,B.scale,!1),z.TransformRect(j),U.Concat(z.a,z.b,z.c,z.d,z.e,z.f,!1);var Y=new w.PointF,Z=new w.PointF,q=B.horizontal_offset;switch(B.horizontal_offset_from){case w.OffsetFrom.e_OffsetFromLeft:Y.x=j.left,Z.x=L.left;break;case w.OffsetFrom.e_OffsetFromCenter:Y.x=j.left+j.Width()/2,Z.x=L.left+L.Width()/2;break;case w.OffsetFrom.e_OffsetFromRight:Y.x=j.right,Z.x=L.right,q=0-B.horizontal_offset}var X=B.vertical_offset;switch(B.vertical_offset_from){case w.OffsetFrom.e_OffsetFromTop:Y.y=j.top,Z.y=L.top,X=0-B.vertical_offset;break;case w.OffsetFrom.e_OffsetFromCenter:Y.y=j.top-j.Height()/2,Z.y=L.top-L.Height()/2;break;case w.OffsetFrom.e_OffsetFromBottom:Y.y=j.bottom,Z.y=L.bottom}U.Translate(Z.x-Y.x+q,Z.y-Y.y+X,!1);var Q=U;return Q.Concat(R.a,R.b,R.c,R.d,R.e,R.f,!1),M.SetRenderContentFlags(w.ContentFlag.e_RenderPage.value),M.SetRenderLayer(!1),M.StartRender(N,Q,null),(0,_share_RendererHelper__WEBPACK_IMPORTED_MODULE_16__.v)(w,T,M)}},{key:"isCompareDoc",value:function(){var e=this.doc.GetCatalog();if(!e)return!1;if(!e.HasKey(new this.engine.String("PieceInfo")))return!1;var t=e.GetElement(new this.engine.String("PieceInfo"));return!!t&&(t.GetDict()&&t.GetDict().HasKey(new this.engine.String("ComparePDF")))}},{key:"reloadLayer",value:function(){return this.pdfLayer&&this.pdfLayer.delete(),this.pdfLayer=new _PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__.Z(this.doc,this.engine),!0}},{key:"exportMeasureData",value:function(e){var t=e.label,n=void 0===t?"label":t,r=e.type,i=void 0===r?"type":r,a=e.value,o=void 0===a?"value":a,s=e.unit,u=void 0===s?"unit":s,c=e.distance,l=void 0===c?"distance":c,d=e.perimeter,f=void 0===d?"perimeter":d,h=e.area,g=void 0===h?"area":h,p=this.doc,v=this.engine,_=new v.ExportMeasureSetting;_.label_colunm_name=new v.WString(n),_.type_colunm_name=new v.WString(i),_.value_colunm_name=new v.WString(o),_.unit_colunm_name=new v.WString(u),_.type_distance_name=new v.WString(l),_.type_perimeter_name=new v.WString(f),_.type_area_name=new v.WString(g);for(var m=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),y=0,S=[],b=v.WriterCallback.implement({Release:function(){b.delete(),m.resolve(S)},Flush:function(){return m.resolve(S),!0},GetSize:function(){return y},WriteBlock:function(e,t,n){y+=n;var r,i=v.HEAPU8.buffer;return r=i.slice?i.slice(e,e+n):new Uint8Array(i,e,n).buffer,S.push(r),!0}}),D=v.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),P=p.StartExportMeasureDataToCSV(_,b,D),I=(P.GetRateOfProgress(),v.ProgressiveState.e_ToBeContinued);v.ProgressiveState.e_ToBeContinued==I;)I=P.Continue(),P.GetRateOfProgress().toString();return m.promise}},{key:"setRenderConfigLineWeight",value:function(e){this.renderConfigLineWeight=e}},{key:"searchBookmark",value:function(e,t){var n=this;return this.getBookmarks().then((function(r){if(!n.rootBookmark)return[];var i=[];return n.rootBookmark.search(e,t,i),i}))}},{key:"searchDoc",value:function(e,t,n,r){var i=this;if("number"==typeof e)return-1==e?this.searchBookmark(t,n):this.getPageByIndex(e).then((function(e){return e.search(t,n,r)}));var a=[];return e.forEach((function(e){if(-1==e)return a.push(i.searchBookmark(t,n));a.push(i.getPageByIndex(e).then((function(e){return e.search(t,n,r)})))})),Promise.all(a).then((function(t){return t.reduce((function(t,n,r){return t[e[r]]=n,t}),{})}))}},{key:"convertToTextMarkup",value:function(e){var t=this,n=[],r={};return e.forEach((function(e){if("form"!==e.type){var i=t.pageIndexMap[e.pageIndex];r[e.pageIndex]=1,n.push(i.addAnnot({flags:4,type:"highlight",rect:{left:0,right:0,top:0,bottom:0},coords:e.rects}))}})),Promise.all(n).then((function(e){return Object.keys(r)}))}},{key:"generateDocHash",value:function(e){var t=function(e,t){var n=new Uint8Array(t),r=new e.String,i=e._malloc(n.length);return e.HEAPU8.set(n,i),r.Load(i,n.length),r}(this.engine,e);return this.engine.Library.GenerateHashData(this.engine.CryptType.e_Crypt_SHA256,t,t.GetLength()).toString()}},{key:"redactSearch",value:function(e,t,n,r,i){var a=this,o=[],s=[];return e.forEach((function(e){if(!e.isMetaData){t<0&&(t+=e.word.length);var u=e.charIndex+t,c=-1==n?e.word.length:n,l="";r.find((function(t){if(t.word.toLowerCase()==e.word.toLowerCase())return l=t.overlay,!0})),s.push(e.pageIndex);var d=a.pageIndexMap[e.pageIndex];"form"===e.type?o.push(d.markRedactByAnnotId(e.id,u,c,l,i)):o.push(d.markRedact(u,c,l,i))}})),Promise.all(o).then((function(e){return s}))}},{key:"removePDFAID",value:function(){return new this.engine.Metadata(this.doc).RemovePDFAID()}},{key:"isScannedDoc",value:function(){return this.getAllPages().then((function(e){for(var t=0;t<e.length;t++)for(var n=e[t].page,r=n.GetGraphicsObjectCount(),i=0;i<r;i++){var a=n.GetGraphicsObjectBI(i).GetType().value;if(2!==a&&3!==a)return!1}return!0}))}},{key:"getCompareFileFilterNums",value:function(){for(var e={Text:0,Images:0,Annotation:0,Formatting:0},t=this.doc.GetPageCount(),n=2;n<t;n++){var r=this.doc.GetPage(n).GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(this.engine,"Annots"));if(r)for(var i=r.GetArray(),a=i.GetElementCount(),o=0;o<a;o++){var s=i.GetElement(o).GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(this.engine,"OC"));if(s){var u=s.GetDict();if(u){var c=u.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(this.engine,"VE")).GetArray(),l=c.GetElementCount();if(!(l<=1)){var d=c.GetElement(l-1);if(d)if(!d.GetArray())e[d.GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(this.engine,"Name")).GetString().toString()]++}}}}}return Object.keys(e).reduce((function(e,t){return e[t]=Math.floor(e[t]/2),e}),e)}},{key:"createSummarizeComments",value:function(e){var t=this,n=e.writeStream,r=void 0===n?function(){}:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),o=i.layoutType,s=i.commentType,u=i.paperSizeType,c=i.fontSizeType,l=i.sortCommentsByType,d=i.pagesContainingNoComments,f=i.pageIndexes,h=i.color,g=i.opacity,p=i.fileName,v=i.annotTypesInfo,_=i.summarizeCommentsShowInfo,m=void 0===_?{}:_,y=this.engine,S=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_25__.jj)(y,o),b=(0,_annot_annotType__WEBPACK_IMPORTED_MODULE_47__.M)(y,s),D=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_25__.Ii)(y,c),P=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_25__.MW)(y,l),I=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(y,p),A=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(f,2),w=A[0],C=A[1],k=void 0===C?w:C;try{var E=new y.AnnotationSummary(this.doc),G=new y.AnnotationSummarySettings;G.SetSummaryLayout(S);var T="All"===s;G.SetAnnotType(b,T);var F=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_25__.ZX)(u),R=new y.CFX_FloatRect(0,0,F[0],F[1]);G.SetPageRect(R),R.delete(),G.SetFontSize(D),G.SetSortType(P),G.SetStartPage(w),G.SetEndPage(k),G.EnableOutputNoAnnotationPage(d),"SeparatePagesWithLine"!==o&&"SinglePageWithLine"!==o||(G.SetConnectorLineColor(h),G.SetConnectorLineOpacity(g)),G.SetFileTitle(I),v.forEach((function(e){var n=e.type,r=e.annotThumbnail,i=(0,_annot_annotType__WEBPACK_IMPORTED_MODULE_47__.M)(y,n),a=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_25__.Yh)(y,r,t.JR);G.SetAnnotThumbnail(i,a)}));var M=y.AnnotationSummaryCallback.implement({Release:function(){M.delete()},GetCurrentLocaleID:function(){return y.LocaleID.e_LocaleIDUnspecified.value},GetLocalFontName:function(){return new _share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp(y,"Helvetica")},LoadString:function(e){return(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_25__.SU)(y,e,m)}});E.SetCallback(M);var O=0,x=y.WriterCallback.implement({Release:function(){x.delete()},Flush:function(){return a.resolve(O),!0},GetSize:function(){return O},WriteBlock:function(e,t,n){O=Math.max(t+n,O);var i,a=y.HEAPU8.buffer;return i=a.slice?a.slice(e,e+n):new Uint8Array(a,e,n).buffer,r(i,t,n),!0}}),B=y.PauseCallback.implement({NeedToPauseNow:function(){return!1}});E.StartSummarize(x,G,B),E.delete(),G.delete()}catch(e){var N=this.engine.getErrorCode(e);console.error(N)}return a.promise}},{key:"addAA",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.doc,o=this.engine,s=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(o,"AA"),u=e.GetElement(s);if(u){var c=u.GetDict();r=new o.AdditionalAction(a,c)}else{var l=o.PDFDictionary.Create();e.SetAt(s,l),r=new o.AdditionalAction(a,l)}var d=o.TriggerEvent.values[n.trigger],f=r.GetAction(d);if(i&&!f.IsEmpty()){var h=f.GetSubActionCount();f.InsertSubAction(h,t)}else r.SetAction(d,t)}},{key:"hasOwnerPassword",value:function(){return this.doc.HasOwnerPassword()}},{key:"getText",value:function(e,t,n){var r=n.taskProgress,i=this,a=this.engine,o=new a.PDFDoc,s=new a.String("");o.Load(s);var u=this.doc,c=u.GetPageCount(),l=new a.String("");e.forEach((function(e,t){var n=new a.Range((e+c)%c);o.StartImportPages(t,u,0,l,n)})),this.taskProgressMap[t]=!1;var d="",f=0,h=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(i.taskProgressMap[t])return delete i.taskProgressMap[t],r({percent:f,content:d});var s=o.GetPage(n),u=a.FlattenOptions.e_FlattenAll.value;s.Flatten(!0,u);var c=a.ParseFlags.e_ParsePageNormal.value;s.StartParse(c,null,!1);var l=a.TextParseFlags.e_ParseTextNormal.value,g=new a.TextPage(s,l),p=a.TextOrderFlag.e_TextDisplayOrder;s.HasVertWritingFont()&&(p=a.TextOrderFlag.e_TextStreamOrder);var v=g.GetText(p).toString();e[n];if(d+=v,g.delete(),f=Math.round((n+1)/e.length*1e4)/100,n>=e.length-1)return delete i.taskProgressMap[t],r({percent:100,content:d});r({percent:f,content:d}),h(++n)};h()}},{key:"cancelTaskProgress",value:function(e){this.taskProgressMap.hasOwnProperty(e)&&(this.taskProgressMap[e]=!0)}},{key:"verifyDocSignature",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.v6).then((function(){var n=t.is_verify_signature,r=void 0===n||n,i=t.use_expired_tst,a=void 0===i||i,o=t.ignore_doc_info,s=void 0!==o&&o,u=t.time_type,c=void 0===u?0:u,l=t.isCertTrusted,d=t.isCertTrustedRoot,f=t.trustedCertificateList,h=void 0===f?[]:f,g=t.isCertifiedMap,p=void 0===g?{}:g,v={},_=e.engine,m=_.TimeType.values[c]||_.TimeType.e_SignatureCreationTime;try{var y=new _.LTVVerifier(e.doc,r,a,s,m),S=(0,_share_signature_util__WEBPACK_IMPORTED_MODULE_21__.dX)(_,l,d,h);y.SetTrustedCertStoreCallback(S),y.SetVerifyMode(_.VerifyMode.e_VerifyModeAcrobat);var b=y.Verify();(0,_share_signature_util__WEBPACK_IMPORTED_MODULE_21__.zF)(v,p,_,b),y=null}catch(e){var D=_.getErrorCode(e);console.error(D)}return v}))}},{key:"clearAllDesignerAssistCache",value:function(){var e=this.pageIndexMap;for(var t in e){var n=this.pageIndexMap[t];n&&n.clearDesignerAssitCache()}}},{key:"compareWith",value:function(e,t,n){var r=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var i,a,o,s,u,c,l,d,f,h,g,p,v,_;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(m){switch(m.label){case 0:return r.engine.Library.HasModuleLicenseRight({value:6})?[4,getRange(t.basePageRange,r)]:[2,Promise.reject(_error_code__WEBPACK_IMPORTED_MODULE_12__.v.noeCompareLicense)];case 1:return i=m.sent(),[4,getRange(t.otherPageRange,e)];case 2:if(a=m.sent(),o=i.from,s=i.end-i.from+1,u=a.from,c=a.end-a.from+1,l=initComparisonOptions(t.options,r.engine),d=function(e,t){return t||(e.oriFile?e.oriFile.name:void 0)||""},f=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(r.engine,d(r,t.baseFileName)),h=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(r.engine,d(e,t.otherFileName)),g=new r.engine.Comparison(r.doc,e.doc),p=r.JR.getPDFDocById(t.newTemplateId)||r,v=r.JR.getPDFDocById(t.oldTemplateId)||e,_=new r.engine.ComparisonStringResource,t.stringResource)for(var y in t.stringResource)_[y]=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(r.engine,t.stringResource[y]);return[2,g.GenerateComparedDoc(o,u,s,c,l,f,h,p.doc,v.doc,_,n)]}}))}))()}},{key:"getStringHashSHA256Data",value:function(e){var t=this.engine,n=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t,e);return t.Library.GenerateHashData(t.CryptType.e_Crypt_SHA256,n,n.GetLength()).toString().toLowerCase()}},{key:"signForESignUS",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this.engine,o=this.doc,s=a.KeyName;i.forEach((function(i,s){var u,c=i.rect,l=i.pageIndex,d=i.buffer,f=i.FoxitSignSubtype,h=r.documentID,g=r.FoxitSignFT,p=r.FoxitSignTxnID,v=r.showLogo,_=o.GetPage(l),m=new a.WString("Foxit_eSign_Signature_Field".concat(o.GetSignatureCount(),"_DOCUMENTID_").concat(n.getStringHashSHA256Data(h+""))),y=_.AddSignature(new a.CFX_FloatRect(c.left,c.bottom,c.right,c.top),m,{value:0},!0);u="string"==typeof d?n.JR.createReaderCallback(d):n.JR.createReaderCallbackByBuffer(d);var S=new a.Image(u).GetFrameBitmap(0);y.SetBitmap2AP(S),y.SetAppearanceFlags(128);var b=new a.SignatureAppearanceOptions;b.showLogo=v,y.SetSignatureAppearanceOptions(b),y.GenerateSignAppearance(),y.ResetSignAppearance();var D=y.GetDict(),P=new a.String("V");0===s?(t=y,e=y.CreateSigVDict((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,""),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,"")),o.AddIndirectObject(e),e.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,"FoxitSignTxnID"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,p))):D.SetAtReference(P,e,o),D.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,"FoxitSignFT"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,g)),D.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,"FoxitSignSubtype"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,f))}));var u=o.GetCatalog(),c=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,"AcroForm");if(u.HasKey(c)){var l=u.GetElement(c).GetDirectObject();if(l.GetType()==a.PDFObjectType.e_Dictionary){var d=l.GetDict(),f=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,"FoxitSign");if(!d.HasKey(f)){var h=new a.PDFDictionary.Create,g=r.FoxitSignEndpoint,p=r.FoxitSignVersion;o.AddIndirectObject(h),d.SetAtReference(f,h,o),h.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,"FoxitSignEndpoint"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,g)),h.SetAtInteger((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(a,"FoxitSignVersion"),p)}}}var v=r.email,_=r.phone,m=r.reason,y=r.distinguishName,S=r.location,b=(r.text,r.filter),D=r.subfilter;(v||_)&&t.SetKeyValue(s.e_KeyNameSigner,new a.WString(v||_)),m&&t.SetKeyValue(s.e_KeyNameReason,new a.WString(m)),y&&t.SetKeyValue(s.e_KeyNameDN,new a.WString(y)),t.SetKeyValue(s.e_KeyNameLocation,new a.WString(S||""));var P=new Date,I=new a.DateTime(P.getFullYear(),P.getMonth()+1,P.getDate(),P.getHours(),P.getMinutes(),P.getSeconds(),P.getMilliseconds(),-P.getTimezoneOffset()/60,0);t.SetSignTime(I),t.SetFilter(new a.String(b)),t.SetSubFilter(new a.String(D));var A=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.cP)(this.engine,t,0,b,D);return(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_15__.Kq)(A)}},{key:"getFontCount",value:function(){return this.doc?this.doc.GetFontCount():null}},{key:"getFont",value:function(e){if(!this.doc)return null;if(e>=this.doc.GetFontCount()||e<0)return null;var t=this.doc.GetFont(e);return{isEmpty:t.IsEmpty(),name:t.GetName().toString(),familyName:t.GetFamilyName().toString(),isBold:t.IsBold(),isItalic:t.IsItalic(),ascent:t.GetAscent(),descent:t.GetDescent()}}},{key:"drawTextString",value:function(e){var t=e.text,n=e.name,r=e.size,i=void 0===r?12:r,a=e.color,o=e.width,s=void 0===o?200:o,u=e.height,c=void 0===u?100:u,l=e.offsetX,d=void 0===l?0:l,f=e.offsetY,h=void 0===f?0:f;if(t){var g=this.doc,p=this.engine,v=s,_=c;t=new p.WString(t);var m=(new _pageEditor_DefaultFont__WEBPACK_IMPORTED_MODULE_29__.Z)._getStandardID(n,p),y=new p.Font(m),S=new p.Bitmap(v,_,p.DIBFormat.e_DIBArgb,0,0);S.FillRect(0,null);var b=new p.Matrix(1,0,0,-1,0,_),D=new p.Renderer(S,!1),P=new p.GraphState;D.DrawTextString(g,t,P,Math.max(d,0),h||i,y,i,b,a||4294901760,0);return function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.GetWidth(),a=t.GetHeight(),o=new e.Image;o.AddFrame(t);var s=[],u=e.StreamCallback.implement({Release:function(){u.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(t,n,r){var i,a=e.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(t,t+r)):new Uint8Array(a,t,r),s.push(i),!0}});o.SaveAs(u,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.Dp)(e,".png")),r&&(o.delete(),t.delete(),n.delete());var c="image/png";return{type:c,blob:new Blob(s,{type:c}),width:i,height:a}}(p,S,D)}}},{key:"getLastSaveFlags",value:function(){return this.doc.GetLastSaveFlags()}},{key:"addAnnots",value:function(){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n={};(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){var t=e.page;(n[t]=n[t]||[]).push(e)}));var r=0,i=Promise.resolve(),a=[],o=Object.keys(n),s=25/(o.length+1);return o.forEach((function(o){i=i.then((function(){return e.getPageByIndex(o).then((function(e){var i=n[o],u=o,c=Promise.resolve(),l=[],d=[],f=!1;return t(r+=s),i.forEach((function(t){var n,r=t.groupElements||[];r.length?c=c.then((function(){return e.addAnnotGroup([t].concat((0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(r)),0)})).then((function(e){var t;n=e[0],(t=l).push.apply(t,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(e))})):t.type&&t.rect?c=c.then((function(){return e.addAnnot(t)})).then((function(e){var t;n=e[0],(t=l).push.apply(t,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(e))})):f||(c=c.then((function(){return e.getAnnots()})).then((function(e){d=e,f=!0}))),c.then((function(){var e=n||l.find((function(e){return e.getName()===t.name}))||d.find((function(e){return e.getName()===t.name}));if(e){var r,i=t.replies;if(i&&e.addReply)(r=l).push.apply(r,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(i.map((function(t){return e.addReply(t)}))));var a=t.states;if(a&&e.addStateFromJSON){var o,s=[_shared_consts__WEBPACK_IMPORTED_MODULE_1__.R3.MARKED,_shared_consts__WEBPACK_IMPORTED_MODULE_1__.R3.UNMARKED];(o=l).push.apply(o,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_40__._)(a.map((function(t){var n=(t.state||t).toLowerCase();return s.includes(n)?e.addMarkedState(t):e.addReviewState(t)}))))}}}))})),c.then((function(){t(r+=s),a.push({page:u,annots:l.map((function(e){return e.getId()}))})}))}))}))})),i.then((function(){return a}))}},{key:"hasXFALicense",value:function(){return this.mHasXFALicense}},{key:"canGetXFA",value:function(){return this.mInitJse&&this.isDynamicXFA()&&this.hasXFALicense()}},{key:"getAllWordCount",value:function(){var e=this.engine.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),t="getWordCount",n=t;postMessage({workflow:t,type:n,msg:{state:"start",progress:0}});for(var r=this.doc.StartCalculatingWordCount(e),i=-1,a=0;100!==i;){if(-1===(i=r.GetRateOfProgress()))return postMessage({workflow:t,type:n,msg:{state:"error",progress:-1}}),a;100===i&&(a=this.doc.GetWordCount()),postMessage({workflow:t,type:n,msg:{state:100!=i?"progress":"end",progress:i}}),r.Continue()}return a}},{key:"has3DAnnots",value:function(){var e=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var t,n,r;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(i){switch(i.label){case 0:return e.engine.Library.HasModuleLicenseRight({value:12})?[4,_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.AB)]:[2,Promise.resolve(_shared_permission_CallNoPermission__WEBPACK_IMPORTED_MODULE_34__.Z)];case 1:if(i.sent(),(t=new e.engine.PDF3DContext(e.doc)).IsEmpty())return[2,!1];for(n=e.doc.GetPageCount(),r=0;r<n;r++)if(t.GetPage3DAnnotArray(r).GetSize()>0)return t.delete(),[2,!0];return t.delete(),[2,!1]}}))}))()}},{key:"getPDF3D",value:function(){var e=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var t;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(n){switch(n.label){case 0:0;try{t=e.engine.Library.HasModuleLicenseRight({value:12})}catch(e){t=!1}return t?[4,_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_31__.AB)]:[2,Promise.reject(_shared_permission_CallNoPermission__WEBPACK_IMPORTED_MODULE_34__.Z)];case 1:return n.sent(),[2,e._pdf3dPromise=e._pdf3dPromise||Promise.resolve().then(__webpack_require__.bind(__webpack_require__,1446)).then((function(t){return new t.default(e)})).then((function(t){return e.update3DCache=t.update3DCache.bind(t),e.splice3DCache=t.splice3DCache.bind(t),e.destroyAll3DCache=t.destroy.bind(t),e.update3DCacheAfterMovePages=t.update3DCacheAfterMovePages.bind(t),t}))]}}))}))()}},{key:"getPageRotation",value:function(e){try{if(this.canGetXFA())return 0;var t=this.doc.GetPage(e);if(t.IsEmpty())return 0;var n=t.GetRotation();return t.delete(),n.value}catch(e){return 0}}},{key:"getPageSize",value:function(e){var t=this;if(this.canGetXFA())return this.thumbQueue.exec((function(n){return t.getXFAPageSize(e)}));var n={},r=this.engine,i=this.doc,a=r.ErrorCode.e_ErrDataNotReady;function o(e,t){var n,s=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();try{n=i.GetPageBasicInfo(t)}catch(l){var u=r.getErrorCode(l);if(u===r.ErrorCode.e_ErrUnknown)n={width:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.tJ,height:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.$h,rotation:{value:0}};else{if(u===a)return setTimeout((function(){o(e,t).then(s.resolve,s.reject)}),30),s.promise;var c;try{if((c=i.GetPage(t)).IsEmpty())return c.delete(),s.reject(u.value),s.promise;n={width:c.GetWidth(),height:c.GetHeight(),rotation:{value:c.GetRotation&&c.GetRotation().value||0}},c.delete()}catch(e){return s.reject(u.value),c&&c.delete(),s.promise}}}return e={width:n.width,height:n.height,rotation:n.rotation.value},s.resolve(),s.promise}return this.thumbQueue.exec((function(t){return o(n,e).then((function(e){return n}))}))}},{key:"getXFAPageSize",value:function(e){var t=this.engine,n=this.xfaDoc,r=t.ErrorCode.e_ErrDataNotReady,i={};return function e(i,a){var o,s,u=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();try{(s=n.GetPage(a)).IsEmpty()||(o={width:s.GetWidth(),height:s.GetHeight(),rotation:{value:0}},s.delete())}catch(n){var c=t.getErrorCode(n);if(c!==t.ErrorCode.e_ErrUnknown)return c!==r?(u.reject(c.value),s&&s.delete(),u.promise):(setTimeout((function(){e(i,a).then(u.resolve,u.reject)}),30),u.promise);o={width:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.tJ,height:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_24__.$h,rotation:{value:0}}}return i={width:o.width,height:o.height,rotation:o.rotation.value},u.resolve(),u.promise}(i,e).then((function(e){return i}))}},{key:"getThumbTemp",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this;return this.thumbQueue.exec((t=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(t){var a,o,s;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),a=i.pageIndexMap[e],o=!1,a||(a=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(e,i),o=!0),[4,a.getThumb(n,r)];case 1:return s=t.sent(),a.needReParse&&a.clearCacheObejcts(),o?[4,a.destroy()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2,s];case 4:return t.sent(),[2,{}];case 5:return[2]}}))})),function(e){return t.apply(this,arguments)}))}}]),PDFDoc1}();function getRange(e,t){return _getRange.apply(this,arguments)}function _getRange(){return(_getRange=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(e,t){var n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(a){switch(a.label){case 0:return e||(e={}),[4,t.getPageCount()];case 1:return n=a.sent(),r=getByDefault(e.from,0),i=getByDefault(e.end,n-1),[2,{from:r,end:i}]}}))}))).apply(this,arguments)}function initComparisonOptions(e,t){var n=new t.ComparisonOptions;if(!e)return n;var r=e.textOnly,i=e.compareTable,a=e.detectPage,o=e.lineThickness,s=e.markingColor,u=e.opacity;if(n.bIsText=getByDefault(r,!1),n.bIsCompareTable=getByDefault(i,!1),n.bDetectPage=getByDefault(a,!1),o){var c=o.delete,l=o.insert,d=o.replace,f=function(e){return e>0&&isFinite(e)};f(c)&&(n.nDeleteThickness=getByDefault(c,2)),f(l)&&(n.nInsertThickness=getByDefault(l,2)),f(d)&&(n.nReplaceThickness=getByDefault(d,2))}if(s){var h=s.delete,g=s.insert,p=s.replace,v=function(e){return e>=0&&e<=16777215};v(h)&&(n.deleteColor=h),v(g)&&(n.insertColor=g),v(p)&&(n.replaceColor=p)}if(u){var _=function(e){return e>=0&&e<=100},m=u.delete,y=u.insert,S=u.replace;_(m)&&(n.nDeleteOpacity=Math.round(m)),_(y)&&(n.nInsertOpacity=Math.round(y)),_(m)&&(n.nReplaceOpacity=Math.round(S))}return n}function getByDefault(e,t){return null==e?t:e}function getDictName(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Default";if(!n)return i;var a=n.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t,r));return a?1===a.GetType().value?a.GetBoolean():e.getPDFString(a.GetString()):i}function getAnnotsArray(e,t){var n=t.GetDict(),r=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"Annots"),i=n.GetElement(r);return i||(i=e.PDFArray.Create(),n.SetAt(r,i)),i.GetDirectObject().GetArray()}function getTemplateObject(e,t,n){var r=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(t.engine,"Names"),i=e.GetElement(r),a=null;if(i)for(var o=i.GetArray(),s=o.GetElementCount(),u=0;u<s;u+=2){var c=o.GetElement(u).GetString();if(n===t.JR.getPDFString(c)&&u+1<s){a=o.GetElement(u+1);break}}return a}function getMetadataValues(e,t){for(var n=e.GetValues(t),r="",i=0,a=n.GetSize();i<a;i++)r=n.GetAt(i).toString();return r}function getMetadataValue(e,t){if(e.GetValue)return e.GetValue(t).toString()}function formateDictToJson(e){var t={};if(e)for(var n=0;n=e.MoveNext(n);){var r=e.GetKey(n).toString(),i=formatDictObjToJson(e.GetValue(n));t[r]=i}return t}function formatDictObjToJson(e){var t;switch(e.GetType().value){case 1:t=e.GetBoolean();break;case 2:t=e.GetFloat();break;case 3:t=e.GetString().toString();break;case 4:t=e.GetName().toString();break;case 5:for(var n=e.GetArray(),r=[],i=n.GetElementCount();i--;)r[i]=formatDictObjToJson(n.GetElement(i));t=r;break;case 6:t=formateDictToJson(e.GetDict());break;case 8:t=null;break;default:t=e.toString()}return t}function retriveDict(e,t,n,r){var i,a="",o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];switch(r.GetType().value){case 1:return r.GetString().toString();case 2:var s=r.GetString().toString();return Math.abs(parseInt(s)-parseFloat(s))<.001?parseInt(s):parseFloat(s);case 3:var u=r.GetString(),c=u.GetBuffer();a="<";for(var l=0;l<u.GetLength();l++){var d=e.HEAPU8[c+l];a+=o[(240&d)>>4],a+=o[15&d]}return a+=">";case 4:return"/"+r.GetName().toString();case 5:a=[];for(var f=r.GetArray(),h=f.GetElementCount(),g=0;g<h;g++)a.push(retriveDict(e,t,n,f.GetElement(g)));return a;case 7:a={};var p=r.GetStream();i=p.GetDictionary();var v=p.GetDataSize(!0);if(v){var _=e._malloc(v);r.GetStream().GetData(!0,v,_);for(var m="",y=_;y<_+v;y++){var S=e.HEAP8[y];m+=o[(240&S)>>4],m+=o[15&S]}e._free(_),a.stream=m}case 6:a=a||{},i||(i=r.GetDict()),i||(i=r);var b=i.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_13__.n5)(e,"Type"));if(b&&"OCG"==b.GetString().toString())return{};for(var D=i.MoveNext(0);D;){var P=i.GetKey(D),I=i.GetElement(P);a[P.toString()]=retriveDict(e,t,P.toString(),I),D=i.MoveNext(D),P.delete()}return a;case 8:return null;case 9:var A=r.GetDirectObject().GetObjNum();return a=A+"R",t[A]=retriveDict(e,t,n,r.GetDirectObject()),a}return a}function getPDFNameTree(e,t,n){for(var r={},i=new t.PDFNameTree(n,e),a=0,o=i.GetCount();a<o;a++){var s=i.GetName(a);if(s.GetLength()){var u=i.GetObj(s);if(u){var c=s.toString();if(e.value===t.PDFNameTreeType.e_JavaScript.value){var l=new t.Action(n,u.GetDict());if(l.IsEmpty())continue;var d=new t.JavaScriptAction(l),f=d.GetScript();r[c]=f.toString(),l=null,d=null,f=null}else if(4===e.value||5===e.value){var h=u.GetDict().GetObjNum();r[c]=h,h=null}s.delete(),s=null}}}return r}function pageRangeTwoDimensionToOne(e){return e.reduce((function(e,t){if(2===t.length){for(var n=[],r=t[0];r<t[1];r++)n.push(r);t=n}return e.concat(t)}),[])}function pageIndexesToPages(e,t){var n=[];return t.forEach((function(t){n.push(e.getPageByIndex(t))})),Promise.all(n)}function syncPromisesTask(e){var t=[];return e.reduce((function(n,r,i){return n.then((function(n){return r.then((function(n){return t[i]=n,i==e.length-1?t:r}))}))}),Promise.resolve())}function getDB(){if(getDB._db)return getDB._db;var e="CopyPages_cache",t=new _shared_IndexDBCache_js__WEBPACK_IMPORTED_MODULE_22__.Z(e,"FoxitPDFSDKForWeb_"+e);return t.clear(),getDB._db=t,t}function formatMetadataDate(e,t){return e?-1!=e.indexOf("D:")?e:(0,_shared_formatDate_js__WEBPACK_IMPORTED_MODULE_28__.K)(e):e}__webpack_require__.g.seperateProperties=0;var PDFDocWithAiModule=function(e){(0,_swc_helpers_inherits__WEBPACK_IMPORTED_MODULE_48__._)(n,e);var t=(0,_swc_helpers_create_super__WEBPACK_IMPORTED_MODULE_49__._)(n);function n(){return(0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_35__._)(this,n),t.apply(this,arguments)}return(0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_36__._)(n,[{key:"createAIDoc",value:function(e){var t;if(e.length>0){var n=[];t=this.extractPages(e,{writeStream:function(e,t,r){n.push(e)}}).then((function(){return new Blob(n,{type:"application/pdf"}).arrayBuffer()}))}else t=this.getOriginalStream();var r,i=this;return t.then((r=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(e){var t,n,r;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(a){switch(a.label){case 0:return[4,(t=new PDFDoc(i.JR,{buffer:e})).parseByPassword()];case 1:return a.sent(),[4,t.getPageCount()];case 2:n=a.sent(),a.label=3;case 3:if(!(n>0))return[3,5];t.copyPages([[n-1]],n),a.label=4;case 4:return n--,[3,3];case 5:return t.setViewPreference("PageLayout","TwoColumnLeft"),r=[],[2,t.getStream({writeStream:function(e){r.push(e)}},0).then((function(){t.destroy();var e=new Blob(r,{type:"application/pdf"});return{buffer:e,transfers:[e]}}))]}}))})),function(e){return r.apply(this,arguments)}))}},{key:"getLRText",value:function(e){var t=this;if(this.graphicsInfos||(this.graphicsInfos={},this.pageTextBlocks={}),this.pageTextBlocks[e]){var n=this.graphicsInfos[e];return this.getPageByIndex(e).then((function(r){return r.parsedPagePromise.then((function(r){for(var i in n){var a=n[i];a.pObjectsToRemove.forEach((function(e){r.RemoveGraphicsObject(e)})),a.pObjectsToRemove=[]}return Promise.resolve(t.pageTextBlocks[e])}))}))}var r=this.pageTextBlocks[e]=[];return this.graphicsInfos[e]=[],this.getPageByIndex(e).then((function(n){return n.parsedPagePromise.then((function(i){var a=new n.engine.CFX_FloatRect(0,0,0,0),o=i.ExportDataForChatGPT(!1,a),s=function(n){for(var a=n.graphicsobject_array,o=n.text_content||n.content,s=0;s<a.GetSize();s++){var u=a.GetAt(s);if(!s||u.Handle()!=a.GetAt(s-1).Handle())if(u.GetType().value==t.engine.GraphicsObjectType.e_TypeText.value){var c=u.GetTextObject(),l=c.GetTextState(i);if(l.textmode==t.engine.Mode.e_ModeInvisible)continue;for(var d=c.GetRect(),f=t.graphicsInfos[e],h=c.GetColorState().GetFillColor().ConvertToRGB({value:0}).GetValue(),g=[],p=0;p<h.GetSize();p++)g.push(255*h.GetAt(p)|0);h=3==g.length?g[0]<<16|g[1]<<8|g[2]:g[1]<<16|g[2]<<8|g[3];var v=l.font,_=Math.max(l.font_horizontal_size,l.font_vertical_size,l.font_size),m=c.GetMatrix(),y=[[m.a,m.b],[m.c,m.d]],S=Math.atan2(y[1][0],y[0][0]);S=180*S/Math.PI;var b=f[f.length-1],D=b||{},P=D.font,I=D.fontSize,A=D.color,w=D.pObjectsToRemove,C=D.rect,k=D.rotate;if(s){var E=P&&P.IsBold()==v.IsBold()&&A==h&&I==_;if(E||s>1||!__webpack_require__.g.seperateProperties){w.push(c),b.rect={left:Math.min(C.left,d.left),bottom:Math.min(C.bottom,d.bottom),right:Math.max(C.right,d.right),top:Math.max(C.top,d.top)},S==k&&S&&k||(b.rotate=0),P.IsBold()!=v.IsBold()&&(b.isBold=!1),P.IsItalic()!=v.IsItalic()&&(b.isItalic=!1),b.autoReturn=!0;continue}E||(b.skipOverlapChecking=!0,b.autoReturn=!1)}else r.push(o.toString()),f.push({rect:{left:d.left,right:d.right,top:d.top,bottom:d.bottom},font:v,pObjectsToRemove:[c],color:h,fontSize:_,rotate:S,autoReturn:!1,isBold:v.IsBold(),isItalic:v.IsItalic()})}}};function u(e){for(var t=0;t<e.GetSize();t++){for(var n=e.GetAt(t),r=0;r<n.text_array.GetSize();r++)s(n.text_array.GetAt(r));u(n.sublist_array)}}for(var c=0;c<o.GetSize();c++){var l=o.GetAt(c);switch(l.type.value){case 12:for(var d=0;d<l.table_data.GetSize();d++)for(var f=l.table_data.GetAt(d),h=0;h<f.cell_array.GetSize();h++){var g=f.cell_array.GetAt(h);s(g)}break;case 11:u(l.list_item);break;default:s(l)}}return r}))}))}},{key:"translateText",value:function(e,t){var n=this,r=this.engine;this.lrTextObjectsRemoved||(this.lrTextObjectsRemoved={});return this.getPageByIndex(e).then((function(i){return Promise.all([i.calcContentBBox(0),i.parsedPagePromise]).then((function(i){var a=function(i){var a=c[i];a.pObjectsToRemove.forEach((function(e){u.RemoveGraphicsObject(e)})),a.pObjectsToRemove=[],n.lrTextObjectsRemoved[e]=1;var o=new r.RichTextStyle;if(a.font){a.font;o.font=a.font,o.is_bold=a.isBold,o.is_italic=a.isItalic}if(o.text_color=a.color||0,o.mark_style=r.TextScriptType.e_Normal,o.text_size=a.fontSize,i==t.length)return{v:!1};var l,d,f,h,g,p,v=t[i],_=new r.WString(v||" "),m=a.rect,y=m.left,S=m.right,b=m.top,D=m.bottom,P=new r.CFX_FloatRect(y,D,S,b),I=u.AddText(_,P,o,(360-a.rotate)%360,a.autoReturn),A=I.rect,w=!1;if((A.left-s.left<-15||A.right-s.right>15||A.top-s.top>15||A.bottom-s.bottom<-15)&&(w=!0),!w&&!a.skipOverlapChecking)for(var C in c)if(C!=i){var k=c[C];if(l=k.rect,d=A,f=void 0,h=void 0,g=void 0,p=void 0,f=Math.max(l.left,d.left),h=Math.max(l.bottom,d.bottom),g=Math.min(l.right,d.right),p=Math.min(l.top,d.top),f<g&&p>h){w=!0;break}}if(w){for(var E=I.graphicsobject_array,G=0;G<E.GetSize();G++){var T=E.GetAt(G);u.RemoveGraphicsObject(T)}o.text_size=0,u.AddText(_,P,o,(360-a.rotate)%360,!0)}},o=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_39__._)(i,2),s=o[0],u=o[1],c=n.graphicsInfos[e];if(n.lrTextObjectsRemoved[e]&&n.pageTextBlocks[e]){for(var l=[],d=u.GetGraphicsObjectCount(),f=0;f<d;f++){var h=u.GetGraphicsObjectBI(f);1===h.GetType().value&&l.push(h)}l.forEach((function(e){return u.RemoveGraphicsObject(e)}))}for(var g in c){var p=a(g);if("object"===(0,_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_45__._)(p))return p.v}return u.GenerateContent(),!0}))}))}},{key:"exportAITranslation",value:function(){var e=this;return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_37__._)((function(){var t,n,r,i,a;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_38__.Jh)(this,(function(o){switch(o.label){case 0:return[4,e.getPageCount()];case 1:for(t=o.sent(),n=[],r=1;r<=t;r+=2)n.push([r]);return i=[],e.extractPages(n,{writeStream:function(e,t,n){i.push(e)}}),[2,{buffer:a=new Blob(i,{type:"application/pdf"}),transfers:[a]}]}}))}))()}}]),n}(PDFDoc);const __WEBPACK_DEFAULT_EXPORT__=PDFDocWithAiModule},8758:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7327);const i={addFont:function(e,t){var n;if((0,r._)(e,Uint8Array))n=e.buffer;else{if(e.GetLength()<1)return;var i=e.GetBuffer(),a=e.GetLength(),o=i+a;n=t.HEAPU8.buffer.slice?t.HEAPU8.buffer.slice(i,o):new Uint8Array(t.HEAPU8.buffer,i,a).buffer}return{buffer:n}},revokeAllURL:function(){},getWoffDataBuffer:function(e,t){if(!(e.GetLength()<1)){var n=e.GetBuffer(),r=e.GetLength(),i=n+r;return{buffer:t.HEAPU8.buffer.slice?t.HEAPU8.buffer.slice(n,i):new Uint8Array(t.HEAPU8.buffer,n,r).buffer}}}}},7083:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r,i,a=n(4375),o=n(6721),s=n(7327),u=n(3883),c=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"e_UsageView";if((0,a._)(this,e),this.c_doc=t,this.c_engine=r=n,this.layer_tree=i=new n.LayerTree(t),this.layer_context=new n.LayerContext(t,n.UsageType[o]),!this.layer_tree.IsEmpty()){var s=this.layer_tree.GetRootNode();this.rootLayerNode=new d(t,"00",s,this.layer_context,-1,!0)}}return(0,o._)(e,[{key:"setLayerNodeVisiable",value:function(e,t){var n=this.getLayerNodeById(e),r=this.layer_context.SetVisible(n.layer_node,t);return r&&(n.visible=t),r}},{key:"getLayerNodeByIdBAK",value:function(e){var t=(e=e.toString()).split("-");try{for(var n=this.rootLayerNode,r=0;r<t.length;r++)n=n.children[t[r]];return n}catch(e){return null}}},{key:"getLayerNodeById",value:function(e,t){var n;if(t||(t=this.rootLayerNode),t.id===e+"")n=t;else if(t.children&&t.children.length>0)for(var r=0;r<t.children.length;r++){var i=t.children[r];if(n=this.getLayerNodeById(e,i))break}return n}},{key:"toJson",value:function(){return this.layer_tree.IsEmpty()?[]:this.rootLayerNode.toJson()}},{key:"delete",value:function(){this.layer_tree.delete(),this.layer_context.delete(),this.rootLayerNode&&this.rootLayerNode.delete()}},{key:"removeLayerNode",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getLayerNodeById(e);if(!r)return!1;var i=r.parent;if(!i)return!1;var a=i.removeChild(e),o=Promise.resolve(a);return a&&r.hasLayer&&(o=this.getPagesByLayer(r,t).then((function(e){return e.forEach((function(e){var t=e.page;r.removeGraphics(t,n)})),a}))),o}},{key:"addChild",value:function(e,t){return this.getLayerNodeById(e).addChild(t)}},{key:"addGraphicObject",value:function(e,t,n){return this.getLayerNodeById(e).addGraphicObject(t,n)}},{key:"removeGraphicObject",value:function(e,t,n){return this.getLayerNodeById(e).removeGraphicsObject(t,n)}},{key:"getLayersByPage",value:function(e){var t=[],n=function(r){if(r.hasLayer&&r.isInPage(e.page)&&t.push(r),r.children&&r.children.length>0)for(var i=0;i<r.children.length;i++){var a=r.children[i];n(a)}};return n(this.rootLayerNode),t}},{key:"setLayerName",value:function(e,t){return this.getLayerNodeById(e).setName(t)}},{key:"setLayerDefaultState",value:function(e,t){var n=this.getLayerNodeById(e),r=this.layer_tree.setLayerDefaultState(n.layer_node,this.c_doc,+t);return r&&(n.state=t),r}},{key:"setLayerLocked",value:function(e,t){var n=this.getLayerNodeById(e);return this.layer_tree.setLayerLocked(n.layer_node,this.c_doc,t?1:0),n.isLocked=t,!0}},{key:"setLayerIntent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getLayerNodeById(e),i=new this.c_engine.StringArray;i.Add(new this.c_engine.String(0==t?"View":"Design"));var a=r.layer_node.SetIntent(i,n);return a&&(r.intent=t),a}},{key:"setLayerViewUsage",value:function(e,t){return this.getLayerNodeById(e).setViewUsage(t)}},{key:"setLayerPrintUsage",value:function(e,t){return this.getLayerNodeById(e).setPrintUsage(t)}},{key:"setLayerExportUsage",value:function(e,t){return this.getLayerNodeById(e).setExportUsage(t)}},{key:"flattenLayers",value:function(e){var t=[],n=function(e){if(e&&e.hasLayer&&!1===e.visible&&t.push(e),e.children&&e.children.length>0)for(var r=0;r<e.children.length;r++)n(e.children[r])};return n(this.rootLayerNode),e.getAllPages().then((function(e){e.forEach((function(e){var n=e.page;t.forEach((function(e){e.getGraphicsObjects(n).forEach((function(e){n.RemoveGraphicsObject(e)})),e.removeGraphics(n)})),n.GenerateContent()}))})),this.rootLayerNode.removeAllChild(),e.doc.GetCatalog().RemoveAt(new r.String("OCProperties")),!0}},{key:"mergeLayers",value:function(e,t,n){var r=this,i=this.getLayerNodeById(n),a=t.map((function(e){return r.getLayerNodeById(e)}));return e.getAllPages().then((function(t){return t.forEach((function(e){var t=e.page;a.forEach((function(e){var n=e.getGraphicsObjects(t);n&&n.length>0&&n.forEach((function(n){i.addGraphics(t,n),e.layer_node.RemoveGraphicsObject(n)}))})),t.GenerateContent()})),a.forEach((function(t){t.getRelatedAnnots().forEach((function(e){return e.SetRelatedLayerNode(i.layer_node)})),r.removeLayerNode(t.id,e,!1)})),!0}))}},{key:"getPagesByLayer",value:function(e,t){return t.getAllPages().then((function(t){var n=[];return t.forEach((function(t){var r=t.page;e.isInPage(r)&&n.push(t)})),n}))}},{key:"moveTo",value:function(e,t,n){var r=this.getLayerNodeById(e),i=this.getLayerNodeById(t);return r.layer_node.MoveTo(i.layer_node,n)}}]),e}(),l={0:"e_StateON",1:"e_StateOFF",2:"e_StateUnchanged",3:"e_StateUndefined"},d=function(){function e(t,n,r,i,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];(0,a._)(this,e),this.c_doc=t,this.id=n,this.isRoot=s,this.layer_node=r,this.name=r.GetName().toString(),this.hasLayer=r.HasLayer(),this.deep=o,this.layer_context=i,this.visible=i.IsVisible(r),this.isLocked=r.IsLocked(),this.children=this.getChildren()}return(0,o._)(e,[{key:"getChildren",value:function(){for(var t=[],n=this.layer_node.GetChildrenCount(),r=0;r<n;r++)try{var i=this.layer_node.GetChild(r),a=void 0;a=this.isRoot||""===this.id?r+"":this.id+"-"+r;var o=new e(this.c_doc,a,i,this.layer_context,this.deep+1);o.parent=this,t.push(o)}catch(e){console.warn(e)}return t}},{key:"removeChild",value:function(e){for(var t,n,r=!1,i=0;i<this.children.length;i++){var a=this.children[i];if(a.id===e){t=a,n=i;break}}return t&&(r=this.layer_node.RemoveChild(n))&&this.getChildren(),r}},{key:"removeAllChild",value:function(){var e=this.layer_node;this.children.forEach((function(t,n){e.RemoveChild(0)})),this.children=[]}},{key:"addChild",value:function(e){var t=e.index,n=e.name,i=e.hasLayer;return void 0===t&&(t=this.children.length),this.layer_node.AddChild(t,new r.WString(n),Boolean(i)),this.children=this.getChildren(),this.children[t].toJson()}},{key:"removeGraphics",value:function(e){for(var t,n,i=this.layer_node,a=(this.parent.layer_node,i.GetGraphicsObjects(e)),o=function(e,t){for(var n=r.GraphicsObjectType.e_TypeAll,i=r.GraphicsObjectType.e_TypeFormXObject,a=e.GetFirstGraphicsObjectPosition(n);a;a=e.GetNextGraphicsObjectPosition(a,n)){var s=e.GetGraphicsObject(a);if(s===t||s.Handle()===t.Handle())return e;if(s.GetType()===i){var u=s.GetFormXObject(),c=o(u.GetGraphicsObjects(),t);if(c)return c}}},s=[],u=0;u<a.GetSize();u++){var c=a.GetAt(u);if(t&&n.indexOf(c.Handle())>-1)t.RemoveGraphicsObject(c);else{var l=o(e,c);l.RemoveGraphicsObject(c),-1===s.indexOf(l)&&s.push(l),t=l,n=[];for(var d=r.GraphicsObjectType.e_TypeAll,f=(r.GraphicsObjectType.e_TypeFormXObject,t.GetFirstGraphicsObjectPosition(d));f;f=t.GetNextGraphicsObjectPosition(f,d)){var h=t.GetGraphicsObject(f);n.push(h.Handle())}}}e.GenerateContent(),s.forEach((function(e){return e.GenerateContent()}))}},{key:"addGraphics",value:function(e,t){return this.layer_node.AddGraphicsObject(e,t)}},{key:"getGraphicsObjects",value:function(e){for(var t=[],n=this.layer_node.GetGraphicsObjects(e),r=0;r<n.GetSize();r++){var i=n.GetAt(r);t.push(i)}return t}},{key:"isInPage",value:function(e){return this.layer_node.IsInPage(e)}},{key:"setName",value:function(e){if(!e)return!1;var t=this.layer_node.SetName(new r.WString(e));return t&&(this.name=e),t}},{key:"setViewUsage",value:function(e){var t=l[e];return!!t&&this.layer_node.SetViewUsage(r.UsageState[t])}},{key:"setPrintUsage",value:function(e){var t=l[e];if(!t)return!1;var n=this.layer_node.GetPrintUsage(),i=n.subtype;return n.Set(i,r.UsageState[t]),this.layer_node.SetPrintUsage(n)}},{key:"setExportUsage",value:function(e){var t=l[e];return!!t&&this.layer_node.SetExportUsage(r.UsageState[t])}},{key:"getRelatedAnnots",value:function(){if(!this.hasLayer)return[];var e=this.layer_node;try{for(var t=e.GetRelatedAnnots(),n=[],r=0;r<t.GetSize();r++){var i=t.GetAt(r);n.push(i)}return n}catch(e){}return[]}},{key:"addGraphicObject",value:function(e,t){var n=this.c_doc.GetPage(e),r=n.GetGraphicsObjectBI(t),i=this.layer_node.AddGraphicsObject(n,r);return n.GenerateContent(),i}},{key:"removeGraphicsObject",value:function(e,t){var n=this.c_doc.GetPage(e),r=n.GetGraphicsObjectBI(t),i=this.layer_node.RemoveGraphicsObject(r);return n.GenerateContent(),i}},{key:"toJson",value:function(){var e=this.layer_node,t=this.layer_context,n=t.IsVisible(e);if(e.IsEmpty())return[];for(var a=[],o=this.children.length,c=0;c<o;c++){var l=this.children[c];a.push(l.toJson())}var d={isRoot:this.isRoot,id:this.id,name:this.name,deep:this.deep,hasLayer:this.hasLayer,isLocked:this.isLocked,children:a,visible:n};if(this.hasLayer){var f,h=e.GetIntent();f="View"===(f=h.GetSize()>0?h.GetAt(0).toString():e.HasIntent((0,u.n5)(r,"View"))?"View":"Design")?0:1;var g,p=i.getDefaultState(e),v=e.GetPrintUsage().print_state.value,_=e.GetViewUsage().value,m={min:e.GetZoomUsage().min_factor,max:e.GetZoomUsage().max_factor},y=e.GetExportUsage().value,S=t.GetUsageType().value,b=e.GetDict().GetObjNum(),D=e.isOCMD(),P=[];if(1===D)if(g=e.getOCMDTypeP().toString(),e.hasVE()){var I=e.GetDict().GetElement((0,u.n5)(r,"VE")).GetArray(),A=function(e){for(var t=[],n=0;n<e.GetElementCount();n++){var r=e.GetElement(n);switch(r.GetType().value){case 5:t.push(A(r.GetArray()));break;case 9:t.push(r.GetDirectObject().GetObjNum());break;default:t.push(r.GetString().toString())}}return t},w=function(e){var t,n=e[0];return"Or"===n?t="||":"Not"===n?t="!":"And"===n&&(t="&&"),"("+e.join(t).replace(/(Or\|\|)|(Not)|(And\&\&)/,"")+")"},C=A(I);C=C.map((function(e){return(0,s._)(e,Array)?w(e):e})),g=C=w(C)}else{for(var k=e.getOCMDLayersP(),E=0;E<k.GetSize();E++){var G=k.GetAt(E);P.push(G)}"AllOn"===g?g=P.join("&&"):"AnyOn"===g&&(g=P.join("||"))}Object.assign(d,{intent:f,state:p?1:0,printUsage:v,viewUsage:_,zoomUsage:m,exportUsage:y,usageType:S,objNum:b,isOcmd:D,ocmdType:g,ocmdLayers:P})}return d}},{key:"delete",value:function(){this.layer_node.delete(),this.children.forEach((function(e){e.delete()})),this.children=[]}}]),e}();const f=c},6276:(e,t,n)=>{"use strict";n.d(t,{Z:()=>q});var r=n(6448),i=n(4375),a=n(6721),o=n(7327),s=n(9422),u=n(3236),c=n(2531),l=n(3194),d=n(5171),f=n(7582),h=n(1870),g=n(6975),p=n(2165);function v(e,t){return new(0,e.CFX_FloatRect)(t.left,t.bottom,t.right,t.top)}var _,m=n(1047),y=n(2998),S=function(){function e(){(0,i._)(this,e)}return(0,a._)(e,null,[{key:"createTextWatermark",value:function(e,t,n,r,i){var a=new e.WString(n),o=new e.Watermark(t,a,r,i);return a.delete(),o}},{key:"createBitmapWatermark",value:function(e,t,n,r){var i=y.Z.createImage(e,n).GetFrameBitmap(0);return new e.Watermark(t,i,r)}}]),e}(),b=function(){function e(){(0,i._)(this,e)}return(0,a._)(e,null,[{key:"createWatermarkSettings",value:function(e,t,n,r,i,a,o,s,u){var c=e.Position,l=e.WatermarkSettingsFlags,d={TopLeft:c.e_PosTopLeft,TopCenter:c.e_PosTopCenter,TopRight:c.e_PosTopRight,CenterLeft:c.e_PosCenterLeft,Center:c.e_PosCenter,CenterRight:c.e_PosCenterRight,BottomLeft:c.e_PosBottomLeft,BottomCenter:c.e_PosBottomCenter,BottomRight:c.e_PosBottomRight},f={0:l.e_FlagASPageContents,1:l.e_FlagASAnnot,2:l.e_FlagOnTop,4:l.e_FlagNoPrint,8:l.e_FlagInvisible};return new e.WatermarkSettings(d[t],n,r,f[i].value,a,o,s,u)}}]),e}(),D=function(){function e(){(0,i._)(this,e)}return(0,a._)(e,null,[{key:"createWatermarkTextProperties",value:function(e,t,n,r,i,a,o){var s=e.StandardID,u=[s.e_StdIDCourier,s.e_StdIDCourierB,s.e_StdIDCourierBI,s.e_StdIDCourierI,s.e_StdIDHelvetica,s.e_StdIDHelveticaB,s.e_StdIDHelveticaBI,s.e_StdIDHelveticaI,s.e_StdIDTimes,s.e_StdIDTimesB,s.e_StdIDTimesBI,s.e_StdIDTimesI,s.e_StdIDSymbol,s.e_StdIDZapfDingbats],c={normal:e.FontStyle.e_FontStyleNormal,underline:e.FontStyle.e_FontStyleUnderline},l={left:e.Alignment.e_AlignmentLeft,center:e.Alignment.e_AlignmentCenter,right:e.Alignment.e_AlignmentRight},d=new e.Font(u[t]),f=new e.WatermarkTextProperties(d,n,r,c[i.toLocaleLowerCase()],a,l[o.toLocaleLowerCase()]);return d.delete(),f}}]),e}(),P=n(3883),I=n(5497),A=n(6243),w=n(7447),C=n(3009),k=n(2595),E=n(3481),G=n(5136),T=function(){function e(t){(0,i._)(this,e),(0,G._)(this,"page",void 0),(0,G._)(this,"modified",void 0),(0,G._)(this,"currentBitmapPromise",void 0),(0,G._)(this,"currentRotate",void 0),(0,G._)(this,"currentScale",void 0),this.page=t,this.modified=!0,this.currentRotate=0,this.currentScale=1}return(0,a._)(e,[{key:"reset",value:function(){this.currentBitmapPromise&&(this.currentBitmapPromise.then((function(e){e.bitmap.delete()})),this.currentBitmapPromise=void 0),this.modified=!0}},{key:"setCurrentRotate",value:function(e){this.currentRotate=e}},{key:"setCurrentScale",value:function(e){this.currentScale=e}},{key:"getCurrentImageData",value:function(){return!this.modified&&this.currentBitmapPromise||(this.currentBitmapPromise=this.page.getBitmap(this.currentScale,this.currentRotate,void 0,["page","annot"],"print","",!1,{hotAnnot:0,hideAnnots:[],dpr:1}).then((function(e){return e.renderer.delete(),e.progressive.delete(),delete e.renderer,delete e.progressive,e})),this.modified=!1),this.currentBitmapPromise}}]),e}(),F=n(2095);!function(e){e.EndPoint="end-point",e.MidPoint="mid-point",e.IntersectionPoint="intersection-point",e.NearestPoint="nearest-point"}(_||(_={}));n(6729);var R,M=n(8164),O=n(8991),x=n(6544),B=n(4983),N=n(8193);!function(e){e.EDIT_GRAPHICS_OBJECT="edit-graphics-object"}(R||(R={}));var L=h.mA.getLogger("jr-pdf-page-batch-processor"),j=function(){function e(t){(0,i._)(this,e),(0,G._)(this,"page",void 0),(0,G._)(this,"startedKind",void 0),this.page=t,this.startedKind=new Set}return(0,a._)(e,[{key:"onObtainsNativePage",value:function(e){var t=this;e.GenerateContent=h.GO.on(e.GenerateContent).around((function(e,n,r){if(!t.isStarted(R.EDIT_GRAPHICS_OBJECT))return n.apply(e,r);L.debug("Ignore GenerateContent method calls in batch operations")})).extract()}},{key:"start",value:function(e){this.startedKind.add(e)}},{key:"flush",value:function(e){var t=this;return(0,r._)((function(){var n;return(0,f.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.page.c_pagePromise];case 1:return n=r.sent(),e===R.EDIT_GRAPHICS_OBJECT&&n.GenerateContent(),[2]}}))}))()}},{key:"end",value:function(e){var t=this;return(0,r._)((function(){return(0,f.Jh)(this,(function(n){return t.isStarted(e)&&t.flush(e),[2]}))}))()}},{key:"isStarted",value:function(e){return this.startedKind.has(e)}}]),e}(),U=n(4271);function W(e){var t=e||{},n=t.xfa_page,r=t.xfaWidgetIndex;if(!n||!r)return null;var i=n.GetWidget(r);return!i||i.IsEmpty()?null:i}var H=n(1407),z=function(){function e(t,n){(0,i._)(this,e),(0,G._)(this,"engine",void 0),(0,G._)(this,"pdfPage",void 0),(0,G._)(this,"pdfDoc",void 0),(0,G._)(this,"xfaDoc",void 0),(0,G._)(this,"pdfJR",void 0),(0,G._)(this,"isLButtonDown",void 0),this.engine=t,this.pdfPage=n,this.pdfDoc=n.pdfDoc,this.xfaDoc=n.pdfDoc.xfaDoc,this.isLButtonDown=!1,this.pdfJR=n.pdfDoc.JR,this.isLButtonDown=!1}return(0,a._)(e,[{key:"getAllXFAWidgets",value:function(){var e=this;return(0,r._)((function(){var t,n,r,i,a,o;return(0,f.Jh)(this,(function(s){switch(s.label){case 0:return e.pdfDoc.canGetXFA()?[4,e.pdfPage._getXFAPage(e.pdfPage.index)]:[2,[]];case 1:for(t=s.sent(),n=t.GetWidgetCount(),r=[],i=0;i<n;i++)(a=t.GetWidget(i)).IsEmpty()||(o=(0,U.Z)(a,e.pdfJR,!1,e.engine),r.push(o));return[2,r]}}))}))()}},{key:"triggerXFAWidgetEvent",value:function(e){var t=this;return(0,r._)((function(){var n,r,i,a,o,s,u,c,l,d,h,g,p,v,_,m,y,S,b;return(0,f.Jh)(this,(function(f){switch(f.label){case 0:if(!t.pdfDoc.canGetXFA())return[2];switch(n=t.engine,r=e.type,i=e.point,a=e.keyCode,o=e.inputChar,s=e.flags,u=e.permission,r){case"OnLButtonDown":case"OnLButtonUp":case"OnRButtonDown":case"OnRButtonUp":case"OnMouseMove":case"OnLButtonDoubleClick":case"Contextmenu":return[3,1];case"OnKeyDown":case"OnKeyUp":return[3,6];case"OnChar":return[3,7]}return[3,8];case 1:return i?("OnLButtonDown"===r?t.isLButtonDown=!0:"OnLButtonUp"===r&&(t.isLButtonDown=!1),c=t.pdfDoc.xfaDocProvider,t.isLButtonDown&&"OnMouseMove"===r?(l=W(c.currFocus),[3,5]):[3,2]):[2];case 2:return function(e,t,n,r){var i=W(t);if(!i||i.IsEmpty())return!1;if(i.GetXFAPage().GetIndex()!==r)return!1;var a=i.OnHitTest(new n.PointF(e[0],e[1]));return n.HitTestArea.e_HitTestAreaClient===a}(i,c.currFocus,n,t.pdfPage.index)?(l=c.currFocus.xfa_page.GetWidget(c.currFocus.xfaWidgetIndex),[3,5]):[3,3];case 3:return[4,t.getXFAWidgetAtDevicePoint(i)];case 4:l=f.sent(),f.label=5;case 5:if(!l||l.IsEmpty()){if("OnLButtonDown"===r)c.SetFocus(null,!0),t.xfaDoc.KillFocus();else{if("Contextmenu"===r)return t.xfaDoc.KillFocus(),[2,c.showMemu({point:i,pageIndex:t.pdfPage.index,xfa_widget:l})];(d=W(c.currFocus))&&d.OnLButtonUp(new n.PointF(i[0],i[1]),s)}return[2]}if(l&&l.GetType().value===H.f.Signature)switch(c.SetFocus(null,!0),t.xfaDoc.KillFocus(),r){case"OnLButtonUp":return[2,c.handleSignature(l)];case"Contextmenu":return[2,c.showMemu({point:i,pageIndex:t.pdfPage.index,xfa_widget:l})]}else if(t.isCheckOnly(u))return[2];return h=new n.PointF(i[0],i[1]),"OnLButtonUp"===r?((g=W(c.currFocus))&&g.OnLButtonUp(h,s),[2]):(p=l[r]&&l[r](h,s),"OnMouseMove"===r?(v=l.OnHitTest(h),_=!0,v===n.HitTestArea.e_HitTestAreaClient&&(_=l.IsAccessOpen()),[2,{result:p,hitTestArea:v.value,pageIndex:t.pdfPage.index,xfaWidget:(0,U.Z)(l,t.pdfJR,!0,t.engine),isAccessOpen:_}]):[2,{result:p}]);case 6:return(m=t.pdfDoc.xfaDocProvider).hasCurrFocus()?(y=m.currFocus.xfa_page.GetWidget(m.currFocus.xfaWidgetIndex),[2,{result:y[r](a,s),pageIndex:t.pdfPage.index,xfaWidget:(0,U.Z)(y,t.pdfJR,!1,t.engine)}]):[2];case 7:if(!(S=t.pdfDoc.xfaDocProvider).hasCurrFocus())return[2];if(b=S.currFocus.xfa_page.GetWidget(S.currFocus.xfaWidgetIndex),o)for(var D in o)b.OnChar(o.charCodeAt(D),s);else"number"==typeof a&&b.OnChar(a,s);return[2,{pageIndex:t.pdfPage.index,xfaWidget:(0,U.Z)(b,t.pdfJR,!1,t.engine)}];case 8:return[2]}}))}))()}},{key:"isCheckOnly",value:function(e){return!(e&this.engine.UserPermissions.e_PermFillForm.value||e&this.engine.UserPermissions.e_PermAnnotForm.value)}},{key:"getXFAWidgetAtDevicePoint",value:function(e){var t=this;return(0,r._)((function(){var n,r,i,a;return(0,f.Jh)(this,(function(o){switch(o.label){case 0:return t.pdfDoc.canGetXFA()?(n=t.engine,[4,t.pdfPage._getXFAPage(t.pdfPage.index)]):[2];case 1:return r=o.sent(),i=r.GetDisplayMatrix(0,0,r.GetWidth(),r.GetHeight(),n.Rotation.e_Rotation0),a=new n.PointF(e[0],e[1]),[2,r.GetWidgetAtDevicePoint(i,a,10)]}}))}))()}},{key:"getXFAWidgetByIndex",value:function(e){var t=this;return(0,r._)((function(){return(0,f.Jh)(this,(function(n){switch(n.label){case 0:return t.pdfDoc.canGetXFA()?[4,t.pdfPage._getXFAPage(t.pdfPage.index)]:[2];case 1:return[2,n.sent().GetWidget(e)]}}))}))()}}]),e}(),K="bitmap render fail",J=256,V=h.mA.getLogger("pdf-jr.PDFPage"),Y={None:0,phone:1,date:2,security:3,email:4,credit:5,bank:6,driving:7},Z={"United States":0,China:1,"Hong Kong/Taiwan":2,France:3,Germany:4,Japan:5,Korea:6,Brazil:7,Spain:8,Turkey:9,Canada:10,Norway:11,Denmark:12,Finland:13,Iceland:14,Sweden:15,"United Kingdom":16,Ireland:17};const q=function(){function e(t,n){(0,i._)(this,e),this.isVirtual=!1,this.id=(0,h.Ki)("pdf_page"),this.index=t,this.pdfDoc=n,this.doc=n.doc,this.xfaDoc=n.xfaDoc;var r=this.JR=n.JR;this.annotManager=r.annotManager;var a=this.engine=n.engine;this.progressiveContinueState=a.ProgressiveState.e_ToBeContinued,this.progressiveFinishState=a.ProgressiveState.e_Finished,this.isCPageDeleted=!0,this.isCPageParsed=!1,this.fullyBitmap=new T(this),this.annotationIDArray=[],this.isAnnotLoaded=!1,this.jrAnnots=[],this.preparsed=!1,this.fakeAnnots=[],this.batchProcessor=new j(this),this._needDestroyAnnots=[],this.needReParse=!1,n.isDynamicXFA()&&(this.xfaWidgetHandler=new z(a,this)),this.edittingAnnots=new Set}return(0,a._)(e,[{key:"setAnnotIsEditing",value:function(e,t){t?this.edittingAnnots.add(e):this.edittingAnnots.delete(e)}},{key:"annotIsEditting",value:function(e){return this.edittingAnnots.has(e)}},{key:"fixPageFields",value:function(e,t){if(void 0!==this.pdfDoc.fixPages[this.index])return!1;if(!t.some((function(e){return e&&"widget"==e.getType()&&e.engineWidget.GetField().IsEmpty()})))return this.pdfDoc.fixPages[this.index]=!1,!1;var n=this.pdfDoc.loadForm().engineForm,r=n.GetControlCount(e);if(!this.pdfDoc.needFixPageFields){for(var i=0,a=0;a<t.length;a++)(0,o._)(t[a],N.Z)&&i++;i!=r&&(this.pdfDoc.needFixPageFields=!0)}if(!this.doc.HasForm()||this.pdfDoc.needFixPageFields){for(var s=!1,u=0;u<t.length;u++)if((0,o._)(t[u],N.Z)){s=!0,this.pdfDoc.needFixPageFields=!0;break}if(this.pdfDoc.fixPages=this.pdfDoc.fixPages||[],s&&!this.pdfDoc.fixPages[this.index])return n.FixPageFields(this.index),this.pdfDoc.fixPages[this.index]=!0,!0}return this.pdfDoc.fixPages[this.index]=!1,!1}},{key:"preparse",value:function(){var e=this;this.preparsed=!0,this.preparseJsonPromise=this.parsedPage().then((function(){return e.toJson()}),(function(e){if(!M.Z.is(e))throw e}))}},{key:"addJRAnnot",value:function(e,t){this.jrAnnots[t]&&this._needDestroyAnnots.push(this.jrAnnots[t]),this.jrAnnots[t]=e,this.annotationIDArray[t]=e.getId()}},{key:"c_pagePromise",get:function(){var e=this;return this.isCPageDeleted&&(this.isCPageDeleted=!1,this._c_pagePromise=this._getPage(this.index).then((function(t){return e.pdfDoc.canGetXFA()?e.xfaPage=t:e.page=t,t}))),this._c_pagePromise},set:function(e){this._c_pagePromise=null,this.isCPageDeleted=!0}},{key:"parsedPagePromise",get:function(){return this.isCPageParsed||(this.isCPageParsed=!0,this._parsedPagePromise=this.doParsePage()),this._parsedPagePromise},set:function(e){e!==this._parsedPagePromise&&(this.isCPageParsed=!1,this._parsedPagePromise=null)}},{key:"clearEnginePage",value:function(){var e=this,t=[];return this.isCPageDeleted||(t.push(this._c_pagePromise.then((function(t){if(t.delete(),e.jrAnnots.forEach((function(e){e.destroy()})),e.jrAnnots[void 0]){try{e.jrAnnots[void 0].destroy()}catch(e){}delete e.jrAnnots[void 0]}e.jrAnnots.length=0,e.page=null}))),this.c_pagePromise=null),this.isCPageParsed&&(this.parsedPagePromise=null),this.fullyBitmap.reset(),Promise.all(t)}},{key:"_getPage",value:function(e){var t=this;if(this.pdfDoc.canGetXFA())return this._getXFAPage(e);var n,r,i=(0,h.dD)(),a=this.engine.ErrorCode.e_ErrDataNotReady;try{n=this.doc.GetPage(e)}catch(e){if((r=this.engine.getErrorCode(e))!==a)return i.reject(r.value),i.promise}return this.pdfDoc.readerBlockLoading||r===a?(n&&n.delete(),setTimeout((function(){t._getPage(e).then((function(e){i.resolve(e)}),(function(e){i.reject(e)}))}),100),i.promise):(n.IsEmpty()?(n.delete(),i.reject(new M.Z("Cannot get page by index: "+e))):i.resolve(n),i.promise.then((function(e){return t.batchProcessor.onObtainsNativePage(e),e})))}},{key:"_getXFAPage",value:function(e){var t,n,r=this,i=(0,h.dD)(),a=this.engine.ErrorCode.e_ErrDataNotReady;try{t=this.xfaDoc.GetPage(e)}catch(e){if((n=this.engine.getErrorCode(e))!==a)return i.reject(n.value),i.promise}return this.pdfDoc.readerBlockLoading||n===a?(t&&t.delete(),setTimeout((function(){r._getXFAPage(e).then((function(e){i.resolve(e)}),(function(e){i.reject(e)}))}),100),i.promise):(t.IsEmpty()?(t.delete(),i.reject(new M.Z("Cannot get page by index: "+e))):i.resolve(t),i.promise)}},{key:"_prepareAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page;return this.isAnnotLoaded=!0,this._getAnnotationIdArray(e)}},{key:"reloadAnnots",value:function(){this.page.UpdateAnnotList(),this.annotationIDArray=this._prepareAnnotations()}},{key:"_getAnnotIndexById",value:function(e){return this.annotationIDArray.indexOf(Number(e))}},{key:"hasAnnot",value:function(e){return this._getAnnotIndexById(e)>-1}},{key:"_setAnnotIdAt",value:function(e,t){if(t>=this.annotationIDArray.length&&this.annotationIDArray.indexOf(e)>-1)throw new Error("Duplicated annotation id: "+e);this.annotationIDArray[t]=e}},{key:"parsedPage",value:function(){return this.parsedPagePromise}},{key:"doParsePage",value:function(){var e=this;return this.c_pagePromise.then((function(t){if(e.pdfDoc.canGetXFA())return t;if(!e.needReParse&&(!t.IsParsed||t.IsParsed()))return t;try{e.needReParse&&e.notifyTouchup(t);var n=t.StartParse(0,null,e.needReParse);if(e.needReParse=!1,!(0,g.Z)(n,e.progressiveContinueState,e.progressiveFinishState))throw t.delete(),new Error("parse page fail")}catch(e){throw t.delete(),new Error("parse page fail")}return e.pdfDoc.mIsXFA&&!e.pdfDoc.hasXFALicense()||(e.annotationIDArray=e._prepareAnnotations(t)),t}))}},{key:"reParsePage",value:function(){var e=this;return this.parsedPagePromise=this.c_pagePromise.then((function(t){if(!(0,g.Z)(t.StartParse(0,null,!0),e.progressiveContinueState,e.progressiveFinishState))throw t.delete(),new Error("parse page fail");return t}))}},{key:"getIndex",value:function(){}},{key:"getObjNumber",value:function(){}},{key:"getWidth",value:function(){return this.c_pagePromise.then((function(e){return e.GetWidth()}))}},{key:"getHeight",value:function(){return this.c_pagePromise.then((function(e){return e.GetHeight()}))}},{key:"getAnnotsImageDataByTile",value:function(){}},{key:"hasAnnots",value:function(){return this.c_pagePromise.then((function(e){return 0!==e.GetAnnotCount()}))}},{key:"getAnnots",value:function(e,t,n){return this.getAnnotsEx(e,t,n,!1)}},{key:"getAnnotsEx",value:function(e,t,n,r){var i=this;if(this.pdfDoc.canGetXFA())return Promise.resolve([]);var a=function(e){var t,n=e.map((function(e){return e.getId()}));return n.reduceRight((function(e,t,r){return n.indexOf(t)!==r&&e.push(r),e}),[]).forEach((function(t){e[t].destroy(),e.splice(t,1)})),(t=i._needDestroyAnnots).push.apply(t,(0,l._)(e)),e};return this.c_pagePromise.then((function(o){var s=o.GetAnnotCount();if(0===s)return[];if(!n&&i.isAnnotLoaded||i.reloadAnnots(),!e){var u=new Array(s).fill(1).map((function(e,n){return i._getAnnotByIndex(o,n,t)}));return!r&&i.fixPageFields(o,u)?i.getAnnotsEx(e,t,!0,!0):t&&Object.keys(t).length?a(u.filter((function(e){return!!e}))):a(u.filter((function(e){return"unknowntype"!=e.getType()})))}var c=e.map((function(e){var n=i._getAnnotIndexById(e);return-1===n?null:i._getAnnotByIndex(o,n,t)})).filter((function(e){return!!e&&"unknowntype"!=e.getType()}));return a(c)}))}},{key:"setAction",value:function(e,t){var n=this.JR,r={17:n.engine.TriggerEvent.e_TriggerPageOpened,18:n.engine.TriggerEvent.e_TriggerPageClosed},i=n.engine,a=r[e],o=i.AdditionalAction.CreateFromPage(this.page),s=n.actionManager,u=s.create(this.doc,t.type),c=o.GetAction(a);if(c.IsEmpty())o.SetAction(a,u);else{var l=c.GetSubActionCount();c.InsertSubAction(l,u),o.SetAction(a,c)}s.get(u,this.doc,n).create(t)}},{key:"getAction",value:function(e){var t=this.JR,n={open:t.engine.TriggerEvent.e_TriggerPageOpened,close:t.engine.TriggerEvent.e_TriggerPageClosed};if(!Object.keys(n).includes(e))throw new Error("trigger type must be ".concat(Object.keys(n).toSting()));var r=t.engine.AdditionalAction.CreateFromPage(this.page).GetAction(n[e]);return!r.IsEmpty()&&t.actionManager.get(r,this.doc,t).toJson()}},{key:"removeAction",value:function(e,t){var n=this.JR,r=n.engine,i={17:n.engine.TriggerEvent.e_TriggerPageOpened,18:n.engine.TriggerEvent.e_TriggerPageClosed}[e],a=r.AdditionalAction.CreateFromPage(this.page);if(t){var o=a.GetAction(i),s=(0,F.Z)(this.engine,this.doc,o,t.objNumber);return t.objNumber&&s?(a.SetAction(i,s),!0):a.RemoveAction(i)}return a.RemoveAction(i)}},{key:"moveAction",value:function(e){for(var t=e.trigger,n=e.action,r=e.direction,i=this.JR,a=i.engine,o={17:i.engine.TriggerEvent.e_TriggerPageOpened,18:i.engine.TriggerEvent.e_TriggerPageClosed},s=a.AdditionalAction.CreateFromPage(this.page),u=o[t],c=s.GetAction(u),l=c.GetSubActionCount(),d=[c],f=0;f<l;f++)d.push(c.GetSubAction(f));var h=d.findIndex((function(e){return e.GetDict().GetObjNum()===n.objNumber}));if(-1!=h){var g=r?h+1:h-1;if(0==g||0==h){s.RemoveAction(u),d[0].RemoveAllSubActions();var p=0==h?g:h;s.SetAction(u,d[p]),d.splice(p,1),c=s.GetAction(u);for(var v=0;v<d.length;v++)c.InsertSubAction(v,d[v])}else{var _;c.RemoveAllSubActions(),_=[d[g],d[h]],d[h]=_[0],d[g]=_[1];for(var m=1;m<d.length;m++)c.InsertSubAction(m,d[m])}}}},{key:"getAnnotIDList",value:function(){return this.annotationIDArray}},{key:"_getAnnotByIndex",value:function(e,t,n){var r=e.GetAnnot(t);return r.IsEmpty()||n&&!(r.GetDict().GetObjNum()in n)?null:this.annotManager.get(r,this,t)}},{key:"getAnnotById",value:function(e){var t=this;return this.getNativeAnnotById(e).then((function(e){return e.IsEmpty()?null:t.annotManager.get(e,t,e.GetIndex())}))}},{key:"getThumb",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.c_pagePromise.then((function(r){var i=r.GetWidth(),a=r.GetHeight();switch(t){case 90:case 270:var o;i=(o=[a,i])[0],a=o[1]}var s=A.pj/i,u=A.YP/a,c=Math.min(s,u)*n;return e.getImageData(c,t,c,0,0,e.getWidth(),e.getHeight(),0,0,!0)}))}},{key:"getMediaBoxBitmap",value:function(e,t){var n=this.page,r=this.engine,i=n.GetBox(r.BoxType.e_MediaBox);i.Normalize(),i.IsEmpty()&&(i=new RectF(0,0,612,792));var a=i.right-i.left,o=i.top-i.bottom,s=0,u=0,c=n.GetBox(r.BoxType.e_CropBox);c.Normalize();var l=a,d=o;c.IsEmpty()||(s=Math.max(s,c.left-i.left),u=Math.max(u,i.top-c.top),l=c.right-c.left,d=c.top-c.bottom);var f=a/l,h=o/d;return this.getImageData(f,0,h,s/f/(l/e),u/h/(d/t),e/f,t/h,l/f/(l/e),d/h/(d/t))}},{key:"getNativeAnnotById",value:function(e){var t=this._getAnnotIndexById(e);if(-1==t)throw new Error("Annotation not found: ".concat(e));return this.c_pagePromise.then((function(e){return e.GetAnnot(t)}))}},{key:"getImageDataByTile",value:function(e,t,n,r){var i,a,o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6?arguments[6]:void 0,d=this.engine,f=(this.progressiveContinueState,this.progressiveFinishState,this);return Promise.all([this.getWidth(),this.getHeight()]).then((function(e){var t=(0,c._)(e,2),n=t[0],r=t[1];i=n*s,a=r*s})).then((function(){return o.parsedPage()})).then((function(e){return e=o.xfaPage||o.page,[Q(d,n,r,te(e)),e,d]})).then((function(e){var t=(0,c._)(e,3),n=t[0],r=t[1],i=t[2],a=(0,E.I)(i,n);return a.SetRenderEnhanceThinLines(!0),f.pdfDoc.pdfLayer&&f.pdfDoc.pdfLayer.layer_context&&a.SetLayerContext(f.pdfDoc.pdfLayer.layer_context),[a,n,r,i]})).then((function(n){var r=(0,c._)(n,4),s=r[0],d=r[1],h=r[2],g=r[3];return $({x:-e,y:-t,width:i,height:a,rotate:u,pdfDoc:f.pdfDoc},g,h,d,s,l,!0,o.JR.getJPXDownSample()),[s,d,g]})).then((function(e){var t=(0,c._)(e,3),n=t[0],r=t[1],i=t[2];return(0,E.v)(i,r,n)}))}},{key:"getImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.getWidth(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getHeight(),u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=arguments.length>9&&void 0!==arguments[9]&&arguments[9],f=this.engine,h=this.progressiveContinueState,p=this.progressiveFinishState;return Promise.all([this.parsedPage(),o,s]).then((function(e){var i=(0,c._)(e,3),a=i[0],o=i[1],s=i[2],u=Math.max(1,o*t),l=Math.max(1,s*r);switch(n){case 90:case 270:var d=u;u=l,l=d}var h=te(a),g=null;if((g=h?new f.Bitmap(u,l,f.DIBFormat.e_DIBArgb,0,0):new f.Bitmap(u,l,f.DIBFormat.e_DIBRgb32,0,0)).FillRect(h?16777215:4294967295,null),g.IsEmpty())throw g.delete(),a.delete(),new Error("create bitmap fail");return[g,a,f]})).then((function(e){var t=(0,c._)(e,3),n=t[0],r=t[1],i=t[2],a=new i.Renderer(n,!0);if(a.IsEmpty())throw a.delete(),n.delete(),r.delete(),new Error("render bitmap fail");return d&&a.SetRenderAnnotsForThumbnail(!0),[a,n,r,i]})).then((function(t){var r=(0,c._)(t,4),o=r[0],s=r[1],d=r[2],f=r[3],v=(0,C.q)(f,n),_=(d=e.xfaPage||e.page).GetDisplayMatrix(i,a,u||s.GetWidth(),l||s.GetHeight(),v);if(!(0,g.Z)(e.pdfDoc.canGetXFA()?o.StartRenderXFAPage(d.Handle?d.Handle():d,_,!1,null):o.StartRender(d,_,null),h,p))throw o.delete(),s.delete(),d.delete(),new Error("render page image fail");return[o,s,d,f]})).then((function(e){var t,n=(0,c._)(e,4),r=n[0],i=n[1],a=(n[2],n[3]),o=i.GetBuffer(),s=i.GetWidth(),u=i.GetHeight(),l=u*i.GetPitch(),d=o+l;return t=a.HEAPU8.buffer.slice?a.HEAPU8.buffer.slice(o,d):new Uint8Array(a.HEAPU8.buffer,o,l).buffer,r.delete(),i.delete(),{buffer:t,width:s,height:u}}))}},{key:"getRotation",value:function(){return this.c_pagePromise.then((function(e){return e.GetRotation().value}))}},{key:"setRotation",value:function(e){var t=this;return this.c_pagePromise.then((function(n){return Promise.all([n.SetRotation(t.engine.Rotation[["e_Rotation0","e_Rotation90","e_Rotation180","e_Rotation270"][e]||"e_Rotation0"]),n])})).then((function(e){var t=(0,c._)(e,2);t[0];return t[1].GetRotation().value}))}},{key:"getPageImage",value:function(){}},{key:"getVisibleContentBox",value:function(){}},{key:"getPureTexts",value:function(e){var t=this;return this.doParsePage().then((function(n){if(e){var r=[],i=n.ExportDataForChatGPT(!0);function b(e){if(e)for(var t=0;t<e.GetSize();t++){var n=e.GetAt(t),i=n.text_array;if(i)for(var a=0;a<i.GetSize();a++){var o=i.GetAt(a),s=o.rect,u={left:s.left,right:s.right,top:s.top,bottom:s.bottom},c=(o.text_content||o.content).toString();r.push({rects:[u],isTable:!1,text:c})}b(n.sublist_array)}}for(var a=0;a<i.GetSize();a++){var o=i.GetAt(a);switch(o.type.value){default:var s=o.rect,u={left:s.left,right:s.right,top:s.top,bottom:s.bottom},c=(o.text_content||o.content).toString();r.push({rects:[u],isTable:!1,text:c});break;case 4:b(o.list_item);break;case 5:for(var l={rows:[],isTable:!0},d=0;d<o.table_data.GetSize();d++){for(var f=o.table_data.GetAt(d),h=[],g=0;g<f.cell_array.GetSize();g++){var p=f.cell_array.GetAt(g),v="td";p.isHeader&&(v="th");var _="";p.nRowSpan>1&&(_+=' rowspan="'+p.nRowSpan+'"'),p.nCellSpan>1&&(_+=' colspan="'+p.nCellSpan+'"');var m=p.content.toString(),y="<"+v+_+">"+(m=m.replace("\n","<br/>"))+"</"+v+">",S=p.rect;h.push({text:y,rect:{left:S.left,right:S.right,top:S.top,bottom:S.bottom}})}l.rows.push(h)}r.push(l)}}return r}return t.getNormalTextPageSync().GetText(0).toString()}))}},{key:"getPageTexts",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\r\n",r=this.engine.PDF2TextFlags,i={normal:r.e_PDF2TextFlagsNormal.value,autoRotate:r.e_PDF2TextFlagsAutoRotate.value,autoWidth:r.e_PDF2TextFlagsAutoWidth.value,keepColumn:r.e_PDF2TextFlagsKeepColumn.value,noHyphen:r.e_PDF2TextFlagsNoHyphen.value,decomposeLigature:r.e_PDF2TextFlagsDecomposeLigature.value},a=i.normal;Object.keys(e).forEach((function(t){!0===e[t]&&(a|=i[t])}));for(var o=this.page.GetPageText(a,t),s=[],u=0;u<o.GetSize();u++)s.push(o.GetAt(u)+"");return s.join(n)}},{key:"getImages",value:function(){}},{key:"getShapes",value:function(){}},{key:"getShadings",value:function(){}},{key:"destroy",value:function(){var e=this;return this.doc=null,this.pdfDoc=null,this.isCPageDeleted?Promise.resolve():this.c_pagePromise.then((function(t){if(e.c_pagePromise=null,e.jrAnnots.forEach((function(e){try{e.destroy()}catch(e){}})),e.jrAnnots[void 0]){try{e.jrAnnots[void 0].destroy()}catch(e){}delete e.jrAnnots[void 0]}e.jrAnnots=[],e._needDestroyAnnots.forEach((function(e){try{e.destroy()}catch(e){}})),e._needDestroyAnnots=[];try{if(!t.IsEmpty())return t.ClearRenderCache&&t.ClearRenderCache(),t.delete()}catch(e){}return Promise.resolve()}))}},{key:"resetBitmapCache",value:function(){this.fullyBitmap.reset()}},{key:"toJson",value:function(){var e=this;if(this.pdfDoc.canGetXFA())return this.toXFAJson();var t=this.page,n=this.engine,r=this.engine.CFX_FloatRect,i=t.GetBox(n.BoxType.e_MediaBox);i.Normalize(),i.IsEmpty()&&(i=new r(0,0,612,792));var a,o=!1,s=t.GetBox(n.BoxType.e_CropBox);s.Normalize(),s.IsEmpty()?a=i:((a=s).Intersect(i),o=!0);var u,c=n.Rotation;switch(t.GetRotation()){case c.e_Rotation0:u=new n.Matrix(1,0,0,1,-a.left,-a.bottom);break;case c.e_Rotation90:u=new n.Matrix(0,-1,1,0,-a.bottom,a.right);break;case c.e_Rotation180:u=new n.Matrix(-1,0,0,-1,a.right,a.top);break;case c.e_Rotation270:u=new n.Matrix(0,1,-1,0,a.top,-a.left);break;default:u=new n.Matrix}var l,d=t.GetDict().GetObjNum(),f={};try{l=t.GetDict().GetElement((0,P.n5)(n,"AA"))}catch(e){V.info(n.getErrorCode(e))}if(l&&l.GetDict()){var h=new n.AdditionalAction(this.doc,l.GetDict());if(!h.IsEmpty())[this.engine.TriggerEvent.e_TriggerPageOpened,this.engine.TriggerEvent.e_TriggerPageClosed].forEach((function(t){try{var n=h.GetAction(t);n.IsEmpty()||(f[t.value]=e.JR.actionManager.get(n,e.doc,e.JR).toJson())}catch(t){isNaN(t)||(t=e.engine.getErrorCode(t)),console.warn(t)}}));h.delete()}var g,p=[u.GetA(),u.GetB(),u.GetC(),u.GetD(),u.GetE(),u.GetF()];return u.delete(),g=this.pdfDoc.mIsXFA&&!this.pdfDoc.hasXFALicense()?0:t.GetAnnotCount(),{id:this.id,index:t.GetIndex(),width:t.GetWidth(),height:t.GetHeight(),rotation:t.GetRotation().value,annotCount:g,matrix:p,objectNumber:d,AA:f,mediaWidth:i.Width(),mediaHeight:i.Height(),isCropped:o,cropBox:{left:a.left,right:a.right,top:a.top,bottom:a.bottom}}}},{key:"toXFAJson",value:function(){var e=this.xfaPage,t=e.GetWidth(),n=e.GetHeight();return{id:this.id,index:e.GetIndex(),width:t,height:n,rotation:0,annotCount:0,matrix:[1,0,0,1,0,0],objectNumber:-1,AA:{},mediaWidth:t,mediaHeight:n,isCropped:!1,cropBox:{left:0,right:t,top:n,bottom:0}}}},{key:"getBitmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["page"],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"view",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{hotAnnot:0,hideAnnots:[],dpr:1},c=0,l=-1!==i.indexOf("page");"view"===a&&l&&(this.fullyBitmap.setCurrentRotate(n),this.fullyBitmap.setCurrentScale(t));for(var d=this.engine,f={page:d.ContentFlag.e_RenderPage.value,annot:d.ContentFlag.e_RenderAnnot.value,form:J,noHighlight:8,onlyHighlight:4,hideMarkup:16},h=0,g=i.length;h<g;h++)c|=f[i[h]];var p,v,_,m,y,S=r?r.x:0,b=r?r.y:0,D=(this.progressiveContinueState,this.progressiveFinishState,this);return this.parsedPage().then((function(i){if(y=i,!e.pdfDoc.isOwner&&!e.pdfDoc.canGetXFA()){var f=y.GetDocument();if(f.GetPasswordType()==d.PasswordType.e_PwdUser)0==(f.GetUserPermissions()&(d.UserPermissions.e_PermFillForm.value|d.UserPermissions.e_PermAnnotForm.value))&&(c|=J);f.delete()}var h=i.GetWidth(),g=i.GetHeight();if(_=h*t,m=g*t,r)p=r.width,v=r.height;else switch(n){case 90:case 270:p=m,v=_;break;default:p=_,v=m}var P=te(y);l||(P=8&c?1:!(4&c)),p=parseInt(p),v=parseInt(v);var I="view"===a&&"number"==typeof e.pdfDoc.colors.background&&"number"==typeof e.pdfDoc.colors.foreground,A=Q(d,p,v,P,I&&l?e.pdfDoc.colors.background:void 0),w=(0,E.I)(d,A);w.SetRenderEnhanceThinLines(!0);var C,k,G,T,F=D.pdfDoc.pdfLayer;if("print"===a){var R=e.pdfDoc.createLayerNodes("e_UsagePrint");F&&F.layer_context&&R.layer_context.MergeStates(F.layer_context),w.SetLayerContext(R.layer_context)}else F&&F.layer_context&&w.SetLayerContext(F.layer_context);w.SetForceHalftone(!0),I&&"view"!==a&&(w.SetColorMode(e.engine.ColorMode.e_ColorModeCustom),w.SetMappingModeColors(ee(e.pdfDoc.colors.background),ee(e.pdfDoc.colors.foreground)));var M=$({x:-S,y:-b,width:_,height:m,rotate:n,usage:a,pdfDoc:D.pdfDoc},d,e.xfaPage||e.page,null,w,c,o,e.JR.getJPXDownSample(),!l);if(C=M[0],k=M[1],G=M[2],l)T=C.GetRateOfProgress();else if(e.page){var O=e.page,x=O.GetAnnotCount();w.SetScreenDPIScale(u.dpr||1);for(var B=[],N=[],L=[],j=[],U=[],W=0;W<x;W++){var H=O.GetAnnot(W),z=H.GetType();z===d.AnnotType.e_Redact?U.push(H):z===d.AnnotType.e_Screen?N.push(H):z===d.AnnotType.e_Link?L.push(H):z===d.AnnotType.e_Widget?j.push(H):B.push(H)}j.length&&(B=B.concat(j)),L.length&&(B=B.concat(L)),N.length&&(B=B.concat(N)),U.length&&(B=B.concat(U));for(var K=0;K<B.length;K++){var V=B[K];try{var Y=V.GetType().value,Z=V.GetFlags();if(0===Y)continue;if(2&Z||32&Z||20==Y)continue;if(8&c&&9==Y)continue;if(4&c&&9!==Y)continue;if(-1!==u.hideAnnots.indexOf(V.GetDict().GetObjNum()))continue;var q=!0;if(9!==Y){var X=V.GetAppearanceGraphicsObjects(d.AppearanceType.e_AppearanceTypeNormal);if(!X.IsEmpty())if(X.GetMaxBlendType()>d.BlendMode.e_BlendNormal.value){q=!1,w.SetRenderContentFlags(1|-257&c);var ne=V.GetRect();G.TransformRect(ne);var re=new d.FX_RECT(ne.left,ne.bottom,ne.right,ne.top);A.FillRect(4294967295,re),w.SetClipRect(re),w.StartRender(O,G,null),w.SetRenderContentFlags(-257&c),w.ClearClips()}}q&&w.RenderAnnot(V,G)}catch(e){isNaN(e)||(e=d.getErrorCode(e)),console.warn(e)}}B.forEach((function(e){e.delete()})),T=100,k=2,C={delete:function(){}}}if((100==T||2==k)&&!e.pdfDoc.canGetXFA()&&((l||"print"==a)&&e.renderAnnots(w,a,G,c),u.hotAnnot)){var ie=u.hotAnnot,ae=(0,E.I)(d,A);ae.SetRenderAnnotAppearanceType(d.AppearanceType.e_AppearanceTypeRollover);var oe=e._getAnnotIndexById(ie),se=e.page.GetAnnot(oe);0;ae.RenderAnnot(se,G);se.delete(),ae.delete()}var ue=e.pdfDoc.canGetXFA()?0:y.GetRotation().value,ce=(0,E.v)(d,A,w,!1);return ce.rate=2==k?100:T,ce.x=S,ce.y=b,ce.scale=t,s||(ce.isFirst=Math.abs(e.scale-t)>1e-6||e.rotate!=n||e.pageRotation!=ue,e.scale=t,e.rotate=n,e.pageRotation=ue),{image:ce,getBitmapBuffer:E.v,engine:d,bitmap:A,renderer:w,usage:a,matrix:G,renderFlags:c,page:e,x:S,y:b,progressive:C}}))}},{key:"getBitmapByMatrix",value:function(e,t,n){}},{key:"renderAnnots",value:function(e,t,n,r){for(var i=this.page,a=i.GetAnnotCount(),o=0;o<a;o++){var s=i.GetAnnot(o);try{var u=s.GetType().value;if("print"==t){var c=s.GetFlags();if(2&c||!(4&c)||18==u)continue;if(!(2&r)&&20!=u)continue;e.SetRenderFormField(!0),e.RenderAnnot(s,n)}else{-1!=[0,16,19,22,23,25].indexOf(u)&&e.RenderAnnot(s,n)}}catch(e){isNaN(e)||(e=engine.getErrorCode(e)),console.warn(e)}s.delete()}}},{key:"getPageAndHighlightBitmap",value:function(){var e,t,n,r,i,a=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,d=this.engine,f=u?u.x:0,h=u?u.y:0,p=this.progressiveContinueState,v=this.progressiveFinishState,_=this;return this.parsedPage().then((function(e){return i=e,Promise.all([a.getWidth(),a.getHeight()])})).then((function(i){var a=(0,c._)(i,2),s=a[0],l=a[1];n=s*o,r=l*o,e=u?u.width:n,t=u?u.height:r})).then((function(){return[Q(d,e,t,te(i)),i,d]})).then((function(e){var t=(0,c._)(e,3),n=t[0],r=t[1],i=t[2],a=(0,E.I)(i,n);return a.SetRenderEnhanceThinLines(!0),_.pdfDoc.pdfLayer&&_.pdfDoc.pdfLayer.layer_context&&a.SetLayerContext(_.pdfDoc.pdfLayer.layer_context),[a,n,r,i]})).then((function(e){var t=(0,c._)(e,4),i=t[0],o=t[1],u=t[2],d=t[3];return function(e,t,n,r,i,a,o){var s=e.x,u=e.y,c=e.width,l=e.height,d=e.rotate,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],h=(0,C.q)(t,d);switch(d){case 270:case 90:var p=c;c=l,l=p}var v=n.GetDisplayMatrix(s,u,c,l,h);i.SetRenderContentFlags(t.ContentFlag.e_RenderPage.value);if(!(0,g.Z)(i.StartRender(n,v,null),a,o))throw i.delete(),r.delete(),new Error(K);for(var _=t.AnnotType.e_Highlight,m=0,y=n.GetAnnotCount();m<y;m++){var S=n.GetAnnot(m),b=S.GetType();b!==_&&0!=b.value||-1!==f.indexOf(S.GetUniqueID().toString())||i.RenderAnnot(S,v)}}({x:-f,y:-h,width:n,height:r,rotate:s},d,a.xfaPage||a.page,o,i,p,v,l),u.ClearRenderCache&&u.ClearRenderCache(),[i,o,d]})).then((function(e){var t=(0,c._)(e,3),n=t[0],r=t[1],i=t[2];return(0,E.v)(i,r,n)}))}},{key:"getAnnotBitmap",value:function(e,t,n,r,i,a){var o,s,u,l,d,f,h,g=this,p=this.engine,v=r?r.x:0,_=r?r.y:0;return this.parsedPage().then((function(t){return o=t,Promise.all([g.getWidth(),g.getHeight(),g.getNativeAnnotById(e)])})).then((function(e){var n=(0,c._)(e,3),r=n[0],i=n[1],a=n[2];if(l=r*t,d=i*t,a.IsEmpty())throw a.delete(),new Error("annot is empty");return f=a})).then((function(){if(20==f.GetType().value){var e=f.GetRect();return s=Math.max(r?r.width+0:(e.right-e.left)*t,1),u=Math.max(r?r.height+0:(e.top-e.bottom)*t,1),{bitmap:Q(p,s,u,!0),renderer:{delete:function(){}},progressive:{delete:function(){}}}}return g.getBitmap(t,n,r,["noHighlight"])})).then((function(e){h=e;var t=e.bitmap,n=(0,E.I)(p,t);if(i===A.Qk.ROLLOVER){a||f.GetFlags();f.SetEnableToggleNoView(!!(256&a))}return i&&n.SetRenderAnnotAppearanceType(p.AppearanceType[i===A.Qk.ROLLOVER?"e_AppearanceTypeRollover":i===A.Qk.DOWN?"e_AppearanceTypeDown":"e_AppearanceTypeNormal"]),[n,t,f]})).then((function(e){var t=(0,c._)(e,3),r=t[0],i=t[1],a=t[2];switch(n){case 90:case 270:var s;s=l,l=d,d=s}var u=g.pdfDoc.pdfLayer;if(u&&u.layer_context&&!u.layer_tree.IsEmpty()){a.GetRelatedLayerNode();r.SetLayerContext(u.layer_context)}var f=o.GetDisplayMatrix(-v,-_,l,d,(0,C.q)(p,n));if(!r.RenderAnnot(a,f))return r.delete(),{buffer:new ArrayBuffer(0),width:0,height:0,x:v,y:_};var m=(0,E.v)(p,i,r);return m.x=v,m.y=_,h.renderer.delete(),h.progressive.delete(),m}))}},{key:"getAnnotBitmapByRange",value:function(e,t,n,r){var i,a,s,u,l,d=this,f=this.engine,h=r?r.x:0,g=r?r.y:0;return this.parsedPage().then((function(e){return i=e,Promise.all([d.getWidth(),d.getHeight()])})).then((function(e){var n=(0,c._)(e,2),i=n[0],o=n[1];return u=i*t,l=o*t,a=r?r.width:u,s=r?r.height:l,[a,s,u,l]})).then((function(e){var t=(0,c._)(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return[Q(f,n,r,!0),i,a]})).then((function(e){var t=(0,c._)(e,3),n=t[0],r=t[1],i=t[2],a=(0,E.I)(f,n);return a.SetRenderEnhanceThinLines(!0),[a,n,r,i]})).then((function(t){for(var r=(0,c._)(t,4),a=r[0],s=r[1],u=r[2],l=r[3],p=i.GetDisplayMatrix(-h,-g,u,l,d.transformRotateValue(f,n)),v=[],_=0,m=e.length;_<m;_++){var y=e[_];if((0,o._)(y,Array))for(var S=y[0],b=y[1];S<=b;S++)v.push(i.GetAnnot(S));else v.push(i.GetAnnot(y))}for(var D=0,P=v.length;D<P;D++){var I=v[D];a.RenderAnnot(I,p)}return(0,E.v)(f,s,a)}))}},{key:"getAnnotIdAtPoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.parsedPage().then((function(i){var a=new n.engine.PointF(e,t),o=i.GetAnnotAtPoint(a,r);return a.delete(),o.IsEmpty()?-1:o.GetUniqueID().toString()}))}},{key:"getAnnotIdAtDevicePoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return this.parsedPage().then((function(a){var o=n.engine,s=new o.Matrix;i&&s.Set(i[0],i[1],i[2],i[3],i[4],i[5]);var u=new o.PointF(e,t),c=a.GetAnnotAtDevicePoint(u,r,s);return(0,I.Z)(u,s),c.IsEmpty()?-1:c.GetUniqueID().toString()}))}},{key:"getAnnotObjectNumAtPoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.parsedPage().then((function(i){var a=new n.engine.PointF(e,t),o=i.GetAnnotAtPoint(a,r);return a.delete(),o.IsEmpty()?-1:o.GetDict().GetObjNum()}))}},{key:"getAnnotObjectNumAtDevicePoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return this.parsedPage().then((function(a){var o=n.engine,s=new o.Matrix;i&&s.Set(i[0],i[1],i[2],i[3],i[4],i[5]);var u=new o.PointF(e,t),c=a.GetAnnotsAtDevicePoint(u,r,s),l=c.GetSize();if(0===l)return-1;for(var d=-1,f=0;f<l;f++){var h=c.GetAt(f);if(!h.IsEmpty()){if(h.GetType()==n.engine.AnnotType.e_Link)return h.GetDict().GetObjNum();if(h.GetType()==n.engine.AnnotType.e_Watermark)continue;-1===d&&(d=h.GetDict().GetObjNum())}}return d}))}},{key:"getCharInfoAtPoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.getNormalTextPage().then((function(i){var a=i.GetIndexAtPos(e,t,r);if(-1===a)return null;if(!i.GetTextRectCount(a,1))return null;var o=i.GetTextRect(0),s=i.GetBaselineRotation(0),u=n.getSelectedRectArray(i,a,a);return u.length&&(0===s.value||2===s.value?(o.top=u[0].top,o.bottom=u[0].bottom):(o.left=u[0].left,o.right=u[0].right)),{charIndex:a,left:o.left,right:o.right,top:o.top,bottom:o.bottom,rotation:s.value}}))}},{key:"getNormalTextPage",value:function(e){var t=this;return this.parsedPage().then((function(n){var r=t.engine;return new r.TextPage(t.page,e||r.TextParseFlags.e_ParseTextNormal.value)}))}},{key:"getNormalTextPageSync",value:function(){var e=this.engine;return new e.TextPage(this.page,e.TextParseFlags.e_ParseTextNormal.value)}},{key:"removeAnnotById",value:function(e){var t=this;return this.getNativeAnnotById(e).then((function(n){return!(!n||n.GetType()===t.engine.AnnotType.e_Widget)&&t.parsedPage().then((function(r){return!!r.RemoveAnnot(n)&&(t.edittingAnnots.delete(e),t.update().then((function(e){return!0})))}))}))}},{key:"removeAllAnnot",value:function(){var e=this;return this.edittingAnnots.clear(),this.parsedPage().then((function(t){for(var n=t.GetAnnotCount();n--;){var r=t.GetAnnot(n);r.GetType()!==e.engine.AnnotType.e_Widget&&t.RemoveAnnot(r)}return e.update()}))}},{key:"_getAnnotationIdArray",value:function(e){var t=e.GetAnnotCount();return Array(t).fill(void 0).map((function(t,n){var r=e.GetAnnot(n);try{return r.IsEmpty()?null:r.GetDict().GetObjNum()}finally{r.delete()}})).filter((function(e){return!!e}))}},{key:"normalize",value:function(){return this.parsedPage().then((function(e){var t=e.GetAnnotCount(),n=Array(t).fill(void 0).map((function(t,n){return e.GetAnnot(n)})),r=n.map((function(e){if(!e.IsEmpty())return e.GetUniqueID().toString()}));r.forEach((function(e,t){e&&(r.indexOf(e,t+1)>-1&&n[t].SetUniqueID((0,m.Z)()))}))}))}},{key:"getAnnotObjNumByNM",value:function(e){return this.parsedPage().then((function(t){for(var n=t.GetAnnotCount(),r=0;r<n;r++){var i=t.GetAnnot(r);if(!i.IsEmpty()&&i.GetUniqueID().toString()===e)return i.GetDict().GetObjNum()}return 0}))}},{key:"addImage",value:function(e,t,n,r,i){var a=this,o=this.engine,s=y.Z.createImage(o,e);if(!s||s.IsEmpty())return Promise.resolve();var u=new o.PointF(t.x,t.y);return this.parsedPage().then((function(e){var c=e.GetRotation().value;switch(c){case 1:case 3:var l=r;r=n,n=l}var d;e.AddImage(s,0,u,n,r,!0);a.notifyTouchup(e),e.StartParse(0,null,!0);var f=e.GetLastGraphicsObjectPosition(o.GraphicsObjectType.e_TypeImage);if(d=e.GetGraphicsObject(f),0!==c||0!==i){var h=c*Math.PI/2+i/180*Math.PI,g=d.GetRect(),p={x:(g.right+g.left)/2,y:(g.top+g.bottom)/2},v=d.GetMatrix();v.RotateAt(h,-p.x,-p.y,0),d.SetMatrix(v),g=d.GetRect(),v.Translate(t.x-g.left,t.y-g.bottom,0),d.SetMatrix(v),e.GenerateContent(),e.StartParse(0,null,!0),v.delete(),f=e.GetLastGraphicsObjectPosition(o.GraphicsObjectType.e_TypeImage),d=e.GetGraphicsObject(f)}return d&&a.JR.graphicsObjectManager.get(d,e,a)}))}},{key:"notifyTouchup",value:function(e){if(this.pdfDoc.touchup){var t=new this.engine.TouchupEditorPageArray,n=this.engine.TUEditorPage.Create(e,100);t.Add(n),this.pdfDoc.touchup.jrMgr.OnPageContentChange(t),n.delete(),t.delete()}}},{key:"markRedactAnnot",value:function(e,t){var n=this,r=this.engine;return this.pdfDoc.getRedaction().then((function(i){return n.c_pagePromise.then((function(e){return[i,e]})).then((function(i){var a,o=i[0],s=i[1];try{for(var u=new r.RectFArray,c=0,l=e.length;c<l;c++){var d=e[c],f=new r.CFX_FloatRect(d.left,d.bottom,d.right,d.top);u.Add(f),f.delete()}if(a=o.MarkRedactAnnot(s,u),t){var h,g=t.name,p=t.color,v=t.applyFillColor,_=t.isAutoFontSize,y=t.textColor,S=t.textSize,b=t.fontName,D=t.justification,I=t.isRepeat,A=t.overlayText,C=t.redactionCode,k=t.defaultAppearance;g||(g=(0,m.Z)()),a.SetUniqueID((0,P.Dp)(r,g)),void 0!==p&&a.SetBorderColor(p),void 0!==v&&a.SetApplyFillColor(v),void 0!==_&&a.SetAutoFontSize(_);var E=[r.StandardID.e_StdIDCourier,r.StandardID.e_StdIDCourierB,r.StandardID.e_StdIDCourierBI,r.StandardID.e_StdIDCourierI,r.StandardID.e_StdIDHelvetica,r.StandardID.e_StdIDHelveticaB,r.StandardID.e_StdIDHelveticaBI,r.StandardID.e_StdIDHelveticaI,r.StandardID.e_StdIDTimes,r.StandardID.e_StdIDTimesB,r.StandardID.e_StdIDTimesBI,r.StandardID.e_StdIDTimesI,r.StandardID.e_StdIDSymbol,r.StandardID.e_StdIDZapfDingbats];if(void 0!==b){var G=(0,x.T2)(b);h=G?new r.Font(E[G]):new r.Font((0,P.Dp)(r,b),0,r.Charset.e_CharsetANSI,0)}else h=new r.Font(r.StandardID.e_StdIDHelvetica);y=void 0===y?k.textColor:y,S=void 0===S?k.textSize:parseFloat(S);var T=(h?r.DefAPFlags.e_FlagFont.value:0)|r.DefAPFlags.e_FlagTextColor.value|(S>0?r.DefAPFlags.e_FlagFontSize.value:0),F=new r.DefaultAppearance(T,h,S,y||16711680);if(a.SetDefaultAppearance(F),"0"===D&&a.SetOverlayTextAlignment(r.Alignment.e_AlignmentLeft),"1"===D&&a.SetOverlayTextAlignment(r.Alignment.e_AlignmentCenter),"2"===D&&a.SetOverlayTextAlignment(r.Alignment.e_AlignmentRight),void 0!==I&&a.SetRepeat(I),void 0!==A&&a.SetOverlayText((0,P.Dp)(r,A)),C){var R=new r.Int32Array;C.forEach((function(e){return R.Add(e)})),a.SetOverlayCode(R)}else a.RemoveOverlayCode()}else a.SetUniqueID((0,P.Dp)(r,(0,m.Z)()));w.Z.updateModifyTime(r,a),a.SetTitle((0,P.Dp)(r,n.JR.userName)),a.ResetAppearanceStream(),u.delete()}catch(e){return isNaN(e)||(e=r.getErrorCode(e)),console.log(e),[]}var M=a.GetPopup();return[n.annotManager.get(a,n,a.GetIndex()),n.annotManager.get(M,n,M.GetIndex())]})).then((function(e){return n.update().then((function(t){return e.forEach((function(e){n._setAnnotIdAt(e.getId(),e.getIndex())})),e}))}))}))}},{key:"addAnnotGroup",value:function(e,t){var n=this;return this.parsedPage().then((function(r){var i=n.engine,a=new i.MarkupArray,o=[];return e.forEach((function(e,s){s!==t&&(e.noPopup=!0);var u=(0,p.M)(i,e.type),c=v(i,e.rect),l=r.AddAnnot(u,c),d=new i.Markup(l);a.Add(d),d.delete();var f=n.annotManager.get(l,n,l.GetIndex());o=o.concat(f.create(e))})),r.SetAnnotGroup(a,t),a.delete(),o})).then((function(e){return e.forEach((function(e){n._setAnnotIdAt(e.getId(),e.getIndex())})),e}))}},{key:"getTextRects",value:function(e){var t=this;return Promise.all(e.map((function(e){return t.getTextRectsAtRect(e)}))).then((function(e){return e.reduce((function(e,t){return e.concat(t)}),[])}))}},{key:"getTextRectsAtRect2",value:function(e){var t=this;return e.right-e.left<.5||e.top-e.bottom<.5?Promise.resolve([]):this.parsedPage().then((function(n){try{var r=t.engine.CFX_FloatRect,i=t.getNormalTextPageSync(),a=[],o=i.GetIndexAtPos((e.right+e.left)/2,(e.bottom+e.top)/2+2,2),s=i.GetTextRectCount(o,2),u=0;s>0&&(u=i.GetBaselineRotation(0).value);var c=i.GetTextInRect(new r(e.left,e.bottom,e.right,e.top)).toString();return a.push({left:e.left,right:e.right,top:e.top,bottom:e.bottom,rotation:u,text:c,texts:c}),i.delete(),a}catch(e){isNaN(e)||(e=t.engine.getErrorCode(e)),console.warn(e)}}))}},{key:"getTextRectsAtRect",value:function(e){var t=this;return e.right-e.left<.5||e.top-e.bottom<.5?Promise.resolve([]):this.parsedPage().then((function(n){try{var r=t.engine.CFX_FloatRect,i=t.getNormalTextPageSync(),a=i.GetTextRectArrayByRect(new r(e.left,e.bottom,e.right,e.top)),o=[],s=[],u=a.GetSize();if(0==u)return i.delete(),o;for(var c=0;c<u;c++){var l=a.GetAt(c),d=l.left,f=l.right,h=i.GetIndexAtPos((l.right+l.left)/2,(l.bottom+l.top)/2+2,2),g=i.GetTextRectCount(h,2),p=0;g>0&&(p=i.GetBaselineRotation(0).value);var v=i.GetIndexAtPos(d,l.top,4),_=i.GetIndexAtPos(f,l.bottom,4);-1===_&&(_=i.GetIndexAtPos(l.right,l.bottom,4));var m=i.GetChars(v,_-v+1).toString();s.push(m),o.push({left:l.left,right:l.right,top:l.top,bottom:l.bottom,rotation:p,text:m})}return o.length>0&&(o[0].texts=s.join("\r\n")),i.delete(),o}catch(e){isNaN(e)||(e=t.engine.getErrorCode(e)),console.warn(e)}}))}},{key:"getTextContinuousRectsAtRect",value:function(e){var t=this;return e.right-e.left<.5||e.top-e.bottom<.5?Promise.resolve([]):this.getTextRectsAtRect(e).then((function(e){try{var n=e.length;if(n<2)return e;var r=e[0],i=e[n-1],a=t.engine,o=t.getNormalTextPageSync(),s=Math.min((r.top-r.bottom)/2,3),u=new a.PointF(r.left+s,r.top-s),c=o.GetIndexAtPos(u.x,u.y,s);if(u.delete(),c<0)return o.delete(),e;var l,d=Math.min((i.top-i.bottom)/2,3),f=new a.PointF(i.right-d,i.bottom+d),h=o.GetIndexAtPos(f.x,f.y,d);if(f.delete(),h<0)return o.delete(),e;h<c&&(l=c,c=h,h=l);for(var g=[],p=0,v=o.GetTextRectCount(c,h-c+1);p<v;p++){var _=o.GetTextRect(p);g[p]={left:_.left,top:_.top,right:_.right,bottom:_.bottom,rotation:o.GetBaselineRotation(p).value}}return o.delete(),g}catch(e){isNaN(e)||(e=t.engine.getErrorCode(e)),console.warn(e)}}))}},{key:"getTextByIndex",value:function(e,t){var n=this;return this.parsedPage().then((function(r){var i=n.getNormalTextPageSync();e=e<0?0:e;var a=-1==t?-1:t-e+1;return-1!=t&&e>t&&(a=e-t+1,e=t),i.GetChars(e,a).toString()}))}},{key:"getTextContinuousRectsAtPoints",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return this.pdfDoc.canGetXFA()?Promise.resolve([]):this.parsedPage().then((function(s){var u=r.getNormalTextPageSync(),c=u.GetIndexAtPos(e[0],e[1],n);-1!==c&&(i=c);var l=u.GetIndexAtPos(t[0],t[1],n);if(-1!==l&&(a=l),-1===a&&-1===i){var d={};return d.left=Math.min(e[0],t[0]),d.right=Math.max(e[0],t[0]),d.top=Math.max(e[1],t[1]),d.bottom=Math.min(e[1],t[1]),u.delete(),r.getTextRectsAtRect(d)}-1!==i&&-1===a&&(a=i),-1!==a&&-1===i&&(i=a),o&&(i=u.CharIndexFromTextIndex(i),a=u.CharIndexFromTextIndex(a));var f=r.getResultArrayFromTextStartAndEnd(u,i,a);return u.delete(),f}))}},{key:"getTextIndexAtPoint",value:function(e,t){var n=this;return this.parsedPage().then((function(r){var i=n.getNormalTextPageSync(),a=i.GetIndexAtPos(e[0],e[1],t);return i.delete(),a}))}},{key:"getTextRectsByIndexes",value:function(e,t){var n=this;return this.parsedPage().then((function(r){for(var i=n.getNormalTextPageSync(),a=[],o=-1==t?-1:t-e+1,s=i.GetTextRectCount(e,o),u=0;u<s;u++){var c=i.GetTextRect(u),l=c.left,d=c.top,f=c.right,h=c.bottom;a.push({left:l,top:d,right:f,bottom:h,rotation:i.GetBaselineRotation(u).value})}return a.length&&(a[0].start=e,a[0].end=t,a[0].text=i.GetChars(e,o).toString()),i.delete(),a}))}},{key:"getTextContinuousCharsAtRect",value:function(e,t){var n=this;return this.getTextRectsAtRect(e).then((function(r){var i=r.length;if(!i)return"";var a=r[0],o=r[i-1],s=n.engine,u=n.getNormalTextPageSync();try{if(t){var c=new s.CFX_FloatRect(e.left,e.bottom,e.right,e.top),l=u.GetTextInRect(c).toString();return c.delete(),l}var d=Math.min((a.top-a.bottom)/2,3),f=a.left+d,h=a.top-d,g=u.GetIndexAtPos(f,h,d);if(g<0)return"";var p,v=Math.min((o.top-o.bottom)/2,3),_=o.right-v,m=o.bottom-v,y=u.GetIndexAtPos(_,m,v);return y<0&&(y=u.GetIndexAtPos(_,m+v,v)),y<0?"":(y<g&&(p=g,g=y,y=p),u.GetChars(g,y-g+1).toString())}finally{u.delete()}}))}},{key:"getResultArrayFromTextStartAndEnd",value:function(e,t,n){var r,i=[],a=t,o=n;n<t&&(t=(r=[n,t])[0],n=r[1]);for(var s=e.GetTextRectCount(t,n-t+1),u=0;u<s;u++){var c=e.GetTextRect(u),l=c.left,d=c.top,f=c.right,h=c.bottom;i.push({left:l,top:d,right:f,bottom:h,rotation:e.GetBaselineRotation(u).value})}var g=this.getSelectedRectArray(e,t,n);if(i.length&&g.length&&i.length===g.length)for(var p=0;p<i.length;p++)0==i[p].rotation||2==i[p].rotation?(i[p].top=g[p].top,i[p].bottom=g[p].bottom):(i[p].left=g[p].left,i[p].right=g[p].right);return i.length&&(i[0].start=a,i[0].end=o,i[0].text=e.GetChars(t,n-t+1).toString()),i}},{key:"getSelectedRectArray",value:function(e,t,n){for(var r=[],i=t;i<n+1;){var a=e.GetLineStart(i),o=e.GetLineEnd(i);-1===a&&(a=i),-1===o&&(o=i);var s=e.GetRectArray(a,o-a+1),u=o;u>n&&(u=n);var c=e.GetRectArray(i,u-i+1);if(s.GetSize())for(var l=s.GetAt(0),d=0;d<c.GetSize();d++){var f=c.GetAt(d),h=f.left,g=f.top,p=f.right,v=f.bottom;g=l.top,v=l.bottom,r.push({left:h,top:g,right:p,bottom:v})}i=u+1}return r}},{key:"getDoubleClickTextRectAtPoint",value:function(e,t){var n=this;return this.parsedPage().then((function(r){var i=[];try{var a=n.getNormalTextPageSync(),o=(0,c._)(e,2),s=o[0],u=o[1],d=a.GetWordAtPos(s,u,t);if(!d.IsEmpty())for(var f=d.GetSegmentCount(),h=0;h<f;h++){var g,p=d.GetSegmentStart(h),v=d.GetSegmentEnd(h);(g=i).push.apply(g,(0,l._)(n.getResultArrayFromTextStartAndEnd(a,p,v)))}a.delete(),a=null}catch(e){var _=n.engine.getErrorCode(e);console.error(_)}return i}))}},{key:"getTextSearch",value:function(e,t){var n=this;return this.parsedPage().then((function(r){try{var i=n.engine;t=t||i.SearchFlags.e_SearchNormal.value;var a=n.getNormalTextPageSync(),s=new i.WString(e),u=new i.TextSearch(a);return u.SetPattern(s),u.SetSearchFlags(t),{textSearch:u,textPage:a,strPattern:s}}catch(e){var c=(0,o._)(e,n.engine.ErrorCode)?e:n.engine.getErrorCode(e);V.error(c)}}))}},{key:"getAnnotTextSearch",value:function(e,t,n){var r=this;return this.parsedPage().then((function(i){try{var a=r.engine;n=n||a.SearchFlags.e_SearchNormal.value;var s=new a.WString(t);return r.getNativeAnnotById(e).then((function(e){var t=new a.TextSearch.CreateFromAnnot(e);return t.SetPattern(s),t.SetSearchFlags(n),{textSearch:t,strPattern:s}}))}catch(e){var u=(0,o._)(e,r.engine.ErrorCode)?e:r.engine.getErrorCode(e);V.error(u)}}))}},{key:"update",value:function(){var e=this;return this.resetBitmapCache(),this.c_pagePromise.then((function(t){return e.notifyTouchup(t),e.annotationIDArray=e._prepareAnnotations(e.page),{index:e.index,annotIds:e.annotationIDArray}}))}},{key:"flatten",value:function(e){var t=this,n=this.engine,r=this.pdfDoc.touchup;return this.c_pagePromise.then((function(i){for(var a=i.GetAnnotCount(),o=[],s=0;s<a;s++){var u=i.GetAnnot(s);20==u.GetType().value&&o.push(u.GetDict().GetObjNum())}if(3==e&&(e=0),r&&i.IsParsed()){i.GenerateContent();var c=new n.TouchupEditorPageArray,l=n.TUEditorPage.Create(i,100);c.Add(l),r.jrMgr.OnPageContentChange(c)}return i.Flatten(!0,e),t.reParsePage(),t.annotationIDArray=t._prepareAnnotations(i),o}))}},{key:"getGraphicsObjectAtPoint_s",value:function(e,t,n){var r=this,i=(0,c._)(e,2),a=i[0],o=i[1];return this.parsedPage().then((function(e){var i=r.engine,s=i.GraphicsObjectType,u=new i.PointF(a,o),c=Promise.all([e.GetGraphicsObjectAtPoint(u,t,s.values[n]),e]);return u.delete(),c})).then((function(e){var i=(0,c._)(e,2),s=i[0],u=i[1];if(s){var l=r.JR.graphicsObjectManager.get(s,u,r);if(5===s.GetType().value)return l.getGraphicsObjectAtPoint(a,o,n,r.JR.graphicsObjectManager);if(0===n){if(2!==s.GetType().value)return l;if(l.isPointInLine(a,o,t))return l}}}))}},{key:"getGraphicsObjectsCount",value:function(){return this.parsedPage().then((function(e){return e.GetGraphicsObjectCount()}))}},{key:"getGraphicsObjectByIndex",value:function(e){var t=this;return this.parsedPage().then((function(n){if(e>=n.GetGraphicsObjectCount())return null;var r=n.GetGraphicsObjectBI(e);return t.JR.graphicsObjectManager.get(r,n,t)}))}},{key:"getGraphicsObjectsInRect",value:function(e,t,n){var r=this,i=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);i.Inflate(t,t);var a=[],o=this.JR.graphicsObjectManager;return this.parsedPage().then((function(e){for(var t=0,s=e.GetGraphicsObjectCount();t<s;t++){var u=e.GetGraphicsObjectBI(t),c=u.GetRect(),d=(u=o.get(u,e,r)).getType();if(-1!==d&&((n==d||0==n||5==d)&&i.Contains(c))){if(0==n&&d<4){a.push(u);continue}if(0==n&&d>3)continue;var f;if(5!=n&&5==d)(f=a).push.apply(f,(0,l._)(u.getGraphicsObjectsInRect(i,n,o)));else a.push(u)}}return i.delete(),a}))}},{key:"getGraphicsObjectsByRect",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[],o=this.JR.graphicsObjectManager;return this.parsedPage().then((function(s){for(var u=0,c=s.GetGraphicsObjectCount();u<c;u++){var d=new r.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);d.Inflate(t,t);var f=s.GetGraphicsObjectBI(u),h=f.GetRect(),g=(f=o.get(f,s,r)).getType();if(-1!==g&&(n==g||0==n||5==g)){var p=!1;if(i?p=d.Contains(h):(d.Intersect(h),p=h.Contains(d)),p){if(0==n&&g<=4){a.push(f);continue}if(0==n&&g>3)continue;var v;if(5!=n&&5==g)(v=a).push.apply(v,(0,l._)(f.getGraphicsObjectsInRect(d,n,o)));else a.push(f)}d.delete()}}return a}))}},{key:"getGraphicsObjectAtPoint",value:function(e,t,n){var r=this,i=(0,c._)(e,2),a=i[0],o=i[1];return this.parsedPage().then((function(e){var i=r.engine,s=i.GraphicsObjectType,u=new i.PointF(a,o),c=Promise.all([e.GetGraphicsObjectsAtPoint(u,t,s.values[n]),e]);return u.delete(),c})).then((function(e){return r.checkPathObjects(e,a,o,n,t)}))}},{key:"checkPathObjects",value:function(e,t,n,r,i){var a=this,s=(0,c._)(e,2),u=s[0],l=s[1];if(u){var d,f;(0,o._)(u,Array)?(d=u.length,f=function(e){return u[e]}):(d=u.GetSize(),f=function(e){return a.JR.graphicsObjectManager.get(u.GetAt(e),l,a)});for(var h=d-1;h>=0;h--){var g=f(h);if(5===g.getType()){var p=this.checkPathObjects([g.getGraphicsObjectsAtPoint(t,n,r,i,this.JR.graphicsObjectManager),l],t,n,i);if(p)return p}else{if(2!==g.getType())return g;if(g.isPointInLine(t,n,i))return g}}}}},{key:"addWatermark",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.engine,a=this.doc,o=r.type,s=r.watermarkSettings,u=(s=Object.assign({position:"Center",offsetX:0,offsetY:0,flags:2,scaleX:1,scaleY:1,rotation:45,opacity:100},s))&&b.createWatermarkSettings(i,s.position,s.offsetX,s.offsetY,s.flags,s.scaleX,s.scaleY,s.rotation,s.opacity);if("bitmap"===o.toLocaleLowerCase())e=S.createBitmapWatermark(i,a,r.bitmap,u);else if("text"===o.toLocaleLowerCase()){var c=r.watermarkTextProperties;t=(c=Object.assign({font:0,fontSize:20,color:0,fontStyle:"normal",lineSpace:10,alignment:"center"},c))&&D.createWatermarkTextProperties(i,c.font,c.fontSize,c.color,c.fontStyle,c.lineSpace,c.alignment),e=S.createTextWatermark(i,a,r.text,t,u)}return this.parsedPage().then((function(t){try{var r;return e&&e.InsertToPage(t),1===s.flags&&(n.annotationIDArray=n._prepareAnnotations(t),r=n.annotManager.get(t.GetAnnot(0),n,0)),n.reParsePage().then((function(n){return t.GenerateContent(),1===s.flags?r.toJson():e}))}catch(e){isNaN(e)||(e=i.getErrorCode(e)),console.warn(e)}}))}},{key:"pasteAnnot",value:function(e,t){var n=this.engine,r=e.GetRect(),i=r.Width(),a=r.Height();r.left=t.x,r.top=t.y,r.right=t.x+i,r.bottom=t.y-a;var o=e.GetType(),s=this.page.GetWidth(),u=this.page.GetHeight();r.right>s&&(r.right=s-1,r.left=r.right-i),r.top>u&&(r.top=u-1,r.bottom=r.top-a);var c=this.page.AddAnnot(o,r),l=(0,P.n5)(n,"AP");e.GetDict().GetElement(l)||e.ResetAppearanceStream(),n.copyAnnot(c,e,this.doc);var d=this.JR.annotManager.get(c,this,c.GetIndex());c=d.annot,w.Z.updateModifyTime(n,c),d.setCreateDateTime&&d.setCreateDateTime(new Date);var f=[d];if(c.IsMarkup()){var h=new n.Markup(e);X(d,h,f),h.delete()}var g=n.AnnotType,p=c.GetType();if(c.IsMarkup()&&p!=g.e_FreeText&&p!=g.e_Sound){var v=this.page.AddAnnot(g.e_Popup,c.GetRect()),_=new n.Markup(c),y=new n.Popup(v);_.SetPopup(y),f.push(this.JR.annotManager.get(v,this,v.GetIndex())),y.delete(),_.delete()}if(f.forEach((function(e){return e.setUniqueId((0,m.Z)())})),o==g.e_FreeText){var S=new n.FreeText(e),b=new n.FreeText(c);b.SetDefaultAppearance(S.GetDefaultAppearance()),b.delete(),S.delete()}return this.reloadAnnots(),f}},{key:"calcContentBBox",value:function(e){return this.parsedPage().then((function(t){var n={},r=t.CalcContentBBox(e);return r&&(r.Normalize(),n={left:r.left,bottom:r.bottom,right:r.right,top:r.top}),n}))}},{key:"setSize",value:function(e,t){this.page.SetSize(e,t)}},{key:"setBox",value:function(e,t){var n=this.engine,r=new(0,n.CFX_FloatRect)(t.left,t.bottom,t.right,t.top);this.page.SetBox(n.BoxType.values[e],r)}},{key:"getBox",value:function(e){var t,n=this.page.GetBox(this.engine.BoxType.e_MediaBox);if(e===this.engine.BoxType.e_MediaBox.value)t=n;else{var r=this.page.GetBox(this.engine.BoxType.e_CropBox);if(r=r.IsEmpty()?n:r,e===this.engine.BoxType.e_CropBox.value)t=r;else if(e===this.engine.BoxType.e_TrimBox.value){var i=this.page.GetBox(this.engine.BoxType.e_TrimBox);t=i=i.IsEmpty()?r:i}else if(e===this.engine.BoxType.e_ArtBox.value){var a=this.page.GetBox(this.engine.BoxType.e_ArtBox);t=a=a.IsEmpty()?r:a}else if(e===this.engine.BoxType.e_BleedBox.value){var o=this.page.GetBox(this.engine.BoxType.e_BleedBox);t=o=o.IsEmpty()?r:o}}return t?(t.Normalize(),{left:t.left,bottom:t.bottom,right:t.right,top:t.top}):{}}},{key:"getAnnotsByObjectNumber",value:function(e){}},{key:"addAnnot",value:function(e){var t=this,n=(0,h.dD)(),r=e;return this.parsedPage().then((function(n){var r=t.engine,i=(0,p.M)(r,e.type),a=v(r,e.rect),o=n.AddAnnot(i,a),s=t.annotManager.get(o,t,n.GetAnnotCount()-1).create(e);return s||(n.RemoveAnnot(o),s=[]),s})).then((function(e){var n,i=[];return e.forEach((function(e){r.isCutPasteCreate&&e.getType()===r.type&&t._setAnnotInfoForCutPaste(e,r,i),t._setAnnotIdAt(e.getId(),e.getIndex())})),(n=e).push.apply(n,(0,l._)(i)),e}),(function(e){return isNaN(e)||(e=t.engine.getErrorCode(e)),n.reject(e),n.promise}))}},{key:"_setAnnotInfoForCutPaste",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;["borderColor","borderInfo","content","iconName","intent","opacity","subject","title"].forEach((function(n){var r="set".concat(n[0].toUpperCase()).concat(n.substr(1));e[r]&&e[r](t[n])}));var r=t.customEntries,i=void 0===r?{}:r,a=t.repliesSummary,o=void 0===a?[]:a;if(Object.keys(i).length)for(var s in i)Object.hasOwnProperty.call(i,s)&&e.setDictionaryEntry&&e.setDictionaryEntry(s,i[s]);o&&o.length&&o.forEach((function(t){if(e.addReplyContent){var r=e.addReplyContent(t.content);n.push(r)}}))}},{key:"getAnnotIdArrayByOrder",value:function(){var e=this;return this.parsedPage().then((function(t){var n=[],r=new e.engine.TabOrderMgr(t);r.Reload();for(var i=r.GetFirstAnnot();!i.IsEmpty();)n.push(i.GetDict().GetObjNum()),i=r.GetNextAnnot(i);return n}))}},{key:"getPageDictionary",value:function(){var e=this.pdfDoc.dictionaryMap[this.id];if(e)return e.toJson();var t=this;return this.parsedPage().then((function(e){var n=e.GetDict(),r=new k.Z(t.pdfDoc);return t.pdfDoc.updateDictCache(n,r),t.pdfDoc.updateDictMap(t.id,r),r.toJson()}))}},{key:"createWebLinks",value:function(e){var t=this,n=new this.engine.CDP_WebLinksTransferLayer,r=0,i=[],a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,d=n.CreateWebLinks(this.doc,l);d>0&&i.push(l),r+=d}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i.reduce((function(e,n){return e.then((function(){return t.pdfDoc.getPageByIndex(n)})).then((function(e){return e.parsedPage().then((function(t){t.UpdateAnnotList(),e.reloadAnnots()}))}))}),Promise.resolve()).then((function(){return r}))}},{key:"removeWebLinks",value:function(e){var t=this,n=new this.engine.CDP_WebLinksTransferLayer,r=0,i=[],a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,d=n.RemoveAllLinksInPage(this.doc,l);d>0&&i.push(l),r+=d}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i.reduce((function(e,n){return e.then((function(){return t.pdfDoc.getPageByIndex(n)})).then((function(e){return e.parsedPage().then((function(t){t.UpdateAnnotList(),e.reloadAnnots()}))}))}),Promise.resolve()).then((function(){return r}))}},{key:"deleteDestination",value:function(e){var t=new this.engine.CNP_Destinations(this.doc),n=(0,P.Dp)(this.engine,e);return t.Delete(n),t.delete(),this.pdfDoc.getDestinationsArray()}},{key:"renameDestination",value:function(e,t){var n=new this.engine.CNP_Destinations(this.doc),r=n.GetDestination((0,P.Dp)(this.engine,e)),i=n.Rename(r,(0,P.Dp)(this.engine,e),(0,P.Dp)(this.engine,t));return n.delete(),i}},{key:"createDestination",value:function(e,t){var n=new this.engine.CNP_Destinations(this.doc),r=new this.engine.WString(e),i=new this.engine.FloatArray;n.New(r,this.engine.ZoomMode.e_ZoomFitPage,t,i);var a=[],o={title:e,page:t};return a.push(o),r.delete(),i.delete(),a}},{key:"resetDestination",value:function(e,t){var n=new this.engine.CNP_Destinations(this.doc),r=new this.engine.WStringArray,i=new this.engine.Int32Array,a=new this.engine.Int32Array;n.GetAllDestinations(r,i,a);var o=new this.engine.WString(e),s=new this.engine.FloatArray;return n.SetDest(o,this.engine.ZoomMode.e_ZoomFitPage,t,s),r.RemoveAll(),a.RemoveAll(),this.pdfDoc.getDestinationsArray()}},{key:"addAnnotObjects",value:function(e){var t=this,n=this.engine,r=this.annotationIDArray.length,i=this.page.GetDict(),a=(0,P.n5)(n,"Annots"),o=i.GetElement(a);o||(o=n.PDFArray.Create(),i.SetAt(a,o));var s=o.GetDirectObject().GetArray();e.forEach((function(e){s.AddElement(n.PDFObject.CreateReference(t.doc,e))})),this.page.UpdateAnnotList(),this.reloadAnnots();for(var u=[],c=r;c<this.page.GetAnnotCount();c++){var l=this.page.GetAnnot(c);u.push(l.GetDict().GetObjNum())}return this.getAnnots(u)}},{key:"clearDesignerAssitCache",value:function(){this.designerCache&&(this.designerCache.forEach((function(e){e.bitmap.isDeleted()||e.bitmap.delete()})),this.designerCache=[])}},{key:"getSuggestedFormDesignerRect",value:function(e){var t=this;return this.parsedPage().then((function(n){return t.fullyBitmap.getCurrentImageData().then((function(r){var i,a=new t.engine.PointF(e[0],e[1]),o=n.GetSuggestedRect(r.bitmap,r.matrix,a);return a.delete(),i=o&&!o.IsEmpty()?{left:o.left,right:o.right,top:o.top,bottom:o.bottom}:{left:0,right:0,top:0,bottom:0},o&&o.delete(),i}))}))}},{key:"getSnappedPoint",value:function(e,t){var n=this;if(!t||!Array.isArray(t)||0===t.length)return Promise.resolve(e);var r=0,i=this.engine.SnapPointFlags;return t.forEach((function(e){switch(e){case _.EndPoint:r|=i.e_FlagEndpoint.value;break;case _.MidPoint:r|=i.e_FlagMidpoint.value;break;case _.IntersectionPoint:r|=i.e_FlagIntersectionPoint.value;break;case _.NearestPoint:r|=i.e_FlagNearestPoint.value}})),0===r?Promise.resolve(e):this.parsedPage().then((function(t){var i,a,o,s,u;try{if(i=new n.engine.SnapPointMgr(t),a=new n.engine.PointF(e.x,e.y),(o=i.GetSnappedPointAtPos(a,r)).IsEmpty())return e;switch(u=o.GetType().value){case 1:u=_.EndPoint;break;case 2:u=_.MidPoint;break;case 3:u=_.IntersectionPoint;break;case 4:u=_.NearestPoint}return{x:(s=o.GetPoint()).x,y:s.y,type:u}}finally{i&&i.delete(),a&&a.delete(),o&&o.delete(),s&&s.delete()}}))}},{key:"getTextRectCount",value:function(){return this.getNormalTextPage().then((function(e){try{return e.GetTextRectCount(0,-1)}finally{e.delete()}}))}},{key:"getTextByRectIndex",value:function(e){if("number"!=typeof e)throw new Error("Text rect index must be number, but actual: ".concat(void 0===e?"undefined":(0,d._)(e)));if((e=Math.floor(e))<0)throw new Error("Text rect index must be greater than -1, but actual: ".concat(e));return this.getNormalTextPage().then((function(t){var n,r;try{var i=t.GetTextRectCount(0,-1);if(e>=i)throw new Error("Text rect index must be less than the total count of text rects(".concat(e,"), but actual ").concat(e,"."));return n=t.GetTextRect(e),{text:(r=t.GetTextInRect(n)).toString(),rect:{left:n.left,right:n.right,top:n.top,bottom:n.bottom}}}finally{n&&n.delete(),r&&r.delete(),t.delete()}}))}},{key:"getViewportRect",value:function(){return this.parsedPage().then((function(e){var t=e.GetViewPortBox();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom}}))}},{key:"getMeasureScaleRatio",value:function(){return this.parsedPage().then((function(e){var t=e.GetMeasureXScale(),n=e.GetMeasureXUnit().toString();return{scale:t,ratio:e.GetMeasureRatio().toString(),unit:n}}))}},{key:"setMeasureRatio",value:function(e,t){var n=this,r=t.unit,i=t.ratio,a=t.scale;return this.parsedPage().then((function(t){return t.SetCalibration(e,(0,P.n5)(n.engine,r),(0,P.n5)(n.engine,i),a)})).then((function(e){for(var t=[],n=0;n<e.GetSize();n++){var r=e.GetAt(n);t.push(r)}return t}))}},{key:"getCanonicalString",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var r=new this.engine.WString(e),i=this.engine.TextSearchUtils.CanonicalFindText(r,t,n),a=i.canonical_text?i.canonical_text.toString():"";return r.delete(),a}}},{key:"search",value:function(e,t,n){var i=this;return(0,r._)((function(){var r;return(0,f.Jh)(this,(function(a){switch(a.label){case 0:return i.pdfDoc.isDynamicXFA()?[2,[]]:(r=!t.wholeWordsOnly&&!t.caseSensitive&&t.stemming,t.regExp?[2,i.regFind(e,t,n)]:[4,i._getPage(i.index)]);case 1:return a.sent(),i,[2,i.getNormalTextPage(1).then((function(a){var o=a.GetCharCount(),u=a.GetChars(0,o).toString(),c=u.normalize(),l=u,d=null;if(t.isIgnoreDiacritics||t.isIgnoreAsia){var f=new i.engine.WString(l),h=i.engine.TextSearchUtils.CanonicalFindText(f,t.isIgnoreAsia,t.isIgnoreDiacritics);l=h.canonical_text.toString();var g=h.text_index_of_len_array,p=[];d=[];for(var v=0;v<=g.GetSize();v++)p[v]=0===v?0:p[v-1]+g.GetAt(v-1),d[p[v]]=v;for(var _=0;_<d.length;_++)void 0===d[_]&&(d[_]=d[_-1]);f.delete()}t.caseSensitive||(l=l.toLowerCase());for(var m=l.normalize(),y=[0],S=1;S<m.length;S++){var b=y[S-1];l[S+b]==m[S]?y[S]=b:y[S]=b+1}l=m;var D={},P=function(e,n){var r=a.CharIndexFromTextIndex(e),i=a.CharIndexFromTextIndex(e+n.length),o=a.GetChars(e,n.length).toString();t.caseSensitive||(o=o.toLowerCase());var s=a.GetChars(r,i-r).toString();t.caseSensitive||(s=s.toLowerCase());var u=!1;return o===n?u=!0:s==n&&(e=r,u=!0),{pos:e,isFind:u}};return e.forEach((function(e){var o=function(){var o=i.getCanonicalString(l[p-1]),c=i.getCanonicalString(l[p+f.length]),g=r?f.length:e.length;if(t.wholeWordsOnly&&(/[0-9a-zA-Z]/.test(o)&&void 0!==o||/[0-9a-zA-Z]/.test(c)&&void 0!==c))return p=l.indexOf(f,p+1),"continue";var v=d?d[p+y[p]]:p+y[p];v=P(v,r?f:e).pos;var _=a.GetChars(v,1).toString();t.caseSensitive||(_=_.toLowerCase());var m=a.GetTextRectCount(v,g);if(m>0){for(var S=[],b=!0,I=0;I<m;I++){var A=a.GetTextRect(I);n&&b&&!i.hasRedactAnnot(A)&&(b=!1),S.push({left:A.left,right:A.right,top:A.top,bottom:A.bottom})}var w=0,C=0;if(d){w=(0,O.Tg)(a,v).normalize();var k=p+g;k=d?d[k+y[k]]:k+y[k],k=P(k,r?f:e).pos,C=(0,O.xF)(a,k).normalize();0,D[d[p]]=(0,s._)({startText:w,endText:C,word:u.substr(v,k-v).normalize(),rects:S,type:"pageText",charIndex:d[p],isRedacted:b,pageIndex:i.page.GetIndex()},{})}else{w=(0,O.Tg)(a,p),C=(0,O.xF)(a,p+g);0,D[p]=(0,s._)({startText:w,endText:C,word:e,rects:S,type:"pageText",charIndex:p,isRedacted:b,pageIndex:i.page.GetIndex()},{})}if(r){var E=h.next();E.done?p=-1:(p=E.value.index,f=E.value.oriWord)}else{var G=p,T=p,F=!0;for(p=l.indexOf(f,p+f.length);F&&p<l.length;){var R=P(p,f);R.isFind&&R.pos<=G?(T++,p=l.indexOf(f,T+f.length)):R.isFind?(p=R.pos,F=!1):(T++,p=T)}}}else p=-1},f=e;t.caseSensitive||(f=f.toLowerCase()),(t.isIgnoreDiacritics||t.isIgnoreAsia)&&(f=i.getCanonicalString(f,t.isIgnoreAsia,t.isIgnoreDiacritics));for(var h,g=0,p=l.indexOf(f,g),v=!0;v&&p<l.length;){var _=P(p,f);_.isFind?(p=_.pos,v=!1):(g++,p=g)}if(r){var m=(h=(0,O.nT)(i.engine,f,c)).next();m.done?p=-1:(p=m.value.index,f=m.value.oriWord)}for(;-1!=p&&p<l.length;)o()})),a.delete(),Object.keys(D).sort((function(e,t){return e-t})).map((function(e,t){return D[e].index=t,D[e]}))})).then((function(a){var o=[],s=0;return i.getAnnots().then((function(u){var c;return t.includeComments||(u=u.filter((function(e){return"widget"===e.getType()}))),u.length<1||(e.forEach((function(e){var a=e;(t.isIgnoreDiacritics||t.isIgnoreAsia)&&(a=i.getCanonicalString(a,t.isIgnoreAsia,t.isIgnoreDiacritics)),t.caseSensitive||(a=a.toLowerCase()),u.forEach((function(u,c){var l=u.annot,d=u.getType();if("widget"==d||!n){d=d[0].toUpperCase()+d.substr(1);var f=l.GetContent().toString(),h="annot";if("Widget"==d){h="form";var g=new i.engine.TextPage.CreateFromAnnot(l);if(g.IsEmpty())return;var p=g.GetCharCount();f=g.GetChars(0,p).toString(),g.delete()}var v=[f];l.IsMarkup()&&v.push(l.GetTitle().toString()),n||v.push(d);var _=!0,m=!1,y=void 0;try{for(var S,b=v[Symbol.iterator]();!(_=(S=b.next()).done);_=!0){var D=S.value;if("string"==typeof D){var P=D,I=null;if(t.isIgnoreDiacritics||t.isIgnoreAsia){var A=new i.engine.WString(D),w=i.engine.TextSearchUtils.CanonicalFindText(A,t.isIgnoreAsia,t.isIgnoreDiacritics);D=w.canonical_text.toString();var C=w.text_index_of_len_array,k=[];I=[];for(var E=0;E<=C.GetSize();E++)k[E]=0===E?0:k[E-1]+C.GetAt(E-1),I[k[E]]=E;for(var G=0;G<I.length;G++)void 0===I[G]&&(I[G]=I[G-1]);A.delete()}t.caseSensitive||(D=D.toLowerCase());var T=D.indexOf(a,0),F=void 0;if(r){var R=(F=(0,O.nT)(i.engine,e,P)).next();R.done?T=-1:(T=R.value.index,a=R.value.oriWord)}for(;-1!==T;){var M=D[T-1],x=D[T+a.length];if(t.wholeWordsOnly&&(/[0-9a-zA-Z]/.test(M)&&void 0!==M||/[0-9a-zA-Z]/.test(x)&&void 0!==x))if(r){var B=F.next();B.done?T=-1:(T=B.value.index,a=B.value.oriWord)}else T=D.indexOf(a,T+1);else{var N=void 0,L=void 0,j=void 0,U=l.GetRect(),W=!0;n&&W&&!i.hasRedactAnnot(U)&&(W=!1),I?(N=(0,O.Tg)(P,I[T]),L=(0,O.xF)(P,I[T]+a.length),j=I[T]):(N=(0,O.Tg)(P,T),L=(0,O.xF)(P,T+a.length),j=T);var H=[];if("Widget"==d){for(var z=new i.engine.TextPage.CreateFromAnnot(l),K=j,J=a.length,V=z.GetTextRectCount(K,J),Y=0;Y<V;Y++){var Z=z.GetTextRect(Y);H.push({left:Z.left,right:Z.right,top:Z.top,bottom:Z.bottom})}z.delete()}else H.push({left:U.left,right:U.right,top:U.top,bottom:U.bottom});if(o.push({index:++s,type:h,id:l.GetDict().GetObjNum(),pageIndex:i.page.GetIndex(),startText:N,endText:L,word:P.substr(j,a.length),charIndex:j,isRedacted:W,rects:H}),r){var q=F.next();q.done?T=-1:(T=q.value.index,a=q.value.oriWord)}else T=D.indexOf(a,T+1)}}}}}catch(e){m=!0,y=e}finally{try{_||null==b.return||b.return()}finally{if(m)throw y}}}}))})),(c=a).push.apply(c,(0,l._)(o))),a}))}))]}}))}))()}},{key:"regFind",value:function(e,t,n){var r=this;return e=e.map((function(e){var t=e.split("+++");return r.engine.TextSearchUtils.GetRegularExpression({value:Y[t[0]]},{value:Z[t[1]]}).toString()})),this.getNormalTextPage(1).then((function(i){var a=i.GetCharCount(),o=i.GetChars(0,a).toString();if(t.isIgnoreDiacritics||t.isIgnoreAsia){var s=new r.engine.WString(o),u=r.engine.TextSearchUtils.CanonicalFindText(s,t.isIgnoreAsia,t.isIgnoreDiacritics);o=u.canonical_text.toString(),s.delete()}var c={};e.forEach((function(e){var t=r;o.replaceAll(new RegExp(e,"gi"),(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];for(var s=r[0],u=(r[1],r[r.length-2]),l=i.GetTextRectCount(u,s.length),d=[],f=!0,h=0;h<l;h++){var g=i.GetTextRect(h);n&&f&&!t.hasRedactAnnot(g)&&(f=!1),d.push({left:g.left,right:g.right,top:g.top,bottom:g.bottom})}var p,v=u;if(v)for(var _=0;!/\s/.test(o[v]);){if(--v<=0){v--;break}if(!_){for(;/\s/.test(o[v]);)v--;_=1}}p=o.substr(v+1,u-v-1);var m;if((v=s.length+u+30)<o.length){for(var y=0;!(/\s/.test(o[v])||++v>=o.length);)if(!y&&/\s/.test(o[v])){for(;/\s/.test(o[v]);)v++;y=1}}else v=o.length;m=o.substr(s.length+u,v-s.length-u),c[u]={word:s,pageIndex:t.page.GetIndex(),type:"pageText",startText:p,charIndex:u,endText:m,rects:d,isRedacted:f}}))}));var l=Object.keys(c).sort((function(e,t){return e-t})).map((function(e,t){return c[e].index=t,c[e]})),d={},f=0;return r.getAnnots().then((function(n){return e.forEach((function(e){n.forEach((function(n,i){var a=n.annot,o=n.getType();o=o[0].toUpperCase()+o.substr(1);var s=a.GetContent().toString();if("Widget"==o||t.includeComments){var u=a.GetRect(),c=[];if("Widget"==o){var l=r,h=new r.engine.TextPage.CreateFromAnnot(a);if(h.IsEmpty())return;var g=h.GetCharCount();(s=h.GetChars(0,g).toString()).replaceAll(new RegExp(e,"gi"),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=(t[1],t[t.length-2]),o=(0,O.Tg)(s,i),u=(0,O.xF)(s,i+r.length);c=[];for(var g=h.GetTextRectCount(i,r.length),p=0;p<g;p++){var v=h.GetTextRect(p);c.push({left:v.left,right:v.right,top:v.top,bottom:v.bottom})}d[f++]={type:"form",id:a.GetDict().GetObjNum(),pageIndex:l.page.GetIndex(),word:r,rects:c,startText:o,endText:u}})),h.delete()}else{c=[{left:u.left,right:u.right,top:u.top,bottom:u.bottom}];[o,a.IsMarkup()&&a.GetTitle().toString(),s].forEach((function(t){if(!t)return!1;new RegExp(e,"g").test(t)&&(d[f++]={type:"annot",id:a.GetDict().GetObjNum(),pageIndex:r.page.GetIndex(),word:s,rects:c})}))}}}))})),Object.keys(d).sort((function(e,t){return e-t})).forEach((function(e,t){d[e].index=t,l.push(d[e])})),l}))}))}},{key:"markRedactByAnnotId",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.getNativeAnnotById(e).then((function(e){if(e){var o=new i.engine.TextPage.CreateFromAnnot(e);return i.markRedactEx(o,t,n,r,a)}return Promise.resolve()}))}},{key:"markRedact",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getNormalTextPage(1).then((function(a){return r.markRedactEx(a,e,t,n,i)}))}},{key:"markRedactEx",value:function(e,t,n,r){for(var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=e.GetTextRectCount(t,n),c=[],l=0;l<o;l++){var d=e.GetTextRect(l);c.push({left:d.left,right:d.right,top:d.top,bottom:d.bottom})}return this.markRedactAnnot(c).then((function(t){if(r.length){var n=t[0].annot;n.SetOverlayText((0,P.Dp)(i.engine,r));var o=i.engine,c=7;a.autoSize&&(n.SetAutoFontSize(a.isAutoSize),c=3);var l=new o.DefaultAppearance(c,new o.Font(o.StandardID.e_StdIDCourier),8,16711680);n.SetDefaultAppearance(l),n.ResetAppearanceStream()}return e.delete(),t.forEach((function(e){if("redact"==e.getType()){var t=a.defaultAppearance,n=(0,u._)(a,["defaultAppearance"]);e.setRedactAppearance((0,s._)({},t,n))}})),t}))}},{key:"handleGroupMarkup",value:function(e,t){var n=this;return this.getAnnots(e).then((function(e){if(t){var r=new n.engine.MarkupArray;return e.forEach((function(e){return r.Add(e.annot)})),n.page.SetAnnotGroup(r,0),e.reduce((function(e,t){return e[t.getId()]=t.toJson(),e}),{})}return e.reduce((function(e,t){return t.annot.Ungroup(),e[t.getId()]=t.toJson(),e}),{})}))}},{key:"hasRedactAnnot",value:function(e){for(var t=Math.max,n=Math.min,r=this.page.GetAnnotCount(),i=0;i<r;i++){var a=this.page.GetAnnot(i);if(27==a.GetType().value){var o=a.GetRect();if(t(o.left,e.left)<n(o.right,e.right)&&t(o.bottom,e.bottom)<n(o.top,e.top))return!0}}return!1}},{key:"_getTransitionDirectionByDic",value:function(e,t){var n=this.engine,r="",i=e.GetElement((0,P.n5)(n,"Dm")),a=e.GetElement((0,P.n5)(n,"M")),o=e.GetElement((0,P.n5)(n,"Di")),s=!0,u=!0;switch(a&&(u="O"!==a.GetString().toString()),i&&(s="V"!==i.GetString().toString()),t){case"Split":r=s?u?0:1:u?2:3;break;case"Blinds":r=s?0:1;break;case"Box":r=u?0:1;break;case"Wipe":case"Glitter":case"Push":case"Cover":case"Uncover":if(r=0,null===o)return r;r=o.GetInteger()/45%8;break;case"Fly":if(r=0,null===o)return r;r={0:0,90:1,180:2,270:3}[o.GetInteger()]||0}return r}},{key:"getPageTransition",value:function(){var e=this.page.GetDict(),t=this.engine,n=(0,P.n5)(t,"Trans"),r="",i="",a="",o=e.GetElement(n);if(o&&(o.GetType()==t.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o.GetType()==t.PDFObjectType.e_Dictionary)){var s=o.GetDict();if(s){var u=(0,P.n5)(t,"S"),c=s.GetElement(u),l=s.GetElement((0,P.n5)(t,"D"));l&&(a=l.GetFloat()),c&&(r=c.GetString().toString(),i=this._getTransitionDirectionByDic(s,r))}}return{transitionName:r,speed:a=a-.333328<.001&&a-.333328>-.001?2:a-.666656<.001&&a-.666656>-.001?1:0,direction:i}}},{key:"isScannedPage",value:function(){var e=this.page,t=this.engine.GraphicsObjectType.e_TypeAll;if(!e.IsParsed())return!1;if(e.GetGraphicsObjectCount()<=0)return!1;for(var n=e.GetLastGraphicsObjectPosition(t);n;){var r=e.GetGraphicsObject(n).GetType().value;if(2!==r&&3!==r)return!1;n=e.GetPrevGraphicsObjectPosition(n,t)}return!0}},{key:"getTextInRect",value:function(e,t){var n=e.left,r=e.right,i=e.top,a=e.bottom,o=this,s=new this.engine.CFX_FloatRect(n,a,r,i);switch(t){case 0:return u().then((function(e){return c().then((function(t){return s.delete(),{pageText:e,fieldsText:t}}))}));case 1:return u().then((function(e){return s.delete(),{pageText:e}}));case 2:return c().then((function(e){return s.delete(),{fieldsText:e}}))}function u(){return o.getNormalTextPage(1).then((function(e){var t=e.GetTextInRect(s).toString();return e.delete(),t})).catch((function(e){return null}))}function c(){return o.getAnnots().then((function(e){var t=[];return e.forEach((function(e){var n,r,i=e.annot,a=e.getType();if("Widget"==(a=a[0].toUpperCase()+a.substr(1))){var u=i.GetRect();if(n=u,(r=s).right<n.left||r.left>n.right||r.bottom>n.top||r.top<n.bottom)return;var c=new o.engine.TextPage.CreateFromAnnot(i),l={x:Math.max(s.left,u.left),y:Math.min(s.top,u.top)},d={x:Math.min(s.right,u.right),y:Math.max(s.bottom,u.bottom)},f=new o.engine.CFX_FloatRect(0,0,Math.abs(d.x-l.x),Math.abs(d.y-l.y));t.push({id:i.GetDict().GetObjNum(),text:c.GetTextInRect(f).toString()}),c.delete(),f.delete()}})),t})).catch((function(e){return null}))}}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.engine,a=this.page,o=new i.Matrix(e,0,0,t,n,r),s=a.Transform(o,!0);return a.StartParse(0,null,!0),o.delete(),s}},{key:"addFakeAnnot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.engine,r=e.GetObjNum(),i=this.fakeAnnots.find((function(e){return e.id==r}));if(i)for(var a in t){var o;(o=i[a]).push.apply(o,(0,l._)(t[a]))}else{var s=e.GetElement((0,P.n5)(n,"T")).GetString().toString(),u=e.GetElement((0,P.n5)(n,"Subtype")).GetString().toString().toLowerCase(),c=e.GetElement((0,P.n5)(n,"M")).GetString().toString().match(RegExp("D:(?<year>\\d{4})(?<month>\\d\\d)(?<day>\\d\\d)(?<hour>\\d\\d)(?<minute>\\d\\d)(?<second>\\d\\d)\\+(?<timezone>\\d\\d)'00'"));if(c){var d=c.groups;c=Date.UTC(d.year,d.month,d.day,d.hour,d.minute,d.second)}else c=Date.now();this.fakeAnnots.push(Object.assign({title:s,type:u,onlyDict:!0,isMarkup:!0,rect:{left:0,right:0,top:0,bottom:0},modifiedTimestamp:c,id:r,groupElementsSummary:[],repliesSummary:[],markedStatesSummary:[],reviewStatesSummary:[]},t))}}},{key:"getFakeAnnots",value:function(){return this.fakeAnnots}},{key:"emitPageBatchProcessor",value:function(e){if(e.kind===R.EDIT_GRAPHICS_OBJECT)return this.handleEditGraphicsObjectBatchProcessor(e);throw new Error("Unknown operation kind: ".concat(e.kind))}},{key:"handleEditGraphicsObjectBatchProcessor",value:function(e){switch(e.action){case"start":return this.batchProcessor.start(R.EDIT_GRAPHICS_OBJECT);case"flush":return this.batchProcessor.flush(R.EDIT_GRAPHICS_OBJECT);case"end":return this.batchProcessor.end(R.EDIT_GRAPHICS_OBJECT)}}},{key:"clearRenderCache",value:function(){this.page&&this.page.ClearRenderCache()}},{key:"clearCacheObejcts",value:function(){if(this.page){if(!this.page.IsParsed()||this.needReParse)return;if(this.pdfDoc.pageEditor){if(this.pdfDoc.pageEditor.startEdit)return;if(this.pdfDoc.pageEditor.lastEditorPage)if(this.pdfDoc.pageEditor.PE.HasSelection()&&this.index===this.pdfDoc.pageEditor.selectionPageIndex)return}if(this.pdfDoc.touchup){if(this.pdfDoc.touchup.isActivated)return;if(this.pdfDoc.touchup.findReplaceCallback&&this.pdfDoc.touchup.findReplaceCallback.currTextRects.length>0&&this.index===this.pdfDoc.touchup.currentSelectionPageIndex)return}this.page.RemoveAllGraphicsObjects(),this.notifyTouchup(this.page),this.needReParse=!0,this.isCPageParsed=!1,this._parsedPagePromise=null}}},{key:"getWordCount",value:function(){return this.c_pagePromise.then((function(e){return e.GetWordCount()}))}},{key:"changeAnnotOrder",value:function(e,t){var n=this;return this.parsedPage().then((function(r){return n.getAnnotById(e).then((function(e){var i=e.annot;switch(t){case A.Bo.FIRST:r.MoveAnnotToLast(i);break;case A.Bo.LAST:r.MoveAnnotToFirst(i);break;case A.Bo.PREV:r.MoveAnnotToNext(i);break;case A.Bo.NEXT:r.MoveAnnotToPrev(i)}n.reloadAnnots();var a=r.GetAnnotCount();return Array(a).fill(void 0).map((function(e,t){return r.GetAnnot(t).GetDict().GetObjNum()}))}))}))}},{key:"moveAnnotOrder",value:function(e,t){var n=this;return this.parsedPage().then((function(r){return n.getAnnotById(e).then((function(e){var i=e.annot;r.MoveAnnotOrder(i,t),n.reloadAnnots();var a=r.GetAnnotCount();return Array(a).fill(void 0).map((function(e,t){return r.GetAnnot(t).GetDict().GetObjNum()}))}))}))}}]),e}();var X=function(e,t,n){for(var r=t.GetReplyCount(),i=0;i<r;i++){var a=t.GetReply(i),o=a.GetContent(),s=e.addReply(o.toString());n.push(s),X(s,a,n)}};function Q(e,t,n,r,i){var a,o,s,u,c,l=Math.max(1,t),d=Math.max(1,n),f=null;if((f=r?new e.Bitmap(l,d,e.DIBFormat.e_DIBArgb,0,0):new e.Bitmap(l,d,e.DIBFormat.e_DIBRgb32,0,0)).IsEmpty())throw f.delete(),new Error("create bitmap fail");return i?(i=ee(i),a=i,o=(0,h.dN)(a),s=o.r,u=o.g,c=o.b,i=o.a*Math.pow(2,24)+(c<<16|u<<8|s),f.FillRect(i,null)):f.FillRect(r?16777215:4294967295,null),f}function $(e,t,n,r,i,a,o,s){var u=e.x,c=e.y,l=e.width,d=e.height,f=e.rotate,h=e.usage,g=e.pdfDoc,p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],v=(0,C.q)(t,f);switch(f){case 270:case 90:var _=l;l=d,d=_}var m=n.GetDisplayMatrix(u,c,l,d,v),y=g.pageDisplayPreferences,S=!0,b=!1,D=!1;if(y)switch(S=y.smoothLineArtChecked,y.smoothText){case"forLaptop_LCDScreens":b=!0;break;case"monitor":b=!1;break;default:b=!1,D=!0}if(i.SetClearType(b),D&&i.SetRenderTextAntiAliasing(D),i.SetRenderPathAntiAliasing(S),a&t.ContentFlag.e_RenderPage.value&&y&&y.transparencyGridChecked&&i.RenderTransparencyGrid(n,m),!1===s&&(i.SetJPEGDownSample(!1),i.SetJPXDownSample(!1)),i.SetRenderContentFlags(-257&a),"print"==h?i.EnableForPrint(!0):(i.SetRenderFormField(!1),i.SetRenderSignature(!1),a&J&&i.SetRenderFormField(!0),i.SetRenderSignature(!0)),p)return[0,2,m];B.Z.startTick(100);var P="print"!==h,I=g.canGetXFA()?i.StartRenderXFAPage(n.Handle?n.Handle():n,m,P,null):i.StartRender(n,m,t.PauseCallback.implement(B.Z)),A=I.GetRateOfProgress();if(o){for(var w=t.ProgressiveState.e_ToBeContinued;100!==A&&w!==t.ProgressiveState.e_Finished;)w=I.Continue(),A=I.GetRateOfProgress();A=100}return[I,(100==A?t.ProgressiveState.e_Finished:-1==A?t.ProgressiveState.e_Error:t.ProgressiveState.e_ToBeContinued).value,m]}function ee(e){var t=(0,h.dN)(e),n=t.r,r=t.g,i=t.b,a=t.a/255;return n=n*a+255*(1-a),r=r*a+255*(1-a),i=i*a+255*(1-a),255*Math.pow(2,24)+(n<<16|r<<8|i)}function te(e){return!!e.HasTransparency&&e.HasTransparency()}},8318:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(6448),i=n(4375),a=n(6721),o=n(7327),s=n(3194),u=n(7582),c=n(949),l=n(7239),d=n(7447),f=n(5733),h=n.n(f),g=n(6276),p=function(){function e(){(0,i._)(this,e),this.map={}}return(0,a._)(e,[{key:"getNode",value:function(e){return this.map[e]}},{key:"setNode",value:function(e){var t=e.GetDict().GetObjNum();return this.map[t]=e,t}},{key:"remove",value:function(e){var t=e.GetDict().GetObjNum();delete this.map[t]}},{key:"clear",value:function(){this.map={}}}]),e}(),v=function(){function e(t,n){(0,i._)(this,e),this.doc=t,this.engine=n,this.engineDoc=t.doc,this.portfolio=n.Portfolio.CreatePortfolio(this.engineDoc),this.nodeCache=new p}return(0,a._)(e,[{key:"getInfo",value:function(){for(var e=this.portfolio,t=[],n=this.getSchemaFieldsHandler(),r=0;r<n.GetSize();r++){var i=n.GetAt(r);t.push({isDefaultField:i.IsDefaultField(),isVisible:i.IsVisible(),keyName:i.GetKeyName().toString(),subtypeName:i.GetSubtypeName().toString(),displayName:i.GetDisplayName().toString(),schemaField:i})}return{initialFileSpecKeyName:e.GetInitialFileSpecKeyName().toString(),initialViewMode:e.GetInitialViewMode().value,isSortedInAscending:e.IsSortedInAscending(),sortingFieldKeyName:e.GetSortingFieldKeyName().toString(),fields:t}}},{key:"setInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.engine,n=this.portfolio;if(void 0!==e.fields){var r=n.GetSchemaFields(),i=new t.SchemaFieldArray;(e.fields||[]).forEach((function(e){if(e.isDefaultField){for(var n,a=0;a<r.GetSize();a++){var o=r.GetAt(a);if(e.keyName===o.GetKeyName().toString()){o.SetVisibility(e.isVisible),n=o;break}}i.Add(n)}else{var s=new t.SchemaField;s.SetKeyName(new t.String(e.keyName)),s.SetSubtypeName(new t.String(e.subtypeName)),s.SetDisplayName(new t.WString(e.displayName)),s.SetVisibility(e.isVisible),i.Add(s)}})),n.SetSchemaFields(i)}void 0!==e.initialFileSpecKeyName&&n.SetInitialFileSpecKeyName(new t.WString(e.initialFileSpecKeyName)),e.initialViewMode&&n.SetInitialViewMode({value:e.initialViewMode}),void 0!==e.isSortedInAscending&&n.SetSortingOrder(e.isSortedInAscending),void 0!==e.sortingFieldKeyName&&n.SetSortingFieldKeyName(new t.String(e.sortingFieldKeyName))}},{key:"getTreeNode",value:function(){if(this.engineDoc.IsPortfolio()){var e=this.engine,t=this.portfolio,n=this.getInfo().fields,r=t.GetRootNode();if(!r.IsEmpty()){var i,a=r.GetNodeType();return a===e.PortfolioNodeType.e_TypeFolder&&(r=new e.PortfolioFolderNode(r),i=this.folderNodeToJSON(r,n)),a===e.PortfolioNodeType.e_TypeFile&&(r=new e.PortfolioFileNode(r),i=this.fileNodeToJSON(r,n)),i}t.delete()}}},{key:"getInitialNodePath",value:function(){var e=this.engine,t=this.portfolio,n=this.getInfo(),r=n.initialFileSpecKeyName,i=n.fields,a=t.GetRootNode();a=new e.PortfolioFolderNode(a);var o,s=[this.folderNodeToJSON(a,i)];if(!r)return s;var u=function(t){for(var n=0;n<t.GetSize();n++){var i=t.GetAt(n);if(i.GetNodeType()===e.PortfolioNodeType.e_TypeFile){if(i=new e.PortfolioFileNode(i),r===i.GetKeyName().toString()){o=i;break}}else i.GetNodeType()===e.PortfolioNodeType.e_TypeFolder&&(i=new e.PortfolioFolderNode(i),u(i.GetSortedSubNodes()))}};if(u(a.GetSortedSubNodes()),!o||o.GetParentNode().IsEmpty())return s;var c=[];c.unshift(this.fileNodeToJSON(o,i));for(var l=o.GetParentNode();!l.IsEmpty()&&!l.IsRoot();)l=(o=o.GetParentNode()).GetParentNode(),c.unshift(this.folderNodeToJSON(o,i));return c.unshift(this.folderNodeToJSON(a,i)),c}},{key:"addFiles",value:function(e,t,n){var r=this,i=function(t){var n=e[t];if(o.HasSameNameSubNode(new a.WString(n.name),a.PortfolioNodeType.e_TypeFile)){var i=void 0;for(var s in r.nodeCache.map){var c=r.nodeCache.map[s];if(c.GetNodeType()===a.PortfolioNodeType.e_TypeFile&&c.GetFileSpec().GetFileName().toString()===n.name){i=c;break}}i&&r.nodeCache.remove(i)}var l=a.ReaderCallback.implement({Release:function(){},GetSize:function(){return n.size},GetPosition:function(){return n.size},ReadBlock:function(e,t,r){var i=new Uint8Array(u.readAsArrayBuffer(n.slice(t,t+r)));return a.HEAPU8.set(i,e),!0}});o.AddFile(l,new a.WString(n.name)).GetFileSpec().SetModifiedDateTime(d.Z.ToDateTime(a,n.lastModified||n.lastModifiedDate))},a=this.engine,o=this.nodeCache.getNode(n);if(o&&o.GetNodeType()===a.PortfolioNodeType.e_TypeFolder){for(var s=o.GetSortedSubNodes().GetSize(),u=new FileReaderSync,c=0;c<e.length;c++)i(c);if(void 0!==t){for(var l=o.GetSortedSubNodes().GetSize(),f=[],h=0;h<l-s;h++)f.unshift(l-1-h);this.changeSubNodesOrder(n,f,t)}}}},{key:"createFolder",value:function(e,t){var n=this.engine,r=this.nodeCache.getNode(t);if(r&&r.GetNodeType()===n.PortfolioNodeType.e_TypeFolder){var i=r.AddSubFolder(new n.WString(e)),a=this.getInfo().fields;return this.folderNodeToJSON(i,a)}}},{key:"removeSubNodes",value:function(e,t){var n=this,r=this.engine,i=this.nodeCache.getNode(e);i&&i.GetNodeType()===r.PortfolioNodeType.e_TypeFolder&&t.forEach((function(e){var t=n.nodeCache.getNode(e);if(t.GetNodeType()===r.PortfolioNodeType.e_TypeFile)n.nodeCache.remove(t);else{var a=function(e){for(var t=e.GetSortedSubNodes(),i=0;i<t.GetSize();i++){var o=t.GetAt(i);o.GetNodeType()===r.PortfolioNodeType.e_TypeFile?n.nodeCache.remove(o):a(new r.PortfolioFolderNode(o))}n.nodeCache.remove(e)};a(t)}i.RemoveSubNode(t)}))}},{key:"regenerateTOC",value:function(e){var t=this,n=this.portfolio.GetTocPageIndexes();this.portfolio.StartGenerateTableOfContents(new this.engine.WString(e),!!n.GetSize(),null);for(var r=this.portfolio.GetTocPageIndexes(),i=[],a=0;a<n.GetSize();a++)i.push(n.GetAt(a));for(var o=[],s=0;s<r.GetSize();s++)o.push(r.GetAt(s));return i.forEach((function(e){if(t.doc.pageIndexMap[e]){var n=t.doc.pageIndexMap[e];delete t.doc.pageIndexMap[e],delete t.doc.pageCache[n.id],delete t.doc.pageIndexPromise[e]}})),{oldIndexes:i,newPages:o.map((function(e){var n=t.engineDoc.GetPage(e),r=new g.Z(e,t.doc);return r.page=n,t.doc.updatePageIndexMap(e,r),t.doc.updatePageCache(r),r.toJson()}))}}},{key:"nodeToJSONByCustomProperty",value:function(e,t,n,r){if(!e.IsDefaultField())if(n.HasCustomProperty(e)){var i=e.GetSubtypeName().toString();if("N"===i)r[t]=n.GetCustomPropertyIntegerValue(e);else if("S"===i)r[t]=n.GetCustomPropertyStringValue(e).toString();else if("D"===i){var a=(0,c.q)(n.GetCustomPropertyDateTimeValue(e));r[t]=a?a.getTime():-1}else r[t]=""}else r[t]=""}},{key:"folderNodeToJSON",value:function(e,t){var n=this,r={};t.forEach((function(t){n.nodeToJSONByCustomProperty(t.schemaField,t.displayName,e,r)}));try{r.Description=e.GetDescription().toString()}catch(e){r.Description=""}var i=(0,c.q)(e.GetCreationDateTime());r.CreationDate=i?i.getTime():-1;var a=(0,c.q)(e.GetModifiedDateTime());return r.ModDate=a?a.getTime():i,r.FileName=e.GetName().toString(),r.subNodeSize=e.GetSortedSubNodes().GetSize(),r.handle=this.nodeCache.setNode(e),r.type=1,r}},{key:"fileNodeToJSON",value:function(e,t){var n=this,r={};t.forEach((function(t){n.nodeToJSONByCustomProperty(t.schemaField,t.displayName,e,r)}));var i=e.GetFileSpec();try{r.Description=i.GetDescription().toString()}catch(e){r.Description=""}var a=(0,c.q)(i.GetCreationDateTime());r.CreationDate=a?a.getTime():-1;var o=(0,c.q)(i.GetModifiedDateTime());return r.ModDate=o?o.getTime():a,r.CompressedSize=i.GetCompressedEmbeddedFileSize(),r.Size=i.GetFileSize(),r.FileName=i.GetFileName().toString(),r.subtype=i.GetSubtype().toString(),r.keyName=e.GetKeyName().toString(),r.handle=this.nodeCache.setNode(e),r.type=2,r}},{key:"getFileStream",value:function(e,t){var n=t.writeStream,r=this.nodeCache.getNode(e),i=new l.Z(r.GetFileSpec(),this);return 0===i.getFileSize()?Promise.resolve(0):i.getStream(n)}},{key:"getStream",value:function(e){var t=this,n=this.engine,r=function(r){var i=[],a=function(e,r){for(var s=function(s){var u=r[s];if(u.GetNodeType()===n.PortfolioNodeType.e_TypeFile){(0,o._)(u,n.PortfolioFileNode)||(u=new n.PortfolioFileNode(u));var c=new l.Z(u.GetFileSpec(),t.doc),d=[],f=c.getStream((function(e,t,n){return d.push(e)})).then((function(){e.file(c.getFileName(),d,{binary:!0})}));i.push(f)}else{(0,o._)(u,n.PortfolioFolderNode)||(u=new n.PortfolioFolderNode(u));for(var h=u.GetSortedSubNodes(),g=[],p=0;p<h.GetSize();p++)g.push(h.GetAt(p));a(e.folder(u.GetName().toString()),g)}},u=0;u<r.length;u++)s(u)},s=new(h()),u=e.map((function(e){return t.nodeCache.getNode(e)})).filter((function(e){return!!e}));return a(s,u),Promise.all(i).then((function(){return s.generateAsync({type:"blob"}).then((function(e){return{blob:e,fileName:r}}))}))};if(1===e.length){var i=this.nodeCache.getNode(e[0]);if(i.GetNodeType()===n.PortfolioNodeType.e_TypeFile){var a=new l.Z(i.GetFileSpec(),this.doc),s=[];return a.getStream((function(e,t,n){return s.push(e)})).then((function(){return{blob:new Blob(s,{type:"application/octet-stream"}),fileName:a.getFileName()}}))}return r("".concat(i.GetName().toString(),".zip"))}return r("download.zip")}},{key:"sendSortFolioParam",value:function(e,t){var n=this;return(0,r._)((function(){var r,i,a;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return r=n.engine,n.engineDoc.IsPortfolio()?(i=n.portfolio,a=new r.String(e),[4,i.SetSortingFieldKeyName(a)]):[2];case 1:return o.sent(),[4,i.SetSortingOrder(t)];case 2:return o.sent(),[2,!0]}}))}))()}},{key:"getPortfolioSubNodes",value:function(e){var t=this.engine,n=[],r=this.nodeCache.getNode(e);if(!r)throw new Error("Nonexistent portfolio folder node!");var i=r.GetNodeType();if(i!==t.PortfolioNodeType.e_TypeFolder)return n;for(var a=this.getInfo().fields,o=r.GetSortedSubNodes(),s=o.GetSize(),u=0;u<s;u++){var c=o.GetAt(u);(i=c.GetNodeType())===t.PortfolioNodeType.e_TypeFolder&&(c=new t.PortfolioFolderNode(c),n.push(this.folderNodeToJSON(c,a))),i===t.PortfolioNodeType.e_TypeFile&&(c=new t.PortfolioFileNode(c),n.push(this.fileNodeToJSON(c,a)))}return n}},{key:"getPDFDocByNodeHandle",value:function(e){var t=this.engine,n=this.nodeCache.getNode(e);if(n&&n.GetNodeType()!==t.PortfolioNodeType.e_TypeFolder){var r=n.GetFileSpec();if(".pdf"===r.GetFileName().toString().substr(-4)){var i=new t.PDFDoc(r.GetFileData(),!1);return i.Load(new t.String("")),i}}}},{key:"changeSubNodesOrder",value:function(e,t,n){var r,i=this.engine,a=this.nodeCache.getNode(e);if(a&&a.GetNodeType()!==i.PortfolioNodeType.e_TypeFile){var o=a.GetSortedSubNodes(),u=new Array(o.GetSize()).fill(null);u.forEach((function(e,n,r){t.includes(n)||(r[n]=o.GetAt(n))}));var c=t.map((function(e){return o.GetAt(e)}));(r=u).splice.apply(r,[n,0].concat((0,s._)(c))),u=u.filter((function(e){return!!e}));var l=new i.PortfolioNodeArray;u.forEach((function(e){return l.Add(e)})),a.ReorderSubNodes(l)}}},{key:"moveSubNodeToSubFolderNode",value:function(e,t,n){var r=this.engine,i=this.nodeCache.getNode(e);if(i&&i.GetNodeType()!==r.PortfolioNodeType.e_TypeFile){var a=this.nodeCache.getNode(n);if(a&&a.GetNodeType()!==r.PortfolioNodeType.e_TypeFile)for(var o=0;o<t.length;o++){var s=this.nodeCache.getNode(t[o]);if(s){var u=void 0,c=void 0;s.GetNodeType()===r.PortfolioNodeType.e_TypeFile?(u=s.GetFileSpec().GetFileName(),c=r.PortfolioNodeType.e_TypeFile):(u=s.GetName(),c=r.PortfolioNodeType.e_TypeFolder);var l=a.HasSameNameSubNode(u,c);i.MoveSubNodeToSubFolderNode(s,a,l)}}}}},{key:"hasSameNameSubNode",value:function(e,t,n){var r=this.engine,i=this.nodeCache.getNode(n);if(i&&i.GetNodeType()!==r.PortfolioNodeType.e_TypeFile)return i.HasSameNameSubNode(new r.WString(e),{value:t})}},{key:"recordPDFFileByPortFolioNode",value:function(e){var t=this.engine,n=[];for(var r in e){var i=e[r],a=this.nodeCache.getNode(i),o=a.GetNodeType();if(o===t.PortfolioNodeType.e_TypeFile){var s=a.GetFileSpec();if(".pdf"===s.GetFileName().toString().substr(-4)){var u=s.GetFileData(),c=new t.PDFDoc(u,!1);if(c.Load(new t.String(""))===t.ErrorCode.e_ErrPassword){n.push("password");continue}var l=this.doc.JR.getPDFDocByEngineDoc(c);n.push(l.id)}}else o===t.PortfolioNodeType.e_TypeFolder&&this.recursionFolioNodePDFDoc(n,a)}return n}},{key:"getFolioNodePDFDoc",value:function(){if(this.engineDoc.IsPortfolio()){var e=this.engine,t=this.portfolio.GetRootNode(),n=new e.PortfolioFolderNode(t);if(!n)throw new Error("Nonexistent portfolio folder node!");return this.recursionFolioNodePDFDoc([],n)}}},{key:"recursionFolioNodePDFDoc",value:function(e,t){for(var n=this.engine,r=t.GetSortedSubNodes(),i=r.GetSize(),a=0;a<i;a++){var o=r.GetAt(a),s=o.GetNodeType();if(s===n.PortfolioNodeType.e_TypeFile){var u=(o=new n.PortfolioFileNode(o)).GetFileSpec();if(".pdf"===u.GetFileName().toString().substr(-4)){var c=u.GetFileData(),l=new n.PDFDoc(c,!1);if(l.Load(new n.String(""))===n.ErrorCode.e_ErrPassword)continue;var d=this.doc.JR.getPDFDocByEngineDoc(l);e.push(d.id)}}else if(s===n.PortfolioNodeType.e_TypeFolder){var f=new n.PortfolioFolderNode(o);this.recursionFolioNodePDFDoc(e,f)}}return e}},{key:"getSchemaFieldsHandler",value:function(){for(var e=this.engine,t=this.portfolio,n=t.GetSchemaFields(),r=!1,i=!1,a=!1,o=!1,s=!1,u=!1,c=new e.SchemaFieldArray,l=0;l<n.GetSize();l++){var d=n.GetAt(l),f=d.GetSubtypeName().toString();switch(c.Add(d),f){case"F":r=!0;break;case"Desc":i=!0;break;case"ModDate":a=!0;break;case"Size":o=!0;break;case"CompressedSize":s=!0;break;case"CreationDate":u=!0}}var h=function(t,n,r){var i=new e.SchemaField;i.SetSubtypeName(new e.String(t)),i.SetKeyName(new e.String(n)),i.SetDisplayName(new e.WString(r)),i.SetVisibility(!0),c.Add(i)};return r||h("F","FileName","Name"),i||h("Desc","Description","Description"),a||h("ModDate","ModDate","Modified"),o||h("Size","Size","Size"),s||h("CompressedSize","CompressedSize","Compressed size"),u||h("CreationDate","CreationDate","Created"),t.SetSchemaFields(c),t.GetSchemaFields()}}]),e}()},7330:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});var r=n(3883),i=n(5497),a=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:7,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:17,s=e.engine,u={},c=n.GetElement((0,r.n5)(s,"AA"));if(c&&c.GetDict()){for(var l=c.GetDict(),d=new s.AdditionalAction(t,l),f=s.TriggerEvent,h=a;h<o;h++){var g=d.GetAction(f.values[h]);if(g.IsEmpty())g.delete();else{var p=e.actionManager.get(g,t,e);u[h]=p.toJson(),p.destroy()}}(0,i.Z)(d)}return u}},7447:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(4375),i=n(6721),a=n(7327),o=n(2531),s=n(3848),u=n(6243),c=n(1047),l=n(3883),d=n(949),f=Object.keys(u.Ql).sort().map((function(e){return u.Ql[e]}));const h=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.GetIndex();if((0,r._)(this,e),this.originAnnot=t,this.pdfPage=n,this.JR=n.JR,this.engine=n.engine,this.doc=n.doc,(0,a._)(this.doc,this.engine.PDFDoc)||(this.doc=n.pdfDoc._doc),this.annot=this.constructEngineAnnot(t),n.addJRAnnot(this,i),this.index=i,"number"!=typeof i)throw new Error("[JR] annotation index must be a number")}return(0,i._)(e,[{key:"constructEngineAnnot",value:function(e){return e}},{key:"destroy",value:function(){delete this.pdfPage.jrAnnots[this.index],this.annot.delete(),this.originAnnot!==this.annot&&this.originAnnot.delete(),this.originAnnot=null,this.annot=null}},{key:"getRectData",value:function(){var e=this.JR.getRotatedAnnotRect(this.annot),t=e.left,n=e.right,r=e.top,i=e.bottom;e.rotate;return{rect:{top:r,right:n,bottom:i,left:t},rectIsEmpty:r===n&&n===i&&i===t}}},{key:"toJson",value:function(e){for(var t=this.annot,n=t.GetFlags(),r=this.getRectData(),i=t.GetDict(),a=t.GetType().constructor.name,o=this.getType(),s=t.GetBorderInfo(),u=[],c=0;c<s.dashes.GetSize();c++)u.push(s.dashes.GetAt(c));var f,h=s.width,g=t.GetBorderColor(),p=!0;if(0===g)if(i.HasKey((0,l.n5)(this.engine,"C"))){var v=i.GetElement((0,l.n5)(this.engine,"C")).GetArray(),_=0;v&&(_=v.GetElementCount()),0==_?g=0:g&=16777215}else g=0,p=!1;var m=-1;if("popup"!=o)try{(f=t.GetModifiedDateTime())&&f.IsValid()&&(m=(0,d.B)(f))}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}var y=i.GetObjNum();i.HasKey((0,l.n5)(this.engine,"FoxitTag"))&&(n|=64);var S=new this.engine.String("customEntries"),b={};i.HasKey(S)&&(b=JSON.parse(i.GetElement(S).GetWideString().toString()));var D=this.getNano(i),P=this.index;void 0===P&&(P=t.GetIndex());var I={objectNumber:y,name:t.GetUniqueID().toString(),id:y,typeInEngine:a,type:o,typeNano:D,typeAlias:o,rect:r.rect,rectIsEmpty:r.rectIsEmpty,isMarkup:t.IsMarkup(),isDeleted:t.isDeleted(),index:P,content:this.JR.getPDFString(t.GetContent().UTF8Encode()),borderColor:g,hasBorderColor:p,color:g,borderInfo:{cloudIntensity:s.cloud_intensity,dashPhase:s.dash_phase,dashes:u,style:s.style.value,width:h},flag:n,modifiedTimestamp:m,customEntries:b};return s.delete(),I}},{key:"getDictValue",value:function(e){var t,n=this.annot.GetDict(),r=(0,l.n5)(this.engine,e);n.HasKey(r)&&(t=n.GetElement(r).GetWideString().toString());return t}},{key:"setDictValue",value:function(e,t){var n=this.annot.GetDict(),r=(0,l.n5)(this.engine,e),i=new this.engine.WString(t);return n.SetAtWString(r,i),i.delete(),this.updateModifyTime(),!0}},{key:"getNano",value:function(e){var t=e.GetDict().GetElement((0,l.n5)(this.engine,"OC"));if(t){var n=t.GetDict();if(n){var r=n.GetElement((0,l.n5)(this.engine,"VE"));if(r){var i=r.GetArray(),a=i.GetElementCount();if(!(a<=1)){var o=i.GetElement(a-1);if(o){var s=o.GetDict();if(s)return s.GetElement((0,l.n5)(this.engine,"Name")).GetString().toString()}}}}}}},{key:"getId",value:function(){return this.annot.GetDict().GetObjNum()}},{key:"getName",value:function(){return this.annot.GetUniqueID().toString()}},{key:"getIndex",value:function(){return this.annot.GetIndex()}},{key:"getSummary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,t=e.GetDict().GetObjNum();return{objectNumber:t,id:t,index:e.GetIndex()}}},{key:"getType",value:function(){var e=this.annot.GetType().constructor.name.replace(/^AnnotType_e_/,"").toLowerCase();return"note"===e&&(e="text"),e}},{key:"setContent",value:function(e){var t=this.annot,n=new this.engine.WString(e);return t.SetContent(n),n.delete(),this.updateModifyTime(),t.GetDict().GetObjNum()}},{key:"setDictionaryEntry",value:function(e,t){var n=this.annot.GetDict(),r=new this.engine.String("customEntries"),i={};n.HasKey(r)&&(i=JSON.parse(n.GetElement(r).GetWideString().toString())),i[e]=t;var a=new this.engine.WString(JSON.stringify(i));return n.SetAtWString(r,a),r.delete(),a.delete(),this.updateModifyTime(),!0}},{key:"getDictionaryEntry",value:function(e){var t=this.annot.GetDict(),n=new this.engine.String("customEntries"),r={};return t.HasKey(n)&&(r=JSON.parse(t.GetElement(n).GetWideString().toString())),n.delete(),r[e]}},{key:"resetAppearanceStream",value:function(){this.annot.ResetAppearanceStream()}},{key:"setBorderColor",value:function(e){var t=this.annot;if(e<0&&(e=0),t.IsGrouped&&t.IsGrouped())for(var n=t.GetGroupElements(),r=n.GetSize();r--;){var i=n.GetAt(r);0===e?i.RemoveProperty({value:2}):i.SetBorderColor(e),i.ResetAppearanceStream()}else 0===e?t.RemoveProperty({value:2}):t.SetBorderColor(e),t.ResetAppearanceStream();this.updateModifyTime()}},{key:"remove",value:function(){var e=this.getId();return this.pdfPage.removeAnnotById(e).then((function(t){if(t)return[e]}))}},{key:"removeRelatives",value:function(){return[]}},{key:"setRect",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.left>e.right&&(t=e.right,e.right=e.left,e.left=t),e.bottom>e.top&&(t=e.top,e.top=e.bottom,e.bottom=t);var r=e.top-e.bottom,i=e.right-e.left,a=this.annot.GetRect(),o=!0;Math.abs(r-a.right+a.left)<.01&&Math.abs(i-a.top+a.bottom)<.01&&(o=!1);var s=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),u=this.annot.Move(s);return s.delete(),u&&n&&(this.updateModifyTime(),this.annot.GetType()!==this.engine.AnnotType.e_Widget&&o&&this.annot.ResetAppearanceStream(),this.pdfPage.resetBitmapCache()),u}},{key:"move",value:function(e,t){var n=this.annot,r=s.Z.on(n.GetRect()).move(e,t).extract(),i=this.annot.Move(r);return i&&(this.updateModifyTime(),this.pdfPage.resetBitmapCache()),i}},{key:"moveTo",value:function(e,t){var n=this.JR.getRotatedAnnotRect(this.annot);return this.move(e-n.left,t-n.top),[this.getId()]}},{key:"setBorderInfo",value:function(e){var t=this.annot.GetBorderInfo(),n=this.engine.BorderInfoStyle;t.cloud_intensity=parseInt(e.cloudIntensity)||0,e.dashPhase&&(t.dash_phase=e.dashPhase);var r=e.dashes;if(r&&r.length>0){var i=new this.engine.FloatArray;i.SetSize(r.length,-1);for(var a=0;a<r.length;a++)i.SetAt(a,r[a]);t.dashes=i}t.style=n.values[Object.values(u.M8).includes(e.style)?e.style:0],void 0!==e.width&&(t.width=parseFloat(e.width)),this.annot.SetBorderInfo(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setBorderStyle",value:function(e,t){var n=this.annot.GetBorderInfo(),r=this.engine.BorderInfoStyle;switch(e){case u.M8.DASHED:n.style=r.values[r.e_Dashed.value];var i=new this.engine.FloatArray;i.SetSize(t.length,-1);for(var a=0;a<t.length;a++)i.SetAt(a,t[a]);n.dashes=i,n.dash_phase=0;break;case u.M8.BEVELED:n.style=r.values[r.e_Beveled.value];break;case u.M8.SOLID:n.style=r.values[r.e_Solid.value];break;case u.M8.UNDERLINE:n.style=r.values[r.e_UnderLine.value];break;case u.M8.INSET:n.style=r.values[r.e_Inset.value];break;case u.M8.CLOUDY:n.style=r.values[r.e_Cloudy.value],n.cloud_intensity=t;break;case u.M8.NOBORDER:n.style=r.values[r.e_NoBorder.value]}return this.annot.SetBorderInfo(n),this.annot.ResetAppearanceStream(),n.dashes.delete(),this.updateModifyTime(),[this.getId()]}},{key:"setBorderWidth",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=this.annot.GetBorderInfo(),r=parseFloat(e);n.width=r,this.annot.SetBorderInfo(n),t&&this.annot.ResetAppearanceStream(),this.updateModifyTime()}catch(e){isNaN(e)||(e=gsdk.getErrorCode(e)),console.warn(e)}return!0}},{key:"setModifiedDateTime",value:function(e){var t=this.ToDateTime(e);try{this.annot.SetModifiedDateTime(t)}catch(e){}return t.delete(),!0}},{key:"updateModifyTime",value:function(){this.setModifiedDateTime(Date.now())}},{key:"ToDateTime",value:function(t){return e.ToDateTime(this.engine,t)}},{key:"setAnnotFlag",value:function(e){try{this.annot.SetFlags(e),this.updateModifyTime()}catch(i){var t=this.annot.GetDict(),n=this.engine,r=n.PDFObject.CreateFromInteger(e);t.SetAt((0,l.n5)(n,"F"),r)}}},{key:"setUniqueId",value:function(e,t){var n;return n=e?new this.engine.WString(e):new this.engine.WString((0,c.Z)()),this.annot.SetUniqueID(n),!0}},{key:"create",value:function(e){var t,n,r,i,a,o,s;(((t=e.color)||0===e.color)&&("string"==typeof t&&(t=parseInt(t,16),e.color=t),this.setBorderColor(t)),(n=e.borderInfo)&&this.setBorderInfo(n),(r=e.style)&&this.setBorderStyle(r,e.intensity),"freetext"!==e.type)&&((i=e.contents)&&this.setContent(i));if((a=e.flags)&&this.setAnnotFlag(a),(o=e.name)?this.setUniqueId(o):this.setUniqueId((0,c.Z)()),e.dicts){var u=e.dicts,l=this.annot.GetDict();for(var d in u){var f=new this.engine.String(d),h=new this.engine.WString(u[d]);l.SetAtWString(f,h),f.delete(),h.delete()}}return(s=e.date)?this.setModifiedDateTime(s):this.setModifiedDateTime(new Date),[this]}},{key:"_freeSuperAnnot",value:function(e,t){}},{key:"getRectJson",value:function(){var e=this.annot.GetRect();return{id:this.getId(),type:this.getType(),isMarkup:this.annot.IsMarkup(),rect:{left:e.left,right:e.right,top:e.top,bottom:e.bottom}}}},{key:"setCemicircleCloudy",value:function(){this.annot.SetCemicircleCloudy()}},{key:"setCustomAPStream",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.convertAppearanceType(e),i=new this.engine.String(t),a=new this.engine.String(n),o=this.annot.SetCustomAPStream(r,a,i);return a.delete(),o}},{key:"convertAppearanceType",value:function(e){var t=this.engine.AppearanceType.e_AppearanceTypeNormal;switch(e){case u.Qk.ROLLOVER:t=this.engine.AppearanceType.e_AppearanceTypeRollover;break;case u.Qk.DOWN:t=this.engine.AppearanceType.e_AppearanceTypeDown;break;case u.Qk.NORMAL:t=this.engine.AppearanceType.e_AppearanceTypeNormal}return t}}],[{key:"ToDateTime",value:function(e,t){var n=new Date(t),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate(),o=n.getHours(),s=n.getMinutes(),u=n.getSeconds(),c=n.getMilliseconds(),l=-n.getTimezoneOffset()/60,d=parseInt(l),f=Math.abs(60*(l-d));return new e.DateTime(r,i,a,o,s,u,c,d,f)}},{key:"parseDatetimeString",value:function(e,t){if(!t||"string"!=typeof t)return null;var n=t.match(/^D\:(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(([+-]\d\d)('\d\d')?)?$/);if(!n)return null;var r=(0,o._)(n,10),i=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],d=(r[7],r[8]),f=r[9],h=0;f&&f.length>2&&(h=Number(f.replace(/['"]/g,"")),isNaN(h)&&(h=0));var g=Number(d);return isNaN(g)&&(g=(new Date).getTimezoneOffset()/-60),new e.DateTime(Number(i),Number(a),Number(s),Number(u),Number(c),Number(l),0,g,h)}},{key:"parseFlagList",value:function(e){var t=0;return f.forEach((function(n,r){e.indexOf(n)>-1&&(t|=1<<r)})),t}},{key:"updateModifyTime",value:function(t,n){var r=e.ToDateTime(t,Date.now());try{n.SetModifiedDateTime(r)}catch(e){}r.delete()}}]),e}()},8193:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(4375),i=n(6721),a=n(2834),o=n(6841),s=n(6147),u=n(7327),c=n(2872),l=n(7447),d=n(2998),f=n(3883),h=n(5497),g=n(2095),p=n(7330);const v=function(e){(0,s._)(n,e);var t=(0,c._)(n);function n(e,i,a){var o;(0,r._)(this,n),(o=t.call(this,e,i,a)).engineWidget=o.annot,o.page=i;var s=i.pdfDoc.form;return s&&s.hasWidgetChanged(e.GetDict().GetObjNum())&&e.ResetAppearanceStream(),o}return(0,i._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Widget(e)}},{key:"destroy",value:function(){(0,a._)((0,o._)(n.prototype),"destroy",this).call(this),this.engineWidget=null}},{key:"updateMKProperty",value:function(e,t){var n,r,i=this.engineWidget,a=i.GetDict(),o=this.pdfPage.doc,s=this.engine,c=!0;switch(e){case"alignment":var l=(0,f.n5)(s,"Q");void 0===t?a.RemoveAt(l):a.SetAtInteger(l,t);break;case"directionRTL":var h=(0,f.n5)(s,"MEOptions");void 0===t?a.RemoveAt(h):a.SetAtInteger(h,t);break;case"lineSpace":var g=(0,f.n5)(s,"LS");if(void 0===t)a.RemoveAt(g);else{var p=this.engine.PDFArray.Create();p.AddInteger(t[0]),p.AddFloat(t[1]),a.SetAt(g,p)}break;case"borderColor":0===t?i.RemoveMKEntry(s.MKEntry.e_MKEntryBorderColor):i.SetMKBorderColor(t);break;case"fillColor":0==t?i.RemoveMKEntry(s.MKEntry.e_MKEntryBackgroundColor):i.SetMKBackgroundColor(t);break;case"normalCaption":r=new s.WString(t),i.SetMKNormalCaption(r),r.delete();break;case"downCaption":r=new s.WString(t),i.SetMKDownCaption(r),r.delete();break;case"rotation":var v=s.Rotation.e_Rotation0;switch(t){case 1:v=s.Rotation.e_Rotation90;break;case 2:v=s.Rotation.e_Rotation180;break;case 3:v=s.Rotation.e_Rotation270}i.SetMKRotation(v);break;case"rolloverCaption":r=new s.WString(t),i.SetMKRolloverCaption(r),r.delete();break;case"normalIcon":n="I";case"downIcon":n||(n="IX");case"rolloverIcon":n||(n="RI");var _=(0,f.n5)(s,"MK"),m=a.GetElement(_);if(m&&m.GetDict()?m=m.GetDict():(m=s.PDFDictionary.Create(),a.SetAtReference(_,m,o)),n=(0,f.n5)(s,n),"number"==typeof t)m.SetAtReference(n,o.GetIndirectObject(t),o);else if("object"==typeof t)if(t)if(t.height>0&&t.width>0){var y=new s.String(t.stream),S=this.doc.CreateIcon(y,t.width,t.height);m.SetAtReference(n,S,o)}else if((0,u._)(t,Uint8Array)){var b=d.Z.createImage(s,t);if(b){var D=b.GetFrameBitmap(0);i.SetMKNormalIconBitmap(D)}else c=!1}else m.RemoveAt(n);else m.RemoveAt(n);for(var P=i.GetField(),I=P.GetControlCount(),A=m.GetElement(n),w=A?A.GetDirectObject().GetObjNum():0,C=0;w&&C<I;C++){var k=P.GetControl(C).GetWidget();if(!k.IsEmpty()){var E=k.GetDict();if(E.GetObjNum()!=a.GetObjNum()){var G=E.GetElement(_);G&&G.GetDict()?G=G.GetDict():(G=s.PDFDictionary.Create(),E.SetAtReference(_,G,o)),G.SetAtReference(n,o.GetIndirectObject(w),o),k.ResetAppearanceStream()}}}}var T=this.pdfPage.pdfDoc.form,F=i.GetField().GetName().toString(),R=T.getField(F),M=R.engineField,O=M.GetDict(),x=M.GetValue();return R.label.length>0&&M.SetValue((0,f.Dp)(s,R.label)),i.ResetAppearanceStream(),R.label.length>0&&O.SetAtWString((0,f.n5)(s,"V"),x),c}},{key:"setAS",value:function(e){if(e){var t=this.engineWidget.GetDict(),n=this.engine,r=(0,f.n5)(n,"AS"),i=new n.WString(e);t.SetAt(r,n.PDFObject.CreateFromName(i)),(0,h.Z)(i)}}},{key:"toJson",value:function(e){var t=(0,a._)((0,o._)(n.prototype),"toJson",this).call(this,e),r=this.engineWidget,i=r.GetField(),s=r.GetControl(),u=r.GetAction(),c="";u.IsEmpty()||(c=this.JR.actionManager.get(u,this.doc,this.JR).toJson());var l,d,h,g,v,_=this.engine,m=["Off"],y={},S=0,b=0,D=[];if(!r.IsEmpty()){var P=r.GetDict();S=(S=P.GetElement((0,f.n5)(_,"Q")))?S.GetInteger():0,y=(0,p.S)(this.JR,this.page.doc,P);var I=(0,f.n5)(_,"AS");if(P.HasKey(I)){var A=this.engineWidget.GetAppearanceOnStateName();try{m.push(A.toString())}catch(e){m.push(this.JR.getHexString(A))}l=this.JR.getPDFString(this.engineWidget.GetAppearanceState())}I=(0,f.n5)(_,"AP"),v=P.HasKey(I);var w=P.GetElement((0,f.n5)(_,"MK"));w&&w.GetDict()&&((d=w.GetDict().GetElement((0,f.n5)(_,"I")))&&(d=d.GetDirectObject().GetObjNum()),(h=w.GetDict().GetElement((0,f.n5)(_,"RI")))&&(h=h.GetDirectObject().GetObjNum()),(g=w.GetDict().GetElement((0,f.n5)(_,"IX")))&&(g=g.GetDirectObject().GetObjNum()));var C=P.GetElement((0,f.n5)(_,"MEOptions"));C&&(b=C.GetInteger());var k=P.GetElement((0,f.n5)(_,"LS"));if(k){var E=k.GetArray();2===E.GetElementCount()&&(D.push(E.GetElement(0).GetInteger()),D.push(Number(E.GetElement(1).GetFloat().toFixed(1))))}}var G=r.GetHighlightingMode();G&&(G=G.value);var T,F=0;F=r.HasMKEntry(_.MKEntry.e_MKEntryBackgroundColor)?4278190080|r.GetMKBackgroundColor():0,T=r.HasMKEntry(_.MKEntry.e_MKEntryBorderColor)?4278190080|r.GetMKBorderColor():0;var R,M=r.GetMKDownCaption().toString(),O=r.GetMKIconCaptionRelation().value,x=r.GetMKIconFit(),B=r.GetMKNormalCaption().toString(),N=r.GetMKRolloverCaption().toString(),L=r.GetMKRotation().value,j="",U=0;i.IsEmpty()||(j=i.GetName().toString(),U=i.GetType().value,R=s.GetIndex(),this.engineWidget.GetDict().HasKey((0,f.n5)(this.engine,"PMD"))&&(U=8));var W,H,z,K=!1;if(!i.IsEmpty()){H=s.GetDefaultAppearance();try{H.font.IsEmpty()||(K=H.font.IsEmbedded(this.pdfPage.doc),W=H.font.GetName().toString(),z=(z=H.font.GetFamilyName().toString()).replace(" ","").replace("-",""),H.font.IsBold()&&(z+="Bold"),H.font.IsItalic()&&(z+="Italic"))}catch(e){isNaN(e)||(e=_.getErrorCode(e)),console.warn(e)}}return Object.assign(t,{highlightingMode:G,fillColor:F,iconFit:{fitBounds:x.fit_bounds,horizontalFraction:x.horizontal_fraction,isProportionalScaling:x.is_proportional_scaling,scaleWayType:x.scale_way_type?x.scale_way_type.value:x.scale_way_type,verticalFraction:x.vertical_fraction},MKBorderColor:T,downCaption:M,normalCaption:B,rolloverCaption:N,captionRelation:O,rotation:L,field:j,control:R,fieldType:U,action:c,AA:y,ApStates:m,ApState:l,normalIcon:d,rolloverIcon:h,downIcon:g,hasAP:v,alignment:S,directionRTL:b,lineSpace:D},H?{DA:{flags:H.flags,textColor:H.text_color,textSize:H.text_size,isEmbedded:K,fontName:W,fullName:z}}:{})}},{key:"setAction",value:function(e,t,n){var r,i=this.engine,a=this.JR.actionManager,o=this.engineWidget,s=this.annot.GetPage().GetDocument();if(r=a.create(s,t.type),-1==e)try{o.SetAction(r)}catch(e){isNaN(e)||(e=i.getErrorCode(e)),console.warn(e)}else{var u=o.GetField(),c=this.pdfPage.pdfDoc.form,l=e>10&&e<17?o.GetDict():u.GetDict();c.addAAToDict(l,r,{trigger:e,field:u.GetName().toString()},n)}var d=a.get(r,this.doc,this.JR);return d.create(t),this.updateModifyTime(),d}},{key:"setDefaultAppearance",value:function(e){var t,n=this.engine,r=JSON.parse(e),i=this.engineWidget,a=i.GetControl(),o=void 0!==r.fontName?n.DefAPFlags.e_FlagFont.value:0,s=void 0!==r.textColor?n.DefAPFlags.e_FlagTextColor.value:0,u=void 0!==r.textSize?n.DefAPFlags.e_FlagFontSize.value:0;if(r.fontName){var c=mapFontName2StdID(r.fontName);if(c){var l=[n.StandardID.e_StdIDCourier,n.StandardID.e_StdIDCourierB,n.StandardID.e_StdIDCourierBI,n.StandardID.e_StdIDCourierI,n.StandardID.e_StdIDHelvetica,n.StandardID.e_StdIDHelveticaB,n.StandardID.e_StdIDHelveticaBI,n.StandardID.e_StdIDHelveticaI,n.StandardID.e_StdIDTimes,n.StandardID.e_StdIDTimesB,n.StandardID.e_StdIDTimesBI,n.StandardID.e_StdIDTimesI,n.StandardID.e_StdIDSymbol,n.StandardID.e_StdIDZapfDingbats];t=new this.engine.Font(l[c])}else t=new this.engine.Font((0,f.Dp)(n,r.fontName),0,n.Charset.e_CharsetANSI,0)}else t=new this.engine.Font(0);var d=new this.engine.DefaultAppearance(o|s|u,t,r.textSize?r.textSize:0,r.textColor?r.textColor:0);try{a.SetDefaultAppearance(d)}catch(e){return isNaN(e)||(e=n.getErrorCode(e)),void console.warn(e)}i.ResetAppearanceStream(),this.updateModifyTime()}},{key:"getWidgetMkOption",value:function(){var e=this.engine,t=this.engineWidget.GetMKIconCaptionRelation();switch(t){case e.MKIconCaptionRelation.e_MKRelationNoIcon:t="e_MKRelationNoIcon";break;case e.MKIconCaptionRelation.e_MKRelationNoCaption:t="e_MKRelationNoCaption";break;case e.MKIconCaptionRelation.e_MKRelationCaptionBelowIcon:t="e_MKRelationCaptionBelowIcon";break;case e.MKIconCaptionRelation.e_MKRelationCaptionAboveIcon:t="e_MKRelationCaptionAboveIcon";break;case e.MKIconCaptionRelation.e_MKRelationCaptionRight:t="e_MKRelationCaptionRight";break;case e.MKIconCaptionRelation.e_MKRelationCaptionLeft:t="e_MKRelationCaptionLeft";break;case e.MKIconCaptionRelation.e_MKRelationCaptionOvrlayOnIcon:t="e_MKRelationCaptionOvrlayOnIcon";break;default:t=""}var n=this.engineWidget.GetHighlightingMode();switch(n){case e.HighlightingMode.e_HighlightingNone:n="e_HighlightingNone";break;case e.HighlightingMode.e_HighlightingInvert:n="e_HighlightingInvert";break;case e.HighlightingMode.e_HighlightingOutline:n="e_HighlightingOutline";break;case e.HighlightingMode.e_HighlightingPush:n="e_HighlightingPush";break;case e.HighlightingMode.e_HighlightingToggle:n="e_HighlightingToggle";break;default:n=""}var r=this.engineWidget.GetMKNormalCaption().toString(),i=this.engineWidget.GetMKDownCaption().toString(),a=this.engineWidget.GetMKRolloverCaption().toString();return{labelIcon:{up:{label:r,icon:this.bitmapParseBlob(this.engineWidget.GetMKNormalIconBitmap())},down:{label:i,icon:this.bitmapParseBlob(this.engineWidget.GetMKDownIconBitmap())},rollover:{label:a,icon:this.bitmapParseBlob(this.engineWidget.GetMKRolloverIconBitmap())}},layout:t,behavior:n}}},{key:"setWidgetIconCaptionRelation",value:function(e){e=e||"e_MKRelationNoIcon";var t=this.engine.MKIconCaptionRelation[e];this.engineWidget.SetMKIconCaptionRelation(t),this.engineWidget.ResetAppearanceStream()}},{key:"setWidgetHighlighting",value:function(e){e=e||"e_HighlightingPush";var t=this.engine.HighlightingMode[e];this.engineWidget.SetHighlightingMode(t),this.engineWidget.ResetAppearanceStream()}},{key:"setWidgetMkCaption",value:function(e,t){switch(e=e||"up",t=(0,f.Dp)(this.engine,t||""),e){case"up":this.engineWidget.SetMKNormalCaption(t);break;case"down":this.engineWidget.SetMKDownCaption(t);break;case"rollover":this.engineWidget.SetMKRolloverCaption(t)}this.engineWidget.ResetAppearanceStream()}},{key:"setWidgetMkIcon",value:function(e,t){var n;switch(e=e||"up",t&&(n=d.Z.createImage(this.engine,t).GetFrameBitmap(0)),e){case"up":t?this.engineWidget.SetMKNormalIconBitmap(n):this.engineWidget.RemoveMKEntry(this.engine.MKEntry.e_MKEntryNormalIcon);break;case"down":t?this.engineWidget.SetMKDownIconBitmap(n):this.engineWidget.RemoveMKEntry(this.engine.MKEntry.e_MKEntryDownIcon);break;case"rollover":t?this.engineWidget.SetMKRolloverIconBitmap(n):this.engineWidget.RemoveMKEntry(this.engine.MKEntry.e_MKEntryRolloverIcon)}this.engineWidget.ResetAppearanceStream()}},{key:"getWidgetIconFitOption",value:function(){var e=this.engine,t=this.engineWidget.GetMKIconFit(),n=t.scale_way_type,r=t.is_proportional_scaling,i=t.fit_bounds,a=t.horizontal_fraction,o=t.vertical_fraction;switch(n){case e.ScaleWayType.e_ScaleWayAlways:n="e_ScaleWayAlways";break;case e.ScaleWayType.e_ScaleWayBigger:n="e_ScaleWayBigger";break;case e.ScaleWayType.e_ScaleWaySmaller:n="e_ScaleWaySmaller";break;case e.ScaleWayType.e_ScaleWayNever:n="e_ScaleWayNever";break;default:n="e_ScaleWayAlways"}return{scale_way_type:n,is_proportional_scaling:r+"",fit_bounds:i,horizontal_fraction:a=(100*a).toFixed(0),vertical_fraction:o=(100*o).toFixed(0)}}},{key:"setWidgetIconFitOption",value:function(e){var t=new this.engine.IconFit,n=this.engine.ScaleWayType[e.scale_way_type],r=e.is_proportional_scaling,i=e.horizontal_fraction,a=e.vertical_fraction,o=e.fit_bounds;i=parseFloat(i/100),a=parseFloat(a/100),t.Set(n,"true"===r,i,a,o),this.engineWidget.SetMKIconFit(t),this.engineWidget.ResetAppearanceStream()}},{key:"bitmapParseBlob",value:function(e){var t=this.engine,n="";if(!e.IsEmpty()){e.ConvertFormat(t.DIBFormat.e_DIBArgb);var r,i=e.GetWidth(),a=e.GetHeight(),o=e.GetBuffer(),s=a*e.GetPitch(),u=o+s;r=t.HEAPU8.buffer.slice?t.HEAPU8.buffer.slice(o,u):new Uint8Array(t.HEAPU8.buffer,o,s).buffer;var c=new Uint8Array(r),l=0,d=0,f=e.GetPitch();for(l=0;l<a;l++)for(d=0;d<i;d++){var h,g=l*f;h=[c[4*d+2+g],c[4*d+g]],c[4*d+g]=h[0],c[4*d+2+g]=h[1]}n={start:o,size:s,width:i,height:a,buffer:r}}return n}},{key:"removeAction",value:function(e,t){var n=this,r=this.engine,i=this.pdfPage.pdfDoc.form.engineForm.GetDocument(),a=this.engineWidget;if(this.updateModifyTime(),"-1"==e){var o=a.GetAction();return o=(0,g.Z)(r,i,o,t),t&&o?(a.SetAction(o),[this.JR.actionManager.get(o,this,this.JR).toJson()]):(a.RemoveAction(),[])}e=r.TriggerEvent.values[e];var s=a.GetField(),u=a.GetDict(),c=s.GetDict(),l=[u,c];return u.GetObjNum()==c.GetObjNum()&&(l=[u,null]),l.map((function(a){if(a){var o,s=(0,f.n5)(r,"AA"),u=a.GetElement(s);if(u){var c=u.GetDict();if(o=new r.AdditionalAction(i,c),t){var l=o.GetAction(e);if(l.IsEmpty())return;if(l=(0,g.Z)(r,i,l,t))return o.SetAction(e,l),n.JR.actionManager.get(l,n,n.JR).toJson();o.RemoveAction(e)}else o.RemoveAction(e)}}}))}},{key:"moveAction",value:function(e){var t=e.trigger,n=e.action,r=e.direction,i=this.engine;t=i.TriggerEvent.values[t];var a=this.pdfPage.pdfDoc.doc,o=this.annot.GetDict();if(o){var s,u=(0,f.n5)(i,"AA"),c=o.GetElement(u);if(c){var l=c.GetDict(),d=(s=new i.AdditionalAction(a,l)).GetAction(t);if(!d.IsEmpty()){for(var h=d.GetSubActionCount(),g=[d],p=0;p<h;p++)g.push(d.GetSubAction(p));var v=g.findIndex((function(e){return e.GetDict().GetObjNum()===n.objNumber}));if(-1!=v){var _=r?v+1:v-1;if(0==_||0==v){s.RemoveAction(t);var m=0==v?_:v;d=g[m],s.SetAction(t,d),g[0].RemoveAllSubActions(),g.splice(m,1);for(var y=0;y<g.length;y++)d.InsertSubAction(y,g[y])}else{var S;d.RemoveAllSubActions(),S=[g[_],g[v]],g[v]=S[0],g[_]=S[1];for(var b=1;b<g.length;b++)d.InsertSubAction(b,g[b])}this.updateModifyTime()}}}}}}]),n}(l.Z)},2165:(e,t,n)=>{"use strict";function r(e,t){var n=e.AnnotType;return{text:n.e_Note,caret:n.e_Caret,freetext:n.e_FreeText,fileattachment:n.e_FileAttachment,highlight:n.e_Highlight,ink:n.e_Ink,line:n.e_Line,link:n.e_Link,circle:n.e_Circle,square:n.e_Square,polygon:n.e_Polygon,polyline:n.e_PolyLine,sound:n.e_Sound,squiggly:n.e_Squiggly,stamp:n.e_Stamp,strikeout:n.e_StrikeOut,underline:n.e_Underline,redact:n.e_Redact,popup:n.e_Popup,psink:n.e_PSInk,movie:n.e_Movie,widget:n.e_Widget,screen:n.e_Screen,printermark:n.e_PrinterMark,trapnet:n.e_TrapNet,watermark:n.e_Watermark,"3d":n.e_3D}[t]||n.e_UnknownType}n.d(t,{M:()=>r})},6550:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(4375),i=n(6721),a=n(7327),o=n(4020),s=function(){function e(t,n,i){(0,r._)(this,e),this.doc=n,(0,a._)(n,i.PDFDoc)||(this.doc=n.doc),this.engine=i,this.destination=t}return(0,i._)(e,[{key:"toJson",value:function(){var e=null;return this.destination.IsEmpty()||(e={top:this.getTop(),bottom:this.getBottom(),left:this.getLeft(),right:this.getRight(),pageIndex:this.getPageIndex(),zoomFactor:this.getZoomFactor(),zoomMode:this.getZoomMode()}),e}},{key:"getTop",value:function(){return this.destination.GetTop()}},{key:"getBottom",value:function(){return this.destination.GetBottom()}},{key:"getLeft",value:function(){return this.destination.GetLeft()}},{key:"getRight",value:function(){return this.destination.GetRight()}},{key:"getPageIndex",value:function(){var e=this.destination.GetDestArray();if(!e||0===e.GetElementCount())return-1;var t=e.GetElement(0).GetDirectObject();if(!t)return-1;var n=t.GetType().value;if(2==n)return t.GetInteger();if(6!=n)return-1;var r=t.GetDict().GetElement(new this.engine.String("Parent"));if(!r)return-1;var i=r.GetDict();if(!i)return-1;if(i.HasKey(new this.engine.String("Kids"))){var a=i.GetElement(new this.engine.String("Kids")).GetDirectObject().GetArray();if(!a||0===a.GetElementCount())return-1}return this.destination.GetPageIndex(this.doc)}},{key:"getDestArray",value:function(){return this.destination.GetDestArray()}},{key:"getZoomFactor",value:function(){return this.destination.GetZoomFactor()}},{key:"getZoomMode",value:function(){var e=this.destination.GetZoomMode();return e&&e.constructor.name.replace(/^ZoomMode_e_/,"")}}],[{key:"create",value:function(t,n,r){var i=null;switch(r.zoomMode||r.type){case o.jI.ZoomXYZ:i=e.createXYZ;break;case o.jI.ZoomFitPage:i=e.createFitPage;break;case o.jI.ZoomFitHorz:i=e.createFitHorz;break;case o.jI.ZoomFitVert:i=e.createFitVert;break;case o.jI.ZoomFitRect:i=e.createFitRect;break;case o.jI.ZoomFitBBox:i=e.createFitBBox;break;case o.jI.ZoomFitBHorz:i=e.createFitBHorz;break;default:i=e.createFitBVert}return i(t,n,r)}},{key:"createFitBBox",value:function(e,t,n){return e.Destination.CreateFitBBox(t,n.pageIndex)}},{key:"createFitBHorz",value:function(e,t,n){return e.Destination.CreateFitBHorz(t,n.pageIndex,n.top)}},{key:"createFitBVert",value:function(e,t,n){return e.Destination.CreateFitBVert(t,n.pageIndex,n.left)}},{key:"createFitHorz",value:function(e,t,n){return e.Destination.CreateFitHorz(t,n.pageIndex,n.top)}},{key:"createFitPage",value:function(e,t,n){return e.Destination.CreateFitPage(t,n.pageIndex)}},{key:"createFitRect",value:function(e,t,n){return e.Destination.CreateFitRect(t,n.pageIndex,n.left,n.bottom,n.right,n.top)}},{key:"createFitVert",value:function(e,t,n){return e.Destination.CreateFitVert(t,n.pageIndex,n.left)}},{key:"createFromPDFArray",value:function(e,t,n){return e.Destination.CreateFromPDFArray(t,n.pdfArray)}},{key:"createXYZ",value:function(e,t,n){var r=t.GetPageCount(),i=n.pageIndex;if(isNaN(i)||i<0||i>=r){if(1===r)throw new Error("Incorrect page index: ".concat(i,". It should be 0"));throw new Error("Incorrect page index: ".concat(i,". It should be between [0,").concat(r-1,"]"))}return e.Destination.CreateXYZ(t,n.pageIndex,n.left,n.top,n.zoomFactor)}}]),e}()},7239:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4375),i=n(6721),a=n(7327),o=n(1870),s=n(2699),u=o.mA.getLogger("pdf-jr.FileSpec"),c=function(){function e(t,n){(0,r._)(this,e),this.parent=n,this.engine=n.engine,this.fileSpec=t}return(0,i._)(e,[{key:"toJson",value:function(){var e=null;if(this.fileSpec.IsEmpty())return e;var t=this.getDict();if(t){var n=t.GetObjNum();e={description:this.getDescription(),dict:t,fileName:this.getFileName(),fileSize:this.getFileSize(),modifiedDateTime:this.getModifiedDateTime(),subtype:this.getSubtype(),isEmbedded:this.isEmbedded(),objNum:n}}return e}},{key:"gtAssociteFileRelationship",value:function(){return this.fileSpec.GetAssociteFileRelationship()}},{key:"getChecksum",value:function(){var e=this.fileSpec.GetChecksum();return 0===e.GetLength()?null:e.toString()}},{key:"getCreationDateTime",value:function(){try{var e=this.fileSpec.GetCreationDateTime();return e.IsValid()?e:null}catch(e){var t=this.engine,n=(0,a._)(e,t.ErrorCode)?e:t.getErrorCode(e);u.warn(n)}}},{key:"getDescription",value:function(){var e=this.fileSpec.GetDescription();if(0===e.GetLength())return null;try{return e.toString()}catch(t){return this.parent.JR.getPDFString(e)}}},{key:"getDict",value:function(){return this.fileSpec.GetDict()}},{key:"getFileData",value:function(){return this.fileSpec.GetFileData()}},{key:"getFileName",value:function(){var e=this.fileSpec.GetFileName();return 0===e.GetLength()?null:e.toString()}},{key:"getFileSize",value:function(){return this.fileSpec.GetFileSize()}},{key:"getModifiedDateTime",value:function(){var e=this.fileSpec.GetModifiedDateTime();return e.IsValid()?(0,s.Z)(e,"YYYY/MM/DD HH:mm:ss"):null}},{key:"getSubtype",value:function(){var e=this.fileSpec.GetSubtype();return 0===e.GetLength()?null:e.toString()}},{key:"isEmbedded",value:function(){return this.fileSpec.IsEmbedded()}},{key:"setAssociteFileRelationship",value:function(e){this.fileSpec.SetAssociteFileRelationship(e)}},{key:"setChecksum",value:function(e){this.fileSpec.SetChecksum(e)}},{key:"setCreationDateTime",value:function(e){this.fileSpec.SetCreationDateTime(e)}},{key:"setDescription",value:function(e){this.fileSpec.SetDescription(e)}},{key:"setFileName",value:function(e){var t=new this.engine.WString(e);this.fileSpec.SetFileName(t),t.delete()}},{key:"setModifiedDateTime",value:function(e){this.fileSpec.SetModifiedDateTime(e)}},{key:"setSubtype",value:function(e){this.fileSpec.SetSubtype(e)}},{key:"getStream",value:function(e){var t=this.engine,n=0,r=(0,o.dD)(),i=t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return n},WriteBlock:function(i,a,o){n+=o;var s,u=t.HEAPU8.buffer;return s=u.slice?u.slice(i,i+o):new Uint8Array(u,i,o).buffer,e(s,a,o),r.resolve(n),!0}});return this.fileSpec.ExportToFileStream(i),r.promise}},{key:"getStreamEx",value:function(){var e=this.engine,t=!0,n=0,r=new Blob([]),i=(0,o.dD)(),a=e.StreamCallback.implement({Release:function(){t=!0,n=0},Flush:function(){return!0},GetSize:function(){return n},WriteBlock:function(i,a,o){for(var s=[],u=a;u<a+o;u++)s.push(e.HEAPU8[i+u-a]);if(t)t=!1,r=0!=a?new Blob([new Uint8Array(a),new Uint8Array(s)]):new Blob([r,new Uint8Array(s)]);else{var c=r.size;a>=0&&a<c&&a+o<c?r=new Blob([r.slice(0,a),new Uint8Array(s),r.slice(a+o,c)]):a>=0&&a<c&&a+o>c?r=new Blob([r.slice(0,a),new Uint8Array(s)]):a>=c&&(r=new Blob([r,new Uint8Array(a-c),new Uint8Array(s)]))}return n=r.size,!0}});return this.fileSpec.ExportToFileStream(a),i.resolve(r),i.promise}}],[{key:"createFile",value:function(e,t,n){var r=new e.FileSpec(t);return r.Embed(e.StreamCallback.implement({Release:function(){},GetSize:function(){return n.byteLength},ReadBlock:function(t,r,i){var a=n.slice(r,r+i);return e.HEAPU8.set(a,t),!0}})),r}},{key:"createFileEx",value:function(e,t,n,r,i){var o;return(o=n||new e.FileSpec(t)).Embed(e.StreamCallback.implement({Release:function(){},GetSize:function(){return(0,a._)(r,Blob)?r.size:r.byteLength},ReadBlock:function(t,n,r){var a=new Uint8Array(i(n,r));return e.HEAPU8.set(a,t),!0}}))?o:null}}]),e}()},2998:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(4375),i=n(6721),a=n(1870),o=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,null,[{key:"createImage",value:function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.slice?n=function(e,n,r,i){e.set(new Uint8Array(t.slice(r,r+i)),n)}:(r=new Uint8Array(t),n=function(e,t,n,i){e.set(r.slice(n,n+i),t)});try{var o=e.ReaderCallback.implement({Release:function(){},GetSize:function(){return t.byteLength},ReadBlock:function(t,r,i){return n(e.HEAPU8,t,r,i),!0}});return i?o:new e.Image(o)}catch(t){isNaN(t)||(t=e.getErrorCode(t)),a.mA.getLogger("CreateImage").warn(t)}}}]),e}()},402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return i(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){n.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=u(e),r=n[0],o=n[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),c=0,l=o>0?r-4:r,d=0;d<l;d+=4)t=i[e.charCodeAt(d)]<<18|i[e.charCodeAt(d+1)]<<12|i[e.charCodeAt(d+2)]<<6|i[e.charCodeAt(d+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===o&&(t=i[e.charCodeAt(d)]<<2|i[e.charCodeAt(d+1)]>>4,s[c++]=255&t),1===o&&(t=i[e.charCodeAt(d)]<<10|i[e.charCodeAt(d+1)]<<4|i[e.charCodeAt(d+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=16383,s=0,u=n-i;s<u;s+=o)a.push(c(e,s,s+o>u?u:s+o));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){var r=4096,i=new Uint32Array([0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215]);function a(e){this.buf_=new Uint8Array(8224),this.input_=e,this.reset()}a.READ_SIZE=r,a.IBUF_MASK=8191,a.prototype.reset=function(){this.buf_ptr_=0,this.val_=0,this.pos_=0,this.bit_pos_=0,this.bit_end_pos_=0,this.eos_=0,this.readMoreInput();for(var e=0;e<4;e++)this.val_|=this.buf_[this.pos_]<<8*e,++this.pos_;return this.bit_end_pos_>0},a.prototype.readMoreInput=function(){if(!(this.bit_end_pos_>256))if(this.eos_){if(this.bit_pos_>this.bit_end_pos_)throw new Error("Unexpected end of input "+this.bit_pos_+" "+this.bit_end_pos_)}else{var e=this.buf_ptr_,t=this.input_.read(this.buf_,e,r);if(t<0)throw new Error("Unexpected end of input");if(t<r){this.eos_=1;for(var n=0;n<32;n++)this.buf_[e+t+n]=0}if(0===e){for(n=0;n<32;n++)this.buf_[8192+n]=this.buf_[n];this.buf_ptr_=r}else this.buf_ptr_=0;this.bit_end_pos_+=t<<3}},a.prototype.fillBitWindow=function(){for(;this.bit_pos_>=8;)this.val_>>>=8,this.val_|=this.buf_[8191&this.pos_]<<24,++this.pos_,this.bit_pos_=this.bit_pos_-8>>>0,this.bit_end_pos_=this.bit_end_pos_-8>>>0},a.prototype.readBits=function(e){32-this.bit_pos_<e&&this.fillBitWindow();var t=this.val_>>>this.bit_pos_&i[e];return this.bit_pos_+=e,t},t.exports=a},{}],3:[function(e,t,n){n.lookup=new Uint8Array([0,0,0,0,0,0,0,0,0,4,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,12,16,12,12,20,12,16,24,28,12,12,32,12,36,12,44,44,44,44,44,44,44,44,44,44,32,32,24,40,28,12,12,48,52,52,52,48,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,24,12,28,12,12,12,56,60,60,60,56,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,24,12,28,12,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,56,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,27,27,27,27,28,28,28,28,29,29,29,29,30,30,30,30,31,31,31,31,32,32,32,32,33,33,33,33,34,34,34,34,35,35,35,35,36,36,36,36,37,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45,45,46,46,46,46,47,47,47,47,48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,54,54,54,55,55,55,55,56,56,56,56,57,57,57,57,58,58,58,58,59,59,59,59,60,60,60,60,61,61,61,61,62,62,62,62,63,63,63,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n.lookupOffsets=new Uint16Array([1024,1536,1280,1536,0,256,768,512])},{}],4:[function(e,t,n){var r=e("./streams").BrotliInput,i=e("./streams").BrotliOutput,a=e("./bit_reader"),o=e("./dictionary"),s=e("./huffman").HuffmanCode,u=e("./huffman").BrotliBuildHuffmanTable,c=e("./context"),l=e("./prefix"),d=e("./transform"),f=8,h=16,g=256,p=704,v=26,_=6,m=2,y=8,S=255,b=1080,D=18,P=new Uint8Array([1,2,3,4,0,5,17,6,16,7,8,9,10,11,12,13,14,15]),I=16,A=new Uint8Array([3,2,1,0,3,3,3,3,3,3,2,2,2,2,2,2]),w=new Int8Array([0,0,0,0,-1,1,-2,2,-3,3,-1,1,-2,2,-3,3]),C=new Uint16Array([256,402,436,468,500,534,566,598,630,662,694,726,758,790,822,854,886,920,952,984,1016,1048,1080]);function k(e){var t;return 0===e.readBits(1)?16:(t=e.readBits(3))>0?17+t:(t=e.readBits(3))>0?8+t:17}function E(e){if(e.readBits(1)){var t=e.readBits(3);return 0===t?1:e.readBits(t)+(1<<t)}return 0}function G(){this.meta_block_length=0,this.input_end=0,this.is_uncompressed=0,this.is_metadata=!1}function T(e){var t,n,r,i=new G;if(i.input_end=e.readBits(1),i.input_end&&e.readBits(1))return i;if(7===(t=e.readBits(2)+4)){if(i.is_metadata=!0,0!==e.readBits(1))throw new Error("Invalid reserved bit");if(0===(n=e.readBits(2)))return i;for(r=0;r<n;r++){var a=e.readBits(8);if(r+1===n&&n>1&&0===a)throw new Error("Invalid size byte");i.meta_block_length|=a<<8*r}}else for(r=0;r<t;++r){var o=e.readBits(4);if(r+1===t&&t>4&&0===o)throw new Error("Invalid size nibble");i.meta_block_length|=o<<4*r}return++i.meta_block_length,i.input_end||i.is_metadata||(i.is_uncompressed=e.readBits(1)),i}function F(e,t,n){var r;return n.fillBitWindow(),(r=e[t+=n.val_>>>n.bit_pos_&S].bits-y)>0&&(n.bit_pos_+=y,t+=e[t].value,t+=n.val_>>>n.bit_pos_&(1<<r)-1),n.bit_pos_+=e[t].bits,e[t].value}function R(e,t,n,r){var i,a,o=new Uint8Array(e);if(r.readMoreInput(),1===(a=r.readBits(2))){for(var c=e-1,l=0,d=new Int32Array(4),g=r.readBits(2)+1;c;)c>>=1,++l;for(p=0;p<g;++p)d[p]=r.readBits(l)%e,o[d[p]]=2;switch(o[d[0]]=1,g){case 1:break;case 3:if(d[0]===d[1]||d[0]===d[2]||d[1]===d[2])throw new Error("[ReadHuffmanCode] invalid symbols");break;case 2:if(d[0]===d[1])throw new Error("[ReadHuffmanCode] invalid symbols");o[d[1]]=1;break;case 4:if(d[0]===d[1]||d[0]===d[2]||d[0]===d[3]||d[1]===d[2]||d[1]===d[3]||d[2]===d[3])throw new Error("[ReadHuffmanCode] invalid symbols");r.readBits(1)?(o[d[2]]=3,o[d[3]]=3):o[d[0]]=2}}else{var p,v=new Uint8Array(D),_=32,m=0,S=[new s(2,0),new s(2,4),new s(2,3),new s(3,2),new s(2,0),new s(2,4),new s(2,3),new s(4,1),new s(2,0),new s(2,4),new s(2,3),new s(3,2),new s(2,0),new s(2,4),new s(2,3),new s(4,5)];for(p=a;p<D&&_>0;++p){var b,I=P[p],A=0;r.fillBitWindow(),A+=r.val_>>>r.bit_pos_&15,r.bit_pos_+=S[A].bits,b=S[A].value,v[I]=b,0!==b&&(_-=32>>b,++m)}if(1!==m&&0!==_)throw new Error("[ReadHuffmanCode] invalid num_codes or space");!function(e,t,n,r){for(var i=0,a=f,o=0,c=0,l=32768,d=[],g=0;g<32;g++)d.push(new s(0,0));for(u(d,0,5,e,D);i<t&&l>0;){var p,v=0;if(r.readMoreInput(),r.fillBitWindow(),v+=r.val_>>>r.bit_pos_&31,r.bit_pos_+=d[v].bits,(p=255&d[v].value)<h)o=0,n[i++]=p,0!==p&&(a=p,l-=32768>>p);else{var _,m,y=p-14,S=0;if(p===h&&(S=a),c!==S&&(o=0,c=S),_=o,o>0&&(o-=2,o<<=y),i+(m=(o+=r.readBits(y)+3)-_)>t)throw new Error("[ReadHuffmanCodeLengths] symbol + repeat_delta > num_symbols");for(var b=0;b<m;b++)n[i+b]=c;i+=m,0!==c&&(l-=m<<15-c)}}if(0!==l)throw new Error("[ReadHuffmanCodeLengths] space = "+l);for(;i<t;i++)n[i]=0}(v,e,o,r)}if(0===(i=u(t,n,y,o,e)))throw new Error("[ReadHuffmanCode] BuildHuffmanTable failed: ");return i}function M(e,t,n){var r,i;return r=F(e,t,n),i=l.kBlockLengthPrefixCode[r].nbits,l.kBlockLengthPrefixCode[r].offset+n.readBits(i)}function O(e,t,n){var r;return e<I?(n+=A[e],r=t[n&=3]+w[e]):r=e-I+1,r}function x(e,t){for(var n=e[t],r=t;r;--r)e[r]=e[r-1];e[0]=n}function B(e,t){this.alphabet_size=e,this.num_htrees=t,this.codes=new Array(t+t*C[e+31>>>5]),this.htrees=new Uint32Array(t)}function N(e,t){var n,r,i={num_htrees:null,context_map:null},a=0;t.readMoreInput();var o=i.num_htrees=E(t)+1,u=i.context_map=new Uint8Array(e);if(o<=1)return i;for(t.readBits(1)&&(a=t.readBits(4)+1),n=[],r=0;r<b;r++)n[r]=new s(0,0);for(R(o+a,n,0,t),r=0;r<e;){var c;if(t.readMoreInput(),0===(c=F(n,0,t)))u[r]=0,++r;else if(c<=a)for(var l=1+(1<<c)+t.readBits(c);--l;){if(r>=e)throw new Error("[DecodeContextMap] i >= context_map_size");u[r]=0,++r}else u[r]=c-a,++r}return t.readBits(1)&&function(e,t){var n,r=new Uint8Array(256);for(n=0;n<256;++n)r[n]=n;for(n=0;n<t;++n){var i=e[n];e[n]=r[i],i&&x(r,i)}}(u,e),i}function L(e,t,n,r,i,a,o){var s,u=2*n,c=n,l=F(t,n*b,o);(s=0===l?i[u+(1&a[c])]:1===l?i[u+(a[c]-1&1)]+1:l-2)>=e&&(s-=e),r[n]=s,i[u+(1&a[c])]=s,++a[c]}function j(e,t,n,r,i,o){var s,u=i+1,c=n&i,l=o.pos_&a.IBUF_MASK;if(t<8||o.bit_pos_+(t<<3)<o.bit_end_pos_)for(;t-- >0;)o.readMoreInput(),r[c++]=o.readBits(8),c===u&&(e.write(r,u),c=0);else{if(o.bit_end_pos_<32)throw new Error("[CopyUncompressedBlockToOutput] br.bit_end_pos_ < 32");for(;o.bit_pos_<32;)r[c]=o.val_>>>o.bit_pos_,o.bit_pos_+=8,++c,--t;if(l+(s=o.bit_end_pos_-o.bit_pos_>>3)>a.IBUF_MASK){for(var d=a.IBUF_MASK+1-l,f=0;f<d;f++)r[c+f]=o.buf_[l+f];s-=d,c+=d,t-=d,l=0}for(f=0;f<s;f++)r[c+f]=o.buf_[l+f];if(t-=s,(c+=s)>=u)for(e.write(r,u),c-=u,f=0;f<c;f++)r[f]=r[u+f];for(;c+t>=u;){if(s=u-c,o.input_.read(r,c,s)<s)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");e.write(r,u),t-=s,c=0}if(o.input_.read(r,c,t)<t)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");o.reset()}}function U(e){var t=e.bit_pos_+7&-8;return 0==e.readBits(t-e.bit_pos_)}function W(e){var t=new r(e),n=new a(t);return k(n),T(n).meta_block_length}function H(e,t){var n,r,i,u,f,h,y,S,D,P,A=0,w=0,C=0,G=[16,15,11,4],x=0,W=0,H=0,z=[new B(0,0),new B(0,0),new B(0,0)],K=128+a.READ_SIZE;i=(1<<(r=k(P=new a(e))))-16,f=(u=1<<r)-1,h=new Uint8Array(u+K+o.maxDictionaryWordLength),y=u,S=[],D=[];for(var J=0;J<3*b;J++)S[J]=new s(0,0),D[J]=new s(0,0);for(;!w;){var V,Y,Z,q,X,Q,$,ee,te,ne,re,ie=0,ae=[1<<28,1<<28,1<<28],oe=[0],se=[1,1,1],ue=[0,1,0,1,0,1],ce=[0],le=null,de=null,fe=0,he=null,ge=0,pe=0,ve=0;for(n=0;n<3;++n)z[n].codes=null,z[n].htrees=null;P.readMoreInput();var _e=T(P);if(A+(ie=_e.meta_block_length)>t.buffer.length){var me=new Uint8Array(A+ie);me.set(t.buffer),t.buffer=me}if(w=_e.input_end,V=_e.is_uncompressed,_e.is_metadata)for(U(P);ie>0;--ie)P.readMoreInput(),P.readBits(8);else if(0!==ie)if(V)P.bit_pos_=P.bit_pos_+7&-8,j(t,ie,A,h,f,P),A+=ie;else{for(n=0;n<3;++n)se[n]=E(P)+1,se[n]>=2&&(R(se[n]+2,S,n*b,P),R(v,D,n*b,P),ae[n]=M(D,n*b,P),ce[n]=1);for(P.readMoreInput(),q=(1<<(Y=P.readBits(2)))-1,X=(Z=I+(P.readBits(4)<<Y))+(48<<Y),le=new Uint8Array(se[0]),n=0;n<se[0];++n)P.readMoreInput(),le[n]=P.readBits(2)<<1;var ye=N(se[0]<<_,P);$=ye.num_htrees,Q=ye.context_map;var Se=N(se[2]<<m,P);for(te=Se.num_htrees,ee=Se.context_map,z[0]=new B(g,$),z[1]=new B(p,se[1]),z[2]=new B(X,te),n=0;n<3;++n)z[n].decode(P);for(de=0,he=0,ne=le[oe[0]],pe=c.lookupOffsets[ne],ve=c.lookupOffsets[ne+1],re=z[1].htrees[0];ie>0;){var be,De,Pe,Ie,Ae,we,Ce,ke,Ee,Ge,Te,Fe;for(P.readMoreInput(),0===ae[1]&&(L(se[1],S,1,oe,ue,ce,P),ae[1]=M(D,b,P),re=z[1].htrees[oe[1]]),--ae[1],(De=(be=F(z[1].codes,re,P))>>6)>=2?(De-=2,Ce=-1):Ce=0,Pe=l.kInsertRangeLut[De]+(be>>3&7),Ie=l.kCopyRangeLut[De]+(7&be),Ae=l.kInsertLengthPrefixCode[Pe].offset+P.readBits(l.kInsertLengthPrefixCode[Pe].nbits),we=l.kCopyLengthPrefixCode[Ie].offset+P.readBits(l.kCopyLengthPrefixCode[Ie].nbits),W=h[A-1&f],H=h[A-2&f],Ee=0;Ee<Ae;++Ee)P.readMoreInput(),0===ae[0]&&(L(se[0],S,0,oe,ue,ce,P),ae[0]=M(D,0,P),de=oe[0]<<_,ne=le[oe[0]],pe=c.lookupOffsets[ne],ve=c.lookupOffsets[ne+1]),fe=Q[de+(c.lookup[pe+W]|c.lookup[ve+H])],--ae[0],H=W,W=F(z[0].codes,z[0].htrees[fe],P),h[A&f]=W,(A&f)===f&&t.write(h,u),++A;if((ie-=Ae)<=0)break;if(Ce<0&&(P.readMoreInput(),0===ae[2]&&(L(se[2],S,2,oe,ue,ce,P),ae[2]=M(D,2*b,P),he=oe[2]<<m),--ae[2],ge=ee[he+(255&(we>4?3:we-2))],(Ce=F(z[2].codes,z[2].htrees[ge],P))>=Z&&(Fe=(Ce-=Z)&q,Ce=Z+((Re=(2+(1&(Ce>>=Y))<<(Te=1+(Ce>>1)))-4)+P.readBits(Te)<<Y)+Fe)),(ke=O(Ce,G,x))<0)throw new Error("[BrotliDecompress] invalid distance");if(Ge=A&f,ke>(C=A<i&&C!==i?A:i)){if(!(we>=o.minDictionaryWordLength&&we<=o.maxDictionaryWordLength))throw new Error("Invalid backward reference. pos: "+A+" distance: "+ke+" len: "+we+" bytes left: "+ie);var Re=o.offsetsByLength[we],Me=ke-C-1,Oe=o.sizeBitsByLength[we],xe=Me>>Oe;if(Re+=(Me&(1<<Oe)-1)*we,!(xe<d.kNumTransforms))throw new Error("Invalid backward reference. pos: "+A+" distance: "+ke+" len: "+we+" bytes left: "+ie);var Be=d.transformDictionaryWord(h,Ge,Re,we,xe);if(A+=Be,ie-=Be,(Ge+=Be)>=y){t.write(h,u);for(var Ne=0;Ne<Ge-y;Ne++)h[Ne]=h[y+Ne]}}else{if(Ce>0&&(G[3&x]=ke,++x),we>ie)throw new Error("Invalid backward reference. pos: "+A+" distance: "+ke+" len: "+we+" bytes left: "+ie);for(Ee=0;Ee<we;++Ee)h[A&f]=h[A-ke&f],(A&f)===f&&t.write(h,u),++A,--ie}W=h[A-1&f],H=h[A-2&f]}A&=1073741823}}t.write(h,A&f)}B.prototype.decode=function(e){var t,n=0;for(t=0;t<this.num_htrees;++t)this.htrees[t]=n,n+=R(this.alphabet_size,this.codes,n,e)},n.BrotliDecompressedSize=W,n.BrotliDecompressBuffer=function(e,t){var n=new r(e);null==t&&(t=W(e));var a=new Uint8Array(t),o=new i(a);return H(n,o),o.pos<o.buffer.length&&(o.buffer=o.buffer.subarray(0,o.pos)),o.buffer},n.BrotliDecompress=H,o.init()},{"./bit_reader":2,"./context":3,"./dictionary":7,"./huffman":8,"./prefix":9,"./streams":10,"./transform":11}],5:[function(e,t,n){var r=e("base64-js");e("fs"),n.init=function(){return(0,e("./decode").BrotliDecompressBuffer)(r.toByteArray(e("./dictionary.bin.js")))}},{"./decode":4,"./dictionary.bin.js":6,"base64-js":1,fs:13}],6:[function(e,t,n){t.exports="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"},{}],7:[function(e,t,n){var r=e("./dictionary-data");n.init=function(){n.dictionary=r.init()},n.offsetsByLength=new Uint32Array([0,0,0,0,0,4096,9216,21504,35840,44032,53248,63488,74752,87040,93696,100864,104704,106752,108928,113536,115968,118528,119872,121280,122016]),n.sizeBitsByLength=new Uint8Array([0,0,0,0,10,10,11,11,10,10,10,10,10,9,9,8,7,7,8,7,7,6,6,5,5]),n.minDictionaryWordLength=4,n.maxDictionaryWordLength=24},{"./dictionary-data":5}],8:[function(e,t,n){function r(e,t){this.bits=e,this.value=t}n.HuffmanCode=r;var i=15;function a(e,t){for(var n=1<<t-1;e&n;)n>>=1;return(e&n-1)+n}function o(e,t,n,i,a){do{e[t+(i-=n)]=new r(a.bits,a.value)}while(i>0)}function s(e,t,n){for(var r=1<<t-n;t<i&&!((r-=e[t])<=0);)++t,r<<=1;return t-n}n.BrotliBuildHuffmanTable=function(e,t,n,u,c){var l,d,f,h,g,p,v,_,m,y,S=t,b=new Int32Array(16),D=new Int32Array(16);for(y=new Int32Array(c),d=0;d<c;d++)b[u[d]]++;for(D[1]=0,l=1;l<i;l++)D[l+1]=D[l]+b[l];for(d=0;d<c;d++)0!==u[d]&&(y[D[u[d]]++]=d);if(m=_=1<<(v=n),1===D[15]){for(f=0;f<m;++f)e[t+f]=new r(0,65535&y[0]);return m}for(f=0,d=0,l=1,h=2;l<=n;++l,h<<=1)for(;b[l]>0;--b[l])o(e,t+f,h,_,new r(255&l,65535&y[d++])),f=a(f,l);for(p=m-1,g=-1,l=n+1,h=2;l<=i;++l,h<<=1)for(;b[l]>0;--b[l])(f&p)!==g&&(t+=_,m+=_=1<<(v=s(b,l,n)),e[S+(g=f&p)]=new r(v+n&255,t-S-g&65535)),o(e,t+(f>>n),h,_,new r(l-n&255,65535&y[d++])),f=a(f,l);return m}},{}],9:[function(e,t,n){function r(e,t){this.offset=e,this.nbits=t}n.kBlockLengthPrefixCode=[new r(1,2),new r(5,2),new r(9,2),new r(13,2),new r(17,3),new r(25,3),new r(33,3),new r(41,3),new r(49,4),new r(65,4),new r(81,4),new r(97,4),new r(113,5),new r(145,5),new r(177,5),new r(209,5),new r(241,6),new r(305,6),new r(369,7),new r(497,8),new r(753,9),new r(1265,10),new r(2289,11),new r(4337,12),new r(8433,13),new r(16625,24)],n.kInsertLengthPrefixCode=[new r(0,0),new r(1,0),new r(2,0),new r(3,0),new r(4,0),new r(5,0),new r(6,1),new r(8,1),new r(10,2),new r(14,2),new r(18,3),new r(26,3),new r(34,4),new r(50,4),new r(66,5),new r(98,5),new r(130,6),new r(194,7),new r(322,8),new r(578,9),new r(1090,10),new r(2114,12),new r(6210,14),new r(22594,24)],n.kCopyLengthPrefixCode=[new r(2,0),new r(3,0),new r(4,0),new r(5,0),new r(6,0),new r(7,0),new r(8,0),new r(9,0),new r(10,1),new r(12,1),new r(14,2),new r(18,2),new r(22,3),new r(30,3),new r(38,4),new r(54,4),new r(70,5),new r(102,5),new r(134,6),new r(198,7),new r(326,8),new r(582,9),new r(1094,10),new r(2118,24)],n.kInsertRangeLut=[0,0,8,8,0,16,8,16,16],n.kCopyRangeLut=[0,8,0,8,16,0,16,8,16]},{}],10:[function(e,t,n){function r(e){this.buffer=e,this.pos=0}function i(e){this.buffer=e,this.pos=0}r.prototype.read=function(e,t,n){this.pos+n>this.buffer.length&&(n=this.buffer.length-this.pos);for(var r=0;r<n;r++)e[t+r]=this.buffer[this.pos+r];return this.pos+=n,n},n.BrotliInput=r,i.prototype.write=function(e,t){if(this.pos+t>this.buffer.length)throw new Error("Output buffer is not large enough");return this.buffer.set(e.subarray(0,t),this.pos),this.pos+=t,t},n.BrotliOutput=i},{}],11:[function(e,t,n){var r=e("./dictionary"),i=10,a=11;function o(e,t,n){this.prefix=new Uint8Array(e.length),this.transform=t,this.suffix=new Uint8Array(n.length);for(var r=0;r<e.length;r++)this.prefix[r]=e.charCodeAt(r);for(r=0;r<n.length;r++)this.suffix[r]=n.charCodeAt(r)}var s=[new o("",0,""),new o("",0," "),new o(" ",0," "),new o("",12,""),new o("",i," "),new o("",0," the "),new o(" ",0,""),new o("s ",0," "),new o("",0," of "),new o("",i,""),new o("",0," and "),new o("",13,""),new o("",1,""),new o(", ",0," "),new o("",0,", "),new o(" ",i," "),new o("",0," in "),new o("",0," to "),new o("e ",0," "),new o("",0,'"'),new o("",0,"."),new o("",0,'">'),new o("",0,"\n"),new o("",3,""),new o("",0,"]"),new o("",0," for "),new o("",14,""),new o("",2,""),new o("",0," a "),new o("",0," that "),new o(" ",i,""),new o("",0,". "),new o(".",0,""),new o(" ",0,", "),new o("",15,""),new o("",0," with "),new o("",0,"'"),new o("",0," from "),new o("",0," by "),new o("",16,""),new o("",17,""),new o(" the ",0,""),new o("",4,""),new o("",0,". The "),new o("",a,""),new o("",0," on "),new o("",0," as "),new o("",0," is "),new o("",7,""),new o("",1,"ing "),new o("",0,"\n\t"),new o("",0,":"),new o(" ",0,". "),new o("",0,"ed "),new o("",20,""),new o("",18,""),new o("",6,""),new o("",0,"("),new o("",i,", "),new o("",8,""),new o("",0," at "),new o("",0,"ly "),new o(" the ",0," of "),new o("",5,""),new o("",9,""),new o(" ",i,", "),new o("",i,'"'),new o(".",0,"("),new o("",a," "),new o("",i,'">'),new o("",0,'="'),new o(" ",0,"."),new o(".com/",0,""),new o(" the ",0," of the "),new o("",i,"'"),new o("",0,". This "),new o("",0,","),new o(".",0," "),new o("",i,"("),new o("",i,"."),new o("",0," not "),new o(" ",0,'="'),new o("",0,"er "),new o(" ",a," "),new o("",0,"al "),new o(" ",a,""),new o("",0,"='"),new o("",a,'"'),new o("",i,". "),new o(" ",0,"("),new o("",0,"ful "),new o(" ",i,". "),new o("",0,"ive "),new o("",0,"less "),new o("",a,"'"),new o("",0,"est "),new o(" ",i,"."),new o("",a,'">'),new o(" ",0,"='"),new o("",i,","),new o("",0,"ize "),new o("",a,"."),new o("Â ",0,""),new o(" ",0,","),new o("",i,'="'),new o("",a,'="'),new o("",0,"ous "),new o("",a,", "),new o("",i,"='"),new o(" ",i,","),new o(" ",a,'="'),new o(" ",a,", "),new o("",a,","),new o("",a,"("),new o("",a,". "),new o(" ",a,"."),new o("",a,"='"),new o(" ",a,". "),new o(" ",i,'="'),new o(" ",a,"='"),new o(" ",i,"='")];function u(e,t){return e[t]<192?(e[t]>=97&&e[t]<=122&&(e[t]^=32),1):e[t]<224?(e[t+1]^=32,2):(e[t+2]^=5,3)}n.kTransforms=s,n.kNumTransforms=s.length,n.transformDictionaryWord=function(e,t,n,o,c){var l,d=s[c].prefix,f=s[c].suffix,h=s[c].transform,g=h<12?0:h-11,p=0,v=t;g>o&&(g=o);for(var _=0;_<d.length;)e[t++]=d[_++];for(n+=g,o-=g,h<=9&&(o-=h),p=0;p<o;p++)e[t++]=r.dictionary[n+p];if(l=t-o,h===i)u(e,l);else if(h===a)for(;o>0;){var m=u(e,l);l+=m,o-=m}for(var y=0;y<f.length;)e[t++]=f[y++];return t-v}},{"./dictionary":7}],12:[function(e,t,n){t.exports=e("./dec/decode").BrotliDecompressBuffer},{"./dec/decode":4}],13:[function(e,t,n){},{}]},{},[12])(12)},1828:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=new Error("The current module is not licensed");r.error=-6;var i={noRedactionLicense:r,noeCompareLicense:new Error("The comparison module is not licensed")}},2379:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1047);function i(e,t,n,i,a){var o=new XMLHttpRequest;return o.open("PUT",e,!1),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("cache-control","no-cache"),o.send(JSON.stringify({id:(0,r.Z)(),clientId:t,action:i,type:n,data:a})),o.responseText}},9927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3194),i=n(3883);const a=function(e,t,n,a){var o,s=new e.HeaderFooterContentGenerator,u=n.contentFormats,c=n.contents,l=[u.TopLeft||(c?[{type:"string",value:c.TopLeft}]:[]),u.TopCenter||(c?[{type:"string",value:c.TopCenter}]:[]),u.TopRight||(c?[{type:"string",value:c.TopRight}]:[]),u.BottomLeft||(c?[{type:"string",value:c.BottomLeft}]:[]),u.BottomCenter||(c?[{type:"string",value:c.BottomCenter}]:[]),u.BottomRight||(c?[{type:"string",value:c.BottomRight}]:[])];l=l.map((function(t){t.forEach((function(t){switch(t.type){case"string":return s.AddString((0,i.Dp)(e,t.value));case"pageNumber":return s.AddPageNumber({value:t.value});case"date":return s.AddDate({value:t.value})}}));var n=s.GenerateContent();s.Clear();var r=n.toString().replace(/([^ ])<</g,"$1 <<");return(0,i.Dp)(e,r)})),s.delete();var d,f=new e.HeaderFooterContent;(o=f).Set.apply(o,(0,r._)(l)),d=a&&t.HasHeaderFooter()?t.GetEditableHeaderFooter():new e.HeaderFooter;var h="number"==typeof n.font?n.font:n.fontId,g=new e.Font({value:h||0}),p=new e.PageNumberRange;n.range?p.Set(n.range.start,n.range.end,{value:n.range.filter||0}):p.Set(1,t.GetPageCount(),{value:0});var v=new e.CFX_FloatRect;if(n.margin){var _=n.margin;v.left=_.left,v.bottom=_.bottom,v.top=_.top,v.right=_.right}return d.Set(g,n.textSize,n.textColor,p,v,n.hasTextShrinked,n.hasFixedSized,n.startPageNumber,f,!1,n.underline),f.delete(),p.delete(),v.delete(),d}},3774:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4375),i=n(6721),a=function(){function e(t,n){(0,r._)(this,e),this.pdfDoc=t,this.pdfObject=n}return(0,i._)(e,[{key:"getDict",value:function(){return this.pdfObject.GetDict()}}]),e}()},6382:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(4375),i=n(6721),a=n(6544);const o=function(){function e(){(0,r._)(this,e),this.isStandard=!1,this.fontName="",this.fontIns=""}return(0,i._)(e,[{key:"setDefaultFont",value:function(e,t){this.isStandard=e.IsStandardFont(t),this.isStandard&&(this.fontName=e.GetBaseFontName(t).toString()),this.fontIns=e}},{key:"getDefaultFont",value:function(e){return this.isStandard?new e.Font(this._getStandardID(this.fontName,e)):this.fontIns?this.fontIns:new e.Font(new e.WString((0,a.gO)()),0,0,0)}},{key:"getDefaultFontName",value:function(e){if(this.isStandard)return this.fontName;if(!this.fontIns)return(0,a.gO)();try{return this.fontIns.GetBaseFontName(e).toString()}catch(e){var t=this.fontIns.GetName().toString();return a.mz[t]||t}}},{key:"_getStandardID",value:function(e,t){var n=t.StandardID;return{Courier:n.e_StdIDCourier,"Courier-Bold":n.e_StdIDCourierB,"Courier-BoldOblique":n.e_StdIDCourierBI,"Courier-Oblique":n.e_StdIDCourierI,Helvetica:n.e_StdIDHelvetica,"Helvetica-Bold":n.e_StdIDHelveticaB,"Helvetica-BoldOblique":n.e_StdIDHelveticaBI,"Helvetica-Oblique":n.e_StdIDHelveticaI,"Times-Roman":n.e_StdIDTimes,"Times-Bold":n.e_StdIDTimesB,"Times-BoldItalic":n.e_StdIDTimesBI,"Times-Italic":n.e_StdIDTimesI,Symbol:n.e_StdIDSymbol,ZapfDingbats:n.e_StdIDZapfDingbats}[e]||n.e_StdIDHelvetica}},{key:"destroy",value:function(){this.fontIns=null}}]),e}()},7273:()=>{Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice})},6975:(e,t,n)=>{"use strict";function r(e,t,n){for(var r=e.Continue();r===t;)r=e.Continue();return e.delete(),r===n}n.d(t,{Z:()=>r})},4983:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={NeedToPauseNow:function(){return Date.now()-this.startTime>this.tick},startTick:function(e){this.tick=e,this.startTime=Date.now()}}},3848:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4375),i=n(6721),a=n(6147),o=n(2872),s=n(7327),u=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;(0,r._)(this,e),this.top=t,this.left=n,this.bottom=i,this.right=a},c=function(e){(0,a._)(n,e);var t=(0,o._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this,e)).Constructor=e.constructor,i}return(0,i._)(n,[{key:"extract",value:function(){var e=this.target.left+this.offsetLeft,t=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop,r=this.target.bottom+this.offsetBottom;return new this.Constructor(e,r,t,n)}}],[{key:"on",value:function(e){return new n(e)}}]),n}(function(){function e(t){(0,r._)(this,e),this.offsetLeft=0,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.target=t}return(0,i._)(e,[{key:"moveLeft",value:function(e){return this.offsetLeft+=e,this.offsetRight+=e,this}},{key:"moveTop",value:function(e){return this.offsetTop+=e,this.offsetBottom+=e,this}},{key:"move",value:function(e,t){return this.moveLeft(e).moveTop(t)}},{key:"moveTo",value:function(e,t){return this.offsetLeft=this.offsetRight=this.target.left-e,this.offsetTop=this.offsetBottom=this.target.top-t,this}},{key:"shrink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;return this.add(new u(e,t,-n,-r))}},{key:"expand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;return this.add(new u(-e,-t,n,r))}},{key:"zoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",r=this.target.right+this.offsetRight-(this.target.left+this.offsetLeft),i=this.target.bottom+this.offsetBottom-(this.target.top+this.offsetTop),a=r*e-r,o=i*e-i,s=0,c=0,l=0,d=0;switch(t){case"right":s=-a;break;case"center":s=-a/2,c=a/2;break;default:c=a}switch(n){case"bottom":l=-o;break;case"center":l=-o/2,d=o/2;break;default:d=o}return this.add(new u(l,s,d,c))}},{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,n=void 0===t?0:t,r=e.left,i=void 0===r?n:r,a=e.bottom,o=void 0===a?n:a,s=e.right,u=void 0===s?i:s;return this.offsetLeft+=i,this.offsetRight+=u,this.offsetBottom+=o,this.offsetTop+=n,this}},{key:"extract",value:function(){var e=this.target.left+this.offsetLeft,t=this.target.right+this.offsetRight;return{left:e,top:this.target.top+this.offsetTop,right:t,bottom:this.target.bottom+this.offsetBottom}}},{key:"boundary",value:function(){var e=this.target.left+this.offsetLeft,t=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop;return{left:e,top:n,width:t-e,height:this.target.bottom+this.offsetBottom-n}}},{key:"intersect",value:function(t){(0,s._)(t,e)||(t=e.on(t));var n=this.toPlainObject(),r=t.toPlainObject(),i={left:Math.max(n.left,r.left),right:Math.min(n.right,r.right),top:Math.max(n.top,r.top),bottom:Math.min(n.bottom,r.bottom)};return e.on(i)}},{key:"toPlainObject",value:function(){return{left:this.target.left+this.offsetLeft,right:this.target.right+this.offsetRight,top:this.target.top+this.offsetTop,bottom:this.target.bottom+this.offsetBottom}}}],[{key:"isOverlap",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Math.max(e.left,t.left),i=Math[n?"min":"max"](e.top,t.top),a=Math[n?"max":"min"](e.bottom,t.bottom),o=Math.min(e.right,t.right);if(r<=o)if(n){if(i>=a)return(o-r)*(i-a)}else if(i<=a)return(o-r)*(a-i);return 0}},{key:"isInRect",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e>=n.left&&e<=n.right)if(r){if(t>=n.bottom&&t<=n.top)return!0}else if(t<=n.bottom&&t>=n.top)return!0;return!1}},{key:"rectInRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!(e.left>=t.left&&e.right<=t.right)&&(n?e.top<=t.top&&e.bottom>=t.bottom:e.top>=t.top&&e.bottom<=t.bottom)}},{key:"isSimilar",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e.top-t.top)<n&&Math.abs(e.bottom-t.bottom)<n&&Math.abs(e.left-t.left)<n&&Math.abs(e.right-t.right)<n}},{key:"on",value:function(t){return new e(t)}},{key:"subtract",value:function(e,t){return new u(e.top-t.top,e.left-t.left,e.bottom-t.bottom,e.right-t.right)}},{key:"expandOffset",value:function(e,t){return new u(e.top-t.top,e.left-t.left,t.bottom-e.bottom,t.right-e.right)}},{key:"copyTo",value:function(e,t){t.left=e.left,t.top=e.top,t.right=e.right,t.bottom=e.bottom}}]),e}())},3481:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,v:()=>a});var r,i,a,o,s=n(3883),u="create bitmap render fail";(i=navigator.userAgent.toLowerCase(),!(!("ActiveXObject"in self)||!(r=i.match(/msie ([\d\.]+)/)))&&10===parseInt(r[1]))?(o=function(e,t){var n=new e.Renderer(t,!1);if(n.IsEmpty())throw n.delete(),t.delete(),new Error(u);return n},a=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.GetWidth(),a=t.GetHeight(),o=new e.Image;o.AddFrame(t);var u=[],c=e.StreamCallback.implement({Release:function(){c.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(t,n,r){var i,a=e.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(t,t+r)):new Uint8Array(a,t,r),u.push(i),!0}});o.SaveAs(c,(0,s.Dp)(e,".png")),r&&(o.delete(),t.delete(),n.delete());var l="image/png";return{type:l,image:new Blob(u,{type:l}),width:i,height:a}}):(o=function(e,t){var n=new e.Renderer(t,!0);if(n.IsEmpty())throw n.delete(),t.delete(),new Error(u);return n},a=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.GetFormat()!=e.DIBFormat.e_DIBRgb32&&t.GetFormat()!=e.DIBFormat.e_DIBArgb&&t.ConvertFormat(e.DIBFormat.e_DIBRgb32);var i,a=t.GetBuffer(),o=t.GetWidth(),s=t.GetHeight(),u=s*t.GetPitch(),c=a+u;return i=e.HEAPU8.buffer.slice?e.HEAPU8.buffer.slice(a,c):new Uint8Array(e.HEAPU8.buffer,a,u).buffer,r&&(n.delete(),t.delete()),{buffer:i,width:o,height:s}})},3883:(e,t,n)=>{"use strict";n.d(t,{Dp:()=>o,EY:()=>s,n5:()=>i});var r={};function i(e,t){var n=r[t];return n&&!n.isDeleted()||(r[t]=new e.String(t)),r[t]}var a={};function o(e,t){var n=a[t];return n&&!n.isDeleted()||(a[t]=new e.WString(t)),a[t]}function s(){for(var e in r){r[e].isDeleted()||r[e].delete(),delete r[e]}for(var t in a){var n=a[t];n.isDeleted()||n.delete(),delete a[t]}}},3009:(e,t,n)=>{"use strict";function r(e,t){(t<0||t>3)&&(t=(t%360+360)%360);var n=e.Rotation;n.e_Rotation0;switch(t){case 1:case 90:return n.e_Rotation90;case 2:case 180:return n.e_Rotation180;case 3:case 270:return n.e_Rotation270;default:return n.e_Rotation0}}n.d(t,{q:()=>r})},3886:(e,t,n)=>{"use strict";n.d(t,{Ii:()=>s,MW:()=>u,SU:()=>h,Yh:()=>d,ZX:()=>l,jj:()=>o});var r=n(5136),i=n(2998),a=n(3883);function o(e,t){return e.SummaryLayout["e_SummaryLayout".concat(t)]}function s(e,t){return e.FontSizeType["e_FontSize".concat(t)]}function u(e,t){return e.SortType["e_TypeSortBy".concat(t)]}var c={A0:[2384,3370],A1:[1684,2384],A2:[1191,1684],A3:[842,1191],A4:[595,842],A5:[420,595],A6:[298,420],"9_11":[648,792],"10_11":[720,792],"10_14":[720,1008],"11_17":[792,1224],"12_11":[864,792],"15_11":[1080,792],Letter:[612,792],Legal:[612,1008],Screen:[468,373],Tabloid:[792,1224],Ledger:[1224,792],Statement:[396,612],Executive:[522,756],Folio:[612,936],Quarto:[609,780],ANSI_C:[1224,1584],ANSI_D:[1584,2448],ANSI_E:[2448,3168],ANSI_F:[2016,2880],ARCH_A:[648,864],ARCH_B:[864,1296],ARCH_C:[1296,1728],ARCH_D:[1728,2592],ARCH_E:[2592,3456],ARCH_E1:[2160,3024],ARCH_E2:[1872,2736],ARCH_E3:[1944,2808],"B5_(ISO)":[499,709],"B4_(ISO)":[709,1001],"B2_(ISO)":[1417,2004],"B1_(ISO)":[2004,2835],"B5_(JIS)":[516,729],"B4_(JIS)":[729,1032],"B3_(JIS)":[1032,1460],"B2_(JIS)":[1460,2064],"B1_(JIS)":[2064,2920],"B0_(JIS)":[2920,4127]};function l(e){return c[e]}function d(e,t,n){var r=t.url,a=n.requestData("GET",!1,r);return i.Z.createImage(e,a).GetFrameBitmap(0)}var f=function(e){var t,n=e.AnnotationSummaryStringID;return t={},(0,r._)(t,n.e_AnnotationSummaryStringIDAuthor.value,"author"),(0,r._)(t,n.e_AnnotationSummaryStringIDDate.value,"date"),(0,r._)(t,n.e_AnnotationSummaryStringIDPage.value,"page"),(0,r._)(t,n.e_AnnotationSummaryStringIDType.value,"type"),(0,r._)(t,n.e_AnnotationSummaryStringIDDocumentTitle.value,"documentTitle"),(0,r._)(t,n.e_AnnotationSummaryStringIDPageTitle.value,"pageTitle"),(0,r._)(t,n.e_AnnotationSummaryStringIDNoAnnotations.value,"noAnnotations"),(0,r._)(t,n.e_AnnotationSummaryStringIDNumber.value,"number"),(0,r._)(t,n.e_AnnotationSummaryStringIDSubject.value,"subject"),t};function h(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})[f(e)[t.value]||""]||"";return new a.Dp(e,n)}},9386:(e,t,n)=>{"use strict";n.d(t,{$U:()=>m,FN:()=>g,J5:()=>D,KL:()=>y,Lg:()=>A,Np:()=>d,Ox:()=>w,PB:()=>S,Yv:()=>k,a_:()=>_,h2:()=>h,lm:()=>b,lo:()=>u,n6:()=>c,ol:()=>C,pw:()=>I,qQ:()=>v,uJ:()=>P,z4:()=>f});var r=n(9422),i=n(3194),a=n(3883);function o(e,t){var n=t.GetCatalog().GetElement((0,a.n5)(e,"DocESign"));return n?(n.GetType()==e.PDFObjectType.e_Reference&&(n=n.GetDirectObject()),n.GetDict()):null}function s(e,t){var n=o(e,t);if(n){var r=n.GetElement((0,a.n5)(e,"Signers"));if(r.GetType()==e.PDFObjectType.e_Array)return r.GetArray()}return null}function u(e,t){var n=s(e,t);if(!n)return[];for(var r=n.GetElementCount(),i=[],a=0;a<r;a++){var o=n.GetElement(a);o.GetType()===e.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o.GetType()===e.PDFObjectType.e_Dictionary&&(o=o.GetDict()),i.push(o)}return i}function c(e,t,n){var r=s(e,t);if(r){var i=r.GetElement(n-1);return i.GetType()===e.PDFObjectType.e_Reference&&(i=i.GetDirectObject()),i.GetType()===e.PDFObjectType.e_Dictionary&&(i=i.GetDict()),i}return null}function l(e,t,n){var r=t.GetElement((0,a.n5)(e,n));return r&&(r.GetType()===e.PDFObjectType.e_Reference&&(r=r.GetDirectObject()),r.GetType()===e.PDFObjectType.e_Dictionary&&(r=r.GetDict()),r.GetType()===e.PDFObjectType.e_Array&&(r=r.GetArray())),r}function d(e,t,n){var r=n.type,i=n.subType,o=n.id,s=new t.PDFDictionary.Create;return s.SetAtString((0,a.n5)(t,"Type"),(0,a.n5)(t,r)),s.SetAtString((0,a.n5)(t,"Subtype"),(0,a.n5)(t,i)),s.SetAtString((0,a.n5)(t,"ID"),(0,a.n5)(t,o)),e.AddIndirectObject(s),s}function f(e,t,n){var r=n.objNumber,i=function(e,t,n){var r=n.pageIndex,i=function(e){var n=[];e.GetType()==t.PDFObjectType.e_Reference&&(e=e.GetDirectObject()),e.GetType()==t.PDFObjectType.e_Dictionary&&(e=e.GetDict());var o=l(t,e,"Kids");if(o)for(var s=o.GetElementCount(),u=0;u<s;u++){var c=o.GetElement(u);if(c){c.GetType()==t.PDFObjectType.e_Reference&&(c=c.GetDirectObject()),c.GetType()==t.PDFObjectType.e_Dictionary&&(c=c.GetDict());var d=c.GetElement((0,a.n5)(t,"Type")).GetString().toString();if("Page"===d){if(n.push(c),n.length===r+1)return c}else{if("Pages"===d)return i(c);console.error("invalid kidDict type",d)}}}},o=e.GetCatalog().GetElement((0,a.n5)(t,"Pages"));return i(o)}(e,t,{pageIndex:n.pageIndex}),o=l(t,i,"Annots");if(o)for(var s=o.GetElementCount(),u=0;u<s;u++){var c=o.GetElement(u);if(c&&(c.GetType()==t.PDFObjectType.e_Reference&&(c=c.GetDirectObject()),c.GetType()==t.PDFObjectType.e_Dictionary&&(c=c.GetDict()),c.GetObjNum()===r))return c}}var h=function(e,t,n,r){var o=n.GetDict(),s=c(t,e,r);if(s){var u=s.GetObjNum(),d=function(e,t){var n,r,o=(n=function(t){var r=[];t.GetType()==e.PDFObjectType.e_Reference&&(t=t.GetDirectObject()),t.GetType()==e.PDFObjectType.e_Dictionary&&(t=t.GetDict());var o=l(e,t,"Kids");if(o)for(var s=o.GetElementCount(),u=0;u<s;u++){var c=o.GetElement(u);if(c){c.GetType()==e.PDFObjectType.e_Reference&&(c=c.GetDirectObject()),c.GetType()==e.PDFObjectType.e_Dictionary&&(c=c.GetDict());var d=c.GetElement((0,a.n5)(e,"Type")).GetString().toString();"Page"===d?r.push(c):"Pages"===d?r=(0,i._)(r).concat((0,i._)(n(c))):console.error("invalid kidDict type",d)}}return r},r=t.GetCatalog().GetElement((0,a.n5)(e,"Pages")),n(r)),s=o.map((function(t){var n=t.GetElement((0,a.n5)(e,"Annots"));n.GetType()==e.PDFObjectType.e_Reference&&(n=n.GetDirectObject()),n.GetType()==e.PDFObjectType.e_Array&&(n=n.GetArray());for(var r=[],i=n.GetElementCount(),o=0;o<i;o++){var s=n.GetElement(o);s.GetType()==e.PDFObjectType.e_Reference&&(s=s.GetDirectObject()),s.GetType()==e.PDFObjectType.e_Dictionary&&(s=s.GetDict()),r.push(s)}return r})),u=[];return s.forEach((function(e){u=(0,i._)(u).concat((0,i._)(e))})),u}(t,e);d.forEach((function(n){var r=l(t,n,"Signer");if(r&&r.GetObjNum()===u){var i=l(t,n,"FlowSignConfigInfo");i&&o.SetAtReference((0,a.n5)(t,"FlowSignConfigInfo"),i,e)}}))}};function g(e,t,n,r){if(!["string","integer","boolean","pdfArray","pdfDict"].includes(r))throw new Error("invalid type");if(!t)return"";var i=t.GetElement((0,a.n5)(e,n));return i?"string"===r?i.GetString().toString():"integer"===r?i.GetInteger():"boolean"===r?i.GetBoolean():"pdfArray"===r?i.GetType()===e.PDFObjectType.e_Array?i.GetArray():"":"pdfDict"===r?p(e,i):void 0:""}function p(e,t){return t.GetType()===e.PDFObjectType.e_Reference&&(t=t.GetDirectObject()),t.GetType()===e.PDFObjectType.e_Dictionary&&(t=t.GetDict()),t}function v(e,t,n){var i={};i.authType=g(e,n,"AuthType","string"),i.color=g(e,n,"Color","string"),i.userName=g(e,n,"Name","string"),i.signOrder=g(e,n,"SignOrder","integer");var a=function(e,t){for(var n={email:"",phoneNumber:"",EnterpriseId:"",Enterprise:"",company:"",companyId:""},r=t.GetElementCount(),i=0;i<r;i++){var a=p(e,t.GetElement(i)),o=g(e,a,"Subtype","string");"Email"===o&&(n.email=g(e,a,"ID","string")),"Phone"===o&&(n.phoneNumber=g(e,a,"ID","string")),"EnterpriseId"===o&&(n.EnterpriseId=g(e,a,"ID","string")),"Enterprise"===o&&(n.Enterprise=g(e,a,"ID","string")),"Company"===o&&(n.company=g(e,a,"ID","string")),n.companyId=n.EnterpriseId}return n}(e,g(e,n,"AuthMethod","pdfArray"));return(i=(0,r._)({},i,a)).uniqueKey="".concat(i.email||"#","_").concat(i.phoneNumber||"#","_").concat(i.company||"#"),i}function _(e,t,n,r,i,a){var o={};(o=v(e,0,n)).freeRectItem=g(e,n,"FreeRectItem","boolean");var s=g(e,n,"Annots","pdfArray");"boolean"==typeof o.freeRectItem&&(o.freeRectItem||(o.annots=function(e,t,n,r,i,a){for(var o=[],s=n.GetElementCount(),u=0;u<s;u++){var c=m(e,t,p(e,n.GetElement(u)),r,i,a);o.push(c)}return o}(e,t,s,r,i,a)));var u=!1;return Array.isArray(o.annots)&&(o.annots=o.annots.map((function(e){return"FullSignature"!==e.type||e.isESignCNSignature||(u=!0),e.color=o.color,e.company=o.company,e.userName=o.userName,e}))),o.illegalFillBehavior=u,o}function m(e,t,n,r,i,o){var s={};s.type=g(e,n,"FST","string");var u=g(e,n,"FoxitSignFT","string");if(s.foxitSignFieldType=function(e,t){var n;return"FullSignature"===e?(n=0,"FoxitSignDate"===t&&(n=1),"FoxitSignFreeRect"===t&&(n=2)):"Date"===e?n=3:"Title"===e&&(n=4),n}(s.type,u),"FullSignature"===s.type){var c=function(e,t,n){var r=new e.Signature(t,n),i={isESignCNSignature:!1,isPagingSig:!1,hasSigned:!1};if(r.IsSigned()){var o=r.GetSignatureDict();i.isESignCNSignature=!!o.GetElement((0,a.n5)(e,"Signer")),i.hasSigned=!0}else i.isESignCNSignature=!!n.GetElement((0,a.n5)(e,"Signer"));return r.GetSignatureType()===e.SignatureType.e_SignatureTypePagingSeal&&(i.isPagingSig=!0),i}(e,t,n),l=c.isESignCNSignature,d=c.isPagingSig;s.isESignCNSignature=l,s.isPagingSig=d}s.id=n.GetObjNum();var f=function(t){var n=g(e,t,"P","pdfDict");return n&&n.GetObjNum()}(n);return s.pageIndex=r.indexOf(f),s.pagingSigs=[],Array.isArray(i)&&(s.pagingSigs=function(e,t){var n=[];return t.forEach((function(t){t.findIndex((function(t){return t.objNum===e}))>-1&&(n=t.map((function(e){return{id:e.objNum,pageIndex:e.pageIndex}})))})),n}(s.id,i)),s.fieldStatus=function(e,t,n,r,i){var a=0,o=1,s=2,u=a;if("FullSignature"===e){var c=["AP","N","Resources","XObject","FXX1","Resources","XObject","FXX2","Subtype"],l=["AP","Resources","XObject"],d=["N","FXX1","FXX2","FoxitSigAPN","IMG","Img"],f=["Subtype"],h=function(e,t,n){return t.reduce((function(e,t){if(!e)return null;var r,i,a=new n.String(t);if(l.includes(t)?i="Dictionary":d.includes(t)?i="Stream":f.includes(t)&&(i="String"),"Dictionary"===i){var o=e.GetElement(a);return o&&o.GetType()===n.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o&&o.GetType()===n.PDFObjectType.e_Dictionary&&(o=o&&o.GetDict()),o}return"Stream"===i?((r=e.GetElement(a))&&r.GetType()===n.PDFObjectType.e_Reference&&(r=r.GetDirectObject().GetStream()),r&&r.GetType()===n.PDFObjectType.e_Stream&&(r=r&&r.GetDictionary())):"String"===i&&(r=e.GetElement(a))&&(r=r.GetString().toString()),a.delete(),r}),e)};u=n?h(t,["AP","N","Resources","XObject","FoxitSigAPN","Resources","XObject","IMG"],r)?o:a:"Image"===h(t,c,r)?o:a}var g=new r.String("Parent"),p=new r.String("V"),v=t.GetElement(p);if(!v){var _=t.GetElement(g);_&&_.GetType()===r.PDFObjectType.e_Reference&&_.GetDirectObject()&&_.GetDirectObject().GetDict()&&(v=_.GetDirectObject().GetDict().GetElement(p))}v&&("FullSignature"===e||i.getPDFString(v.GetString()).toString())&&(u=s);return g.delete(),p.delete(),u}(s.type,n,s.isPagingSig,e,o),s}function y(e,t,n,r,i,o){var s=function(e,t){for(var n=[],r=t.GetSignatureCount(),i=0;i<r;i++){var a=t.GetSignature(i);n.push(a)}return n}(0,t).filter((function(t){var n=t.GetDict();return"FoxitSignFreeRect"===g(e,n,"FoxitSignFT","string")})).map((function(e){return e.GetDict()}));return s.forEach((function(s){var u,c=s.GetElement((0,a.n5)(e,"Signer")).GetDict().GetObjNum();if(r.forEach((function(e,t){e.GetObjNum()===c&&(u=t)})),"number"==typeof u){var l=m(e,t,s,i,o),d=n[u];Array.isArray(d.annots)?d.annots.push(l):d.annots=[l]}})),n}function S(e,t,n){var r={};return r.processId=g(e,n,"ProcessID","string"),r.docStore=g(e,n,"DocStore","integer"),r.taskName=g(e,n,"TaskName","string"),r}function b(e,t){var n={},r=o(e,t);return r?n=S(e,0,g(e,r,"FlowSignConfigInfo","pdfDict")):n}function D(e,t){var n=function(t){var r=[];t.GetType()==e.PDFObjectType.e_Reference&&(t=t.GetDirectObject()),t.GetType()==e.PDFObjectType.e_Dictionary&&(t=t.GetDict());var o=l(e,t,"Kids");if(o)for(var s=o.GetElementCount(),u=0;u<s;u++){var c=o.GetElement(u);if(c){c.GetType()==e.PDFObjectType.e_Reference&&(c=c.GetDirectObject()),c.GetType()==e.PDFObjectType.e_Dictionary&&(c=c.GetDict());var d=c.GetElement((0,a.n5)(e,"Type")).GetString().toString();"Page"===d?r.push(c.GetObjNum()):"Pages"===d?r=(0,i._)(r).concat((0,i._)(n(c))):console.error("invalid kidDict type",d)}}return r},r=t.GetCatalog().GetElement((0,a.n5)(e,"Pages"));return n(r)}function P(e,t){return!!o(e,t)}function I(e,t){return!o(e,t).GetElement((0,a.n5)(e,"FlowSignConfigInfo"))}function A(e){for(var t=[],n=e.GetPageCount(),r=0;r<n;r++)t.push(e.GetPage(r));return t}function w(e){for(var t=[],n=e.GetAnnotCount(),r=0;r<n;r++){var i=e.GetAnnot(r).GetDict();i&&t.push(i)}return t}function C(e,t,n){var r={};n=function(n){var r=u(e,t).map((function(e){return e.GetObjNum()}));return n.forEach((function(e){e.signerIndex=r.indexOf(e.signerDictObjNum)})),n.sort((function(e,t){return e.signerIndex-t.signerIndex})),n}(n);var i={};n.forEach((function(e){var t=e.signerDictObjNum;i[t]||(i[t]=[]),i[t].push(e)}));var a=Object.values(i);return r.configInfo={processId:a[0][0].processId,docStore:a[0][0].docStore,taskName:a[0][0].taskName},r.recipients=a.map((function(e,t){var n=e[0],r={},i=["id","company","fieldStatus","foxitSignFieldType","isESignCNSignature","isPagingSig","pagingSigs","pageIndex","type","userName"];return["Enterprise","EnterpriseId","color","company","companyId","email","phoneNumber","signOrder","uniqueKey","userName"].forEach((function(e){r[e]=n[e]})),r.illegalFillBehavior=e.some((function(e){return"FullSignature"===e.type&&!e.isESignCNSignature})),r.sort=t,r.annots=e.map((function(e){var t={};return i.forEach((function(n){t[n]=e[n]})),t})),r})),r}var k={ORDERED:1,PARTIAL:2,UNORDERED:3}},2095:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=function(e,t,n){var i=e.GetDict().GetObjNum();i!==n&&t.push(i);for(var a=e.GetSubActionCount(),o=0;o<a;o++){var s=e.GetSubAction(o);r(s,t,n)}e.RemoveAllSubActions()};const i=function(e,t,n,i){var a=[];if(r(n,a,i),a.length<1)return null;var o=a.shift();n=new e.Action(t,t.GetIndirectObject(o).GetDict());for(var s=0;s<a.length;s++){var u=a[s],c=new e.Action(t,t.GetIndirectObject(u).GetDict());n.InsertSubAction(a.length,c)}return n}},949:(e,t,n)=>{"use strict";function r(e){return new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.milliseconds)}function i(e){var t=new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.milliseconds),n=e.utc_hour_offset,r=e.utc_minute_offset/60;n<0&&(r=-r);var i=-t.getTimezoneOffset()/60;return Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())+60*(i-n-r)*60*1e3}n.d(t,{B:()=>i,q:()=>r})},5497:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7327);function i(){for(var e=0,t=arguments.length;e<t;e++){a(arguments[e])}}function a(e){if((0,r._)(e,Array))for(var t=0,n=e.length;t<n;t++){a(e[t])}try{e.delete()}catch(e){}}},8991:(e,t,n)=>{"use strict";n.d(t,{Tg:()=>i,nT:()=>o,xF:()=>a});var r=n(7582);function i(e,t){var n=t;if(n){var r=0,i=!1;for(n--;n>0;){var a="string"==typeof e?e[n]:e.GetChars(n,1).toString();if(/[0-9a-zA-Z\s]/.test(a)||r++,/\s/.test(a)&&!i){var o="string"==typeof e?e[n-1]:e.GetChars(n-1,1).toString();void 0!==o&&/[0-9a-zA-Z]/.test(o)&&(i=!0)}else/\s/.test(a)&&i&&(i=!1,r++,n++);if(r>=1)break;if(t-n>=15)break;n--}}if("string"==typeof e)return e.substr(n,t-n);for(var s="",u=0;u<t-n;u++)s+=e.GetChars(n+u,1).toString();return s}function a(e,t){var n=t,r="string"==typeof e?e.length:e.GetCharCount();if(n<r)for(var i=0,a=!1;n<r;){var o="string"==typeof e?e[n]:e.GetChars(n,1).toString();if(/[0-9a-zA-Z\s]/.test(o)||i++,/\s/.test(o)&&!a){var s="string"==typeof e?e[n+1]:e.GetChars(n+1,1).toString();void 0!==s&&/[0-9a-zA-Z]/.test(s)&&(a=!0)}else/\s/.test(o)&&a&&(a=!1,i++,n--);if(i>=11)break;if(n-t>50)break;n++}if("string"==typeof e)return e.substr(t,n-t);for(var u="",c=0;c<n-t;c++)u+=e.GetChars(t+c,1).toString();return u}function o(e,t,n){var i,a,o,s,u,c,l,d,f,h,g;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:for(i=[],a=new e.WString(t),o=new e.WString(n),s=new RegExp(e.TextSearchUtils.GetStemmingText(a,!0).toString()),a.delete(),u=e.TextSearchUtils.GetStemmingText(o,!1).toString(),o.delete(),c=s.test(u),l=0;c&&null!==(d=s.exec(u.slice(l)));)f=d.index+l,h=d[0].length,i.push({index:f,length:h,oriWord:n.slice(f,f+h)}),l=d.index+l+1;g=0,r.label=1;case 1:return g<i.length?[4,i[g]]:[3,4];case 2:r.sent(),r.label=3;case 3:return g++,[3,1];case 4:return[2]}}))}},703:(e,t,n)=>{"use strict";n.d(t,{F5:()=>O,O1:()=>F,bs:()=>L,dX:()=>j,ew:()=>x,zF:()=>T});var r,i,a,o,s=n(5136),u=n(7327),c=n(9422),l=n(6784),d=n(3236),f=n(3883),h=n(2699),g={e_StateUnknown:-2147483648,e_StateNoSignData:512,e_StateUnsigned:1,e_StateSigned:2,e_StateVerifyValid:4,e_StateVerifyInvalid:8,e_StateVerifyErrorData:16,e_StateVerifyNoSupportWay:32,e_StateVerifyErrorByteRange:64,e_StateVerifyChange:128,e_StateVerifyIncredible:256,e_StateVerifyNoChange:1024,e_StateVerifyIssueValid:4096,e_StateVerifyIssueUnknown:8192,e_StateVerifyIssueRevoke:16384,e_StateVerifyIssueExpire:32768,e_StateVerifyIssueUncheck:65536,e_StateVerifyIssueCurrent:131072,e_StateVerifyTimestampNone:262144,e_StateVerifyTimestampDoc:524288,e_StateVerifyTimestampValid:1048576,e_StateVerifyTimestampInvalid:2097152,e_StateVerifyTimestampExpire:4194304,e_StateVerifyTimestampIssueUnknown:8388608,e_StateVerifyTimestampIssueValid:16777216,e_StateVerifyTimestampTimeBefore:33554432,e_StateCertCannotGetVRI:67108864,e_StateVerifyChangeLegal:134217728,e_StateVerifyChangeIllegal:268435456,e_StateVerifyIssuerInvalid:536870912},p={e_SIG_VERIFY_VALID:0,e_SIG_VERIFY_INVALID:1,e_SIG_VERIFY_ERRORDATA:2,e_SIG_VERIFY_NOSUPPORTWAY:3,e_SIG_VERIFY_ERRORBYTERANGE:4,e_SIG_VERIFY_CHANGE:5,e_SIG_VERIFY_INCREDIBLE:6,e_SIG_VERIFY_ISSUER_VALID:65536,e_SIG_VERIFY_ISSUER_UNKNOW:131072,e_SIG_VERIFY_ISSUER_REVOKE:262144,e_SIG_VERIFY_ISSUER_EXPIRE:524288,e_SIG_VERIFY_ISSUER_UNCHECK:1048576,e_SIG_VERIFY_ISSUER_CURRENT:2097152,e_SIG_TIMESTAMP_NONE:4194304,e_SIG_TIMESTAMP_DOC:8388608,e_SIG_TIMESTAMP_VALID:16777216,e_SIG_TIMESTAMP_INVALID:33554432,e_SIG_TIMESTAMP_EXPIRE:67108864,e_SIG_TIMESTAMP_ISSUER_ISUNKNOW:134217728,e_SIG_TIMESTAMP_ISSUER_ISVALID:268435456,e_SIG_TIMESTAMP_TIMEBEFORE:536870912,e_SIG_VERIFY_ISSUER_INVALID:1073741824,e_SIG_VERIFY_ISSUER_ONESIGNER:2147483648},v={FR_SIG_TIMESTAMP_NONE:262144,FR_SIG_TIMESTAMP_DOC:524288,FR_SIG_TIMESTAMP_VALID:1048576,FR_SIG_TIMESTAMP_INVALID:2097152,FR_SIG_TIMESTAMP_EXPIRE:4194304,FR_SIG_TIMESTAMP_ISSUER_ISUNKNOWN:8388608,FR_SIG_TIMESTAMP_ISSUER_ISVALID:16777216,FR_SIG_TIMESTAMP_TIMEBEFORE:33554432},_={FPDTIMETYPE_CURRENTTIME:0,FPDTIMETYPE_SIGNTIME:1,FPDTIMETYPE_STAMPTIME:2,FPDTIMETYPE_VEROTIME:3},m={e_LTVStateInactive:0,e_LTVStateEnable:1,e_LTVStateNotEnable:2},y="unknown",S="unknown_certify",b=(r={},(0,s._)(r,y,"unknownMsg"),(0,s._)(r,S,"unknownMsg_certify"),(0,s._)(r,"unknownValidityMsg","unknownValidityMsg"),(0,s._)(r,"validMsg","validMsg"),(0,s._)(r,"validMsg_certify","validMsg_certify"),(0,s._)(r,"invalidMsg","invalidMsg"),(0,s._)(r,"invalidMsg_certify","invalidMsg_certify"),(0,s._)(r,"invalidMsg_Upper","invalidMsg_Upper"),(0,s._)(r,"errorSignatureMsg","errorSignatureMsg"),(0,s._)(r,"errorByteRangeMsg","errorByteRangeMsg"),(0,s._)(r,"errorByteRangeDetail","errorByteRangeDetail"),(0,s._)(r,"validInfo","validInfo"),(0,s._)(r,"validInfo_certify","validInfo_certify"),(0,s._)(r,"invalidInfo","invalidInfo"),(0,s._)(r,"invalidInfo_certify","invalidInfo_certify"),(0,s._)(r,"validityUnknownInfo","validityUnknownInfo"),r),D=(i={},(0,s._)(i,y,"verifyUnknown"),(0,s._)(i,"verifyNoChange","verifyNoChange_online"),(0,s._)(i,"verifyNoChange_certify","verifyNoChange_certify"),(0,s._)(i,"verifyFuture","verifyFuture"),(0,s._)(i,"verifyAlteredCorrupted","verifyAlteredCorrupted"),(0,s._)(i,"verifyChange","verifyChange_online"),(0,s._)(i,"verifyChange_certify","verifyChange_certify"),(0,s._)(i,"noSupportFormat","noSupportFormat"),(0,s._)(i,"noSupportHandler","verifyChange_certify"),(0,s._)(i,"e_StateVerifyChangeLegal","changeLegal"),(0,s._)(i,"e_StateVerifyChangeIllegal","changeIllegal"),i),P=(a={},(0,s._)(a,y,"issueUnknown"),(0,s._)(a,"issuerInvalid_mac","issuerInvalid_mac"),(0,s._)(a,"issuerInvalid","issuerInvalid"),(0,s._)(a,"issuerRevoke","issuerRevoke"),(0,s._)(a,"issuerExpire_mac","issuerExpire_mac"),(0,s._)(a,"issuerExpire","issuerExpire"),(0,s._)(a,"issuerCurrent","issuerCurrent"),(0,s._)(a,"issuerCurrent_certify","issuerCurrent_certify"),(0,s._)(a,"issuerValid","issuerValid"),(0,s._)(a,"issuerValidAndIssueRevoke","issuerValidAndIssueRevoke"),(0,s._)(a,"issuerIdentityUnknown","issuerIdentityUnknown"),(0,s._)(a,"identityValidAndUntrustedMsg","identityValidAndUntrustedMsg"),(0,s._)(a,"notVerifiedIdentityMsg","notVerifiedIdentityMsg"),(0,s._)(a,"e_StateVerifyIssueUnknown","issueUnknown"),(0,s._)(a,"e_StateVerifyIssueUncheck","issueUncheck"),a),I=(o={},(0,s._)(o,y,"timestampUnknown"),(0,s._)(o,"timestampExpire","timestampExpire_online"),(0,s._)(o,"timestampDoc","timestampDoc_online"),(0,s._)(o,"timestampNone","timestampNone_online"),(0,s._)(o,"timestampEmbeddedAndExpire","timestampEmbeddedAndExpire"),(0,s._)(o,"timestampEmbeddedAndExpire_mac","timestampEmbeddedAndExpire_mac"),(0,s._)(o,"timestampEmbeddedAndExpire_mac_panel","timestampEmbeddedAndExpire_mac_panel"),(0,s._)(o,"timestampEmbedded","timestampEmbedded"),(0,s._)(o,"timestampEmbedded_mac","timestampEmbedded_mac"),(0,s._)(o,"timestampEmbedded_mac_panel","timestampEmbedded_mac_panel"),(0,s._)(o,"timestampEmbeddedAndNotBeVerified","timestampEmbeddedAndNotBeVerified"),(0,s._)(o,"timestampSecure","timestampSecure"),(0,s._)(o,"e_StateVerifyTimestampIssueUnknown","timestampIssueUnknown"),o),A={validatedCurrentTime:"validatedCurrentTime",validatedSigningTime:"validatedSigningTime",validatedRevotime:"validatedRevotime",validatedTimeSecure:"validatedTimeSecure"},w={ltvEnabled:"ltvEnabled",ltvNotEnabled:"ltvNotEnabled"},C={illegalSignBehaviorStateMsgKey:"e-sign-china:verifySign.illegalSignBehavior"};function k(e){return e?w.ltvEnabled:w.ltvNotEnabled}function E(e,t){var n=e.isValid,r=e.isInvalid,i=e.isVerifyChange,a=e.hasErrorData,o=e.isErrorByteRange,s=e.isUnsupported,u=e.isTrustedCert,c=e.isIncredible,l=e.isIssuerInvalid,d=e.isIssuerRevoke,f=e.isIssuerExpire,h=e.isIssuerValid,g=e.isIssuerCurrent,p=e.isTimestampTimeBefore,v=e.isTimestampDoc,_=e.isTimestampExpire,m=e.isTimestampNone,y=e.isTimestampValid,S=e.isTimestampInvalid,A=e.isTimestampIssueValid,w=e.isLTVEnable,C="",E="",G="",T="",F="",R="";if(n)!u||d?t?d||(C=b.unknown_certify,G=D.verifyNoChange_certify):d||!u?(C=b.invalidMsg,G=D.verifyNoChange):C=b.unknown:(R=k(w),t?(C=b.validMsg_certify,G=D.verifyNoChange_certify):(C=b.validMsg,G=D.verifyNoChange));else if(a||o)C=b.errorSignatureMsg,E=b.errorByteRangeMsg;else if(r)C=b.invalidMsg_Upper,G=p?D.verifyFuture:D.verifyAlteredCorrupted;else if(i)C=u?t?b.validMsg_certify:b.validMsg:t?b.unknown_certify:b.unknown,G=t?D.verifyChange_certify:D.verifyChange;else{if(s)return{verifyInfoTitle:C=b.unknownValidityMsg,errorStatesMsgKey:E,changeStatesMsgKey:G,issuerStatesMsgKeys:T,timeStampStatesMsgKey:F,lTVStateMsgKey:R};if(c)return{verifyInfoTitle:C,errorStatesMsgKey:E,changeStatesMsgKey:G,issuerStatesMsgKeys:T,timeStampStatesMsgKey:F,lTVStateMsgKey:R};t?(C=b.unknown_certify,G=D.verifyNoChange_certify):(C=b.unknown,G=D.verifyNoChange)}return T=function(e,t){var n=e.isIssuerInvalid,r=e.isIssuerRevoke,i=e.isIssuerExpire,a=e.isIssuerValid,o=e.isIssuerCurrent,s=[];return n?s.push(P.issuerInvalid):r?s.push(P.issuerRevoke):i?s.push(P.issuerExpire):a&&o?t?s.push(P.issuerCurrent_certify):s.push(P.issuerCurrent):a?(s.push(P.issuerValid),r&&s.push(P.issuerValidAndIssueRevoke)):s.push(P.issuerIdentityUnknown),s}({isIssuerInvalid:l,isIssuerRevoke:d,isIssuerExpire:f,isIssuerValid:h,isIssuerCurrent:g},t),F=function(e){var t=e.isTimestampTimeBefore,n=e.isTimestampDoc,r=e.isTimestampExpire,i=e.isTimestampNone,a=e.isTimestampValid,o=e.isTimestampInvalid,s=e.isTimestampIssueValid,u="";return t?u:u=n?r?I.timestampExpire:I.timestampDoc:i?I.timestampNone:a||o?r?I.timestampEmbeddedAndExpire:s?I.timestampEmbeddedAndNotBeVerified:I.timestampEmbedded:I.timestampNone}({isTimestampTimeBefore:p,isTimestampDoc:v,isTimestampExpire:_,isTimestampNone:m,isTimestampValid:y,isTimestampInvalid:S,isTimestampIssueValid:A}),{verifyInfoTitle:C,errorStatesMsgKey:E,changeStatesMsgKey:G,issuerStatesMsgKeys:T,timeStampStatesMsgKey:F,lTVStateMsgKey:R}}function G(e,t,n,r){var i=n.States,a=e&i.e_StateVerifyValid.value,o=e&i.e_StateVerifyInvalid.value,s=e&i.e_StateVerifyErrorData.value,c=e&i.e_StateVerifyErrorByteRange.value,l=e&i.e_StateVerifyNoSupportWay.value,d=e&i.e_StateVerifyIncredible.value,f=e&i.e_StateVerifyChange.value,h=e&i.e_StateVerifyIssuerInvalid.value,p=e&i.e_StateVerifyIssueRevoke.value,v=e&i.e_StateVerifyIssueExpire.value,_=e&i.e_StateVerifyIssueValid.value,y=e&i.e_StateVerifyIssueCurrent.value,S=_,b=e&i.e_StateVerifyTimestampTimeBefore.value,D=e&i.e_StateVerifyTimestampDoc.value,P=e&i.e_StateVerifyTimestampExpire.value,I=e&i.e_StateVerifyTimestampNone.value,A=e&i.e_StateVerifyTimestampValid.value,w=e&i.e_StateVerifyTimestampInvalid.value,C=e&i.e_StateVerifyTimestampIssueValid.value,k=(0,u._)(t,Object)?t.value:t,G=k&n.LTVState.e_LTVStateEnable.value,T=function(e,t){var n=e.States,r=t&n.e_StateVerifyIssuerInvalid.value,i=t&n.e_StateVerifyIssueCurrent.value,a=t&n.e_StateVerifyIssueValid.value;return!r&&!i&&!a}(n,e),F=E({isValid:!!a,isInvalid:!!o,isVerifyChange:!!f,hasErrorData:!!s,isErrorByteRange:!!c,isUnsupported:!!l,isTrustedCert:!!S,isIncredible:!!d,isIssuerInvalid:!!h,isIssuerRevoke:!!p,isIssuerExpire:!!v,isIssuerValid:!!_,isIssuerCurrent:!!y,isTimestampTimeBefore:!!b,isTimestampDoc:!!D,isTimestampExpire:!!P,isTimestampNone:!!I,isTimestampValid:!!A,isTimestampInvalid:!!w,isTimestampIssueValid:!!C,isLTVEnable:!!G},r),R=F.errorStatesMsgKey,M=F.changeStatesMsgKey;return{isValid:!!a,isInvalid:!!o,hasErrorData:!!s,isErrorByteRange:!!c,isUnsupported:!!l,isVerifyChange:!!f,isIssuerInvalid:!!h,isIssuerRevoke:!!p,isIssuerExpire:!!v,isIssuerValid:!!_,isIssuerCurrent:!!y,isTimestampTimeBefore:!!b,isTimestampDoc:!!D,isTimestampExpire:!!P,isTimestampNone:!!I,isTimestampValid:!!A,isTimestampInvalid:!!w,isTimestampIssueValid:!!C,isTrustedCert:!!S,isLTVEnable:!!G,isIncredible:!!d,isShowIdentityValidAndUntrusted:T,verifyInfoTitleKey:F.verifyInfoTitle,verifyErrorStatesMsgKey:R,verifyChangeStatesMsgKey:M,verifyIssuerStatesMsgKeys:F.issuerStatesMsgKeys,verifyTimeStampStatesMsgKey:F.timeStampStatesMsgKey,verifyLTVEnableStateKey:F.lTVStateMsgKey,engineStatesConst:{States:g,LTVState:m},sigState:e,ltvState:t,ltvStateValue:k}}function T(e,t,n,r){for(var i=r.GetSize(),a=0;a<i;++a){var o=r.GetAt(a),s=o.GetSignatureName();s="object"==typeof s?s.toString():s;var u=G(o.GetSignatureState(),o.GetLTVState(),n,t[s]);e[s]=(0,c._)({},u)}}function F(e,t,n,r,i){var a=t.ltvState,o=t.checkedReturn,s=t.dataReturn,u=t.issuerReturn,c=t.verifyReturn,l=t.revocationType,d=t.isCertifiable,f=t.timestampReturn,g=t.timeType,w=t.hasSignerName,E=void 0===w||w,G=t.hasCheckedResult,T=void 0===G||G,F=t.notUseToCertify,O=void 0===F||F,x=n.isIllegalESignCNBehavior,B=function(e,t){var n=t.ltvState,r=t.checkedReturn,i=t.revocationType,a=(t.hasSignerName,t.hasCheckedResult),o=void 0===a||a,s=t.isCertifiable,u=e.RevocationType,c=u.REVOCATION_NONE.value,l=u.REVOCATION_OK.value,d=u.REVOCATION_REVOCATION.value,f=u.REVOCATION_CHAIN_REVOCATION.value,h=(u.REVOCATION_UNKOWN.value,e.States),g=h.e_StateVerifyValid.value,p=h.e_StateVerifyInvalid.value,v=h.e_StateVerifyErrorData.value,_=h.e_StateVerifyErrorByteRange.value,m=h.e_StateVerifyChange.value,P=h.e_StateVerifyIncredible.value,I=e.SignatureExtraStates,A=I.e_SIG_VERIFY_ISSUER_UNCHECK.value,w=I.e_SIG_VERIFY_ISSUER_VALID.value,C=I.e_SIG_VERIFY_ISSUER_INVALID.value,E=I.e_SIG_TIMESTAMP_TIMEBEFORE.value,G=(I.e_SIG_VERIFY_ISSUER_EXPIRE.value,""),T="",F="",R="",M="",O="",x=!1,B=!1,N=!1,L=!1,j=!1,U=!1,W=!1,H=!1,z=!1,K=!1,J=!1,V=!1,Y=!1;if(r&g){if(r&A)T=b.invalidInfo,G=b.invalidMsg,B=!0,H=!0;else if(r&w&&(i==l||i==c))x=!0,W=!0,T=s?b.validInfo_certify:b.validInfo,G=s?b.validMsg_certify:b.validMsg,O=k(n&e.LTVState.e_LTVStateEnable.value);else i==d||i==f||r&C?(T=b.invalidInfo,G=b.invalidMsg,B=!0,H=!0):(z=!0,T=b.validityUnknownInfo,G=s?b[S]:b[y]);J=!1,F=s?D.verifyNoChange_certify:D.verifyNoChange}else if(r&p)T=b.invalidInfo,G=b.invalidMsg,B=!0,H=!0,i==d||i==f||r&E||(J=!0,F=D.verifyAlteredCorrupted),r&E&&(J=!1,F=D.verifyFuture);else if(r&_||r&v)r&_?L=!0:r&v&&(N=!0),K=!0,G=b.errorSignatureMsg,R=b.errorByteRangeMsg,M=b.errorByteRangeDetail;else if(r&m)r&A?(z=!0,T=b.validityUnknownInfo,G=s?b[S]:b[y]):r&w?(x=!0,W=!0,T=s?b.validInfo_certify:b.validInfo,G=s?b.validMsg_certify:b.validMsg):(z=!0,T=b.validityUnknownInfo,G=s?b[S]:b[y]),V=!0,F=s?D.verifyChange_certify:D.verifyChange,Y=!0;else if(r&P)U=!0;else if(r&e.States.e_StateVerifyNoSupportWay.value){j=!0,z=!0;T=b.unknownValidityMsg,G=b.unknownValidityMsg,F=o?D.noSupportFormat:D.noSupportHandler}else z=!0,T=b.validityUnknownInfo,J=!1,s?(G=b.unknown_certify,F=D.verifyNoChange_certify):(G=b.unknown,F=D.verifyNoChange);return{verifyInfoTitleKey:G,verifyInfoDlgTitleKey:T,verifyChangeStatesMsgKey:F,verifyErrorStatesMsgKey:R,verifyErrorStatesDetailKey:M,verifyLTVEnableStateKey:O,isValid:x,isInvalid:B,hasErrorData:N,isErrorByteRange:L,isUnsupported:j,isIncredible:U,isVerifyChange:Y,isUnKnowEffectForAuditTrail:z,isValidForAuditTrail:W,isInValidForAuditTrail:H,isErrorForAuditTrail:K,isModifiedForAuditTrail:J,isModifiedWithAllowedForAuditTrail:V}}(e,t),N=B.verifyInfoTitleKey,L=B.verifyInfoDlgTitleKey,j=B.verifyChangeStatesMsgKey,U=B.verifyErrorStatesMsgKey,W=B.verifyErrorStatesDetailKey,H=B.verifyLTVEnableStateKey,z=B.isValid,K=B.isInvalid,J=B.hasErrorData,V=B.isErrorByteRange,Y=B.isUnsupported,Z=B.isVerifyChange,q=B.isIncredible,X=B.isUnKnowEffectForAuditTrail,Q=B.isValidForAuditTrail,$=B.isInValidForAuditTrail,ee=B.isErrorForAuditTrail,te=B.isModifiedForAuditTrail,ne=B.isModifiedWithAllowedForAuditTrail,re={},ie={},ae={};Y&&q||(re=function(e,t,n){var r=t.checkedReturn,i=t.revocationType,a=t.notUseToCertify,o=void 0===a||a,s=t.isCertifiable,u=e.RevocationType,c=u.REVOCATION_OK.value,l=u.REVOCATION_REVOCATION.value,d=u.REVOCATION_CHAIN_REVOCATION.value,f=e.SignatureExtraStates,h=f.e_SIG_VERIFY_ISSUER_UNCHECK.value,g=f.e_SIG_VERIFY_ISSUER_UNKNOW.value,p=f.e_SIG_VERIFY_ISSUER_INVALID.value,v=f.e_SIG_VERIFY_ISSUER_CURRENT.value,_=f.e_SIG_VERIFY_ISSUER_VALID.value,m=f.e_SIG_VERIFY_ISSUER_EXPIRE.value,y=[],S=!1,b=!1,D=!1,I=!1,A=!1,w=!1,C=!1,k=!1,E=!1;r&h?(E=!0,y.push(P.notVerifiedIdentityMsg)):(r&g?(C=!0,y.push(P.issuerIdentityUnknown)):r&p?(w=!0,y.push(P.issuerInvalid_mac),S=!0):i==l||i==d?(w=!0,y.push(P.issuerRevoke),b=!0):r&v?y.push(P[s?"issuerCurrent_certify":"issuerCurrent"]):r&_?(A=!0,y.push(P.issuerValid),i!==c&&(k=!0,y.push(P.issuerValidAndIssueRevoke)),D=!0):o?(y.push(P.identityValidAndUntrustedMsg),I=!0):(C=!0,y.push(P.issuerIdentityUnknown)),r&m&&1!=n&&(C=!0,y.push(P.issuerExpire_mac)));return{verifyIssuerStatesMsgKeys:y,isIssuerInvalid:S,isIssuerRevoke:b,isTrustedCert:D,isShowIdentityValidAndUntrusted:I,isIssuerUnKnowValidForAuditTrail:C,isIssuerValidForAuditTrail:A,isIssuerInvalidForAuditTrail:w,isIssuerValidAndRevokeForAuditTrail:k,isIssuerNotVerifiedForAuditTrail:E}}(e,t,a),ie=function(e){var t=e.timestampReturn,n=e.timeType,r=v.FR_SIG_TIMESTAMP_NONE,i=v.FR_SIG_TIMESTAMP_DOC,a=v.FR_SIG_TIMESTAMP_VALID,o=v.FR_SIG_TIMESTAMP_INVALID,s=v.FR_SIG_TIMESTAMP_EXPIRE,u=v.FR_SIG_TIMESTAMP_ISSUER_ISUNKNOWN,c=v.FR_SIG_TIMESTAMP_ISSUER_ISVALID,l=v.FR_SIG_TIMESTAMP_TIMEBEFORE,d=(_.FPDTIMETYPE_STAMPTIME,""),f="",h="",g=!1;t&r?(d=I.timestampNone,(h=R(n))==A.validatedTimeSecure&&(g=!0)):t&l||(t&i?(g=!0,d=t&s?I.timestampExpire:I.timestampDoc,h=t&o?A.validatedSigningTime:A.validatedTimeSecure):(t&s?(d=I.timestampEmbeddedAndExpire_mac,f=I.timestampEmbeddedAndExpire_mac_panel,g=!0):t&a&&t&c?(d=I.timestampEmbedded_mac,f=I.timestampEmbedded_mac_panel,g=!0):t&a&&t&u&&(d=I.timestampEmbeddedAndNotBeVerified,g=!0),(h=R(n))==A.validatedTimeSecure&&(g=!0)));d||(d=I.timestampNone);return f=f||d,{verifyTimeStampStatesMsgKey:d,verifyTimeStampStatesMsgKey_panel:f,verifySingingTimeStatesMsgKey:h,isTimestampSignature:g}}(t),ae=function(e,t,n,r){var i=t.tsVerifyTime,a=t.tsSignedTime,o=t.timestampSigner,s=t.timestampCertList,u="";i&&"object"==typeof i&&(u=(0,h.Z)(i.ToLocalTime(),"YYYY/MM/DD HH:mm:ss Z",{separator:"'",suffix:"'"}));var c="";a&&"object"==typeof a&&(c=(0,h.Z)(a.ToLocalTime(),"YYYY/MM/DD HH:mm:ss Z",{separator:"'",suffix:"'"}));var l=o.toString(),d=function(e,t,n,r){var i={};try{var a,o=new e.StringArray,s=t.GetSize();if(s>0){for(var u=0;u<s;u++)for(var c=t.GetAt(u),l=c.GetSize(),d=0;d<l;d++)0===u&&d===l-1&&(a=c.GetAt(d)),o.Add(c.GetAt(d));var f=n.map((function(e){return e.uniqueSerialNumber}));r.getAllTrustCert(f).forEach((function(e){return o.Add(e.cert)})),a&&(i=M(e,o,a,r,!0))}}catch(e){console.warn(e),i={}}return i}(e,s,n,r);return{tsVerifyTimeString:u,tsSignedTimeString:c,timestampAuthority:l,timestampCertificateInfo:d}}(e,t,r,i));var oe,se=ie.verifyTimeStampStatesMsgKey,ue=void 0===se?"":se,ce=ie.verifyTimeStampStatesMsgKey_panel,le=void 0===ce?"":ce,de=ie.verifySingingTimeStatesMsgKey,fe=ie.isTimestampSignature,he=void 0!==fe&&fe,ge=ae.tsVerifyTimeString,pe=void 0===ge?"":ge,ve=ae.tsSignedTimeString,_e=void 0===ve?"":ve,me=ae.timestampAuthority,ye=void 0===me?"":me,Se=ae.timestampCertificateInfo,be=void 0===Se?{}:Se,De=re.verifyIssuerStatesMsgKeys,Pe=void 0===De?[]:De,Ie=re.isIssuerInvalid,Ae=void 0!==Ie&&Ie,we=re.isIssuerRevoke,Ce=void 0!==we&&we,ke=re.isTrustedCert,Ee=void 0!==ke&&ke,Ge=re.isShowIdentityValidAndUntrusted,Te=void 0!==Ge&&Ge,Fe=re.isIssuerValidForAuditTrail,Re=re.isIssuerInvalidForAuditTrail,Me=re.isIssuerUnKnowValidForAuditTrail,Oe=re.isIssuerValidAndRevokeForAuditTrail,xe=re.isIssuerNotVerifiedForAuditTrail;return z&&Pe.includes(P.issuerValid)&&x&&(oe=C.illegalSignBehaviorStateMsgKey),{isValid:z,isInvalid:K,hasErrorData:J,isErrorByteRange:V,isUnsupported:Y,isVerifyChange:Z,isIncredible:q,isUnKnowEffectForAuditTrail:X,isValidForAuditTrail:Q,isInValidForAuditTrail:$,isErrorForAuditTrail:ee,isModifiedForAuditTrail:te,isModifiedWithAllowedForAuditTrail:ne,isIssuerInvalid:Ae,isIssuerRevoke:Ce,isTrustedCert:Ee,isShowIdentityValidAndUntrusted:Te,isIssuerValidForAuditTrail:Fe,isIssuerInvalidForAuditTrail:Re,isIssuerUnKnowValidForAuditTrail:Me,isIssuerValidAndRevokeForAuditTrail:Oe,isIssuerNotVerifiedForAuditTrail:xe,illegalSignBehaviorStateMsgKey:oe,verifyInfoDlgTitleKey:L,verifyInfoTitleKey:N,verifyErrorStatesMsgKey:U,verifyErrorStatesDetailKey:W,verifyChangeStatesMsgKey:j,verifyIssuerStatesMsgKeys:Pe,verifyTimeStampStatesMsgKey:ue,verifyTimeStampStatesMsgKey_panel:le,verifySingingTimeStatesMsgKey:de,tsVerifyTimeString:pe,tsSignedTimeString:_e,timestampAuthority:ye,isTimestampSignature:he,timestampCertificateInfo:be,verifyLTVEnableStateKey:H,engineStatesConst:{States:p,LTVState:m},verifyInfo:{ltvState:a,checkedReturn:o,dataReturn:s,issuerReturn:u,verifyReturn:c,revocationType:l,isCertifiable:d,hasSignerName:E,hasCheckedResult:T,notUseToCertify:O,timestampReturn:f,timeType:g}}}function R(e){var t=_.FPDTIMETYPE_CURRENTTIME,n=_.FPDTIMETYPE_SIGNTIME,r=_.FPDTIMETYPE_VEROTIME;return e==t?A.validatedCurrentTime:e==n?A.validatedSigningTime:e==r?A.validatedRevotime:A.validatedTimeSecure}function M(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={};try{var o=O(e,t,n,r),s=[],u="",d=[],f="",h=[],g="",p="";Object.keys(o).forEach((function(e,t){var n=o[e];n.forEach((function(e,r){var a=e.issuerChain,o=void 0===a?[]:a,v=e.issuerInfo,_=void 0===v?"":v,m=e.subjectChain,y=void 0===m?[]:m,S=e.subjectInfo,b=void 0===S?"":S,D=e.serialNumber,P=void 0===D?"":D,I=e.validPeriodFrom,A=void 0===I?"":I,w=e.validPeriodTo,C=void 0===w?"":w;if(i){var k=r+(0===t?t:1);s.push((0,l._)((0,c._)({},o[0]),{level:k,levelString:"".concat(t,"_").concat(k)})),d.push((0,l._)((0,c._)({},y[0]),{level:k,levelString:"".concat(t,"_").concat(k),isLeafNode:r===n.length-1}))}else s.push((0,c._)({},o[0])),d.push((0,c._)({},y[0]));u+="".concat(_,";"),f+="".concat(b,";"),h+="".concat(P,";"),g+="".concat(A,";"),p+="".concat(C,";")}))})),u=u.slice(0,-1),f=f.slice(0,-1),h=h.slice(0,-1),g=g.slice(0,-1),p=p.slice(0,-1),a={issuerChain:s,issuerInfo:u,subjectChain:d,subjectInfo:f,serialNumber:h,validPeriodFrom:g,validPeriodTo:p}}catch(e){console.warn(e),a={}}return a}function O(e,t,n,r){var i={};try{var a=new e.StringArrayArray;e.GetChainByBFS(t,n,a);var o=a.GetSize(),s=[],u={},c=new Map;if(o>0)for(var l=0;l<o;l++){var d=a.GetAt(l),f=d.GetSize(),h="chain".concat(l+1);u[h]=[];for(var g=0;g<f;g++){var p=d.GetAt(g),v=L(e,p);u[h].push(v);var _=v.serialNumber,m=v.issuerChain,y=m[m.length-1]||{},S=y.country,b=y.issuerName,D="".concat(_,"_").concat(S,"_").concat(b);c.has(D)||(c.set(D,!0),s.push({uniqueSerialNumber:D,cert:p}))}}var P=new Map;for(var I in u)if(Object.hasOwnProperty.call(u,I)){var A=u[I].reverse(),w=A[0].serialNumber;P.has(w)||(i[I]=A,P.set(w,!0))}r.updateCertCacheMap(s)}catch(e){i={},console.warn(e)}return i}function x(e,t,n,r){var i=n.is_verify_signature,a=void 0===i||i,o=n.use_expired_tst,s=void 0===o||o,u=n.ignore_doc_info,c=void 0!==u&&u,l=n.time_type,d=void 0===l?0:l,f=n.isCertTrusted,h=n.isCertTrustedRoot,g=n.trustedCertificateList,p=void 0===g?[]:g,v=new e.VerifyParam;try{v.is_verify_signature=a,v.use_expired_tst=s,v.ignore_doc_info=c;var _=e.TimeType.values[d]||e.TimeType.e_SignatureCreationTime;v.time_type=_,v.verify_mode=e.VerifyMode.e_VerifyModeAcrobat;var m=j(e,f,h,p,t,r);v.SetTrustedCertStoreCallback(m)}catch(e){console.log(e)}return v}function B(e){try{var t=JSON.parse(e);return{name:t.CN||"",email:t.E||"",orgUnit:t.OU||"",orgName:t.O||"",country:t.C||""}}catch(e){return{}}}function N(e,t,n,r,i){for(var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=e.split(";"),u=t.split(";"),f=n.split(";"),h=r.split(";"),g=i.split(";"),p=[],v=o.length,_=0;_<v;_++){var m,y=o[_],S=B(y),b=S.name,D=(0,d._)(S,["name"]);p.push((0,l._)((0,c._)({},D),(m={},(0,s._)(m,a?"issuerInfo":"subjectInfo",y),(0,s._)(m,a?"issuerName":"subjectName",b),(0,s._)(m,"serialNumber",u[_]),(0,s._)(m,"validPeriodFrom",f[_]),(0,s._)(m,"validPeriodTo",h[_]),(0,s._)(m,"keyUsageStr",g[_]),(0,s._)(m,"isLeafNode",_===v-1),m)))}return p}function L(e,t){var n=(0,f.n5)(e,"Issuer"),r=(0,f.n5)(e,"Subject"),i=(0,f.n5)(e,"SerialNumber"),a=(0,f.n5)(e,"ValidPeriodFrom"),o=(0,f.n5)(e,"ValidPeriodTo"),s=(0,f.n5)(e,"KeyUsage"),u=function(e,t,n,r,i,a,o){var s={},u=N(e,n,r,i,a),c=N(t,n,r,i,a,!1);if(s={issuerChain:u,issuerInfo:e,subjectChain:c,subjectInfo:t,serialNumber:n,validPeriodFrom:r,validPeriodTo:i},o){var l=[];c.forEach((function(e,t){var n=e.serialNumber,r=e.country,i="".concat(n,"_").concat(r,"_").concat(u[t].issuerName);l.push({uniqueSerialNumber:i,cert:o.GetAt(t)})})),s.certs=l}return s}(e.GetCertificateInfo(t,n).toString(),e.GetCertificateInfo(t,r).toString(),e.GetCertificateInfo(t,i).toString(),e.GetCertificateInfo(t,a).toString(),e.GetCertificateInfo(t,o).toString(),e.GetCertificateInfo(t,s).toString());return u}function j(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5?arguments[5]:void 0,o=function(t,n,r,i,a){var o=!1;if(void 0===n){if(t.length&&(o=function(t,n){var r=L(e,n)||{},i=r.subjectChain,a=r.issuerChain,o=(r.issuerInfo,r.subjectInfo,i.map((function(e,t){var n=e.serialNumber,r=e.country;return"".concat(n,"_").concat(r,"_").concat(a[t].issuerName)})));return t.some((function(e){return o.includes(e.uniqueSerialNumber)}))}(t,i)),!o){var s=L(e,i)||{},u=s.subjectChain,c=s.issuerChain,l=u.map((function(e,t){var n=e.serialNumber,r=e.country;return"".concat(n,"_").concat(r,"_").concat(c[t].issuerName)}));if(!a.subjectChain)return o;var d=a.subjectChain.map((function(e,t){var n=e.serialNumber,r=e.country;return"".concat(n,"_").concat(r,"_").concat(a.issuerChain[t].issuerName)}));d.some((function(e){return l.includes(e)}))&&(o=t.some((function(e){return d.includes(e.uniqueSerialNumber)})))}}else o=n;return o},s=e.TrustedCertStoreCallback.implement({IsCertTrusted:function(e){return o(r,t,0,e,i)},IsCertTrustedRoot:function(e){return o(r,n,0,e,i)},IsTimestampCertTrusted:function(t,i){var s=function(e,t,n,r){var i={};try{var a,o=new e.StringArray;if(t.GetSize()>0){for(var s=t.GetSize(),u=0;u<s;u++)u===s-1&&(a=t.GetAt(u)),o.Add(t.GetAt(u));var c=n.map((function(e){return e.uniqueSerialNumber}));r.getAllTrustCert(c).forEach((function(e){return o.Add(e.cert)})),a&&(i=M(e,o,a,r,!0))}}catch(e){console.warn(e),i={}}return i}(e,i,r,a);return o(r,n,0,t,s)}});return s}},2136:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(4375),i=n(6721),a=n(6147),o=n(2872),s=n(1870),u="object"==typeof window?window:"function"==typeof importScripts?self:{},c=u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,l=u.IDBTransaction||u.webkitIDBTransaction||u.msIDBTransaction,d={},f=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];(0,r._)(this,e),this.dbName=n,this.storeName=t,this.keyPath="id",this.version=i,this.indexArr=a}return(0,i._)(e,[{key:"_getDB",value:function(){var e=this,t=this.dbName,n=d[t];if(n)return n;var r=(0,s.dD)(),i=d[t]=r.promise,a=c.open(t,this.version),o=this.keyPath;return a.onerror=function(e){r.reject(e)},a.onupgradeneeded=function(t){var n=t.target.result;if(!n.objectStoreNames.contains(e.storeName)){var r=n.createObjectStore(e.storeName,{keyPath:o});e.indexArr.length&&e.indexArr.forEach((function(e){var t=e.indexKey,n=e.unique,i=void 0!==n&&n;r.createIndex(t,t,{unique:i})}))}},a.onsuccess=function(e){r.resolve(e.target.result)},i}},{key:"set",value:function(e,t){var n=this;return c?this._getDB().then((function(r){var i=n.storeName,a=n.keyPath,o=r.transaction([i],l.READ_WRITE||"readwrite").objectStore(i),u={value:t};u[a]=e.toString();var c=o.put(u),d=(0,s.dD)();return c.onsuccess=function(e){d.resolve()},c.onerror=function(e){d.reject(e)},d.promise})):Promise.resolve()}},{key:"get",value:function(e){var t=this;return c?this._getDB().then((function(n){var r=(0,s.dD)(),i=t.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var a=n.transaction([i]).objectStore(i).get(e);return a.onsuccess=function(e){var t=e.target.result;if(!t)return r.resolve();r.resolve(t.value)},a.onerror=function(e){r.reject(e)},a.oncomplete=function(e){},r.promise})):Promise.resolve(null)}},{key:"getByIndex",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c&&this.indexArr.some((function(t){return t.indexKey===e}))?this._getDB().then((function(i){var a=(0,s.dD)(),o=n.storeName;if(!i.objectStoreNames.contains(o))return a.resolve();var u=i.transaction([o]).objectStore(o).index(e).openCursor(null,"next"),c=[];return u.onsuccess=function(n){var i=n.target.result;if(i){var o=i.value[e];return r?o.toLowerCase().indexOf(t.toLowerCase())>-1&&c.push(i.value):o===t&&c.push(i.value),void i.continue()}a.resolve(c)},u.onerror=function(e){a.reject(e)},u.oncomplete=function(e){},a.promise})):Promise.resolve(null)}},{key:"remove",value:function(e){var t=this;return c?this._getDB().then((function(n){var r=t.storeName;if(n.objectStoreNames.contains(r)){var i=n.transaction([r],l.READ_WRITE||"readwrite").objectStore(r).delete(e),a=(0,s.dD)();return i.onsuccess=function(e){a.resolve()},i.onerror=function(e){a.reject()},a.promise}})):Promise.resolve()}},{key:"clear",value:function(){var e=this;return c?this._getDB().then((function(t){var n=e.storeName;if(t.objectStoreNames.contains(n)){var r=t.transaction([n],l.READ_WRITE||"readwrite").objectStore(n).clear(),i=(0,s.dD)();return r.onsuccess=function(e){i.resolve()},r.onerror=function(e){i.reject()},i.promise}})):Promise.resolve()}},{key:"destroy",value:function(){var e=this.dbName;delete d[e],c&&c.deleteDatabase(e)}}]),e}();!function(e){(0,a._)(n,e);var t=(0,o._)(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,r._)(this,n),(a=t.call(this,e,i,o,u)).keyPath=s,a}(0,i._)(n,[{key:"set",value:function(){throw new Error('This method is duplicated, please use "add" instead.')}},{key:"add",value:function(e){var t=this;return c?this._getDB().then((function(n){var r=t.storeName,i=(t.keyPath,n.transaction([r],l.READ_WRITE||"readwrite").objectStore(r).put(e)),a=(0,s.dD)();return i.onsuccess=function(e){a.resolve()},i.onerror=function(e){a.reject(e)},a.promise})):Promise.resolve()}},{key:"addItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)&&t.length&&c?this._getDB().then((function(n){for(var r=function(e){var n=t[e],r=a.put(n),i=(0,s.dD)();r.onsuccess=function(e){i.resolve()},r.onerror=function(e){i.reject(e)},u.push(i.promise)},i=e.storeName,a=(e.keyPath,n.transaction([i],l.READ_WRITE||"readwrite").objectStore(i)),o=t.length,u=[],c=0;c<o;c++)r(c);return Promise.all(u)})):Promise.resolve()}},{key:"update",value:function(e,t,n){var r=this;return c?this.get(e).then((function(e){return e[t]=n,r.add(e)})):Promise.resolve()}},{key:"get",value:function(e){var t=this;return c?this._getDB().then((function(n){var r=(0,s.dD)(),i=t.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var a=n.transaction([i]).objectStore(i).get(e);return a.onsuccess=function(e){var t=e.target.result;if(!t)return r.resolve();r.resolve(t)},a.onerror=function(e){r.reject(e)},a.oncomplete=function(e){},r.promise})):Promise.resolve(null)}},{key:"getAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return c?this._getDB().then((function(r){var i=(0,s.dD)(),a=e.storeName;if(!r.objectStoreNames.contains(a))return i.resolve();var o=r.transaction([a]).objectStore(a);if(IDBObjectStore.prototype.getAll){var u=o.getAll(t,n);return u.onsuccess=function(e){var t=e.target.result;if(!t)return i.resolve();i.resolve(t)},u.onerror=function(e){i.reject(e)},i.promise}var c=o.openCursor(t),l=[];return c.onsuccess=function(e){var t=e.target.result;t&&(l.push(t.value),void 0===n||l.length<n)?t.continue():i.resolve(l)},c.onerror=function(e){i.reject(e)},i.promise})):Promise.resolve(null)}},{key:"getAllKeys",value:function(e){var t=this;return c?this._getDB().then((function(n){var r=(0,s.dD)(),i=t.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var a=n.transaction([i]).objectStore(i);if(IDBObjectStore.prototype.getAllKeys){var o=a.getAllKeys(null,e);return o.onsuccess=function(e){var t=e.target.result;if(!t)return r.resolve();r.resolve(t)},o.onerror=function(e){r.reject(e)},r.promise}var u=a.openCursor(key),c=[];return u.onsuccess=function(t){var n=t.target.result;n&&(c.push(n.key),void 0===e||c.length<e)?n.continue():r.resolve(c)},u.onerror=function(e){r.reject(e)},r.promise})):Promise.resolve(null)}}])}(f)},9402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={None:"none",RC4:"rc4",AES128:"aes128",AES256:"aes256"}},6243:(e,t,n)=>{"use strict";n.d(t,{Qk:()=>h,Ql:()=>c,M8:()=>a,cm:()=>l,YP:()=>f,pj:()=>d,WA:()=>s,E2:()=>u,R3:()=>r,f5:()=>g,Xt:()=>o,Bo:()=>i});const r={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",DEFERRED:"deferred",FUTURE:"future",NONE:"none"};var i={FIRST:0,LAST:1,AFTER:2,BEFORE:3,NEXT:2,PREV:3},a={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5,NOBORDER:6},o={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},s={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",CIRCLE_DIMENSION:"CircleDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",FREETEXT_TEXTBOX:"FreeTextTextbox",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"},u={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"},c=(Object.keys(u).reduce((function(e,t){return e[u[t]]=Number(t),e}),{}),{0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"}),l=(Promise.resolve(),""),d=200,f=258,h={ROLLOVER:"rollover",NORMAL:"normal",DOWN:"down"},g={ConnectedPDF:1,XFA:2,Redaction:3,RMS:4,OCR:5,Comparison:6,Compliance:7,Optimizer:8,Conversion:9,LayoutRecognition:10,AdvEdit:11}},6544:(e,t,n)=>{"use strict";n.d(t,{BD:()=>o,Cl:()=>s,T2:()=>i,gO:()=>u,mz:()=>a});var r={Courier:0,"Courier-Bold":1,"Courier-BoldOblique":2,"Courier-Oblique":3,Helvetica:4,"Helvetica-Bold":5,"Helvetica-BoldOblique":6,"Helvetica-Oblique":7,"Times-Roman":8,"Times-Bold":9,"Times-BoldItalic":10,"Times-Italic":11,Symbol:12,ZapfDingbats:13};function i(e){return r[e]}var a={FoxitFixedOTF:"Courier",FoxitSansMM:"Courier","FoxitFixedOTF-Bold":"Courier-Bold","FoxitFixedOTF-Italic":"Courier-Oblique","FoxitFixedOTF-BoldItalic":"Courier-BoldOblique",FoxitSansOTF:"Helvetica","FoxitSansOTF-Italic":"Helvetica-Oblique","FoxitSansOTF-Bold":"Helvetica-Bold","FoxitSansOTF-BoldItalic":"Helvetica-BoldOblique","FoxitSansPS-BoldItalic":"Helvetica-BoldOblique",FoxitSerifOTF:"Times-Roman","FoxitSerifOTF-Italic":"Times-Italic","FoxitSerifOTF-Bold":"Times-Bold","FoxitSerifOTF-BoldItalic":"Times-BoldItalic",FoxitSymbolOTF:"Symbol",FoxitDingbatsOTF:"ZapfDingbats"},o=[{name:"Times Roman",value:"Times-Roman"},{name:"Times Bold",value:"Times-Bold"},{name:"Times Italic",value:"Times-Italic"},{name:"Times BoldItalic",value:"Times-BoldItalic"},{name:"Helvetica",value:"Helvetica"},{name:"Helvetica Bold",value:"Helvetica-Bold"},{name:"Helvetica Oblique",value:"Helvetica-Oblique"},{name:"Helvetica BoldOblique",value:"Helvetica-BoldOblique"},{name:"Courier",value:"Courier"},{name:"Courier Bold",value:"Courier-Bold"},{name:"Courier Oblique",value:"Courier-Oblique"},{name:"Courier BoldOblique",value:"Courier-BoldOblique"},{name:"Symbol",value:"Symbol"},{name:"ZapfDingbats",value:"ZapfDingbats"}],s=function(e){return o.some((function(t){return t.value===e}))},u=function(){return"Helvetica"}},2699:(e,t,n)=>{"use strict";n.d(t,{K:()=>s,Z:()=>u});var r=n(7484),i=n.n(r),a=n(949),o=function(e,t,n){var r="";if("object"==typeof e&&e.IsValid){if(!e.IsValid())return r;e=(0,a.q)(e)}var o=i()(e);if((t=t||"YYYY-MM-DD HH:mm:ss").indexOf("Z")>=0){n=Object.assign({separator:":",prefix:"",suffix:"",showSpace:!0},n);var s=o.format("Z");":"!==n.separator&&(s=s.replace(":",String(n.separator))),""!==n.prefix&&(s=String(n.prefix)+s),""!==n.suffix&&(s+=String(n.suffix)),t=t.replace(/\s+Z+|Z+/g,"");var u=n.showSpace?" ":"";r=o.format(t)+u+s}else r=o.format(t);return r},s=function(e){return"D:"+o(e,"YYYYMMDDHHmmssZ",{separator:"'",showSpace:!1})+"'"};const u=o},1047:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=function(e,t){return t[e]};function i(){if("undefined"!=typeof window){if(window.crypto)return e=new Uint32Array(1),window.crypto.getRandomValues(e),e[0]/4294967296;if(window.msCrypto)return function(){var e=new Uint32Array(1);return window.msCrypto.getRandomValues(e),e[0]/4294967296}()}var e;return r("random",Math)()}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*i()|0;return("x"==e?t:3&t|8).toString(16)}))}},4551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={Unknown:-1,Signature:0,Encryption:1,SignatureAndEncryption:2}},7021:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=new Proxy({},{get:function(e,t){return function(){throw new Error("".concat(t," is not allowed to be called."))}}})},498:(e,t,n)=>{"use strict";n.d(t,{ZN:()=>r,k3:()=>i});var r={normal:0,italic:1,bold:2},i={CUSTOM_TEXT:"type here to insert text",NAME:"author name",NAME_DATE_TIME:"author name, date and time",DATE_TIME:"date and time",DATE:"date"}},3846:(e,t,n)=>{"use strict";n.d(t,{Q9:()=>a,fS:()=>i});var r={ReadOnly:1,Required:2,NoExport:4,Hidden:8,ButtonNoToggleToOff:16384,ButtonRadiosInUnison:33554432,TextMultiline:4096,TextPassword:8192,TextDoNotSpellCheck:4194304,TextDoNotScroll:8388608,TextComb:16777216,ComboEdit:262144,ChoiceMultiSelect:2097152,CommitOnSelChange:67108864,inUnison:function(e){return e&r.ButtonRadiosInUnison},isHidden:function(e){return e&r.Hidden},isReadOnly:function(e){return e&r.ReadOnly},isRequired:function(e){return e&r.Required},isNoExport:function(e){return e&r.NoExport},isMultiline:function(e){return e&r.TextMultiline},isPassword:function(e){return e&r.TextPassword},isComb:function(e){return e&r.TextComb},isNoSpellCheck:function(e){return e&r.TextDoNotSpellCheck},isNoScroll:function(e){return e&r.TextDoNotScroll},isComboEdit:function(e){return e&r.ComboEdit},isChoiceMultiSelect:function(e){return e&r.ChoiceMultiSelect}},i={Unknown:0,PushButton:1,CheckBox:2,RadioButton:3,Text:6,ListBox:5,ComboBox:4,Sign:7,Barcode:8},a=r},9444:(e,t,n)=>{"use strict";n.d(t,{AB:()=>b,LK:()=>h,LQ:()=>_,M7:()=>p,ZP:()=>I,eL:()=>f,ed:()=>g,oJ:()=>m,sg:()=>d,v6:()=>S,yd:()=>v});var r,i=n(4375),a=n(6721),o=n(5136),s=n(7327),u=n(2531),c=n(1907),l=n.n(c),d=2,f=4,h=8,g=16,p=32,v=64,_=128,m=256,y=512,S=1024,b=2048,D=(r={},(0,o._)(r,p,["pageeditor",[],"initPageEditor"]),(0,o._)(r,v,["touchup",[y],"initTouchup"]),(0,o._)(r,h,["xfa",[y],"initXFA"]),(0,o._)(r,y,["lr",[]]),(0,o._)(r,d,["optimizer",[],"initOptimizer"]),(0,o._)(r,f,["exporter",[d],"initExporter"]),(0,o._)(r,g,["docprocess",[y],"initDocProcess"]),(0,o._)(r,_,["pageformat",[],"initPageFormat"]),(0,o._)(r,m,["compare",[y],"initCompare"]),(0,o._)(r,S,["openssl",[],"initOpenSSL"]),(0,o._)(r,b,["3d",[],"initMultimedia3D"]),r),P=function(){function e(){(0,i._)(this,e)}return(0,a._)(e,[{key:"init",value:function(e){this.path=e.enginePath,this.gsdk=e.engine,this.wasmModules={},this.wasmModulePromise=null}},{key:"loadWasmModule",value:function(e){var t=this,n=this.gsdk,r=this.wasmModules;if(!n.loadDynamicLibrary){if(!r[e]){var i=(0,u._)(D[e],2)[1];n[i]&&n[i]()}return r[e]=!0,Promise.resolve()}if(r[e])return r[e];var a=(0,u._)(D[e],3),o=a[0],c=a[1],d=a[2],f=Promise.all(c.map((function(e){return t.loadWasmModule(e)})));return r[e]=f.then((function(){var e=n.loadDynamicLibrary("".concat(o,".wasm?h=")+l()[o],{loadAsync:!0,global:!0,nodelete:!0});(0,s._)(e,Promise)?e=e.then((function(){d&&(n[d]&&n[d]())})):d&&n[d]&&n[d]();return e})),r[e]}}]),e}();const I=n.g.wm=new P},4231:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){var t;switch(r(e)){case"string":return/Z$/.test(e)?0:(t=/([+-])(\d{2}):?(\d{2})/.exec(e))&&(+t[3]+60*t[2])*("+"===t[1]?1:-1);case"number":return Number.isNaN(e)?null:Math.abs(e)<16?60*e:e;default:return null}}n.r(t);var a=function(e,t,n){var r=String(e);return!r||r.length>=t?e:"".concat(Array(t+1-r.length).join(n)).concat(e)},o=function(e){var t=Math.abs(e),n=Math.floor(t/60),r=t%60;return"".concat(e<=0?"+":"-").concat(a(n,2,"0"),":").concat(a(r,2,"0"))};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=(new Date).getTimezoneOffset(),c=Date.prototype;function l(e){return 6e4*(e-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:u))}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getTimezoneOffset();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$d=new Date(t.getTime()-l(n)),this.$timezoneOffset=n}var t,n,r;return t=e,(n=[{key:"getTimezoneOffset",value:function(){return this.$timezoneOffset}},{key:"setTimezoneOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$timezoneOffset;this.$d.setTime(this.$d.getTime()+l(this.$timezoneOffset,e)),this.$timezoneOffset=e}}])&&s(t.prototype,n),r&&s(t,r),e}();["toDateString","toLocaleString","toLocaleDateString","toLocaleTimeString","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setYear","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear"].forEach((function(e){d.prototype[e]=function(){return c[e].apply(this.$d,arguments)}})),["toISOString","toUTCString","toGMTString","toJSON","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","valueOf","getTime"].forEach((function(e){d.prototype[e]=function(){return c[e].apply(new Date(this.$d.getTime()+l(this.$timezoneOffset)),arguments)}})),["setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"].forEach((function(e){d.prototype[e]=function(){var t=new Date(this.$d.getTime()+l(this.$timezoneOffset));c[e].apply(t,arguments),t.setTime(t.getTime()-l(this.$timezoneOffset)),this.$d=t}})),["toString","toTimeString"].forEach((function(e){d.prototype[e]=function(){return c[e].apply(this.$d,arguments).replace(/GMT(.*)$/,"GMT".concat(o(this.$timezoneOffset)))}}));var f=d,h=!1,g=function(e,t){["clone","add","subtract","startOf"].forEach((function(n){e[n]=function(){var e=this.utcOffset();return t[n].apply(this,arguments).utcOffset(e)}})),e.utc=function(){return this.utcOffset(0)},e.local=function(){return this.utcOffset(-u)},e.utcOffset=function(e){if(void 0===e){var t=this.$d.getTimezoneOffset();return 0===t?0:-t}return null!==i(e)&&(this.$d.setTimezoneOffset(-i(e)),this.init()),this},e.toDate=function(){return new Date(this.$d.getTime())},e.isLocal=function(){return this.$d.getTimezoneOffset()===u},e.isUTC=function(){return 0===this.$d.getTimezoneOffset()},e.$set=function(){for(var e,n=this.$d.getTimezoneOffset(),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.$set).call.apply(e,[this].concat(i)),this.$d instanceof Date&&(this.$d=new f(this.$d,n)),this},e.parse=function(e){t.parse.call(this,e);var n=this.$d,r="string"==typeof e.date?i(e.date):null;this.$d=new f(n,null===r?u:-r),h&&this.local(),this.init()}};t.default=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;h=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).parseToLocal;var n=e.prototype,r=function(){};r.prototype=n;var a=new r;g(a,n),a.constructor=e.constructor,e.prototype=a,t.utc=function(e){var t=this(e);return"string"==typeof e&&null===i(e)&&(t.$d.$timezoneOffset=0),t.utc()}}}])},7990:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",o="hour",s="day",u="week",c="month",l="quarter",d="year",f="date",h="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},_=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},m={s:_,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+_(r,2,"0")+":"+_(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),a=n-i<0,o=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:u,d:s,D:f,h:o,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",S={};S[y]=v;var b="$isDayjsObject",D=function(e){return e instanceof w||!(!e||!e[b])},P=function e(t,n,r){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();S[a]&&(i=a),n&&(S[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;S[s]=t,i=s}return!r&&i&&(y=i),i||!r&&y},I=function(e,t){if(D(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new w(n)},A=m;A.l=P,A.i=D,A.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function v(e){this.$L=P(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var _=v.prototype;return _.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(A.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(g);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},_.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},_.$utils=function(){return A},_.isValid=function(){return!(this.$d.toString()===h)},_.isSame=function(e,t){var n=I(e);return this.startOf(t)<=n&&n<=this.endOf(t)},_.isAfter=function(e,t){return I(e)<this.startOf(t)},_.isBefore=function(e,t){return this.endOf(t)<I(e)},_.$g=function(e,t,n){return A.u(e)?this[t]:this.set(n,e)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(e,t){var n=this,r=!!A.u(t)||t,l=A.p(e),h=function(e,t){var i=A.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},g=function(e,t){return A.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},p=this.$W,v=this.$M,_=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case d:return r?h(1,0):h(31,11);case c:return r?h(1,v):h(0,v+1);case u:var y=this.$locale().weekStart||0,S=(p<y?p+7:p)-y;return h(r?_-S:_+(6-S),v);case s:case f:return g(m+"Hours",0);case o:return g(m+"Minutes",1);case a:return g(m+"Seconds",2);case i:return g(m+"Milliseconds",3);default:return this.clone()}},_.endOf=function(e){return this.startOf(e,!1)},_.$set=function(e,t){var n,u=A.p(e),l="set"+(this.$u?"UTC":""),h=(n={},n[s]=l+"Date",n[f]=l+"Date",n[c]=l+"Month",n[d]=l+"FullYear",n[o]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],g=u===s?this.$D+(t-this.$W):t;if(u===c||u===d){var p=this.clone().set(f,1);p.$d[h](g),p.init(),this.$d=p.set(f,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](g);return this.init(),this},_.set=function(e,t){return this.clone().$set(e,t)},_.get=function(e){return this[A.p(e)]()},_.add=function(r,l){var f,h=this;r=Number(r);var g=A.p(l),p=function(e){var t=I(h);return A.w(t.date(t.date()+Math.round(e*r)),h)};if(g===c)return this.set(c,this.$M+r);if(g===d)return this.set(d,this.$y+r);if(g===s)return p(1);if(g===u)return p(7);var v=(f={},f[a]=t,f[o]=n,f[i]=e,f)[g]||1,_=this.$d.getTime()+r*v;return A.w(_,this)},_.subtract=function(e,t){return this.add(-1*e,t)},_.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=A.z(this),a=this.$H,o=this.$m,s=this.$M,u=n.weekdays,c=n.months,l=n.meridiem,d=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},f=function(e){return A.s(a%12||12,e,"0")},g=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return A.s(t.$y,4,"0");case"M":return s+1;case"MM":return A.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return t.$D;case"DD":return A.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,u,2);case"ddd":return d(n.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(a);case"HH":return A.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return g(a,o,!0);case"A":return g(a,o,!1);case"m":return String(o);case"mm":return A.s(o,2,"0");case"s":return String(t.$s);case"ss":return A.s(t.$s,2,"0");case"SSS":return A.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(r,f,h){var g,p=this,v=A.p(f),_=I(r),m=(_.utcOffset()-this.utcOffset())*t,y=this-_,S=function(){return A.m(p,_)};switch(v){case d:g=S()/12;break;case c:g=S();break;case l:g=S()/3;break;case u:g=(y-m)/6048e5;break;case s:g=(y-m)/864e5;break;case o:g=y/n;break;case a:g=y/t;break;case i:g=y/e;break;default:g=y}return h?g:A.a(g)},_.daysInMonth=function(){return this.endOf(c).$D},_.$locale=function(){return S[this.$L]},_.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=P(e,t,!0);return r&&(n.$L=r),n},_.clone=function(){return A.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},v}(),C=w.prototype;return I.prototype=C,[["$ms",r],["$s",i],["$m",a],["$H",o],["$W",s],["$M",c],["$y",d],["$D",f]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,w,I),e.$i=!0),I},I.locale=P,I.isDayjs=D,I.unix=function(e){return I(1e3*e)},I.en=S[y],I.Ls=S,I.p={},I}()},8990:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function i(e,t,n){var i=r[n];return Array.isArray(i)&&(i=i[t?0:1]),i.replace("%d",e)}var a={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(e){return e+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i}};return n.default.locale(a,null,!0),a}(n(7990))},4883:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(e){return e+"º"}};return n.default.locale(r,null,!0),r}(n(7990))},5522:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")}};return n.default.locale(r,null,!0),r}(n(7990))},890:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"it",weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"qualche secondo",m:"un minuto",mm:"%d minuti",h:"un' ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:function(e){return e+"º"}};return n.default.locale(r,null,!0),r}(n(7990))},859:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"ja",weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e){return e+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiem:function(e){return e<12?"午前":"午後"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}};return n.default.locale(r,null,!0),r}(n(7990))},5576:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"ko",weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),ordinal:function(e){return e+"일"},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},meridiem:function(e){return e<12?"오전":"오후"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"}};return n.default.locale(r,null,!0),r}(n(7990))},3765:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"nl",weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),ordinal:function(e){return"["+e+(1===e||8===e||e>=20?"ste":"de")+"]"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"een minuut",mm:"%d minuten",h:"een uur",hh:"%d uur",d:"een dag",dd:"%d dagen",M:"een maand",MM:"%d maanden",y:"een jaar",yy:"%d jaar"}};return n.default.locale(r,null,!0),r}(n(7990))},1128:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(r,null,!0),r}(n(7990))},7074:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-hk",months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),ordinal:function(e,t){return"W"===t?e+"週":e+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d 分鐘",h:"一小時",hh:"%d 小時",d:"一天",dd:"%d 天",M:"一個月",MM:"%d 個月",y:"一年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(r,null,!0),r}(n(7990))},579:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-tw",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"週":e+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(r,null,!0),r}(n(7990))},1434:function(e){e.exports=function(){"use strict";return function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return r.bind(this)(e);var i=this.$utils(),a=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return i.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return i.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return i.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(a)}}}()},8366:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,a){var o=i.prototype;a.utc=function(e){return new i({date:e,utc:!0,args:arguments})},o.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var u=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var c=o.utcOffset;o.utcOffset=function(r,i){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],a=i[0],o=60*+i[1]+ +i[2];return 0===o?0:"+"===a?o:-o}(r),null===r))return this;var o=Math.abs(r)<=16?60*r:r,s=this;if(i)return s.$offset=o,s.$u=0===r,s;if(0!==r){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+u,e)).$offset=o,s.$x.$localOffset=u}else s=this.utc();return s};var l=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,n){if(e&&this.$u===e.$u)return f.call(this,e,t,n);var r=this.local(),i=a(e).local();return f.call(r,i,t,n)}}}()},9643:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{F:()=>r})},4702:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Q:()=>r,_:()=>r})},6448:(e,t,n)=>{"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,u,"next",e)}function u(e){r(o,i,a,s,u,"throw",e)}s(void 0)}))}}n.d(t,{_:()=>i})},4375:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(7327);function i(e,t){if(!(0,r._)(e,t))throw new TypeError("Cannot call a class as a function")}},8490:(e,t,n)=>{"use strict";n.d(t,{L:()=>a,_:()=>a});var r=n(1162),i=n(548);function a(e,t,n){return a=(0,r.R)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,i.b)(a,n.prototype),a},a.apply(null,arguments)}},6721:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{_:()=>i})},2872:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(6841),i=n(1162),a=n(4702),o=n(5171);function s(e){var t=(0,i.R)();return function(){var n,i=(0,r.X)(e);if(t){var s=(0,r.X)(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return function(e,t){return!t||"object"!==(0,o.j)(t)&&"function"!=typeof t?(0,a.Q)(e):t}(this,n)}}},5136:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{_:()=>r,j:()=>r})},2834:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(6841);function i(e,t,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.X)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n||e):a.value}},i(e,t,n||e)}},6841:(e,t,n)=>{"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{X:()=>r,_:()=>r})},6147:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(548);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r.b)(e,t)}},7327:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(7327);function i(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):(0,r._)(e,t)}},1162:(e,t,n)=>{"use strict";function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{R:()=>r})},9422:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(5136);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){(0,r.j)(e,t,n[t])}))}return e}},6784:(e,t,n)=>{"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}n.d(t,{_:()=>r})},3236:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{_:()=>r})},548:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{b:()=>r})},2531:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(2430);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||(0,r.N)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},3194:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(9643);var i=n(2430);function a(e){return function(e){if(Array.isArray(e))return(0,r.F)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.N)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},5171:(e,t,n)=>{"use strict";function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}n.d(t,{_:()=>r,j:()=>r})},2430:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var r=n(9643);function i(e,t){if(e){if("string"==typeof e)return(0,r.F)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.F)(e,t):void 0}}},7582:(e,t,n)=>{"use strict";n.d(t,{Jh:()=>r});function r(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__);var e=__webpack_require__(6448),t=__webpack_require__(4375),n=__webpack_require__(8490),r=__webpack_require__(6721),i=__webpack_require__(5136),a=__webpack_require__(7327),o=__webpack_require__(2531),s=__webpack_require__(3194),u=__webpack_require__(7582),c=__webpack_require__(9422),l=(__webpack_require__(7273),__webpack_require__(1870)),d=__webpack_require__(8319);const f={"NotoNaskhArabic-Bold.ttf":"febcd5fae479715518a682af57a1422e","NotoNaskhArabic-Regular.ttf":"f11da773d5e424caa06cbe86b19c8c3b","NotoNirmalaui-Regular.ttf":"8300e4a9865b6231e32e46b1707b8f7b","NotoSans-Bold.ttf":"f0fbfd466cf418784f70671d60b1e3ae","NotoSans-BoldItalic.ttf":"50c48f215078a295208b49554aea3987","NotoSans-Regular.ttf":"7d9f89ded30222fd1266979e91adaf88","NotoSansCJKjp-DemiLight.otf":"30c649feb1b2f3e329d91796c3064110","NotoSansCJKjp-Light.otf":"b81b161eff7c869389aaa6015c04730a","NotoSansCJKjp-Medium.otf":"dd4cedc2ef66c81cab848ad9601e8144","NotoSansCJKjp-Regular.otf":"0501218c178d3763f2f9ae15744eae69","NotoSansCJKjp-Thin.otf":"27428f85a1f9fc06d37b1e4f772b332e","NotoSansCJKkr-DemiLight.otf":"f08d579f072fc995a0d0cf04930601c1","NotoSansCJKkr-Light.otf":"aa338e61e68bf72f6adfd2733847c90d","NotoSansCJKkr-Medium.otf":"3ebac294262ed84a17b4a4787837e23a","NotoSansCJKkr-Regular.otf":"4cf03dc23b8bb8d4a19bdca44c799133","NotoSansCJKkr-Thin.otf":"eae1fc05cf33c41e0031cdd11db599f7","NotoSansCJKtc-DemiLight.otf":"bec6ef360c6e7ac3734b6fe28a4126e2","NotoSansCJKtc-Light.otf":"468d6c5da548fecbda4fd5a23b912166","NotoSansCJKtc-Medium.otf":"f20459bfb276c641f12426b82f4be596","NotoSansCJKtc-Thin.otf":"8ecb59643a91f8e2c041f8fef92b47c2","NotoSansCanadianAboriginal-Regular.ttf":"462d533ae85cece0541123b8b3572374","NotoSansCherokee-Regular.ttf":"a88159ea01ed8715b9cdd68c4013fccb","NotoSansEthiopic-Bold.ttf":"22142e5eb5edaf965ce01e3fc1894c01","NotoSansEthiopic-Regular.ttf":"7e19f7808de91fd1c4c9789a5f0450de","NotoSansGujarati-Bold.ttf":"500303eb9e05a1de5e6c01fd25edf0b7","NotoSansGujarati-Regular.ttf":"a5f559c25908b12d7fcfdaa1600fd9f1","NotoSansHebrew-Bold.ttf":"b2c1b6906d9d77c5672fcc4f4a3c7b61","NotoSansHebrew-Regular.ttf":"681afbd524342551a9b3bf974c0ad433","NotoSansKhmer-Bold.ttf":"4a799c2835ed2e32e92d071add8e4228","NotoSansKhmer-Regular.ttf":"11217ceabbe48efc06cb950ec37189ef","NotoSansLao-Bold.ttf":"12da97798a3838ed577ca954d9d0c34b","NotoSansLao-Regular.ttf":"e5dadb678254367dcc3f91a1863fa74a","NotoSansMongolian-Regular.ttf":"e3426a66b65f03ca853cdc7bea355b8f","NotoSansMonoCJKjp-Regular.otf":"0beee38f74ab3756ada63bd7ce40cbad","NotoSansMonoCJKkr-Regular.otf":"2b7b9ff7c17b0de1c3b5e6059971e8b9","NotoSansMonoCJKsc-Regular.otf":"c24d3cd332ddf3aca147541507e5deec","NotoSansMonoCJKtc-Regular.otf":"fd7b80221cdfbed04eb69a371c0681b8","NotoSansPhagsPa-Regular.ttf":"857df25a1ff86fd325dc35efa2cb749d","NotoSansSC-Black.otf":"1a4015a208e09022a62256eac48eebe7","NotoSansSC-Bold.otf":"6038abbaa72926e043eac1ffc1726fd3","NotoSansSC-DemiLight.otf":"db2514b43a247c427c3732de541c09de","NotoSansSC-Light.otf":"65e7865c68f0062b0673296a266f888a","NotoSansSC-Medium.otf":"0c714136a7e02b5e4820a6c7c8e59be6","NotoSansSC-Regular.otf":"0a1fe01e7d921603e8ba185cdf1be994","NotoSansSC-Thin.otf":"fcc448ce50589e3a5309895b7e2716da","NotoSansSinhala-Bold.ttf":"d90775d13538cfa519812193a5c24986","NotoSansSinhala-Regular.ttf":"408ad25235ba342df73ed40683c5122a","NotoSansSyriacEastern-Regular.ttf":"555d860b3efcbedfd0928856bd0d1678","NotoSansTCLight.otf":"f5b0408d4cbf63865eba3dc8d9109bfd","NotoSansTaiLe-Regular.ttf":"1611c941bde482ee7c5b50a9c4dc5f9f","NotoSansTamil-Bold.ttf":"1bd32f3eab7154c43e689394a8c62033","NotoSansTamil-Regular.ttf":"7a9bd984400243ea3bf443be7a261a6c","NotoSansTelugu-Bold.ttf":"e47d4bd6e1d8a55d48b97b33b6b8b09d","NotoSansTelugu-Regular.ttf":"9c3e0075f045d1943a07b0c06cfde600","NotoSansThaana-Bold.ttf":"9c615895d006c4a4d74c12d5fa3c1eff","NotoSansThaana-Regular.ttf":"59d78c806149e8cc9f12211aabcf71fb","NotoSansThai-Bold.ttf":"17daa34206eff2ab5c298b2246810426","NotoSansThai-Regular.ttf":"b0db00f1326506f25e0408f6169b6ed0","NotoSansTibetan-Bold.ttf":"7c712907f958ccf0ebfbc28bf275154a","NotoSansTibetan-Regular.ttf":"06a4dbcbf8ef798d42383f6f2869d7be","NotoSansYi-Regular.ttf":"9f73151e0398e0bc70c4e9549ff3b046","NotoSerifKhmer-Bold.ttf":"9ed9ad995a6ba799e64a1949ea2e88ad","NotoSerifKhmer-Regular.ttf":"6c7bde29fb840cdeb077cdb66da2d0ad","NotoSerifLao-Bold.ttf":"4d2fb002f26a6e146781a207e315f0c3","NotoSerifLao-Regular.ttf":"730051aa181cefd7357c1eefd1c228b2","NotoSerifThai-Bold.ttf":"d4d31e29ea92a2b72b01edabb8b8483b","NotoSerifThai-Regular.ttf":"657709f54d9b04cf4967fe32e03873ea","PTSansNarrow-Bold.ttf":"412e8550a8e343da624aaae655f0dad0","PTSansNarrow-Regular.ttf":"ed806804702a540ef05cffe3d56c793b"};var h=__webpack_require__(2136),g="fontName",p="fontLib",v=new h.Z(p,"FoxitPDFSDKForWeb_"+p),_=[];_=_.concat(_,[{nameMatches:[/verdana/,/franklingothic/,/segoeui/,/sylfaen/,/tahoma/,/couriernew/,/lucidasansunicode/,/calibri/,/cambria/,/candara/,/comicsansms/,/consolas/,/constantia/,/corbel/,/gabriola/,/georgia/,/impact/,/lucidaconsole/,/microsoftsansserif/,/msrefrencesansserif/,/palatinolinotype/,/segoeprint/,/segoescript/,/trebuchetms/,/notosans(bold)?/],charsets:[0,204,238],charRange:/[\u0000-\u00ff]/,glyphs:[{bold:-1,flags:64,url:"NotoSans-BoldItalic.ttf"},{bold:496,flags:-1,url:"NotoSans-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSans-Regular.ttf"}]},{nameMatches:[/(youyuan)|(simhei)|(simsun)|(simsunextb)|(kaiti)|(方正)|(song)|(仿宋)|(黑体)|(华文)|(楷体)|(隶书)|(宋体)|(微软雅黑)|(新宋体)|(幼圆)/,/(notosansmonocjksc)|(notosansmonocjksc(regular)?)/],charsets:[134],charRange:/[\u0000-\u007f\u8140-\uA0FE\uA996\uA1A1-\uA9FE\uA840-\uA9A0\uF8A1-\uFEFE\uA140-\uA7A0\u200F-\u2027\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uFF00-\uFFEF]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansMonoCJKsc-Regular.otf"}]},{nameMatches:[/(youyuan)|(simhei)|(simsun)|(simsunextb)|(kaiti)|(方正)|(song)|(仿宋)|(黑体)|(华文)|(楷体)|(隶书)|(宋体)|(微软雅黑)|(新宋体)|(幼圆)/,/(notosanssc)|(notosanscjksc)|(notosanscjksc(regular)?)|(notosanssc(regular)?)/],charsets:[134],charRange:/[\u0000-\u007f\u8140-\uA0FE\uA996\uA1A1-\uA9FE\uA840-\uA9A0\uF8A1-\uFEFE\uA140-\uA7A0\u200F-\u2027\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uFF00-\uFFEF]/,glyphs:[{bold:1,flags:-1,url:"NotoSansSC-Thin.otf"},{bold:2,flags:-1,url:"NotoSansSC-Light.otf"},{bold:4,flags:-1,url:"NotoSansSC-DemiLight.otf"},{bold:48,flags:-1,url:"NotoSansSC-Medium.otf"},{bold:192,flags:-1,url:"NotoSansSC-Bold.otf"},{bold:256,flags:-1,url:"NotoSansSC-Black.otf"},{bold:-1,flags:-1,url:"NotoSansSC-Regular.otf"}]},{nameMatches:[/(meiryo)|(meiryoui)|(msgothic)|(msmincho)|(mspgothic)|(mspmincho)|(uigothic)/,/(notosanscjkjp)|(notosansmonocjkjp(regular)?)/,/(notosanscjkjp(demilight)?)|(notosanscjkjp(light)?)|(notosanscjkjp(medium)?)|(notosanscjkjp(thin)?)|(notosanscjkjp(regular)?)/],charsets:[128],charRange:/[\u0000-\u007f\u2E80-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F]/,glyphs:[{bold:-1,flags:1,url:"NotoSansMonoCJKjp-Regular.otf"},{bold:1,flags:-1,url:"NotoSansCJKjp-Thin.otf"},{bold:2,flags:-1,url:"NotoSansCJKjp-Light.otf"},{bold:4,flags:-1,url:"NotoSansCJKjp-DemiLight.otf"},{bold:496,flags:-1,url:"NotoSansCJKjp-Medium.otf"},{bold:-1,flags:-1,url:"NotoSansCJKjp-Regular.otf"}]},{nameMatches:[/(korean)/,/(notosanscjkkr)|(notosansmonocjkkr(regular)?)|(notosansmonocjkkr(bold)?)/,/(notosanscjkkr(demilight)?)|(notosanscjkkr(light)?)|(notosanscjkkr(medium)?)|(notosanscjkkr(bold)?)|(notosanscjkkr(thin)?)|(notosanscjkkr(regular)?)/],charsets:[129],charRange:/[\u0000-\u007f\u1100-\u11FF\u3130-\u318F\uAC00-\uD7AF\uFF00-\uFFEF\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F]/,glyphs:[{bold:-1,flags:1,url:"NotoSansMonoCJKkr-Regular.otf"},{bold:1,flags:-1,url:"NotoSansCJKkr-Thin.otf"},{bold:2,flags:-1,url:"NotoSansCJKkr-Light.otf"},{bold:4,flags:-1,url:"NotoSansCJKkr-DemiLight.otf"},{bold:496,flags:-1,url:"NotoSansCJKkr-Medium.otf"},{bold:-1,flags:-1,url:"NotoSansCJKkr-Regular.otf"}]},{nameMatches:[/(dfkaisb)|(microsoftjhenghei)|(mingliu)|(mingliuhkscs)|(mingliuhkscsextb)|(mingliuextb)|(pmingliu)|(pmingliuextb)/,/(notosanscjktc(demilight)?)|(notosanscjktc(light)?)|(notosanscjktc(medium)?)|(notosanscjktc(thin)?)|(notosansmonocjktc(regular)?)/],charsets:[136],charRange:/[\u4E00-\uA0FE\uA140-\uA3BF\uA259-\uA261\uA3C0-\uA3FE\u2E80-\u303F\u31C0-\u4DBF\uFF00-\uFFEF]/,glyphs:[{bold:-1,flags:1,url:"NotoSansMonoCJKtc-Regular.otf"},{bold:1,flags:-1,url:"NotoSansCJKtc-Thin.otf"},{bold:2,flags:-1,url:"NotoSansCJKtc-Light.otf"},{bold:4,flags:-1,url:"NotoSansCJKtc-DemiLight.otf"},{bold:496,flags:-1,url:"NotoSansCJKtc-Medium.otf"},{bold:-1,flags:-1,url:"NotoSansMonoCJKtc-Regular.otf"}]},{nameMatches:[/(arabic)|(andalus)|(arabictypesetting)|(sakkalmajalla)|(simplifiedarabic)|(simplifiedarabicfixed)|(traditionalarabic)/,/(notonaskharabicbold)|(notonaskharabic)/],charsets:[178],charRange:/[\u0000-\u007f\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]/,glyphs:[{bold:496,flags:-1,url:"NotoNaskhArabic-Bold.ttf"},{bold:-1,flags:-1,url:"NotoNaskhArabic-Regular.ttf"}]},{nameMatches:[/(angsananew)|(angsanaupc)|(browallianew)|(browalliaupc)|(cordianew)|(cordiaupc)|(eucrosiaupc)|(freesiaupc)|(irisupc)|(jasmineupc)|(kodchiangupc)|(leelawadee)|(lilyupc)|(thonburi)/,/(notosansthaibold)|(notosansthai)|(notoserifthaibold)|(notoserifthai)/],charsets:[222],charRange:/[\u0E00-\u0E7F]/,glyphs:[{bold:496,flags:2,url:"NotoSerifThai-Bold.ttf"},{bold:-1,flags:2,url:"NotoSerifThai-Regular.ttf"},{bold:496,flags:-1,url:"NotoSansThai-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansThai-Regular.ttf"}]},{nameMatches:[/(aharoni)|(david)|(frankruehl)|(gisha)|(levenimmt)|(miriam)|(narkism)|(rod)/,/(notosanshebrewbold)|(notosanshebrew)/],charsets:[177],charRange:/[\u0590-\u05FF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansHebrew-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansHebrew-Regular.ttf"}]},{nameMatches:[/(daunpenh)|(khmer)|(moolboran)/,/(notosanskhmerbold)|(notosanskhmer)|(notoserifkhmerbold)|(notoserifkhmer)/],charsets:[1],charRange:/[\u1780-\u17FF\u19E0-\u19FF]/,glyphs:[{bold:496,flags:2,url:"NotoSerifKhmer-Bold.ttf"},{bold:-1,flags:2,url:"NotoSerifKhmer-Regular.ttf"},{bold:496,flags:-1,url:"NotoSansKhmer-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansKhmer-Regular.ttf"}]},{nameMatches:[/(dokchampa)|(lao)/,/(notosanslaobold)|(notosanslao)|(notoseriflaobold)|(notoseriflao)/],charsets:[1],charRange:/[\u0E80-\u0EFF]/,glyphs:[{bold:496,flags:2,url:"NotoSerifLao-Bold.ttf"},{bold:-1,flags:2,url:"NotoSerifLao-Regular.ttf"},{bold:496,flags:-1,url:"NotoSansLao-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansLao-Regular.ttf"}]},{nameMatches:[/(vani)|(gautami)/,/(notosanstelugubold)|(notosanstelugu)/],charsets:[1],charRange:/[\u0C00-\u0C7F]/,glyphs:[{bold:496,flags:-1,url:"NotoSansTelugu-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansTelugu-Regular.ttf"}]},{nameMatches:[/(latha)|(vijaya)/,/(notosanstamilbold)|(notosanstamil)/],charsets:[1],charRange:/[\u0C00-\u0C7F]/,glyphs:[{bold:496,flags:-1,url:"NotoSansTamil-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansTamil-Regular.ttf"}]},{nameMatches:[/(moboli)|(mvboli)/,/(notosansthaanabold)|(notosansthaana)/],charsets:[1],charRange:/[\u0780-\u07BF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansThaana-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansThaana-Regular.ttf"}]},{nameMatches:[/(taile)|(microsofttaile)/,/(notosanstaile)/],charsets:[1],charRange:/[\u1950-\u197F]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansTaiLe-Regular.ttf"}]},{nameMatches:[/(estrangeloedessa)/,/(notosanssyriaceastern)/],charsets:[1],charRange:/[\u0700-\u074F]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansSyriacEastern-Regular.ttf"}]},{nameMatches:[/(iskoolapota)/,/(notosanssinhalabold)|(notosanssinhala)/],charsets:[1],charRange:/[\u0D80-\u0DFF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansSinhala-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansSinhala-Regular.ttf"}]},{nameMatches:[/(himalaya)|(microsofthimalaya)/,/(notosanstibetanbold)|(notosanstibetan)/],charsets:[1],charRange:/[\u0F00-\u0FFF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansTibetan-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansTibetan-Regular.ttf"}]},{nameMatches:[/(phagspa)|(microsoftphagspa)/,/(notosansphagspa)/],charsets:[1],charRange:/[\uA840-\uA87F]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansPhagsPa-Regular.ttf"}]},{nameMatches:[/(euphemia)|(gadugi)/,/(notosanscanadianaboriginal)/],charsets:[1],charRange:/[\u1400-\u167F\u18B0-\u18FF]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansCanadianAboriginal-Regular.ttf"}]},{nameMatches:[/(plantagenetcherokee)|(notosanscherokee)/],charsets:[1],charRange:/[\u13A0-\u13FF]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansCherokee-Regular.ttf"}]},{nameMatches:[/(nyala)|(ebrima)|(notosansethiopicbold)|(notosansethiopic)/],charsets:[1],charRange:/[\u1200-\u139F\u2D80-\u2DDF\uAB00-\uAB5F]/,glyphs:[{bold:496,flags:-1,url:"NotoSansEthiopic-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansEthiopic-Regular.ttf"}]},{nameMatches:[/(shruti)|(notosansgujaratibold)|(notosansgujarati)/],charsets:[1],charRange:/[\u0A80-\u0AFF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansGujarati-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansGujarati-Regular.ttf"}]},{nameMatches:[/(mongolian)|(mongolianbaiti)|(notosansmongolian)/],charsets:[1],charRange:/[\u1800-\u18AF]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansMongolian-Regular.ttf"}]},{nameMatches:[/(nirmalaui)|(notosansgujarati)/],charsets:[1],charRange:/[\u0A80-\u0E7F]/,glyphs:[{bold:-1,flags:-1,url:"NotoNirmalaui-Regular.ttf"}]},{nameMatches:[/(microsoftyibati)|(yi\b)|(notosansyi)/],charsets:[1],charRange:/[]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansYi-Regular.ttf"}]},{nameMatches:[/notosans/],charsets:[0,204,238],charRange:/[\u0000-\u00ff]/,glyphs:[{bold:-1,flags:-1,url:"NotoSans-Regular.ttf"}]},{nameMatches:[/ptsansnarrow/],charsets:[0],charRange:/[\u0000-\u00ff]/,glyphs:[{bold:496,flags:-1,url:"PTSansNarrow-Bold.ttf"},{bold:-1,flags:-1,url:"PTSansNarrow-Regular.ttf"}]}]);var m=[],y=[],S={extralight:100,light:200,normal:300,regular:400,medium:500,bold:700,heavy:900,black:900,thin:100},b={},D={},P={},I={},A={};function w(e,t,n,r,i){if(e){var a=function(e,t,n,r,i){return[e,t,n,r,i].join("-")}(e,t,n,r,i),o=b[a];if(o)return[o,D[a],P[a]];n=function(e,t,n){return t||64&n||/(italic)|(oblique)/.test(e.toLowerCase())}(e,n,i),n&&(i|=64);var s,u=function(e){return 1<<parseInt(e/100)-1}(function(e,t,n){for(var r in e=e.toLowerCase(),S)if(-1!=e.indexOf(r))return S[r];t<=400&&262144==(262144&n)&&(t=700);return S[t]||(parseInt(t/100)?t:t>400?700:400)}(e,r,i)),c=E(s=C(e=e.toLowerCase()),y,i,u,a,!0);if(c)return c;for(var l=0,d=y.length;l<d;l++){var f=y[l];if(k(s,f))for(var h=f.glyphs||[],g=0,p=h.length;g<p;g++){var v=h[g],m=v.bold||-1,I=v.flags||-1;if(u&m&&(-1===I||(i&I)===I))return b[a]=v,D[a]=f,P[a]=1,[v,f,1]}}if(c=E(s,_,i,u,a,!1))return c;for(var A=0,w=_.length;A<w;A++){var G=_[A];if(k(s,G))for(var T=G.glyphs||[],F=0,R=T.length;F<R;F++){var M=T[F],O=M.bold||-1,x=M.flags||-1;if(u&O&&(-1===x||(i&x)===x))return b[a]=M,D[a]=G,[M,G]}}if(t>1){for(var B=0,N=y.length;B<N;B++){var L=y[B];if(L.charsets&&-1!==L.charsets.indexOf(t))for(var j=L.glyphs||[],U=0,W=j.length;U<W;U++){var H=j[U],z=H.bold||-1,K=H.flags||-1;if(u&z&&(-1===K||(i&K)===K))return b[a]=H,D[a]=L,P[a]=1,[H,L,1]}}for(var J=0,V=_.length;J<V;J++){var Y=_[J];if(-1!==Y.charsets.indexOf(t))for(var Z=Y.glyphs||[],q=0,X=Z.length;q<X;q++){var Q=Z[q],$=Q.bold||-1,ee=Q.flags||-1;if(u&$&&(-1===ee||(i&ee)===ee))return b[a]=Q,D[a]=Y,[Q,Y]}}}}}function C(e){return e.replace(/,/g,"").replace(/-/g,"").replace(/\s/g,"").toLowerCase()}function k(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.nameMatches||[],i=0,a=r.length;i<a;i++){var o=new RegExp(r[i]).test(e);if(n&&(o=new RegExp("^"+r[i].source.toLowerCase()+"$").test(e)||new RegExp("^"+r[i].source.toLowerCase().replace(/\s+/g,"")+"$").test(e)),o)return!0}return!1}function E(e,t,n,r,i,a){for(var o=0,s=t.length;o<s;o++)for(var u=t[o],c=u.nameMatches||[],l=0,d=c.length;l<d;l++){var f=C(c[l].source);if(new RegExp("^"+f+"$").test(e)||new RegExp("^"+f.replace(/\s+/g,"")+"$").test(e))for(var h=u.glyphs||[],g=0,p=h.length;g<p;g++){var v=h[g],_=v.bold||-1,m=v.flags||-1;if(r&_&&(-1===m||(n&m)===m))return b[i]=v,D[i]=u,a?[v,u,1]:[v,u]}}}function G(e,t){var n;if(n=I[e])return n;var r=new XMLHttpRequest;r.open("get",e,!1),r.responseType="arraybuffer",r.send();var i=r.status,o=r.response;if(i>=200&&i<300||304===i&&(0,a._)(o,ArrayBuffer)){if(t)o=(0,__webpack_require__(402).Z)(new Uint8Array(o));return v.set(e,o).then((function(){v.get(g).then((function(t){(t=t||{})[e]=1,v.set(g,t).catch((function(){}))}))}),(function(){})),I[e]=o}return null}function T(e,t,n,r,i,o){var s=w(t,n,r,i,o);if(!s)return null;var u=s[0],c=u.url;return s[2]?G(c,u.isBrotli):function(e,t){var n;if(n=I[t])return n;var r=e+"/"+t+".brotli?h="+f[t];if(n=A[r])return n;var i=new XMLHttpRequest;i.open("get",r,!1),i.responseType="arraybuffer",i.send();var o=i.status,s=i.response;return o>=200&&o<300||304===o&&(0,a._)(s,ArrayBuffer)?(s=(0,__webpack_require__(402).Z)(new Uint8Array(s)),v.set(r,s).then((function(){v.get(g).then((function(e){(e=e||{})[r]=1,v.set(g,e).catch((function(){}))}),(function(){}))}),(function(){})),I[t]=s):null}(e,c)}function F(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=C(e));var n=[];if(n=n.concat(y).concat(_),t)for(var r=0,i=n.length;r<i;r++){var a=n[r];if(k(e,a,!0))return(a.charsets||[0])[0]}for(var o=0,s=n.length;o<s;o++){var u=n[o];if(k(e,u,!1))return(u.charsets||[0])[0]}return-1}var R=__webpack_require__(7447),M=__webpack_require__(2834),O=__webpack_require__(6841),x=__webpack_require__(6147),B=__webpack_require__(2872),N=__webpack_require__(5171),L=__webpack_require__(3848),j=__webpack_require__(1047),U=__webpack_require__(6243),W=__webpack_require__(3883),H=__webpack_require__(5497),z=__webpack_require__(6544),K=__webpack_require__(949),J=function(){function e(n,r){(0,t._)(this,e),this.pdfPage=n,this.gsdkPage=r,this.annotationIdArray=n._getAnnotationIdArray(r),this.removedIds=[]}return(0,r._)(e,[{key:"indexOf",value:function(e){return this.annotationIdArray.indexOf(e)}},{key:"update",value:function(){var e=this,t=this.annotationIdArray.slice(0);this.annotationIdArray=this.pdfPage._getAnnotationIdArray(this.gsdkPage),t.forEach((function(t){-1===e.annotationIdArray.indexOf(t)&&-1===e.removedIds.indexOf(t)&&e.removedIds.push(t)}))}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.update()}}]),e}(),V=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Markup(e)}},{key:"getFillColor",value:function(){var e=0,t=this.annot;return t.HasProperty({value:3})&&(e=t.GetStyleFillColor?t.GetStyleFillColor():t.GetFillColor(),e|=4278190080),e>>>0}},{key:"toJson",value:function(e){var t,n=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),r=this.annot,a=this.engine,o=this.getSummary.bind(this),s=this.JR.getPDFString(r.GetIntent()),u=r.GetPopup();u.IsEmpty()||(t=o(u,!0)),u.delete();var c,l,d=r.GetDict(),f=d.GetElement((0,W.n5)(a,"RT")),h=(0,W.n5)(a,"IRT");(l=d.GetElement(h))&&(l=(l=l.GetDict()).GetObjNum(),c=!d.HasKey((0,W.n5)(a,"StateModel"))&&f&&(c=f.GetName())?c.toString():"R");var g,p=[],v=!1,_=!1,m=[],y=[],S=[];if(e){var b=e[r.GetDict().GetObjNum()],D=b;(_=!!b.isGroup)&&(b.isGroupHeader?(v=!0,D=b,g={objectNumber:b.objectNumber,id:b.id,index:b.index}):g={objectNumber:(D=b.groupHeader).objectNumber,id:D.id,index:D.index},p=[{objectNumber:D.objectNumber,id:D.id,index:D.index}].concat(D.groupElements).sort((function(e,t){return e.index-t.index}))),D.replies&&(m=D.replies),D.markedStates&&(y=D.markedStates.sort((function(e,t){return e.time-t.time}))),D.reviewStates&&(S=D.reviewStates.sort((function(e,t){return e.time-t.time})))}else{_=r.IsGrouped();var P=r.GetGroupElements(),I=P.GetSize();if(_&&I>0){for(var A=I;A--;){var w=P.GetAt(A);p[A]=o(w),w.delete()}var C=r.GetGroupHeader();v=(g=o(C)).objectNumber===n.objectNumber,C.delete()}P.delete();for(var k=r.GetReplyCount();k--;){var E=r.GetReply(k),G=o(E);G.content=this.JR.getPDFString(E.GetIntent()),m[k]=G,E.delete()}for(var T=a.StateModel,F=T.e_StateModelMarked,R=T.e_StateModelReview,x=r.GetStateAnnots(F),B=x.GetSize(),N=0;N<B;N++){var L=x.GetAt(N);L.GetDict().GetElement(h).GetDict().GetObjNum()===n.objectNumber&&(y.push(o(L)),L.delete())}for(var j=r.GetStateAnnots(R),U=j.GetSize(),H=0;H<U;H++){var z=j.GetAt(H);z.GetDict().GetElement(h).GetDict().GetObjNum()===n.objectNumber&&(S.push(o(z)),z.delete())}}var J,V=r.GetCreationDateTime(),Y=0;V&&V.IsValid()&&(Y=(0,K.B)(V));var Z,q=(0,W.n5)(this.engine,"BM");d.HasKey(q)&&(J=d.GetElement(q).GetName().toString());var X=(0,W.n5)(this.engine,"ca");d.HasKey(X)&&(Z=d.GetElement(X).GetFloat());var Q={creationTimestamp:Y,opacity:r.GetOpacity(),subject:this.JR.getPDFString(r.GetSubject()),title:this.JR.getPDFString(r.GetTitle()),isGrouped:_,isGroupHeader:v,groupElementsSummary:p,groupHeaderSummary:g,repliesSummary:m,markedStatesSummary:y,reviewStatesSummary:S,popupSummary:t,intent:s,RT:c,IRT:l,bm:J,ca:Z};if(r.GetType()===this.engine.AnnotType.e_FreeText){var $=this.getRichText();Q.richText=$}return Object.assign(n,Q)}},{key:"setOpacity",value:function(e,t){var n=this.getShouldModifyAnnots(this);e=+e;for(var r=n.length;r--;){var i=n[r].annot;i.SetOpacity(e),i.ResetAppearanceStream(),!t&&R.Z.updateModifyTime(this.engine,i)}return this.updateModifyTime(),Z(n)}},{key:"setSubject",value:function(e,t){var n=this.getShouldModifyAnnots(this);e=new this.engine.WString(e);for(var r=n.length;r--;){var i=n[r].annot;i.SetSubject(e),!t&&R.Z.updateModifyTime(this.engine,i)}return Z(n)}},{key:"setTitle",value:function(e,t){var n=this.getShouldModifyAnnots(this);e=new this.engine.WString(e);for(var r=n.length;r--;){var i=n[r].annot;i.SetTitle(e),!t&&R.Z.updateModifyTime(this.engine,i)}return e.delete(),Z(n)}},{key:"setCreateDateTime",value:function(e){for(var t=this.getShouldModifyAnnots(this),n=this.ToDateTime(e),r=t.length;r--;)t[r].annot.SetCreationDateTime(n);return n.delete(),Z(t)}},{key:"addReply",value:function(e){switch(void 0===e?"undefined":(0,N._)(e)){case"string":return this.addReplyContent(e);case"object":return this.addReplyFromJSON(e)}}},{key:"addReplyFromJSON",value:function(e){var t=this.annot,n=this.engine;t.IsGrouped()&&(t=t.GetGroupHeader());var r=t.AddReply(),o=new n.WString(e.name||(0,j.Z)());r.SetUniqueID(o);var s=new n.WString(e.contents||e.content||"");if(r.SetContent(s),e.flags){var u="number"==typeof e.flags?e.flags:i.parseFlagList(e.flags.split(","));r.SetFlags(u)}var c=new n.WString(e.title||this.JR.getUserName()||"Foxit Web");r.SetTitle(c);var l=i.parseDatetimeString(n,e.creationdate)||"number"==typeof e.creationTimestamp||(0,a._)(e.creationTimestamp,Date)?this.ToDateTime(e.creationTimestamp):null,d=i.parseDatetimeString(n,e.date)||"number"==typeof e.date||(0,a._)(e.date,Date)?this.ToDateTime(e.date):null;return l&&r.SetCreationDateTime(l),d&&r.SetModifiedDateTime(d),this.pdfPage.reloadAnnots(),(0,H.Z)(o,c,s,l,d),this.JR.annotManager.get(r,this.pdfPage)}},{key:"addReplyContent",value:function(e){var t=this.annot,n=this.engine;t.IsGrouped()&&(t=t.GetGroupHeader());var r=t.AddReply();t.IsGrouped()&&t.delete();var i,o=new n.WString((0,j.Z)());r.SetUniqueID(o),i=(0,a._)(e,n.WString)?e:new n.WString(e),r.SetContent(i);var s=this.ToDateTime(new Date);r.SetCreationDateTime(s),r.SetModifiedDateTime(s);var u=this.JR.getUserName()||"Foxit Web",c=new n.WString(u);return r.SetTitle(c),(0,H.Z)(o,i,c,s),this.pdfPage.reloadAnnots(),this.JR.annotManager.get(r,this.pdfPage)}},{key:"addReviewState",value:function(e){switch(e){case U.R3.ACCEPTED:case U.R3.CANCELLED:case U.R3.COMPLETED:case U.R3.NONE:case U.R3.REJECTED:case U.R3.DEFERRED:case U.R3.FUTURE:break;default:if("object"==typeof e)return this.addStateFromJSON(this.engine.StateModel.e_StateModelReview,e);throw new Error("Illegal argument: unexpected review state name: ".concat(e))}return this._addState(this.engine.StateModel.e_StateModelReview,e)}},{key:"addMarkedState",value:function(e){switch(e){case U.R3.MARKED:case U.R3.UNMARKED:break;default:if("object"==typeof e)return this.addStateFromJSON(this.engine.StateModel.e_StateModelMarked,e);throw new Error("Illegal Argument: unexpected marked state name : ".concat(e,", it should be 'marked' or 'unmarked'"))}var t=this.engine.StateModel.e_StateModelMarked,n=this.annot.GetStateAnnots(t);if(n.GetSize()){var r=n.GetAt(0);return r.SetState(this.convertToEngineStateValue(e)),this.JR.annotManager.get(r,this.pdfPage,r.GetIndex())}return this._addState(t,e)}},{key:"_addState",value:function(e,t){var n=this.annot,r=this.engine;n.IsGrouped()&&(n=n.GetGroupHeader());var i=this.JR.getUserName()||"Foxit Web",a=new r.WString(i),o=n.AddStateAnnot(a,e,this.convertToEngineStateValue(t)),s=new r.WString((0,j.Z)());o.SetUniqueID(s);var u=this.ToDateTime(new Date);return o.SetCreationDateTime(u),o.SetModifiedDateTime(u),(0,H.Z)(s,a,u),this.JR.annotManager.get(o,this.pdfPage,o.GetIndex())}},{key:"addStateFromJSON",value:function(e,t){var n=this.annot,r=this.engine;n.IsGrouped()&&(n=n.GetGroupHeader());var o,s,u=new r.WString(t.title||this.JR.getUserName()||"Foxit Web"),c=n.AddStateAnnot(u,e,this.convertToEngineStateValue(t.state.toLowerCase())),l=new r.WString(t.name||(0,j.Z)());if(c.SetUniqueID(l),t.creationdate&&(o=i.parseDatetimeString(r,t.creationdate)),o||(o="number"==typeof t.creationTimestamp||(0,a._)(t.creationTimestamp,Date)?this.ToDateTime(t.creationTimestamp):this.ToDateTime(Date.now())),c.SetCreationDateTime(o),t.date&&(s=i.parseDatetimeString(r,t.date)),s||(s="number"==typeof t.date||(0,a._)(t.date,Date)?this.ToDateTime(t.date):this.ToDateTime(Date.now())),c.SetModifiedDateTime(s),t.flags){var d="number"==typeof t.flags?t.flags:i.parseFlagList(t.flags.split(","));c.SetFlags(d)}return(0,H.Z)(u,l,o,s),this.JR.annotManager.get(c,this.pdfPage,c.GetIndex())}},{key:"removeAllStateAnnots",value:function(){var e=this.annot;e.IsGrouped()&&(e=e.GetGroupHeader());var t=e.RemoveAllStateAnnots();return t&&this.updateModifyTime(),t}},{key:"convertToEngineStateValue",value:function(e){var t=this.engine.MarkupState;switch(e){case U.R3.ACCEPTED:return t.e_StateAccepted;case U.R3.CANCELLED:return t.e_StateCancelled;case U.R3.COMPLETED:return t.e_StateCompleted;case U.R3.NONE:return t.e_StateNone;case U.R3.REJECTED:return t.e_StateRejected;case U.R3.UNMARKED:return t.e_StateUnmarked;case U.R3.MARKED:return t.e_StateMarked;case U.R3.DEFERRED:return t.e_StateDeferred;case U.R3.FUTURE:return t.e_StateFuture;default:throw new Error("unsupported state: ".concat(e))}}},{key:"remove",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J(this.pdfPage,this.annot.GetPage()),n=this.annot,r=n.GetPage();if((e=n.GetGroupHeader())&&!e.IsEmpty()&&(n=e),n.IsGrouped())for(var o=n.GetGroupElements(),s=o.GetSize();s--;){var u=o.GetAt(s),c=u.GetDict().GetObjNum(),l=this.pdfPage.annotManager.get(u,this.pdfPage);(0,a._)(l,i)&&l.removeRelatives(t),r.RemoveAnnot(u)&&t.remove(c)}else{this.removeRelatives(t);var d=n.GetDict().GetObjNum();r.RemoveAnnot(n)&&t.remove(d)}return this.pdfPage.update().then((function(){return t.removedIds}))}},{key:"removeRelatives",value:function(e){var t,n,r,i=this.engine,a=this.annot,o=a.GetPage(),u=[];if((n=a.GetPopup())&&!n.IsEmpty()){var c=n.GetDict().GetObjNum();o.RemoveAnnot(n)&&e.remove(c)}for(var l=a.GetReplyCount();l--;){var d=a.GetReply(l).GetDict().GetObjNum();u.push(d);var f=e.indexOf(d),h=o.GetAnnot(f);this.pdfPage.annotManager.get(h,this.pdfPage).removeRelatives(e)}a.RemoveAllReplies()&&u.length>0&&(r=e).remove.apply(r,(0,s._)(u));for(var g=[],p=[],v=i.StateModel,_=v.e_StateModelMarked,m=v.e_StateModelReview,y=a.GetStateAnnots(_),S=y.GetSize();S--;){var b=y.GetAt(S);g[S]=b.GetDict().GetObjNum()}for(var D=a.GetStateAnnots(m),P=D.GetSize();P--;){var I=D.GetAt(P);p[P]=I.GetDict().GetObjNum(),o.RemoveAnnot(I)}(t=e).remove.apply(t,(0,s._)([].concat(p).concat(g)))}},{key:"moveTo",value:function(e,t){var n=this.annot;if(n.IsGrouped()){for(var r=this.annot.GetRect(),a=e-r.left,o=t-r.top,s=this.getShouldModifyAnnots(this),u=s.length;u--;){var c=s[u].annot,l=L.Z.on(c.GetRect()).move(a,o).extract();c.Move(l),c.ResetAppearanceStream(),R.Z.updateModifyTime(this.engine,n)}return Z(s)}return(0,M._)((0,O._)(i.prototype),"moveTo",this).call(this,e,t)}},{key:"setIntent",value:function(e){var t=this.annot;return t.SetIntent(new this.engine.String(e)),3!=this.annot.GetType().value&&t.ResetAppearanceStream(),[this.getId()]}},{key:"create",value:function(e){var t;(t=e.intent)&&this.setIntent(t),(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);var n,r=e.creationTimestamp;n=r>0?new Date(r):new Date,this.setCreateDateTime(n);var a,o,s,u=e.date;if(a=u>0?new Date(u):n,this.setModifiedDateTime(a),void 0!==e.opacity){var c=+e.opacity;this.setOpacity(c,!0)}if((o=e.subject)&&this.setSubject(o,!0),(s=void 0===e.title?this.JR.getUserName():e.title)&&this.setTitle(s,!0),e.noPopup)return[this];if("freetext"===e.type&&e.richText&&this.addRichText(e.richText),"freetext"!=e.type){var l=this.annot,d=l.GetPage(),f=this.engine,h=d.AddAnnot(f.AnnotType.e_Popup,l.GetRect());return l.SetPopup(new f.Popup(h)),h=this.JR.annotManager.get(h,this.pdfPage),e.name=void 0,[this,h.create(e)[0]]}return[this]}},{key:"_setFillColor",value:function(e){if("number"!=typeof e)throw new Error("Incorrect color value: ".concat(e));e<0&&(e=0);this.annot;var t,n=this.engine;t=0===e?function(e){e.RemoveProperty({value:3}),e.ResetAppearanceStream(),R.Z.updateModifyTime(n,e)}:function(t){t.SetFillColor&&t.SetFillColor(e),t.ResetAppearanceStream(),R.Z.updateModifyTime(n,t)};for(var r=n.AnnotType,i=[r.e_Square,r.e_Circle,r.e_FreeText,r.e_Polygon,r.e_Redact],a=this.getShouldModifyAnnots(this,(function(e){var t=e.annot;return-1!==i.indexOf[t.GetType()]})),o=a.length;o--;)t(a[o].annot);return a}},{key:"getShouldModifyAnnots",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return!0},n=e.annot;if(!n.IsGrouped())return[e];for(var r=[],i=n.GetGroupElements(),a=this.JR.annotManager,o=e.pdfPage,s=i.GetSize();s--;)r[s]=a.get(i.GetAt(s),o);return r.filter(t)}},{key:"setContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.annot;!t&&r.IsGrouped()&&(r=r.GetGroupHeader());var i=this.engine,a=new i.WString(e);r.SetContent(a),a.delete(),this.JR.setFontCacheEnabled(!1);var o=r.GetType(),s=this.JR.getPDFString(r.GetIntent());return n&&(o===i.AnnotType.e_FreeText||o===i.AnnotType.e_Line||o===i.AnnotType.e_PolyLine&&"PolyLineDimension"===s||o===i.AnnotType.e_Polygon&&"PolygonDimension"===s||o===i.AnnotType.e_Circle&&"CircleDimension"===s)&&r.ResetAppearanceStream(),this.JR.setFontCacheEnabled(!0),this.updateModifyTime(),r.GetDict().GetObjNum()}},{key:"setBorderStyle",value:function(e,t){for(var n=this.getShouldModifyAnnots(this),r=n.length;r--;)n[r]._setBorderStyle(e,t),n[r].updateModifyTime();return Z(n)}},{key:"_setBorderStyle",value:function(e,t){return(0,M._)((0,O._)(i.prototype),"setBorderStyle",this).call(this,e,t)}},{key:"getRichText",value:function(){for(var e=this.annot.GetRichTextCount(),t=[],n=0;n<e;n++){var r={},i=this.annot.GetRichTextContent(n);r.content=this.JR.getPDFString(i);var a=this.annot.GetRichTextStyle(n);if(r.richTextStyle={textSize:a.text_size,textAlignment:a.text_alignment.value,textColor:a.text_color,isBold:a.is_bold,isItalic:a.is_italic,isUnderline:a.is_underline,isStrikethrough:a.is_strikethrough,cornerMarkStyle:a.mark_style.value},!a.font.IsEmpty()){var o=this.JR.getPDFString(a.font.GetName()),s=z.mz[o];r.richTextStyle.fontName=s?s.split("-")[0]:o}t.push(r)}return t}},{key:"getPDFRichTextStyle",value:function(e,t){var n=new this.engine.RichTextStyle;if(e.font){var r=e.font,i=r.name,a=r.styles,o=r.charset,s=(0,z.T2)(i);if(void 0!==s){var u=[this.engine.StandardID.e_StdIDCourier,this.engine.StandardID.e_StdIDCourierB,this.engine.StandardID.e_StdIDCourierBI,this.engine.StandardID.e_StdIDCourierI,this.engine.StandardID.e_StdIDHelvetica,this.engine.StandardID.e_StdIDHelveticaB,this.engine.StandardID.e_StdIDHelveticaBI,this.engine.StandardID.e_StdIDHelveticaI,this.engine.StandardID.e_StdIDTimes,this.engine.StandardID.e_StdIDTimesB,this.engine.StandardID.e_StdIDTimesBI,this.engine.StandardID.e_StdIDTimesI,this.engine.StandardID.e_StdIDSymbol,this.engine.StandardID.e_StdIDZapfDingbats];n.font=new this.engine.Font(u[s])}else try{n.font=new this.engine.Font((0,W.Dp)(this.engine,i),a||0,this.engine.Charset.values[o]||this.engine.Charset.e_CharsetANSI,0)}catch(e){n.font=new this.engine.Font(0)}}return null!=e.textSize?n.text_size=e.textSize:null!=t&&(n.text_size=t.text_size),null!=e.textAlignment&&(n.text_alignment=this.engine.Alignment.values[e.textAlignment]||this.engine.Alignment.e_AlignmentLeft),null!=e.textColor&&(n.text_color=e.textColor),null!=e.isBold&&(n.is_bold=e.isBold),null!=e.isItalic&&(n.is_italic=e.isItalic),null!=e.isUnderline&&(n.is_underline=e.isUnderline),null!=e.isStrikethrough&&(n.is_strikethrough=e.isStrikethrough),null!=e.cornerMarkStyle&&(n.mark_style=this.engine.TextScriptType.values[e.cornerMarkStyle]||this.engine.TextScriptType.e_CornerMarkNone),n}},{key:"setRichTextStyle",value:function(e,t){var n=this.annot.GetRichTextStyle(e),r=this.getPDFRichTextStyle(t,n);this.annot.SetRichTextStyle(e,r),r.delete()}},{key:"updateRichTextStyle",value:function(e,t){if(e.GetType()===this.engine.AnnotType.e_FreeText)for(var n=e.GetRichTextCount(),r=0;r<n;r++){var i=e.GetRichTextStyle(r);i.text_alignment=this.engine.Alignment.values[t]||this.engine.Alignment.e_AlignmentLeft,e.SetRichTextStyle(r,i)}}},{key:"setRichText",value:function(e){var t=this,n=!1,r=!1,i=e.filter((function(e){var t=e.index;return e.richTextStyle&&void 0!==t})),a=this.annot.GetType()===this.engine.AnnotType.e_FreeText&&i.length>0;if(a){var o=i[i.length-1].richTextStyle.textAlignment||0;this.updateRichTextStyle(this.annot,o)}e.forEach((function(e){var o=e.index,s=e.content,u=e.richTextStyle;if(void 0!==o&&s&&u){if(s){var c=new t.engine.WString(s);t.annot.SetRichTextContent(o,c),c.delete(),r=!0}if(u){if(a){var l=i[i.length-1].richTextStyle.textAlignment||0;u.textAlignment=l}t.setRichTextStyle(o,u)}n=!0}})),r&&this.updateContent(),n&&this.annot.ResetAppearanceStream()}},{key:"addRichText",value:function(e){var t=this,n=!1;if(0!==(e=e.filter((function(e){var t=e.content,n=e.richTextStyle;return t&&n}))).length){var r=this.annot.GetType()===this.engine.AnnotType.e_FreeText,i=e[e.length-1].richTextStyle.textAlignment||0;r&&this.updateRichTextStyle(this.annot,i),e.forEach((function(e){var a=e.content,o=e.richTextStyle;if(a&&o){var s=new t.engine.WString(a);r&&(o.textAlignment=i);var u=t.getPDFRichTextStyle(o);t.annot.AddRichText(s,u),s.delete(),u.delete(),n=!0}})),n&&this.updateContent(),n&&this.annot.ResetAppearanceStream()}}},{key:"insertRichText",value:function(e){var t=this,n=!1;if(0!==(e=e.filter((function(e){var t=e.index,n=e.content,r=e.richTextStyle;return n&&r&&null!=t}))).length){var r=this.annot.GetType()===this.engine.AnnotType.e_FreeText,i=e[e.length-1].richTextStyle.textAlignment||0;r&&this.updateRichTextStyle(this.annot,i),e.forEach((function(e){var a=e.index,o=e.content,s=e.richTextStyle;if(o&&s&&null!=a){var u=new t.engine.WString(o);r&&(s.textAlignment=i);var c=t.getPDFRichTextStyle(s);t.annot.InsertRichText(a,u,c),u.delete(),c.delete(),n=!0}})),n&&this.updateContent(),n&&this.annot.ResetAppearanceStream()}}},{key:"removeRichText",value:function(e){var t=this,n=!1,r=this.annot.GetRichTextCount();if(e.length>1){e=e.sort((function(e,t){return e>t?-1:e<t?1:0}))}e.forEach((function(e){e>=0&&e<r&&(t.annot.RemoveRichText(e),n=!0)})),n&&this.updateContent(),n&&this.annot.ResetAppearanceStream()}},{key:"updateContent",value:function(){for(var e=this.annot.GetRichTextCount(),t="",n=0;n<e;n++){t+=this.JR.getPDFString(this.annot.GetRichTextContent(n))}var r=new this.engine.WString(t);this.annot.SetContent(r),r.delete()}},{key:"setCaptionColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.annot.SetCaptionColor)return!1;var n=this.annot;return e<0&&(e=0),n.SetCaptionColor(e),t&&n.ResetAppearanceStream(),this.updateModifyTime(),!0}}]),i}(R.Z);const Y=V;function Z(e){for(var t=[],n=e.length;n--;)t[n]=e[n].getId();return t}var q=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.TextMarkup(e)}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=this.getQuadPoints();return e.quadPoints=t,e}},{key:"getQuadPoints",value:function(){for(var e=this.annot.GetQuadPoints(),t=[],n=e.GetSize();n--;){var r=e.GetAt(n);t[n]=[{x:r.first.x,y:r.first.y},{x:r.second.x,y:r.second.y},{x:r.third.x,y:r.third.y},{x:r.fourth.x,y:r.fourth.y}],r.delete()}return e.delete(),t}},{key:"toJson",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cTextPage,n=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),r=this.annot,a=this.engine,o=r.GetQuadPoints(),s=o.GetSize(),u=[],c=!1,l=t||this.pdfPage.getNormalTextPageSync();if(!l.IsEmpty()){var d="";try{d=l.GetTextUnderAnnot(r).toString()}catch(e){}if(d&&!/\n/.test(d)||(c=!0),n.text=d,c||!s)n.startCharIndex=-1,n.endCharIndex=-1;else{var f=o.GetAt(0),h=Math.atan2(f.first.y-f.second.y,f.second.x-f.first.x),g=new a.Matrix;g.Rotate(-h,!1),g.Rotate(-Math.PI/2,!1),g.Translate((f.first.x+f.third.x)/2,(f.first.y+f.third.y)/2,!1);var p=Math.min(3,Math.sqrt(Math.pow(f.third.y-f.first.y,2)+Math.pow(f.third.x-f.first.x,2))),v=0,_=p,m=g.a*v+g.c*_+g.e,y=g.b*v+g.d*_+g.f;g.delete();var S=n.startCharIndex=l.GetIndexAtPos(m,y,20);if(-1!==S){l.GetTextRectCount(S,1);var b=l.GetTextRect(0),D=b.left,P=b.right,I=b.top,A=b.bottom,w=l.GetBaselineRotation(0),C=this.getRectArray(l,S,S);C.length&&(0===w.value||2===w.value?(I=Math.max(C[0].top,I),A=Math.min(C[0].bottom,A)):(D=Math.max(C[0].left,D),P=Math.min(C[0].right,P))),n.startCharInfo={charIndex:S,left:D,right:P,top:I,bottom:A,rotation:w.value}}var k=o.GetAt(s-1),E=Math.atan2(k.first.y-k.second.y,k.second.x-k.first.x),G=new a.Matrix;G.Rotate(-E,!1),G.Rotate(-Math.PI/2,!1),G.Translate((k.second.x+k.fourth.x)/2,(k.second.y+k.fourth.y)/2,!1),v=0,_=-(p=Math.min(3,Math.sqrt(Math.pow(k.fourth.y-k.second.y,2)+Math.pow(k.fourth.x-k.second.x,2)))),m=G.a*v+G.c*_+G.e,y=G.b*v+G.d*_+G.f,G.delete();var T=n.endCharIndex=l.GetIndexAtPos(m,y,2);if(-1!==T){var F=l.GetTextRectCount(T,1),R=l.GetTextRect(F-1),x=R.left,B=R.right,N=R.top,L=R.bottom,j=l.GetBaselineRotation(0),U=this.getRectArray(l,T,T);U.length&&(0===j.value||2===j.value?(N=Math.max(U[0].top,N),L=Math.min(U[0].bottom,L)):(x=Math.max(U[0].left,x),B=Math.min(U[0].right,B))),n.endCharInfo={charIndex:T,left:x,right:B,top:N,bottom:L,rotation:j.value}}for(var W=s;W--;){var H=o.GetAt(W);u[W]=[{x:H.first.x,y:H.first.y},{x:H.second.x,y:H.second.y},{x:H.third.x,y:H.third.y},{x:H.fourth.x,y:H.fourth.y}],H.delete()}}if(n.quadPoints=u,n.startCharIndex>n.endCharIndex){var z=n.startCharIndex;n.startCharIndex=n.endCharIndex,n.endCharIndex=z,z=n.startCharInfo,n.startCharInfo=n.endCharInfo,n.endCharInfo=z}-1===n.startCharIndex||-1===n.endCharIndex?c=!0:n.continuousText=l.GetChars(n.startCharIndex,n.endCharIndex-n.startCharIndex+1),n.continuousText=n.continuousText||n.text}return n.isArea=c,o.delete(),t||l.delete(),n}},{key:"updateQuadPointsByCharIndex",value:function(e,t){if(-1===e||-1===t)return!1;if(e>t){var n=e;e=t,t=n}var r=this.pdfPage.getNormalTextPageSync(),i=r.GetTextRectCount(e,t-e+1);if(i<1)return r.delete(),!1;for(var a=this.getRectArray(r,e,t),o=this.engine,s=new o.QuadPointsArray,u=o.QuadPoints,c=o.PointF,l=0,d=i;l<d;l++){var f=r.GetTextRect(l),h=r.GetBaselineRotation(l),g=f.top,p=f.right,v=f.bottom,_=f.left;a[l]&&(0===h.value||2===h.value?(g=Math.max(a[l].top,g),v=Math.min(a[l].bottom,v)):(_=Math.max(a[l].left,_),p=Math.min(a[l].right,p)));var m=new c(_,g),y=new c(p,g),S=new c(_,v),b=new c(p,v),D=void 0,P=void 0,I=void 0,A=void 0;switch(h.value%4){case 0:D=m,P=y,I=S,A=b;break;case 1:D=m,P=S,I=y,A=b;break;case 2:D=b,P=S,I=y,A=m;break;case 3:D=b,P=y,I=S,A=m}s.Add(new u(D,P,I,A))}var w=this.annot;return w.SetQuadPoints(s),w.ResetAppearanceStream(),s.delete(),r.delete(),this.updateModifyTime(),!0}},{key:"create",value:function(e){var t=this,n=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),r=this.engine;if(void 0!==e.startCharIndex&&void 0!==e.endCharIndex)this.updateQuadPointsByCharIndex(e.startCharIndex,e.endCharIndex);else if(e.coords){if(0===e.coords.length)throw new Error("Annot [".concat(e.type,"] coords is missing!"));for(var a=e.coords,o=new r.QuadPointsArray,s=r.QuadPoints,u=r.PointF,c=this.pdfPage.getNormalTextPageSync(),l=0,d=a.length;l<d;l++){var f=a[l],h=f.top,g=f.right,p=f.bottom,v=f.left,_=c.GetIndexAtPos((v+g)/2,(p+h)/2,2),m=0;c.GetTextRectCount(_,3)>0&&(m=c.GetBaselineRotation(0).value),I(f,m,o,s,u)}var y=this.annot;y.SetQuadPoints(o),y.ResetAppearanceStream(),o.delete(),c.delete()}else{var S=e.rect;if(S.right-S.left<.5||S.top-S.bottom<.5)throw new Error("Annot [".concat(e.type,"] rect is missing!"));var b=new r.QuadPointsArray,D=r.QuadPoints,P=r.PointF;this.pdfPage.getTextRectsAtRect2(e.rect).then((function(e){e.forEach((function(e){I(e,e.rotation,b,D,P)}));var n=t.annot;n.SetQuadPoints(b),n.ResetAppearanceStream(),b.delete()}))}return n;function I(e,t,n,r,i){var a=e.left,o=e.top,s=e.right,u=e.bottom;switch(t%4){case 0:n.Add(new r(new i(a,o),new i(s,o),new i(a,u),new i(s,u)));break;case 1:n.Add(new r(new i(a,u),new i(a,o),new i(s,u),new i(s,o)));break;case 2:n.Add(new r(new i(s,u),new i(a,u),new i(s,o),new i(a,o)));break;case 3:n.Add(new r(new i(s,o),new i(s,u),new i(a,o),new i(a,u)))}}}},{key:"getRectArray",value:function(e,t,n){for(var r=[],i=t;i<n+1;){var a=e.GetLineStart(i),o=e.GetLineEnd(i);-1===a&&(a=i),-1===o&&(o=i);var s=e.GetRectArray(a,o-a+1),u=o;u>n&&(u=n);var c=e.GetRectArray(i,u-i+1);if(s.GetSize())for(var l=s.GetAt(0),d=0;d<c.GetSize();d++){var f=c.GetAt(d),h=f.left,g=f.top,p=f.right,v=f.bottom;g=l.top,v=l.bottom,r.push({left:h,top:g,right:p,bottom:v})}i=u+1}return r}}]),i}(Y);const X=q;var Q=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Highlight(e)}},{key:"toJson",value:function(e,t){var n=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e,t),r=this.annot,a=this.engine;return r.GetDict().HasKey((0,W.n5)(a,"AreaHi"))&&(n.isArea=!0),n}},{key:"setRect",value:function(e){var t=this.engine,n=new t.QuadPointsArray,r=t.QuadPoints,a=t.PointF;return n.Add(new r(new a(e.left,e.top),new a(e.right,e.top),new a(e.left,e.bottom),new a(e.right,e.bottom))),this.annot.SetQuadPoints(n),this.annot.ResetAppearanceStream(),(0,M._)((0,O._)(i.prototype),"setRect",this).call(this,e)}},{key:"move",value:function(e,t){var n=this.annot.GetRect(),r=n.left+e,i=n.right+e,a=n.top+t,o=n.bottom+t,s=this.engine,u=new s.QuadPointsArray,c=s.QuadPoints,l=s.PointF;u.Add(new c(new l(r,a),new l(i,a),new l(r,o),new l(i,o))),this.annot.SetQuadPoints(u),u.delete(),this.annot.ResetAppearanceStream();var d=new this.engine.CFX_FloatRect(r,o,i,a),f=this.annot.Move(d);return d.delete(),f}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=e.color;return n=n||0==n?n:16776960,this.setBorderColor(n),t}}]),i}(X);const $=Q;var ee=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.StrikeOut(e)}},{key:"toJson",value:function(e,t){var n=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e,t);return n.IRT&&"Group"==n.RT&&""==n.intent&&(n.intent="StrikeOutTextEdit"),this.isReplace()&&(n.typeAlias="Replace"),n}},{key:"updateQuadPointsByCharIndex",value:function(e,t){return(0,M._)((0,O._)(i.prototype),"updateQuadPointsByCharIndex",this).call(this,e,t)}},{key:"isReplace",value:function(){var e,t,n=this.annot;if(n.IsGrouped()&&(e=n.GetGroupElements())&&2===(t=e.GetSize())){for(var r=["AnnotType_e_StrikeOut","AnnotType_e_Caret"],i=t;i--;){var a=e.GetAt(i),o=r.indexOf(a.GetType().constructor.name);if(a.delete(),-1===o)return e.delete(),!1}return e.delete(),!0}return e&&e.delete(),!1}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=e.color;return e.subject&&"replace"===e.subject.toLocaleLowerCase()?(n=n||0==n?n:255,this.setBorderColor(n)):(n=n||0==n?n:16711680,this.setBorderColor(n)),t}}]),i}(X);const te=ee;var ne=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Underline(e)}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=e.color;return n=n||0==n?n:6736947,this.setBorderColor(n),t}}]),i}(X);const re=ne;var ie=__webpack_require__(4702),ae="vertical",oe="horizontal",se=function(){function e(n,r){(0,t._)(this,e),this.fromInchRate=n,this.name=r,Object.defineProperties(this,{fromInchRate:{value:n,enumerable:!0,writable:!1,configurable:!0},name:{value:r,enumerable:!0,writable:!1,configurable:!0}})}return(0,r._)(e,[{key:"isPixel",get:function(){return!1}},{key:"convertTo",value:function(e,t){return e/this.fromInchRate*t.fromInchRate}},{key:"convertAreaTo",value:function(e,t){return e/Math.pow(this.fromInchRate,2)*Math.pow(t.fromInchRate,2)}}]),e}(),ue=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e){var r;return(0,t._)(this,i),(r=n.call(this,0,"px")).orientation=e,Object.defineProperty((0,ie._)(r),"fromInchRate",{get:function(){var t=(0,l.EF)();switch(e){case oe:return t.x;case ae:return t.y;default:return t.x}}}),r}return(0,r._)(i,[{key:"isPixel",get:function(){return!0}}]),i}(se);const ce={inch:"inch",custom:"custom",mi:"mi",pt:"pt",ft:"ft",yd:"yd",km:"km",m:"m",cm:"cm",mm:"mm",pica:"pica"};var le,de=new se(1,ce.inch),fe=new se(1,ce.custom),he=new se(1/63360,ce.mi),ge=new se(72,ce.pt),pe=new se(1/12,ce.ft),ve=new se(1/36,ce.yd),_e=new se(.0254/1e3,ce.km),me=new se(.0254,ce.m),ye=new se(2.54,ce.cm),Se=new se(25.4,ce.mm),be=new se(6,ce.pica),De=new ue(oe),Pe=(new ue(ae),le={},(0,i._)(le,de.name,de),(0,i._)(le,fe.name,fe),(0,i._)(le,he.name,he),(0,i._)(le,ge.name,ge),(0,i._)(le,pe.name,pe),(0,i._)(le,ve.name,ve),(0,i._)(le,_e.name,_e),(0,i._)(le,me.name,me),(0,i._)(le,ye.name,ye),(0,i._)(le,Se.name,Se),(0,i._)(le,be.name,be),(0,i._)(le,De.name,De),le);function Ie(e){switch(e=(e=e.toLowerCase()).replace(/[^a-z]/g,"")){case"in":e="inch";break;case"p":e="pica"}return Pe[e]}function Ae(e){var t=1;switch(e){case"pt":t=72;break;case"in":case"inch":default:t=1;break;case"cm":t=2.54;break;case"p":case"pica":t=5.9;break;case"mm":t=25.4}return t}function we(e){var t=e.match(/(\d+(\.\d+)?)\s+(\w+)\s+=\s+(\d+(\.\d+)?)\s+(\w+)/);if(t){var n=(0,o._)(t,7),r=n[1],i=n[3],a=n[4],s=n[6];return"in"===i&&(i="inch"),"in"===s&&(s="inch"),{fScale:parseFloat(r),fUnit:Ie(i),tScale:parseFloat(a),tUnit:Ie(s)}}}var Ce=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Line(e)}},{key:"calculateLength",value:function(){var e=this.annot.GetMeasureRatio().toString(),t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString();if(0==t.length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString()),0!=e.length){"p"==t&&(t="pica");var n=this.annot.GetEndPoint(),r=this.annot.GetStartPoint(),i=n.x-r.x,a=n.y-r.y,o=Math.sqrt(i*i+a*a),s=we(e);if(s){var u=s.fScale,c=s.fUnit,l=s.tScale;s.tUnit;o=o*l/c.convertTo(u,ge),o=Math.round(100*o)/100;var d=this.annot.GetContent().toString(),f=d.indexOf("\n"),h=d.lastIndexOf(" "),g=(h>=0&&d.substr(h+1),d.substr(0,-1===f?f:f+1)),p=new this.engine.WString(g+o+" "+t);this.annot.SetContent(p),p.delete()}}}},{key:"enableCaption",value:function(e){return this.annot.EnableCaption(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"setFillColor",value:function(e){if("number"!=typeof e)throw new Error("Incorrect color value: ".concat(e));return 0===e?(this.annot.RemoveProperty({value:3}),this.annot.ResetAppearanceStream()):(this.annot.SetStyleFillColor(e),this.annot.ResetAppearanceStream()),this.updateModifyTime(),[this]}},{key:"setCaptionOffset",value:function(e,t){var n=new this.engine.PointF(e,t);this.annot.SetCaptionOffset(n),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setCaptionPositionType",value:function(e){}},{key:"setEndPoint",value:function(e,t){var n=new this.engine.PointF(e,t);this.annot.SetEndPoint(n),this.calculateLength(),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLeaderLineExtensionLength",value:function(e){this.annot.SetLeaderLineExtensionLength(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLeaderLineLength",value:function(e){this.annot.SetLeaderLineLength(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLeaderLineOffset",value:function(e){this.annot.SetLeaderLineOffset(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLineEndStyle",value:function(e){var t=this.engine.EndingStyle.values[e];this.annot.SetLineEndStyle(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLineStartStyle",value:function(e){var t=this.engine.EndingStyle.values[e];this.annot.SetLineStartStyle(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setMeasureConversionFactor",value:function(e,t){}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,u=void 0===s?"inch":s,c=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(u));this.annot.SetMeasureRatio(c),this.calculateLength(),this.annot.ResetAppearanceStream(),c.delete()}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculateLength(),this.annot.ResetAppearanceStream(),n.delete()}},{key:"setStartPoint",value:function(e,t){var n=new this.engine.PointF(e,t);this.annot.SetStartPoint(n),n.delete(),this.calculateLength(),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setRotation",value:function(e){this.annot.SetRotation(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=this.annot,r=e.startStyle,a=e.endStyle,o=e.rect,s=e.enableCaption,u=e.startPoint,c=e.endPoint;if(r=r||0,a=a||0,void 0!==U.E2[r]&&this.setLineStartStyle(r),e.length&&this.setLeaderLineLength(e.length),e.intent==U.WA.LINE_DIMENSION&&(e.leaderLineLength&&this.setLeaderLineLength(e.leaderLineLength),e.leaderLineExtend&&this.setLeaderLineExtensionLength(e.leaderLineExtend)),e.borderWidth&&this.setBorderWidth(e.borderWidth),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),e.styleFillColor&&this.setFillColor(e.styleFillColor),e.fillColor&&this.setFillColor(e.fillColor),U.E2[a]&&this.setLineEndStyle(a),"boolean"==typeof s&&n.EnableCaption(s),(e.captionColor||0===e.captionColor)&&("string"==typeof e.captionColor&&(e.captionColor=parseInt(e.captionColor,16)),this.setCaptionColor(e.captionColor,!1)),void 0!==u?this.setStartPoint(u.x,u.y):this.setStartPoint(o.left,o.top),void 0!==c?this.setEndPoint(c.x,c.y):this.setEndPoint(o.right,o.bottom),e.rotation&&this.setRotation(e.rotation),e.measure){this.annot.SetMeasureConversionFactor(0,2);var l=e.measure.ratio,d=l.userSpaceValue,f=void 0===d?1:d,h=l.userSpaceUnit,g=void 0===h?"inch":h,p=l.realValue,v=void 0===p?1:p,_=l.realUnit,m=void 0===_?"inch":_,y=new this.engine.String(e.measure.unit);this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeA,y),y=new this.engine.String(m),this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD,y),y=new this.engine.String(g);var S=Ae(g);S=S*v/f,this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,y),this.annot.SetMeasureConversionFactor(this.engine.MeasureType.e_MeasureTypeX,1*S/72),this.setMeasureRatio(e.measure.ratio),y.delete()}return this.calculateLength(e.label),t}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=this.getLineData();return Object.assign(t,e)}},{key:"getLineData",value:function(){var e,t,n=this.annot.GetCaptionOffset(),r=this.annot.GetCaptionPositionType(),i=this.annot.GetEndPoint(),a=this.annot.GetLeaderLineExtensionLength(),o=this.annot.GetLeaderLineLength(),s=this.annot.GetLeaderLineOffset(),u=this.annot.GetLineEndStyle(),c=this.annot.GetLineStartStyle(),l=this.annot.GetMeasureConversionFactor(0);try{e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}catch(n){e=this.JR.getHexString(this.annot.GetMeasureRatio()),0==(t=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD))).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}var d=this.annot.GetStartPoint();return{captionOffset:{x:n.x,y:n.y},capPos:r.value,endPoint:{x:i.x,y:i.y},leaderLineExtensionLength:a,leaderLineLength:o,leaderLineOffset:s,endingStyle:u.value,startStyle:c.value,measureConversionFactor:l,measureRatio:e,measureUnit:t,startPoint:{x:d.x,y:d.y}}}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);if(0==t.borderInfo.width){t.borderInfo.width=1;var n=this.annot.GetBorderInfo();n.width=1,this.annot.SetBorderInfo(n)}var r=this.getLineData();t.styleFillColor=this.getFillColor();var a={hasCaption:this.annot.HasCaption(),captionColor:this.annot.GetCaptionColor(),rotation:this.annot.GetRotation()};return Object.assign(r,a,t)}}]),i}(Y);const ke=Ce;var Ee=function(){function e(n,r){(0,t._)(this,e),(0,i._)(this,"startPoint",void 0),(0,i._)(this,"points",void 0),this.startPoint=n,this.points=r}return(0,r._)(e,[{key:"isEmpty",value:function(){return 0===this.points.length}},{key:"optimize",value:function(){var t=Array.from(new Set(this.points.map((function(e){return JSON.stringify(e)})))).map((function(e){return JSON.parse(e)}));if(1===t.length){var n=t[0];"lineTo"===n.type&&n.x===this.startPoint.x&&n.y===this.startPoint.y&&(t.length=0)}return new e(this.startPoint,t)}}]),e}(),Ge=function(){function e(n,r){(0,t._)(this,e),(0,i._)(this,"startPoint",void 0),(0,i._)(this,"points",void 0),this.startPoint=n,this.points=r}return(0,r._)(e,[{key:"getSegments",value:function(){return this.points.reduce((function(e,t){var n=e[e.length-1];return"lineTo"===t.type||"cubicBezierTo"==t.type?n.points.push(t):e.push(new Ee(t,[])),e}),[new Ee(this.startPoint,[])])}},{key:"toPointArray",value:function(){return[this.startPoint].concat(this.points)}},{key:"toVertexesArray",value:function(){return this.toPointArray().flatMap((function(e){return"cubicBezierTo"===e.type?e.operands.map((function(e){return{type:e.closeFigure?U.Xt.BEZIER_TO_CLOSE_FIGURE:U.Xt.BEZIER_TO,x:e.x,y:e.y}})):[{x:e.x,y:e.y,type:"lineTo"===e.type?e.closeFigure?U.Xt.LINE_TO_CLOSE_FIGURE:U.Xt.LINE_TO:U.Xt.MOVE_TO}]}))}},{key:"updatePoint",value:function(e,t){!function(e){if((0,l.qh)(e.x)&&(0,l.qh)(e.y))return!0;throw new Error("Incorrect point: ".concat(JSON.stringify(e)))}(t);var n=[this.startPoint].concat(this.points.flatMap((function(e){return"cubicBezierTo"===e.type?e.operands:e})));n[e].x=t.x,n[e].y=t.y}},{key:"toGSDKPath",value:function(e){var t=new e.Path,n=e.PointF;return this.toPointArray().forEach((function(e){switch(e.type){case"moveTo":t.MoveTo(new n(e.x,e.y));break;case"lineTo":t.LineTo(new n(e.x,e.y)),e.closeFigure&&t.CloseFigure();break;case"cubicBezierTo":var r=e.operands;t.CubicBezierTo(new n(r[0].x,r[0].y),new n(r[1].x,r[1].y),new n(r[2].x,r[2].y));break;default:throw new Error("Incorrect point: ".concat(JSON.stringify(e),", its type must be one of 'moveTo', 'lineTo' or 'cubicBezier'"))}})),t}}],[{key:"fromGSDKPath",value:function(t,n){var r=t.GetPointCount();if(0===r)return null;for(var i=n.PointType,a=[],o=0;;){var s=t.GetPointType(o),u=t.GetPoint(o);switch(s){case i.e_TypeLineTo:case i.e_TypeLineToCloseFigure:a.push({type:"lineTo",x:u.x,y:u.y,closeFigure:s===i.e_TypeLineToCloseFigure}),o++;break;case i.e_TypeMoveTo:a.push({type:"moveTo",x:u.x,y:u.y}),o++;break;case i.e_TypeBezierTo:for(var c=[],l=o+3;o<l;o++){var d=t.GetPoint(o);c.push({x:d.x,y:d.y,closeFigure:t.GetPointType(o)===i.e_TypeBezierToCloseFigure})}a.push({type:"cubicBezierTo",operands:c})}if(o>=r-1)break}return new e(a[0],a.slice(1))}},{key:"fromPointArray",value:function(t){if(t.length<2)throw new Error("Invalid path point array! The point count must be greater than 2");if("moveTo"!==t[0].type)throw new Error("Invalid path point array!, The type of first point must be 'moveTo'");return new e(t[0],t.slice(1))}}]),e}();var Te=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.PolyLine(e)}},{key:"setLineEndStyle",value:function(e){var t=this.engine.EndingStyle.values[e];this.annot.SetLineEndStyle(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLineStartStyle",value:function(e){var t=this.engine.EndingStyle.values[e];this.annot.SetLineStartStyle(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setFillColor",value:function(e){if("number"!=typeof e)throw new Error("Incorrect color value: ".concat(e));return 0===e?(this.annot.RemoveProperty({value:3}),this.annot.ResetAppearanceStream()):(this.annot.SetStyleFillColor(e),this.annot.ResetAppearanceStream()),this.updateModifyTime(),[this]}},{key:"calculatePerimeter",value:function(){var e=this.annot.GetMeasureRatio().toString(),t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString();if(0==t.length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString()),0!=e.length){var n=this.annot.GetVertexes();if(!(n.length<2)){var r=we(e);if(r){for(var i=r.fScale,a=r.fUnit,o=r.tScale,s=(r.tUnit,0),u=n.GetAt(0),c=1;c<n.GetSize();c++){var l=n.GetAt(c),d=l.x-u.x,f=l.y-u.y,h=Math.sqrt(d*d+f*f);s+=h=h*o/a.convertTo(i,ge),u=l}var g=this.annot.GetContent().toString(),p=g.indexOf("\n"),v=g.substr(0,-1===p?p:p+1),_=new this.engine.WString(v+Math.round(100*s)/100+" "+t);this.annot.SetContent(_),_.delete()}}}}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculatePerimeter(),this.annot.ResetAppearanceStream(),n.delete()}},{key:"enableCaption",value:function(e){return this.annot.EnableCaption(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"updateVertexes",value:function(e,t,n){var r=this.annot.GetVertexes(),i=new this.engine.PointF(t,n);r.SetAt(parseInt(e),i),i.delete(),this.annot.SetVertexes(r),this.calculatePerimeter(),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setVertexes",value:function(e){var t=this,n=e.reduce((function(e,n){var r=n.x,i=n.y,a=new t.engine.PointF(r,i);return e.Add(a),a.delete(),e}),new this.engine.PointFArray);this.annot.SetVertexes(n),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,u=void 0===s?"inch":s,c=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(u));this.annot.SetMeasureRatio(c),this.calculatePerimeter(),this.annot.ResetAppearanceStream(),c.delete()}},{key:"getPath",value:function(){var e=this.annot.GetPath(),t=Ge.fromGSDKPath(e,this.engine);return t?t.toPointArray():null}},{key:"setPath",value:function(e){this.annot.SetPath(Ge.fromPointArray(e).toGSDKPath(this.engine)),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"updatePathPoint",value:function(e,t){var n=Ge.fromGSDKPath(this.annot.GetPath(),this.engine);n.updatePoint(e,t),this.annot.SetPath(n.toGSDKPath(this.engine)),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setRotation",value:function(e){this.annot.SetRotation(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"create",value:function(e){var t=this,n=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);if("boolean"==typeof e.enableCaption&&this.annot.EnableCaption(e.enableCaption),e.vertexes){var r=e.vertexes.reduce((function(e,n){var r=n.x,i=n.y,a=new t.engine.PointF(r,i);return e.Add(a),a.delete(),e}),new this.engine.PointFArray);this.annot.SetVertexes(r),this.annot.ResetAppearanceStream()}if(e.fillColor&&this.setFillColor(e.fillColor),e.borderWidth&&this.setBorderWidth(e.borderWidth),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),e.startStyle&&this.setLineStartStyle(e.startStyle),e.endStyle&&this.setLineEndStyle(e.endStyle),(e.captionColor||0===e.captionColor)&&("string"==typeof e.captionColor&&(e.captionColor=parseInt(e.captionColor,16)),this.setCaptionColor(e.captionColor,!1)),e.rotation&&this.setRotation(e.rotation),e.measure){this.annot.SetMeasureConversionFactor(0,2);var a=e.measure.ratio,o=a.userSpaceValue,s=void 0===o?1:o,u=a.userSpaceUnit,c=void 0===u?"inch":u,l=a.realValue,d=void 0===l?1:l,f=a.realUnit,h=void 0===f?"inch":f,g=new this.engine.String(e.measure.unit);this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeA,g),g=new this.engine.String(h),this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD,g),g=new this.engine.String(c);var p=Ae(c);p=p*d/s,this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,g),this.annot.SetMeasureConversionFactor(this.engine.MeasureType.e_MeasureTypeX,1*p/72),this.setMeasureRatio(e.measure.ratio),g.delete()}return n}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=this.getLineData();return Object.assign(t,e)}},{key:"getLineData",value:function(){var e,t,n=this.annot.GetLineEndStyle(),r=this.annot.GetLineStartStyle(),i=this.annot.GetVertexes(),a=this.annot.GetMeasureConversionFactor(0);try{e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}catch(n){e=this.JR.getHexString(this.annot.GetMeasureRatio()),0==(t=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD))).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}for(var o=[],s=0;s<i.GetSize();s++){var u=i.GetAt(s);o.push({x:u.x,y:u.y})}var c=this.getPath();return{endingStyle:n.value,startStyle:r.value,vertexes:o,path:c,measureConversionFactor:a,measureRatio:e,measureUnit:t}}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);t.fillColor=this.getFillColor();var n={hasCaption:this.annot.HasCaption(),captionColor:this.annot.GetCaptionColor(),rotation:this.annot.GetRotation()},r=this.getLineData();return Object.assign(r,n,t)}}]),i}(Y);const Fe=Te;var Re=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"isCemicircleCloudy",value:function(){return this.JR.configurations.annotation.cemicircleCloudy}},{key:"constructEngineAnnot",value:function(e){var t=this,n=new this.engine.Polygon(e),r=n.ResetAppearanceStream;return n.ResetAppearanceStream=function(){r.call(n),t.isCemicircleCloudy()&&n.SetCemicircleCloudy()},this.isCemicircleCloudy()&&n.SetCemicircleCloudy(),n}},{key:"calculateArea",value:function(){var e=this.annot.GetMeasureRatio().toString(),t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString();if(0==t.length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString()),0!=e.length){var n=this.annot.GetVertexes();if(!(n.length<2)){var r=we(e);if(r){var i=r.fScale,a=r.fUnit,o=r.tScale,s=(r.tUnit,function(e,t,n){var r=e.x*t.y+t.x*n.y+n.x*e.y-(e.x*n.y+t.x*e.y+n.x*t.y);return r/=2,ge.convertAreaTo(r,a)*Math.pow(o/i,2)}),u=function(e){for(var t={x:0,y:0},n=0,r=1;r<=e.GetSize();++r)r<e.GetSize()?n+=s(t,e.GetAt(r-1),e.GetAt(r)):n+=s(t,e.GetAt(r-1),e.GetAt(0));return Math.abs(n)}(n),c=this.annot.GetContent().toString(),l=c.indexOf("\n"),d=c.substr(0,-1===l?l:l+1)+Math.round(100*u)/100+" sq "+t;(u<1e-6||0===parseFloat(u.toFixed(2)))&&(d="");var f=new this.engine.WString(d);this.annot.SetContent(f),f.delete()}}}}},{key:"updateVertexes",value:function(e,t,n){var r=this.annot.GetVertexes(),i=new this.engine.PointF(t,n);r.SetAt(parseInt(e),i),i.delete(),this.annot.SetVertexes(r),this.calculateArea(),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setVertexes",value:function(e){var t=this,n=e.reduce((function(e,n){var r=n.x,i=n.y,a=new t.engine.PointF(r,i);return e.Add(a),a.delete(),e}),new this.engine.PointFArray);this.annot.SetVertexes(n),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,u=void 0===s?"inch":s,c=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(u));this.annot.SetMeasureRatio(c),this.calculateArea(),this.annot.ResetAppearanceStream(),c.delete()}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculateArea(),this.annot.ResetAppearanceStream(),n.delete()}},{key:"enableCaption",value:function(e){return this.annot.EnableCaption(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"getPath",value:function(){var e=this.annot.GetPath(),t=Ge.fromGSDKPath(e,this.engine);return t?t.toPointArray():null}},{key:"setPath",value:function(e){this.annot.SetPath(Ge.fromPointArray(e).toGSDKPath(this.engine)),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"updatePathPoint",value:function(e,t){var n=Ge.fromGSDKPath(this.annot.GetPath(),this.engine);n.updatePoint(e,t),this.annot.SetPath(n.toGSDKPath(this.engine)),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setRotation",value:function(e){this.annot.SetRotation(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);if("boolean"==typeof e.enableCaption&&this.annot.EnableCaption(e.enableCaption),e.vertexes&&this.setVertexes(e.vertexes),e.borderInfo&&this.setBorderInfo(e.borderInfo),e.fillColor&&this.setFillColor(e.fillColor),(e.captionColor||0===e.captionColor)&&("string"==typeof e.captionColor&&(e.captionColor=parseInt(e.captionColor,16)),this.setCaptionColor(e.captionColor,!1)),e.rotation&&this.setRotation(e.rotation),e.measure){this.annot.SetMeasureConversionFactor(0,2);var n=e.measure.ratio,r=n.userSpaceValue,a=void 0===r?1:r,o=n.userSpaceUnit,s=void 0===o?"inch":o,u=n.realValue,c=void 0===u?1:u,l=n.realUnit,d=void 0===l?"inch":l,f=new this.engine.String(e.measure.unit);this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeA,f),f=new this.engine.String(d),this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD,f),f=new this.engine.String(s);var h=Ae(s);h=h*c/a,this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,f),this.annot.SetMeasureConversionFactor(this.engine.MeasureType.e_MeasureTypeX,1*h/72),this.setMeasureRatio(e.measure.ratio),f.delete()}return t}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=this.getLineData();return Object.assign(t,e)}},{key:"getLineData",value:function(){for(var e=this.annot.GetVertexes(),t=[],n=0;n<e.GetSize();n++){var r=e.GetAt(n);t.push({x:r.x,y:r.y})}var i,a,o=this.annot.GetMeasureConversionFactor(0);try{i=this.annot.GetMeasureRatio().toString(),0==(a=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(a=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}catch(e){i=this.JR.getHexString(this.annot.GetMeasureRatio()),0==(a=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD))).length&&(a=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}return{vertexes:t,path:this.getPath(),measureRatio:i,measureUnit:a,measureConversionFactor:o}}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);t.fillColor=this.getFillColor();var n={hasCaption:this.annot.HasCaption(),captionColor:this.annot.GetCaptionColor(),rotation:this.annot.GetRotation()},r=this.getLineData();return Object.assign(r,n,t)}},{key:"setFillColor",value:function(e){return(0,M._)((0,O._)(i.prototype),"_setFillColor",this).call(this,e)}}],[{key:"caculateTriangleArea",value:function(e,t,n,r){r[FIELD_USER_SPACE_SCALE],r[FIELD_USER_SPACE_UNIT],r[FIELD_REAL_SCALE]}},{key:"caculatePolygonArea",value:function(e,t){for(var n={x:0,y:0},r=0,i=1;i<=e.length;++i)i<e.length?r+=MathAlgorithm.caculateTriangleArea(n,e[i-1],e[i],t):r+=MathAlgorithm.caculateTriangleArea(n,e[i-1],e[0],t);return Math.abs(r)}}]),i}(Y);const Me=Re;var Oe=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Squiggly(e)}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=e.color;return n=n||0==n?n:16737843,this.setBorderColor(n),t}}]),i}(X);const xe=Oe;var Be=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Note(e)}},{key:"setIconName",value:function(e){var t=this.annot;return t.SetIconName((0,W.n5)(this.engine,e)),t.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"setOpenStatus",value:function(e){return this.annot.SetOpenStatus(e),annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"setStateName",value:function(e){var t,n=this.engine.StateModel,r=this.annot;if(!r.IsStateAnnot())return!1;var i=this.engine.MarkupState;switch(r.GetStateModel()){case n.e_StateModelMarked:switch(e){case U.R3.UNMARKED:t=i.e_StateUnmarked;break;case U.R3.MARKED:t=i.e_StateMarked;break;default:throw new Error("Illegal argument: incorrect state name in marked state model: ".concat(e))}break;case n.e_StateModelReview:switch(e){case U.R3.ACCEPTED:t=i.e_StateAccepted;break;case U.R3.CANCELLED:t=i.e_StateCancelled;break;case U.R3.COMPLETED:t=i.e_StateCompleted;break;case U.R3.NONE:t=i.e_StateNone;break;case U.R3.REJECTED:t=i.e_StateRejected;break;case U.R3.DEFERRED:t=i.e_StateDeferred;break;case U.R3.FUTURE:t=i.e_StateFuture;break;default:throw new Error("Illegal argument: incorrect state name in review state model: ".concat(e))}}return r.SetState(t),this.updateModifyTime(),!0}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);if(t.flag|=24,t.iconName=this.annot.GetIconName().toString(),this.annot.IsStateAnnot()){var n=this.engine.MarkupState;switch(t.isStateAnnot=!0,this.annot.GetState()){case n.e_StateAccepted:t.state=U.R3.ACCEPTED;break;case n.e_StateCancelled:t.state=U.R3.CANCELLED;break;case n.e_StateCompleted:t.state=U.R3.COMPLETED;break;case n.e_StateNone:t.state=U.R3.NONE;break;case n.e_StateRejected:t.state=U.R3.REJECTED;break;case n.e_StateDeferred:t.state=U.R3.DEFERRED;break;case n.e_StateFuture:t.state=U.R3.FUTURE;break;case n.e_StateUnmarked:t.state=U.R3.UNMARKED;break;case n.e_StateMarked:t.state=U.R3.MARKED;break;default:t.isStateAnnot=!1}var r=this.annot.GetStateModel();r&&(t.stateMode=r.value);var a=this.annot.GetDict().GetElement(new this.engine.String("IRT")).GetDict();void 0===this.pdfPage._getAnnotIndexById(a.GetObjNum())&&this.pdfPage.addFakeAnnot(a,{markedStatesSummary:[{objectNumber:t.id}]})}else t.isStateAnnot=!1;return t.isOpen=this.annot.GetOpenStatus(),t}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);return e.icon&&this.setIconName(e.icon),this.annot.ResetAppearanceStream(),t}}]),i}(Y);const Ne=Be;var Le=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Circle(e)}},{key:"_calculateRectDiffer",value:function(){var e=this.annot.GetRect(),t=this.annot.GetInnerRect();return L.Z.subtract(e,t)}},{key:"move",value:function(e,t){var n=this.annot,r=L.Z.on(n.GetRect()).move(e,t).extract();return this.annot.Move(r),this.annot.ResetAppearanceStream(),!0}},{key:"setRect",value:function(e){var t=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),n=this.annot.Move(t);return t.delete(),this.calculateArea(),this.annot.ResetAppearanceStream(),this.updateModifyTime(),n}},{key:"setInnerRect",value:function(e){var t=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);return this.annot.SetInnerRect(t),this.annot.ResetAppearanceStream(),t.delete(),this.updateModifyTime(),!0}},{key:"getInnerRect",value:function(){return L.Z.on(this.annot.GetInnerRect()).toPlainObject()}},{key:"setAnnotRectAndInnerRect",value:function(e,t){var n=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),r=this.annot.Move(n),i=new this.engine.CFX_FloatRect(t.left,t.bottom,t.right,t.top);return this.annot.SetInnerRect(i),i.delete(),n.delete(),this.calculateArea(),this.annot.ResetAppearanceStream(),this.updateModifyTime(),r}},{key:"enableCaption",value:function(e){return this.annot.EnableCaption(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=L.Z.on(this.annot.GetInnerRect()).toPlainObject();e.innerRect=t;var n=this.GetMeasureData();return Object.assign(e,n)}},{key:"GetMeasureData",value:function(){var e,t,n=this.annot.GetMeasureConversionFactor(0);try{e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}catch(n){e=this.JR.getHexString(this.annot.GetMeasureRatio()),0==(t=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD))).length&&(t=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX)))}return{measureConversionFactor:n,measureRatio:e,measureUnit:t}}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),n=this.getFillColor(),r=L.Z.on(this.annot.GetInnerRect()).toPlainObject(),a=this.GetMeasureData(),o={fillColor:n,innerRect:r,hasCaption:this.annot.HasCaption(),captionColor:this.annot.GetCaptionColor(),rotation:this.annot.GetRotation()};return Object.assign(t,a,o)}},{key:"setFillColor",value:function(e){return(0,M._)((0,O._)(i.prototype),"_setFillColor",this).call(this,e)}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);if(e.borderWidth&&this.setBorderWidth(e.borderWidth),e.fillColor&&this.setFillColor(e.fillColor),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),"boolean"==typeof e.enableCaption&&this.annot.EnableCaption(e.enableCaption),(e.captionColor||0===e.captionColor)&&("string"==typeof e.captionColor&&(e.captionColor=parseInt(e.captionColor,16)),this.setCaptionColor(e.captionColor,!1)),e.rotation&&this.setRotation(e.rotation),e.measure){this.annot.SetMeasureConversionFactor(0,2);var n=e.measure.ratio,r=n.userSpaceValue,a=void 0===r?1:r,o=n.userSpaceUnit,s=void 0===o?"inch":o,u=n.realValue,c=void 0===u?1:u,l=n.realUnit,d=void 0===l?"inch":l,f=new this.engine.String(e.measure.unit);this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeA,f),f=new this.engine.String(d),this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD,f),f=new this.engine.String(s);var h=Ae(s);h=h*c/a,this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,f),this.annot.SetMeasureConversionFactor(this.engine.MeasureType.e_MeasureTypeX,1*h/72),this.setMeasureRatio(e.measure.ratio),f.delete()}return t}},{key:"calculateArea",value:function(){var e=this,t=this.annot.GetMeasureRatio().toString(),n=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString();if(0!=t.length){var r=we(t);if(r){var i=r.fScale,a=r.fUnit,o=r.tScale,s=(r.tUnit,function(){var t=e.annot.GetRect(),n=(t.right-t.left)*(t.top-t.bottom)*Math.PI;return ge.convertAreaTo(n/4,a)*Math.pow(o/i,2)}()),u=this.annot.GetContent().toString(),c=u.indexOf("\n"),l=u.substr(0,-1===c?c:c+1)+Math.round(100*s)/100+" sq "+n;(s<1e-6||0===parseFloat(s.toFixed(2)))&&(l="");var d=new this.engine.WString(l);this.annot.SetContent(d),d.delete()}}}},{key:"setMeasureConversionFactor",value:function(e){this.annot.SetMeasureConversionFactor(0,e),this.calculateArea(),this.annot.ResetAppearanceStream()}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,u=void 0===s?"inch":s,c=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(u));this.annot.SetMeasureRatio(c),this.calculateArea(),this.annot.ResetAppearanceStream(),c.delete()}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculateArea(),this.annot.ResetAppearanceStream(),n.delete()}},{key:"setBorderStyle",value:function(e,t){var n=this.annot.GetBorderInfo(),r=this.engine.BorderInfoStyle,a=(0,M._)((0,O._)(i.prototype),"setBorderStyle",this).call(this,e,t);if(e!==U.M8.CLOUDY&&n.style===r.e_Cloudy){var o=this.annot.GetInnerRect(),s=this.annot.GetRect();this.annot.SetInnerRect(s),this.annot.Move(o),this.annot.ResetAppearanceStream()}return a}},{key:"setRotation",value:function(e){this.annot.SetRotation(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}}]),i}(Y),je=__webpack_require__(7239),Ue=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.FileAttachment(e)}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),n=this.engine,r=this.annot,a=r.GetDict(),o=new je.Z(this.getFileSpec(),this);t.fileSpec=o.toJson();var s=a.GetElement((0,W.n5)(n,"Contents"));if(s&&t.fileSpec){var u=s.GetWideString().toString();u!==t.fileSpec.fileName&&(t.fileSpec.description=u)}t.iconName=this.JR.getPDFString(r.GetIconName());var c=a.GetElement((0,W.n5)(n,"FS"));return c&&(c=c.GetDirectObject(),t.fObjNum=c.GetObjNum()),t}},{key:"setIconName",value:function(e){var t=this.annot;return t.SetIconName(new this.engine.String(e)),t.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"getFileSpec",value:function(){return this.annot.GetFileSpec()}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=this.engine;try{e.iconName&&(e.icon=e.iconName),e.icon&&this.annot.SetIconName((0,W.n5)(n,e.icon))}catch(e){console.log(e),isNaN(e)||(e=n.getErrorCode(e)),console.warn(e)}return this.setFile(e),this.annot.ResetAppearanceStream(),t}},{key:"setFile",value:function(e){try{if(e.fObjNum){var t=this.doc,n=this.annot.GetDict(),r=new this.engine.String("FS");n.SetAtReference(r,t.GetIndirectObject(+e.fObjNum),t)}else if(e.buffer){var i=je.Z.createFile(this.engine,this.annot.GetPage().GetDocument(),e.buffer),o=new je.Z(i,this);e.fileName&&o.setFileName(e.fileName),e.file&&e.file.lastModified&&o.setModifiedDateTime(R.Z.ToDateTime(this.engine,e.file.lastModified)),this.annot.SetFileSpec(i)}}catch(e){var s=this.engine,u=(0,a._)(e,s.ErrorCode)?e:s.getErrorCode(e);console.warn(u)}return!0}},{key:"getStream",value:function(e){var t=e.writeStream;return new je.Z(this.getFileSpec(),this).getStream(t)}}]),i}(Y);const We=Ue;var He=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Caret(e)}},{key:"moveRectByCharIndex",value:function(e){var t=this.annot,n=this.pdfPage.getNormalTextPageSync(),r=(n.GetTextRectCount(e,1),n.GetTextRect(0));n.delete();var i=t.GetRect(),a=new this.engine.CFX_FloatRect,o=i.right-i.left,s=i.top-i.bottom;a.left=r.right-o/2,a.right=r.right+o/2,a.top=r.bottom+s/5,a.bottom=r.bottom-4*s/5,t.Move(a),t.ResetAppearanceStream(),a.delete()}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=this.getInnerRect();return e.innerRect=t,e}},{key:"getInnerRect",value:function(){var e=this.annot.GetInnerRect(),t={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return e.delete(),t}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);return t.innerRect=this.getInnerRect(),this.isReplace()&&""==t.intent&&(t.intent="Replace"),t}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=e.color;if(n||(n=e.subject&&"replace"===e.subject.toLocaleLowerCase()?n||0==n?n:255:n||0==n?n:10040217,this.setBorderColor(n)),!e.innerRect){var r=this.annot.GetRect(),a=new this.engine.CFX_FloatRect(r.left+2,r.bottom+1,r.right-2,r.top-1);this.annot.SetInnerRect(a)}if(e.rotation){var o=this.engine,s=new o.Matrix;s.Rotate(-e.rotation,!1),this.annot.GetDict().GetElement((0,W.n5)(o,"AP")).GetDict().GetElement((0,W.n5)(o,"N")).GetDict().SetAtMatrix((0,W.n5)(o,"Matrix"),s),s.delete()}return t}},{key:"isReplace",value:function(){var e,t,n=this.annot;if(n.IsGrouped()&&(e=n.GetGroupElements())&&2===(t=e.GetSize())){for(var r=["AnnotType_e_StrikeOut","AnnotType_e_Caret"],i=t;i--;){var a=e.GetAt(i),o=r.indexOf(a.GetType().constructor.name);if(a.delete(),-1===o)return e.delete(),!1}return e.delete(),!0}return e&&e.delete(),!1}}]),i}(Y);const ze=He;var Ke=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Square(e)}},{key:"_calculateRectDiffer",value:function(){var e=this.annot.GetRect(),t=this.annot.GetInnerRect();return L.Z.subtract(e,t)}},{key:"move",value:function(e,t){var n=this.annot,r=L.Z.on(n.GetRect()).move(e,t).extract();return this.annot.Move(r)}},{key:"setRect",value:function(e){var t=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),n=this.annot.Move(t);return this.annot.ResetAppearanceStream(),t.delete(),this.calculateArea(),this.updateModifyTime(),n}},{key:"setInnerRect",value:function(e){var t=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);return this.annot.SetInnerRect(t),this.annot.ResetAppearanceStream(),t.delete(),this.updateModifyTime(),!0}},{key:"setAnnotRectAndInnerRect",value:function(e,t){var n=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),r=this.annot.Move(n),i=new this.engine.CFX_FloatRect(t.left,t.bottom,t.right,t.top);return this.annot.SetInnerRect(i),n.delete(),i.delete(),this.annot.ResetAppearanceStream(),this.calculateArea(),this.updateModifyTime(),r}},{key:"getInnerRect",value:function(){return L.Z.on(this.annot.GetInnerRect()).toPlainObject()}},{key:"setBorderStyle",value:function(e,t){var n=this.annot.GetBorderInfo(),r=this.engine.BorderInfoStyle,a=(0,M._)((0,O._)(i.prototype),"setBorderStyle",this).call(this,e,t);if(e!==U.M8.CLOUDY&&n.style===r.e_Cloudy){var o=this.annot.GetInnerRect(),s=this.annot.GetRect();this.annot.SetInnerRect(s),this.annot.Move(o),this.annot.ResetAppearanceStream()}return a}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=this.getInnerRect(),n=this.getMeasureData(),r=n.measureConversionFactor,a=n.measureRatio,o=n.measureUnit;return e.innerRect=t,e.measureConversionFactor=r,e.measureRatio=a,e.measureUnit=o,e}},{key:"getMeasureData",value:function(){var e,t,n=this.annot.GetMeasureConversionFactor(0);try{e=this.annot.GetMeasureRatio().toString(),t=this.annot.GetMeasureUnit(0).toString()}catch(n){e=this.JR.getHexString(this.annot.GetMeasureRatio()),t=this.JR.getHexString(this.annot.GetMeasureUnit(0))}return{measureConversionFactor:n,measureRatio:e,measureUnit:t}}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),n=this.getFillColor(),r=this.getInnerRect(),a=this.getMeasureData(),o={fillColor:n,innerRect:r,measureConversionFactor:a.measureConversionFactor,measureRatio:a.measureRatio,measureUnit:a.measureUnit};return Object.assign(t,o)}},{key:"setFillColor",value:function(e){return(0,M._)((0,O._)(i.prototype),"_setFillColor",this).call(this,e)}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);if(e.fillColor&&this.setFillColor(e.fillColor),e.borderWidth&&this.setBorderWidth(e.borderWidth),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),e.measure){this.annot.SetMeasureConversionFactor(0,2);var n=new this.engine.String(e.measure.unit);this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,n),this.setMeasureRatio(e.measure.ratio),n.delete()}return t}},{key:"calculateArea",value:function(){var e=this,t=this.annot.GetMeasureRatio().toString(),n=this.annot.GetMeasureUnit(0).toString();if(0!=t.length){var r=t.match(/(\d+) (\w+) = (\d+) (\w+)/);if(r){var i=(0,o._)(r,5),a=i[1],s=i[2],u=i[3],c=i[4];s=Ie(s),a=parseInt(a),u=parseInt(u),c=Ie(c);var l=function(){var t=e.annot.GetRect(),n=(t.right-t.left)*(t.top-t.bottom);return ge.convertAreaTo(n,s)*Math.pow(u/a,2)}(),d=new this.engine.WString(Math.round(100*l)/100+" sq "+n);this.annot.SetContent(d),d.delete()}}}},{key:"setMeasureConversionFactor",value:function(e){this.annot.SetMeasureConversionFactor(0,e),this.calculateArea(),this.annot.ResetAppearanceStream()}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,u=void 0===s?"inch":s,c=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(u));this.annot.SetMeasureRatio(c),this.calculateArea(),this.annot.ResetAppearanceStream(),c.delete()}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculateArea(),this.annot.ResetAppearanceStream(),n.delete()}}]),i}(Y),Je=__webpack_require__(8758),Ve=__webpack_require__(3009),Ye=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.GetIndex();(0,t._)(this,i);var s=!r.annotationIDArray[o];return a=n.call(this,e,r,o),s||!a.isCallout()&&!a.isTextBox()||a.storeRectAndFontSize(a.isCallout()),a}return(0,r._)(i,[{key:"storeRectAndFontSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.annot,n=this.pdfPage,r=t.GetDict().GetObjNum(),i=n.$freeTextData=n.$freeTextData||{};if(e||!i[r]){i[r]||(i[r]={});var a=i[r],o=this.annot.GetDefaultAppearance().text_size;a.rect=this.getRectData(),a.originFontSize=o}}},{key:"constructEngineAnnot",value:function(e){return new this.engine.FreeText(e)}},{key:"setRect",value:function(e,t){return(0,M._)((0,O._)(i.prototype),"setRect",this).call(this,e,t)}},{key:"isEditting",get:function(){return this.pdfPage.annotIsEditting(this.getId())}},{key:"enableSyncTextScaling",value:function(){return this.JR.configurations.annotation.syncTextScaling}},{key:"syncRect",value:function(e,t,n){var r=e.rect,i=e.rectIsEmpty,a=e.innerRect,o=e.calloutLinePoints;if(!i)if(this.isEditting)this.annot.AllowTextOverflow(!0);else{this.enableSyncTextScaling()&&(this.isCallout()||this.isTextBox())&&this.annot.AllowTextOverflow(!1);var s=n/t,u=function(e,t){var n=e.right-e.left,r=e.top-e.bottom,i=n*r*t*t,a=n/r,o=Math.sqrt(i/a),s=i/o;return{left:e.left,top:e.top,bottom:e.top-o,right:e.left+s}};if(this.isCallout()){var d=u(a,s),f=(0,c._)({},r),h=o.map((function(e){return(0,c._)({},e)}));if(0===h.length)return;a.left,a.right;var g=.5*(a.top+a.bottom),p=o[2],v=(0,l.z0)(p.y,g)&&(0,l.z0)(p.x,a.left,2),_=(0,l.z0)(p.y,g)&&(0,l.z0)(p.x,a.right,2),m=(0,l.z0)(p.y,a.top,2)&&(0,l.z0)(p.x,a.left+.5*(a.right-a.left)),y=(0,l.z0)(p.y,a.bottom,2)&&(0,l.z0)(p.x,a.left+.5*(a.right-a.left)),S=d.right-a.right,b=d.bottom-a.bottom;_&&(h[2].x+=S,h[1].x+=S),y&&(h[2].y+=b,h[1].y+=b),(v||_)&&(h[2].y+=.5*b,h[1].y+=.5*b),(m||y)&&(h[2].x+=.5*S,h[1].x+=.5*S),f.right+=S,f.bottom+=b;var D=new this.engine.CFX_FloatRect(f.left,f.bottom,f.right,f.top);this.annot.Move(D);var P=new this.engine.CFX_FloatRect(d.left,d.bottom,d.right,d.top);this.annot.SetInnerRect(P),this.setCalloutLinePoints(h),(0,H.Z)(D),(0,H.Z)(P),this.annot.ResetAppearanceStream(),this.pdfPage.resetBitmapCache()}else{var I=u(r,s),A=new this.engine.CFX_FloatRect(I.left,I.bottom,I.right,r.top);this.annot.Move(A),A.delete(),this.annot.ResetAppearanceStream()}}}},{key:"syncFontSize",value:function(e){if(!this.enableSyncTextScaling())return!1;if(!this.isCallout()&&!this.isTextBox())return!1;if(this.isEditting)return this.annot.AllowTextOverflow(!0),!1;this.annot.AllowTextOverflow(!1);var t=this.annot,n=t.GetDict().GetObjNum(),r=this.pdfPage.$freeTextData?this.pdfPage.$freeTextData[n]:void 0;if(!r||!r.rect)return!1;var i=r.rect,a=(i.rect,i.innerRect),o=r.originFontSize,s=a;if(!s)return!1;var u=s.right-s.left,c=s.top-s.bottom,l=(e.right-e.left)*(e.top-e.bottom),d=u*c,f=Math.sqrt(l/d),h=Math.max(.01,o*f),g=t.GetDefaultAppearance();return h!==g.text_size&&(g.text_size=h,t.SetDefaultAppearance(g),t.ResetAppearanceStream(),!0)}},{key:"updateCalloutFigure",value:function(e,t,n){return this.setRect(e,!1),this.setInnerRect(t,!1),this.setCalloutLinePoints(n),this.syncFontSize(t),this.pdfPage.resetBitmapCache(),!0}},{key:"updateRectFigure",value:function(e,t){return this.setRect(e,!1),this.setInnerRect(t,!1),this.annot.ResetAppearanceStream(),this.updateModifyTime(),this.pdfPage.resetBitmapCache(),!0}},{key:"setBorderStyle",value:function(e,t){var n=this.annot.GetBorderInfo(),r=this.engine.BorderInfoStyle,a=(0,M._)((0,O._)(i.prototype),"setBorderStyle",this).call(this,e,t);if(n.style===r.values[r.e_Cloudy.value]&&(this.isTextBox()&&e!==U.M8.CLOUDY)){var o=this.annot.GetInnerRect();this.annot.Move(o),this.annot.SetInnerRect(o),this.annot.ResetAppearanceStream()}return a}},{key:"setAlignment",value:function(e){this.annot.SetAlignment({value:e}),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"getRotation",value:function(){return 90*this.annot.GetRotation().value}},{key:"setRotation",value:function(e){var t=e/90;return this.annot.SetRotation({value:t}),this.annot.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=this.getInnerRect();if(e.innerRect=t,this.JR.getPDFString(this.annot.GetIntent())===U.WA.FREETEXT_CALLOUT){var n=this.GetCalloutLineData(),r=n.calloutLineEndingStyle,a=n.calloutLinePoints;e.calloutLineEndingStyle=r,e.calloutLinePoints=a}if(this.enableSyncTextScaling()){e.defaultAppearance=this.getDefaultAppearance();var o=e.defaultAppearance.font;o&&(e.fontName=o.name,e.fullName=o.fullName)}return e}},{key:"getInnerRect",value:function(){var e=this.annot.GetInnerRect(),t={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return e.delete(),t}},{key:"GetCalloutLineData",value:function(){for(var e=this.annot,t=e.GetCalloutLineEndingStyle().value,n=e.GetCalloutLinePoints(),r=[],i=n.GetSize();i--;){var a=n.GetAt(i);r[i]={x:a.x,y:a.y}}return{calloutLineEndingStyle:t,calloutLinePoints:r}}},{key:"isCallout",value:function(){return this.annot.GetIntent().toString()===U.WA.FREETEXT_CALLOUT}},{key:"isTypewriter",value:function(){return this.annot.GetIntent().toString()===U.WA.FREETEXT_TYPEWRITER}},{key:"isTextBox",value:function(){return!this.isCallout()&&!this.isTypewriter()}},{key:"getDefaultAppearance",value:function(){var e=this.annot.GetDefaultAppearance(),t=e.font,n={};if(t.IsEmpty()){var r=dict.GetElement((0,W.n5)(this.engine,"DA"));if(r){var i=this.JR.getPDFString(r.GetString()).match(/\/(\w*) /);i&&(n={name:i[1]})}}else{var a=t.GetName().toString(),o=t.GetFamilyName().toString(),s="";try{s=this.JR.getPDFString(t.GetBaseFontName(this.doc))}catch(e){}n={name:a,baseName:s,fullName:o,styles:t.GetStyles(this.doc)}}return{flags:e.flags,textColor:e.text_color,textSize:e.text_size,font:n}}},{key:"toJson",value:function(e){var t=this.annot.GetDict(),n=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),r=this.annot;if(n.intent===U.WA.FREETEXT_CALLOUT){var a=this.GetCalloutLineData(),o=a.calloutLineEndingStyle,s=a.calloutLinePoints;n.calloutLineEndingStyle=o,n.calloutLinePoints=s}var u=r.GetAlignment().value;n.intent===U.WA.FREETEXT_TYPEWRITER&&0!==u&&(u=0,r.SetAlignment(this.engine.Alignment.e_AlignmentLeft)),n.justification=u;var c=this.getRotation();n.rotation=c;var l=r.GetDefaultAppearance(),d=l.font,f={};if(l.font.IsEmpty()){var h=t.GetElement((0,W.n5)(this.engine,"DA"));if(h){var g=this.JR.getPDFString(h.GetString()).match(/\/(\w*) /);g&&(n.fontName=g[1],f={name:g[1]})}}else{n.fontName=d.GetName().toString(),n.fullName=d.GetFamilyName().toString();var p="";try{p=this.JR.getPDFString(d.GetBaseFontName(this.doc))}catch(e){p=""}f={name:n.fontName,baseName:p,fullName:n.fullName,styles:d.GetStyles(this.doc)}}n.fontName=z.mz[n.fontName]||n.fontName,f.name=z.mz[f.name]||f.name,n.defaultAppearance={flags:l.flags,textColor:l.text_color,textSize:l.text_size,font:f};var v=(0,W.n5)(this.engine,"RC"),_=t.GetElement(v),m="";return _&&(m=this.JR.getPDFString(_.GetString())),n.fillColor=this.getFillColor(),n.innerRect=this.getInnerRect(),n.RC=m,v=(0,W.n5)(this.engine,"FoxitTag"),t.GetElement(v)&&(n.modifiable=!1),n}},{key:"setCalloutLineEndingStyle",value:function(e){this.annot.SetCalloutLineEndingStyle({value:e}),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setInnerRect",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);return this.annot.SetInnerRect(n),this.isTextBox()&&this.syncFontSize(e),this.isEditting&&this.storeRectAndFontSize(!0),"FreeTextCallout"!=this.annot.GetIntent()&&this.annot.ResetAppearanceStream(),n.delete(),t&&this.updateModifyTime(),!0}},{key:"setAnnotRectAndInnerRect",value:function(e,t){var n;e.left>e.right&&(n=e.right,e.right=e.left,e.left=n),e.bottom>e.top&&(n=e.top,e.top=e.bottom,e.bottom=n);var r=e.top-e.bottom,i=e.right-e.left,a=this.annot.GetRect(),o=!0;Math.abs(r-a.right+a.left)<.01&&Math.abs(i-a.top+a.bottom)<.01&&(o=!1);var s=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),u=this.annot.Move(s),c=new this.engine.CFX_FloatRect(t.left,t.bottom,t.right,t.top);return this.annot.SetInnerRect(c),s.delete(),c.delete(),u&&(this.updateModifyTime(),o&&this.annot.ResetAppearanceStream(),this.pdfPage.resetBitmapCache()),u}},{key:"setCalloutLinePoints",value:function(e){for(var t=new this.engine.PointFArray,n=this.engine.PointF,r=e.length,i=0;i<r;i++){var a=new n(e[i].x,e[i].y);t.Add(a),a.delete()}return this.annot.SetCalloutLinePoints(t),this.annot.ResetAppearanceStream(),t.delete(),this.updateModifyTime(),!0}},{key:"setDefaultAp",value:function(e){var t=e.textColor,n=e.textSize,r=e.font;0===t&&(t|=4278190080,t>>>=0);var i=this.annot.GetDefaultAppearance(),a=i.font.IsEmpty()?new this.engine.Font(1):i.font,o=a.GetName().toString(),s=1;if(r&&o!==r.name){var u=r.name,c=r.url,l=r.styles,d=r.charset,f=this.engine;if(c&&f.Font.createFromBuffer){var h=this.JR.getFontFromServer(c),g=f.StreamCallback.implement({GetSize:function(){return h.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,t,n){var r=new Uint8Array(h,t,n);return f.HEAPU8.set(r,e),!0},Release:function(){}});a=f.Font.createFromBuffer(g)}else if(u){s=f.DefAPFlags.e_FlagFont.value;var p={Courier:{value:0},Helvetica:{value:4},"Times-Roman":{value:8},Symbol:{value:12},ZapfDingbats:{value:13}}[u];a=void 0===p?new f.Font((0,W.Dp)(f,u),l||0,f.Charset.values[d]||f.Charset.e_CharsetANSI,0):new f.Font(p)}}if(t&&(s|=2),n&&(s|=4),s){var v=this.getRectData(),_=new this.engine.DefaultAppearance(s,a,n,t);return this.annot.SetDefaultAppearance(_),this.annot.GetDict().RemoveAt((0,W.n5)(this.engine,"RC")),this.annot.ResetAppearanceStream(),n!==i.text_size&&this.enableSyncTextScaling()&&this.syncRect(v,i.text_size,n),a.delete(),_.delete(),this.updateModifyTime(),!0}}},{key:"setFillColor",value:function(e){return(0,M._)((0,O._)(i.prototype),"_setFillColor",this).call(this,e)}},{key:"create",value:function(e){if((0,M._)((0,O._)(i.prototype),"create",this).call(this,e),e.rotation){var t=(0,Ve.q)(this.engine,e.rotation);this.annot.SetRotation(t)}var n;(n=e["interior-color"]||e.interiorColor)&&this.setFillColor(n),void 0!==e.fillColor&&this.setFillColor(e.fillColor),e.alignment&&this.setAlignment(e.alignment),!e.richText&&e.contents&&this.setContent(e.contents,!0,!1),e.borderWidth&&this.setBorderWidth(e.borderWidth,!1),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam);var r=!0;if(!e.richText&&e.DA){var a=this.engine;this.annot.GetDict().SetAtString((0,W.n5)(a,"DA"),(0,W.n5)(a,e.DA));var o={textColor:e.fontColor,textSize:Number(e.DA.split(" ")[1])};this.setDefaultAp(o),r=!1}if(!e.richText&&e.defaultAppearance&&"{}"!==JSON.stringify(e.defaultAppearance)){var s={textColor:e.defaultAppearance.textColor?Number(e.defaultAppearance.textColor):4278190080,textSize:e.defaultAppearance.textSize?Number(e.defaultAppearance.textSize):0};e.defaultAppearance.font&&(s.font=e.defaultAppearance.font),this.setDefaultAp(s),r=!1}if(this.setRect(e.rect),e.innerRect&&this.setInnerRect(e.innerRect),e.calloutLinePoints&&(this.setCalloutLinePoints(e.calloutLinePoints),r=!1),"FreeTextCallout"==e.intent){var u=e.calloutLineEndingStyle||e.startStyle;null==u?this.setCalloutLineEndingStyle(4):this.setCalloutLineEndingStyle(u),r=!1}return r&&this.annot.ResetAppearanceStream(),[this]}},{key:"getWoffBlob",value:function(){var e=this.annot;if(!e.GetDefaultAppearance().font.IsEmpty()){var t="",n=(e.GetDict().GetElement(new this.engine.String("DA")).GetString().toString()+" ").match(/\/([^\s]*) /);if(n&&n.length>1){t=n[1].replace(/#20/g," ");var r=this.JR.getFontBuffer(t.toString(),524322);if(r)return new Blob([r],{type:"application/woff"})}return null}}},{key:"getWoff",value:function(){var e=this.engine,t=this.annot.GetDefaultAppearance(),n=this.pdfPage.doc,r=t.font;if(r.IsEmpty())return null;if(r.IsEmbedded(n))return Je.Z.getWoffDataBuffer(r.GetWoffData(n),this.engine);var i=e.Charset.e_CharsetDefault.value;r.GetFontType(n)==e.FontTypes.e_FontTypeCIDFont&&(i=r.GetFontType(n).value);var a=this.JR.getFontBuffer(r.GetBaseFontName(n).toString(),r.GetStyles(n),0,i,r.IsBold()?700:400,!0);return a?{buffer:a}:null}},{key:"setContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.annot,a=r.GetDict(),o=(0,W.n5)(this.engine,"RC");if(a.GetElement(o)&&a.RemoveAt(o),t){var s=r.GetDefaultAppearance();r.SetDefaultAppearance(s)}return(0,M._)((0,O._)(i.prototype),"setContent",this).call(this,e,!0,n)}}]),i}(Y);const Ze=Ye;var qe,Xe=__webpack_require__(2699),Qe=__webpack_require__(498),$e=__webpack_require__(3846),et=(__webpack_require__(6666),"Digital"),tt="date",nt="background",rt="field",it=function(){function e(){(0,t._)(this,e),this.docsMap={},this.formsMap={},this.iconCatalog="Static",this._enable=!1,this.seperator=", ",this.timeFormat="YYYY-MM-DD, HH:mm:ss",this.icons={},this.hasSetIconProvider=!1,this.digitalTimeFormat="YYYY.MM.DD",this.identityInfo={}}return(0,r._)(e,[{key:"setIcons",value:function(e){this.removeIcon("stamp"),this.icons="string"==typeof e?JSON.parse(e):e}},{key:"addIcon",value:function(e){var t=e.annotType||"stamp",n=e.category,r=e.name;if(n){var i,a,o;if(t in this.icons||(this.icons[t]={}),n in this.icons[t]||(this.icons[t][n]={}),this.icons[t][n][r]=(0,c._)({},e),i=this.docsMap[t])if(i=i[n])if(i=i[r])null===(a=i.fields)||void 0===a||a.forEach((function(e){return e.delete()})),null===(o=i.form)||void 0===o||o.delete(),!i.page.isDeleted()&&i.page.delete(),i.doc.delete(),delete this.docsMap[t][n][r];return!0}}},{key:"removeIcon",value:function(e,t,n){var r=this.docsMap[e];if(r)for(var i in r){var a=r[i];for(var o in a){var s,u,c,l,d,f,h=a[o];if(n){if(t==i&&o==n)return null===(c=h.fields)||void 0===c||c.forEach((function(e){return e.delete()})),null===(l=h.form)||void 0===l||l.delete(),!h.page.isDeleted()&&h.page.delete(),h.doc.delete(),void delete a[o]}else if(t)i==t&&(null===(d=h.fields)||void 0===d||d.forEach((function(e){return e.delete()})),null===(f=h.form)||void 0===f||f.delete(),!h.page.isDeleted()&&h.page.delete(),h.doc.delete(),delete a[o]);else null===(s=h.fields)||void 0===s||s.forEach((function(e){return e.delete()})),null===(u=h.form)||void 0===u||u.delete(),!h.page.isDeleted()&&h.page.delete(),h.doc.delete(),delete a[o]}}}},{key:"activeIcon",value:function(e,t){this.iconCatalog=e,this.iconName=t,this._enable=!0}},{key:"setDynamicInfoFormula",value:function(e,t){this.seperator=e,this.timeFormat=t}},{key:"getDynamicInfoFormula",value:function(){return{seperator:this.seperator,timeFormat:this.timeFormat}}},{key:"setDigitalTimeFormat",value:function(e){this.digitalTimeFormat=e}},{key:"setDigitalInfo",value:function(e){this.identityInfo=e}},{key:"enable",value:function(e){this._enable=e,e||(this.iconCatalog=null,this.iconName=null)}},{key:"previewIconDoc",value:function(e){if("custom-dynamic"===e.stampType)return this.previewDynamicIconDoc(e,e.imgType);this.addIcon(e);var t=this.engine,n=e.category,r=e.name,i=this.getIconPDFDoc("stamp",n,r),a=(i.doc,i.page);a.StartParse(0,null,!1),this.setFieldValue(i,"stamp",n,r),n===et&&a.ClipPage();for(var o=3*a.GetWidth(),s=3*a.GetHeight(),u=new t.Bitmap(o,s,t.DIBFormat.e_DIBArgb,0,0),c=new t.Renderer(u,!1),l=a.GetDisplayMatrix(0,0,o,s,{value:0}),d=c.StartRender(a,l,null),f=d.Continue();1===f.value;)f=d.Continue();d.delete();var h=new t.Image;h.AddFrame(u);var g=[],p=t.StreamCallback.implement({Release:function(){p.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(e,n,r){var i,a=t.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(e,e+r)):new Uint8Array(a,e,r),g.push(i),!0}});h.SaveAs(p,(0,W.Dp)(t,".png")),h.delete(),a.delete(),c.delete(),u.delete();return new Blob(g,{type:"image/png"})}},{key:"previewDynamicIconDoc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nt;t===rt&&(e.category="fv__template_field_categroy",e.name="fv__template_field_name"),this.addIcon(e);var n=this.engine,r=e.category,i=e.name,a=this.getDynamicIconPDFDoc("stamp",r,i,t),o=a.page;o.StartParse(0,null,!1),this.setFieldValue(a,"stamp",r,i),o.ClipPage();for(var s=3*o.GetWidth(),u=3*o.GetHeight(),c=new n.Bitmap(s,u,n.DIBFormat.e_DIBArgb,0,0),l=new n.Renderer(c,!1),d=o.GetDisplayMatrix(0,0,s,u,{value:0}),f=l.StartRender(o,d,null),h=f.Continue();1===h.value;)h=f.Continue();f.delete();var g=new n.Image;g.AddFrame(c);var p=[],v=n.StreamCallback.implement({Release:function(){v.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(e,t,r){var i,a=n.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(e,e+r)):new Uint8Array(a,e,r),p.push(i),!0}});g.SaveAs(v,(0,W.Dp)(n,".png")),g.delete(),o.delete(),l.delete(),c.delete();return new Blob(p,{type:"image/png"})}},{key:"getDynamicIconPDFDoc",value:function(e,t,n,r){if(this.docsMap[e]&&this.docsMap[e][t]&&this.docsMap[e][t][n])return this.docsMap[e][t][n];var i,a,o,s=this.engine,u=this.jr,c=this.icons[e][t][n];if(!c)return null;var l=[];i=new s.PDFDoc;var d=new s.PointF(0,0);if(r===nt){var f=u.createReaderCallback(c.url),h=new s.Image(f),g=h.GetFrameBitmap(0);(o=i.InsertPage(0,g.GetWidth(),g.GetHeight())).StartParse(0,null,!1),o.AddImage(h,0,d,o.GetWidth(),o.GetHeight(),!0),g.delete()}else{if(!c.field)throw new Error("The field info is required for dynamic field icon");var p=c.field.rect,v=p.right-p.left,_=p.top-p.bottom;(o=i.InsertPage(0,v,_)).StartParse(0,null,!1),c.field.rect={left:0,top:_,right:v,bottom:0};var m=this.createFormField(i,o,c.field),y=m.form,S=m.field;a=y,l.push(S)}return d.delete(),this.docsMap[e]=this.docsMap[e]||{},this.docsMap[e][t]=this.docsMap[e][t]||{},this.docsMap[e][t][n]={doc:i,page:o,form:a,fields:l}}},{key:"getIconPDFDoc",value:function(e,t,n){if(this.docsMap[e]&&this.docsMap[e][t]&&this.docsMap[e][t][n])return this.docsMap[e][t][n];var r,i,a,o=this.engine,s=this.jr,u=this.icons[e][t][n];if(!u)return null;var c=[],l=null;switch(l=s.createReaderCallback(u.url),u.fileType){case"pdf":var d=(0,W.n5)(o,"");(r=o.createPDFDocWithReaderCallback(l,!1)).Load(d);if(!(i=new o.Form(r)).IsEmpty())for(var f=(0,W.Dp)(o,""),h=i.GetFieldCount(f),g=0;g<h;g++){var p=i.GetField(g,f);if(p=p.IsEmpty()?null:p){var v=new o.FieldArray;v.Add(p),i.SetFieldsInCalculationOrder(v),v.delete();var _=o.PDFDictionary.Create();_.SetAtName((0,W.n5)(o,"Type"),(0,W.n5)(o,"Action")),_.SetAtName((0,W.n5)(o,"S"),(0,W.n5)(o,"JavaScript")),_.SetAtString((0,W.n5)(o,"JS"),(0,W.n5)(o,"AFDate_FormatEx")),r.AddIndirectObject(_);var m=o.PDFDictionary.Create();m.SetAtReference((0,W.n5)(o,"C"),_,r),p.GetDict().SetAt((0,W.n5)(o,"AA"),m)}c.push(p)}var y=0;false,a=r.GetPage(y);break;case"bmp":case"jpg":case"jpeg":case"png":case"tif":case"tiff":var S=new o.Image(l),b=S.GetFrameBitmap(0);r=new o.PDFDoc;var D=new o.PointF(0,0);if((a=r.InsertPage(0,b.GetWidth(),b.GetHeight())).StartParse(0,null,!1),a.AddImage(S,0,D,a.GetWidth(),a.GetHeight(),!0),u.field){var P=this.createFormField(r,a,u.field),I=P.form,A=P.field;i=I,c.push(A)}b.delete(),D.delete()}return this.docsMap[e]=this.docsMap[e]||{},this.docsMap[e][t]=this.docsMap[e][t]||{},this.docsMap[e][t][n]={doc:r,page:a,form:i,fields:c}}},{key:"createFormField",value:function(e,t,n){var r=this.engine,i=new r.Form(e),a=n.rect,o=new r.WString("stamp field"),s=new r.CFX_FloatRect(a.left,a.bottom,a.right,a.top),u=i.AddControl(t,o,r.FieldType.values[$e.fS.Text],s),c=u.GetField();s.delete(),o.delete();var l=new r.FieldArray;l.Add(c),i.SetFieldsInCalculationOrder(l);var d=r.PDFDictionary.Create();d.SetAtName((0,W.n5)(r,"Type"),(0,W.n5)(r,"Action")),d.SetAtName((0,W.n5)(r,"S"),(0,W.n5)(r,"JavaScript")),d.SetAtString((0,W.n5)(r,"JS"),(0,W.n5)(r,"AFDate_FormatEx")),e.AddIndirectObject(d);var f=r.PDFDictionary.Create();return f.SetAtReference((0,W.n5)(r,"C"),d,e),c.GetDict().SetAt((0,W.n5)(r,"AA"),f),n.font&&this.setDefaultAppearance(u,n.font),{form:i,field:c}}},{key:"setDefaultAppearance",value:function(e,t){var n,r=this.engine,i=e.GetWidget(),a=i.GetControl(),o=void 0!==t.name?r.DefAPFlags.e_FlagFont.value:0,s=void 0!==t.color?r.DefAPFlags.e_FlagTextColor.value:0,u=void 0!==t.size?r.DefAPFlags.e_FlagFontSize.value:0;if(t.name){var c=z.BD.find((function(e){return e.name==t.name}));if(c){var l=(0,z.T2)(c.value);if(l){var d=[r.StandardID.e_StdIDCourier,r.StandardID.e_StdIDCourierB,r.StandardID.e_StdIDCourierBI,r.StandardID.e_StdIDCourierI,r.StandardID.e_StdIDHelvetica,r.StandardID.e_StdIDHelveticaB,r.StandardID.e_StdIDHelveticaBI,r.StandardID.e_StdIDHelveticaI,r.StandardID.e_StdIDTimes,r.StandardID.e_StdIDTimesB,r.StandardID.e_StdIDTimesBI,r.StandardID.e_StdIDTimesI,r.StandardID.e_StdIDSymbol,r.StandardID.e_StdIDZapfDingbats];n=new this.engine.Font(d[l])}else n=new this.engine.Font((0,W.Dp)(r,t.name),0,r.Charset.e_CharsetANSI,0)}else n=new this.engine.Font((0,W.Dp)(r,t.name),0,r.Charset.e_CharsetANSI,0)}else n=new this.engine.Font(0);var f=new this.engine.DefaultAppearance(o|s|u,n,0,t.color?t.color:0);try{a.SetDefaultAppearance(f)}catch(e){return isNaN(e)||(e=r.getErrorCode(e)),void console.warn(e)}i.ResetAppearanceStream()}},{key:"initIconProvider",value:function(e,t){this.engine&&this.hasSetIconProvider||(this.jr=e,!this.engine&&(this.engine=t),t.IconProviderCallback&&(t.setAnnotIconProviderCallback(this.getEngineIconProvider(t)),this.hasSetIconProvider=!0))}},{key:"setFieldValue",value:function(e,t,n,r){try{if(n===et)for(var i=0;i<e.fields.length;i++){var a=e.fields[i],o=Object.keys(this.identityInfo);o.push(tt);var s=a.GetName().toString();if(a&&!a.IsEmpty()&&o.includes(s)){var u="";if(s===tt)u=(0,Xe.Z)(new Date,this.digitalTimeFormat);else if("name"===s){var c=this.identityInfo,l=c.surname+c.name;u=l.length<3?"\n"+(l=l.split("").join("\n")):l.split("").join("\n")}else u=this.identityInfo[s];var d=new this.engine.WString(u);a.SetValue(d),d.delete(),a.GetControl(0).GetWidget().ResetAppearanceStream()}}else{var f=e.fields[0];if(f&&!f.IsEmpty()){var h="",g=this.icons[t][n][r];if(g.field){var p=g.field,v=p.textType,_=p.value;switch(v){case Qe.k3.NAME:h=this.jr.getUserName();break;case Qe.k3.NAME_DATE_TIME:h=this.jr.getUserName(),this.timeFormat.length>0&&(h.length>0&&(h+=this.seperator),h+=(0,Xe.Z)(new Date,this.timeFormat));break;case Qe.k3.DATE_TIME:h=(0,Xe.Z)(new Date,this.timeFormat);break;case Qe.k3.DATE:h=(0,Xe.Z)(new Date,this.timeFormat.split(this.seperator)[0]);break;case Qe.k3.CUSTOM_TEXT:default:h=_}}else h=this.jr.getUserName(),this.timeFormat.length>0&&(h.length>0&&(h+=this.seperator),h+=(0,Xe.Z)(new Date,this.timeFormat));var m=new this.engine.WString(h);f.SetValue(m),m.delete(),f.GetControl(0).GetWidget().ResetAppearanceStream()}}}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}}},{key:"getEngineIconProvider",value:function(){var e=this,t=this.engine;return t.IconProviderCallback.implement({Release:function(){for(var t in e.docsMap)for(var n in e.docsMap[t])for(var r in e.docsMap[t][n])e.docsMap[t][n][r].delete()},GetProviderID:function(){return(0,W.n5)(t,"gsdk")},GetProviderVersion:function(){return new t.String(e.iconCatalog+(new Date).valueOf())},HasIcon:function(t,n){if(!e._enable)return!1;var r=e.iconName,i="stamp";if(0===t.value)i="note";return!!(e.icons&&e.icons[i]&&e.icons[i][e.iconCatalog]&&e.icons[i][e.iconCatalog][r])},CanChangeColor:function(e,t){return!0},GetIcon:function(t,n,r){switch(n=e.iconName,t.value){case 0:break;case 13:var i=e.getIconPDFDoc("stamp",e.iconCatalog,n);return i?("0"!==n&&e.setFieldValue(i,"stamp",e.iconCatalog,n),e.iconCatalog===et&&i.page.ClipPage(),i.page):new e.engine.PDFPage(null)}},GetShadingColor:function(e,t,n,r,i){return i.first_color=n,i.second_color=n,!0},GetDisplayWidth:function(e,t){return 0},GetDisplayHeight:function(e,t){return 0}})}}]),e}();const at=function(){return qe||(qe=new it)};var ot;!function(){var e,t=navigator.userAgent.toLowerCase();!(!("ActiveXObject"in self)||!(e=t.match(/msie ([\d\.]+)/)))&&parseInt(e[1])}();ot=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.IsEmpty())return{};var r=t.GetWidth(),i=t.GetHeight(),a=new e.Image;a.AddFrame(t);var o=[],s=e.StreamCallback.implement({Release:function(){s.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(t,n,r){var i,a=e.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(t,t+r)):new Uint8Array(a,t,r),o.push(i),!0}});a.SaveAs(s,(0,W.Dp)(e,".png")),n&&(a.delete(),t.delete());var u="image/png";return{type:u,image:new Blob(o,{type:u}),width:r,height:i}};var st=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Stamp(e)}},{key:"setIconName",value:function(e){}},{key:"getIconName",value:function(){return this.JR.getPDFString(this.annot.GetIconName())}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=this.engine,r=this.annot;try{if(e.rotation&&this.setRotation(e.rotation),e.apObjeNum){e.rect&&this.setRect(e.rect);var a=this.doc,o=r.GetDict(),s=(0,W.n5)(n,"AP"),u=o.GetElement(s);u||(u=n.PDFDictionary.Create().GetDict(),o.SetAt(s,u)),u.GetDirectObject().GetDict().SetAtReference((0,W.n5)(n,"N"),a.GetIndirectObject(+e.apObjeNum),a)}else{var c=at();if(c.jr&&c.hasSetIconProvider||c.initIconProvider(this.JR,this.engine),e.iconInfo&&(c.addIcon(e.iconInfo),e.iconCategory=e.iconInfo.category,e.icon=e.iconInfo.name),e.iconCategory&&(c.activeIcon(e.iconCategory,e.icon),c.enable(!0)),e.icon){var l=new n.WString(e.icon);r.SetIconName(l.UTF8Encode()),r.ResetAppearanceStream(),c.enable(!1),l.delete()}}}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}return t}},{key:"setAnnotAPBitmap",value:function(e,t){var n=this,r=this.engine.ReaderCallback.implement({Release:function(){},GetSize:function(){return t},ReadBlock:function(t,r,i){var a=new Uint8Array(n.JR.requestData("GET",!1,e,r,i));return n.engine.HEAPU8.set(a,t),!0}}),i=new this.engine.Image(r);this.annot.SetImage(i,0,0),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setRotation",value:function(e){var t=this.annot.GetRotation(),n=this.annot;return n.Rotate((360-t)%360),n.Rotate(e%360),n.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);t.rotation=this.annot.GetRotation(),t.iconName=this.getIconName();var n=this.engine,r=this.annot.GetDict().GetElement((0,W.n5)(n,"AP")),a=r&&r.GetDirectObject().GetDict(),o=a&&a.GetElement((0,W.n5)(n,"N")),s=o&&o.GetDirectObject();return s&&(t.apObjeNum=s.GetObjNum()),t}},{key:"getBitmapBuffer",value:function(){var e=this.annot.GetBitmap();return ot(this.engine,e)}}]),i}(Y);const ut=st;var ct=__webpack_require__(2095),lt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a){var o;(0,t._)(this,i);var s=(e=(o=n.call(this,e,r,a)).annot).GetAction();return s.IsEmpty()||(o.action=o.JR.actionManager.get(s,o.doc,o.JR)),o}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Link(e)}},{key:"destroy",value:function(){this.action&&this.action.destroy(),(0,M._)((0,O._)(i.prototype),"destroy",this).call(this)}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),n=this.annot.GetHighlightingMode()||{value:0};t.highlightingMode=n.value,t.action=this.action&&this.action.toJson();var r=this.annot.GetDict().GetElement((0,W.n5)(this.engine,"A")),a=r&&r.GetDirectObject();return a&&(t.aObjNum=a.GetObjNum()),t}},{key:"setHighlightingMode",value:function(e){return this.annot.SetHighlightingMode(this.engine.HighlightingMode.values[e]),this.annot.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"setAction",value:function(e,t,n){var r,i=this.engine,a=t.type,o=this.annot.GetPage().GetDocument();if(r=a?this.JR.actionManager.create(o,t.type):this.JR.actionManager.create(o,t),n){var s=this.annot.GetAction();if(!s.IsEmpty()){var u=s.GetSubActionCount();return s.InsertSubAction(u,r),a&&this.JR.actionManager.get(r,this.doc,this.JR).create(t),this.JR.actionManager.get(s,this.doc,this.JR)}}if(this.action&&this.action.action.GetType()===i.ActionType.e_TypeURI&&i.ActionType["e_"+(a?t.type:t)]===i.ActionType.e_TypeGoto){var c=this.annot.GetDict(),l=c.GetElement(new i.String("A")).GetDirectObject();c.SetAtReference(new i.String("PA"),l,this.doc)}this.annot.SetAction(r);var d=this.JR.actionManager.get(this.annot.GetAction(),this.doc,this.JR);return a&&d.create(t),this.updateModifyTime(),d}},{key:"create",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);if(e.borderWidth&&this.setBorderWidth(e.borderWidth),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),void 0!==e.highlightingMode&&this.setHighlightingMode(e.highlightingMode),e.aObjNum){var n=this.annot.GetDict(),r=new this.engine.String("A");n.GetElement(r)||n.SetAtReference(r,this.doc.GetIndirectObject(+e.aObjNum),this.doc);var a=this.annot.GetAction();a.IsEmpty()||(this.action=this.JR.actionManager.get(a,this.doc,this.JR))}return t}},{key:"setBorderStyle",value:function(e,t){return(0,M._)((0,O._)(i.prototype),"setBorderStyle",this).call(this,e,t),[this.getId()]}},{key:"hasPA",value:function(){var e=this.engine;return this.annot.GetDict().HasKey(new e.String("PA"))}},{key:"resetAByPA",value:function(){if(!this.hasPA())return!1;var e=this.engine,t=this.annot.GetDict(),n=new e.String("PA"),r=t.GetElement(n).GetDirectObject();return t.SetAtReference(new e.String("A"),r,this.doc),t.RemoveAt(n),!0}},{key:"removeAction",value:function(e,t){var n=this.engine,r=this.pdfPage.pdfDoc.doc,i=this.annot,a=i.GetAction();return a=(0,ct.Z)(n,r,a,t),t&&a?(i.SetAction(a),[this.JR.actionManager.get(a,this,this.JR).toJson()]):(i.RemoveAction(),this.updateModifyTime(),[])}},{key:"moveAction",value:function(e){for(var t=e.action,n=e.direction,r=this.annot,i=r.GetAction(),a=i.GetSubActionCount(),o=[i],s=0;s<a;s++)o.push(i.GetSubAction(s));var u=o.findIndex((function(e){return e.GetDict().GetObjNum()===t.objNumber}));if(-1!=u){var c=n?u+1:u-1;if(0==c||0==u){r.RemoveAction(),o[0].RemoveAllSubActions();var l=0==u?c:u;r.SetAction(o[l]),o.splice(l,1),i=r.GetAction();for(var d=0;d<o.length;d++)i.InsertSubAction(d,o[d])}else{var f;i.RemoveAllSubActions(),f=[o[c],o[u]],o[u]=f[0],o[c]=f[1];for(var h=1;h<o.length;h++)i.InsertSubAction(h,o[h])}}}}]),i}(R.Z);const dt=lt;var ft=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Ink(e)}},{key:"getRectData",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectData",this).call(this),t=this.getInkList();return e.inkList=t,e}},{key:"getInkList",value:function(){var e=this.annot.GetInkList(),t=[];if(!e.IsEmpty())for(var n=e.GetPointCount(),r=0;r<n;r++){var i=e.GetPoint(r),a=e.GetPointType(r);t.push({x:i.x,y:i.y,type:a.value})}return t}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);return t.inkList=this.getInkList(),t}},{key:"setInkList",value:function(e){var t=this,n=new this.engine.Path;return e.forEach((function(e){var r=e.x,i=e.y,a=e.type,o=new t.engine.PointF(r,i);switch(a){case 1:n.MoveTo(o);break;case 2:n.LineTo(o);break;case 3:var s=new t.engine.CFX_FloatRect(r-.5,i+.5,r+.5,i-.5);n.MoveTo(o),n.AppendEllipse(s),s.delete()}o.delete()})),this.annot.SetInkList(n),n.delete(),this.annot.ResetAppearanceStream(),!0}},{key:"create",value:function(e){e.borderWidth&&this.setBorderWidth(e.borderWidth);var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e),n=e.inkList;return n&&this.setInkList(n),t}}]),i}(Y);const ht=ft;var gt=__webpack_require__(8193),pt=__webpack_require__(2998),vt=__webpack_require__(7330),_t=[0,90,180,270],mt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a){var o;(0,t._)(this,i),(o=n.call(this,e,r,a)).isAudioVideo=!1;var s=o.annot.GetAction();return s.IsEmpty()||(o.action=o.JR.actionManager.get(s,o.doc,o.JR),"ActionType_e_TypeRendition"==o.action.getType()&&(o.isAudioVideo=!0)),o}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Screen(e)}},{key:"getRectJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"getRectJson",this).call(this);return e.isAudioVideo=this.isAudioVideo,e.borderWidth=this.annot.GetBorderInfo().width,e}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);this.isAudioVideo||(t.action=this.action&&this.action.toJson()),t.opacity=this.getOpacity(),t.rotation=_t[this.getRotation()],t.title=this.getTitle(),t.isAudioVideo=this.isAudioVideo;var n=this.annot.GetDict(),r=this.engine,a=n.GetElement((0,W.n5)(r,"MK")),o=a&&a.GetDirectObject().GetDict(),s=n.GetElement((0,W.n5)(r,"A")),u=s&&s.GetDirectObject();if(u&&(t.aObjNum=u.GetObjNum()),o){var c=o.GetElement((0,W.n5)(r,"I")),l=c&&c.GetDirectObject();l&&(t.iObjNum=l.GetObjNum())}t.AA=(0,vt.S)(this.JR,this.pdfPage.doc,this.annot.GetDict(),17,21);var d=n.GetElement((0,W.n5)(r,"AP"));if(d){var f=d.GetDirectObject().GetDict().GetElement((0,W.n5)(r,"N"));f&&f.GetDirectObject()&&(t.apObjNum=f.GetDirectObject().GetObjNum())}return t}},{key:"setBorderColor",value:function(e){var t=this.annot;if(0==e)t.RemoveProperty({value:2});else{if(-1==e)return;t.SetBorderColor(e)}t.ResetAppearanceStream()}},{key:"getAction",value:function(){return this.action?this.action:null}},{key:"setAction",value:function(e,t,n){var r,i=this.engine,a=this.JR.actionManager,o=this.annot,s=this.annot.GetPage().GetDocument();if(r=a.create(s,t.type),-1==e)try{o.SetAction(r)}catch(e){isNaN(e)||(e=i.getErrorCode(e)),console.warn(e)}else{var u=o.GetDict();this.pdfPage.pdfDoc.addAA(u,r,{trigger:e},n)}var c=a.get(r,s,this.JR);return c.create(t),this.updateModifyTime(),c}},{key:"getOpacity",value:function(){return this.annot.GetOpacity()}},{key:"getRotation",value:function(){return this.annot.GetRotation().value}},{key:"getTitle",value:function(){return this.annot.GetTitle().toString()}},{key:"create",value:function(e){if(e.rotation){var t={0:0,90:1,180:2,270:3}[e.rotation]||0;this.annot.SetRotation(this.engine.Rotation.values[t]||0)}e.borderWidth?this.setBorderWidth(e.borderWidth):this.setBorderWidth(0);var n=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);if(void 0!==e.opacity){var r=+e.opacity;this.setOpacity(r)}if(e.apObjNum){var a=this.doc,o=this.annot.GetDict(),s=this.engine,u=(0,W.n5)(s,"AP"),c=(0,W.n5)(s,"MK"),l=o.GetElement(u),d=o.GetElement(c);if(l||(l=s.PDFDictionary.Create().GetDict(),o.SetAt(u,l)),d||(d=s.PDFDictionary.Create().GetDict(),o.SetAt(c,d)),l.GetDirectObject().GetDict().SetAtReference((0,W.n5)(s,"N"),a.GetIndirectObject(+e.apObjNum),a),e.aObjNum){var f=(0,W.n5)(s,"A");o.GetElement(f)||o.SetAtReference(f,a.GetIndirectObject(+e.aObjNum),a);var h=this.annot.GetAction();h.IsEmpty()||(this.action=this.JR.actionManager.get(h,this.doc,this.JR),"ActionType_e_TypeRendition"==this.action.getType()&&(this.isAudioVideo=!0))}if(e.iObjNum){var g=d.GetDirectObject().GetDict();g.SetAtReference((0,W.n5)(s,"I"),a.GetIndirectObject(+e.iObjNum),a);var p=(0,W.n5)(s,"IF"),v=g.GetElement(p);v||(v=s.PDFDictionary.Create().GetDict(),g.SetAt(p,v));var _=v.GetDirectObject().GetDict(),m=(0,W.n5)(s,"FB"),y=(0,W.n5)(s,"P"),S=(0,W.n5)(s,"S"),b=s.PDFObject.CreateFromBoolean(!0),D=s.PDFObject.CreateFromName(y);_.SetAt(m,b),_.SetAt(S,D),(0,H.Z)(b,D)}}else if(e.multiBuffer&&(this.setMultiMedia(e.multiBuffer,e.fileName,e.contentType),this.isAudioVideo=!0),e.buffer&&!this.setImage(e.buffer))return null;return n}},{key:"setMultiMedia",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video.mp4",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"video/mp4",r=this.annot.GetPage().GetDocument(),i=this.engine.Action.Create(r,this.engine.ActionType.e_TypeRendition),a=new this.engine.RenditionAction(i);a.SetOperationType(this.engine.OperationType.e_OpTypeAssociate),a.SetScreenAnnot(this.annot);var o=new this.engine.Rendition(r,null),s=new this.engine.WString(t);o.SetRenditionName(s),o.SetMediaClipName(s);var u=je.Z.createFile(this.engine,r,e);u.SetFileName(s),o.SetMediaClipFile(u);var c=new this.engine.String(n);o.SetMediaClipContentType(c),a.InsertRendition(o,-1),this.annot.SetAction(a),this.annot.ResetAppearanceStream(),(0,H.Z)(s,c,o,a),this.action=this.JR.actionManager.get(i,this.doc,this.JR)}},{key:"setImage",value:function(e){try{var t=pt.Z.createImage(this.engine,e);this.annot.SetImage(t,0,0),this.annot.ResetAppearanceStream(),this.updateModifyTime()}catch(e){var n=this.engine,r=(0,a._)(e,n.ErrorCode)?n.getErrorCode(e):e;return l.mA.getLogger("setImage").warn(r),!1}return!0}},{key:"setOpacity",value:function(e){var t=this.annot;return e=+e,t.SetOpacity(e),t.ResetAppearanceStream(),[this.getId()]}},{key:"setRotation",value:function(e){var t=this.annot,n=this.engine.Rotation,r={0:n.e_Rotation0,90:n.e_Rotation90,180:n.e_Rotation180,270:n.e_Rotation270};return t.SetRotation(r[e]),t.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"setBorderStyle",value:function(e,t){return(0,M._)((0,O._)(i.prototype),"setBorderStyle",this).call(this,e,t),[this.getId()]}},{key:"setTitle",value:function(e){var t=this.annot,n=new this.engine.WString(e);return t.SetTitle(n),R.Z.updateModifyTime(this.engine,t),n.delete(),[this.getId()]}},{key:"removeAction",value:function(e,t){var n=this,r=this.engine,i=this.pdfPage.pdfDoc.doc,a=this.annot;if(this.updateModifyTime(),"-1"==e){var o=a.GetAction();return o=(0,ct.Z)(r,i,o,t),t&&o?(a.SetAction(o),[this.JR.actionManager.get(o,this,this.JR).toJson()]):(a.RemoveAction(),[])}return e=r.TriggerEvent.values[e],[a.GetDict()].map((function(a){if(a){var o,s=(0,W.n5)(r,"AA"),u=a.GetElement(s);if(u){var c=u.GetDict();if(o=new r.AdditionalAction(i,c),t){var l=o.GetAction(e);if(l.IsEmpty())return;if(l=(0,ct.Z)(r,i,l,t))return o.SetAction(e,l),n.JR.actionManager.get(l,n,n.JR).toJson();o.RemoveAction(e)}else o.RemoveAction(e)}}}))}},{key:"moveAction",value:function(e){var t=e.trigger,n=e.action,r=e.direction,i=this.engine;t=i.TriggerEvent.values[t];var a=this.pdfPage.pdfDoc.doc,o=this.annot.GetDict();if(o){var s,u=(0,W.n5)(i,"AA"),c=o.GetElement(u);if(c){var l=c.GetDict(),d=(s=new i.AdditionalAction(a,l)).GetAction(t);if(!d.IsEmpty()){for(var f=d.GetSubActionCount(),h=[d],g=0;g<f;g++)h.push(d.GetSubAction(g));var p=h.findIndex((function(e){return e.GetDict().GetObjNum()===n.objNumber}));if(-1!=p){var v=r?p+1:p-1;if(0==v||0==p){s.RemoveAction(t);var _=0==p?v:p;d=h[_],s.SetAction(t,d),h[0].RemoveAllSubActions(),h.splice(_,1);for(var m=0;m<h.length;m++)d.InsertSubAction(m,h[m])}else{var y;d.RemoveAllSubActions(),y=[h[v],h[p]],h[p]=y[0],h[v]=y[1];for(var S=1;S<h.length;S++)d.InsertSubAction(S,h[S])}this.updateModifyTime()}}}}}},{key:"getBitmapBuffer",value:function(){var e=this.annot.GetBitmap();return ot(this.engine,e)}},{key:"destroy",value:function(){this.action&&this.action.destroy(),(0,M._)((0,O._)(i.prototype),"destroy",this).call(this)}}]),i}(R.Z),yt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Popup(e)}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),n=this.annot;return t.openStatus=n.GetOpenStatus(),t}},{key:"create",value:function(e){(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);var t=(e.open||"no").toString();"yes"===t||"true"===t?this.setOpenStatus(!0):this.setOpenStatus(!1);var n=e.popId;return n&&this.annot.SetUniqueID((0,W.Dp)(this.engine,n)),[this]}},{key:"setOpenStatus",value:function(e){return this.annot.SetOpenStatus(e),this.updateModifyTime(),e}}]),i}(R.Z),St=__webpack_require__(1828),bt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a){var o;return(0,t._)(this,i),(o=n.call(this,e,r,a)).gsdkIDs=[o.engine.StandardID.e_StdIDCourier,o.engine.StandardID.e_StdIDCourierB,o.engine.StandardID.e_StdIDCourierBI,o.engine.StandardID.e_StdIDCourierI,o.engine.StandardID.e_StdIDHelvetica,o.engine.StandardID.e_StdIDHelveticaB,o.engine.StandardID.e_StdIDHelveticaBI,o.engine.StandardID.e_StdIDHelveticaI,o.engine.StandardID.e_StdIDTimes,o.engine.StandardID.e_StdIDTimesB,o.engine.StandardID.e_StdIDTimesBI,o.engine.StandardID.e_StdIDTimesI,o.engine.StandardID.e_StdIDSymbol,o.engine.StandardID.e_StdIDZapfDingbats],o}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Redact(e)}},{key:"apply",value:function(){var e=this;if(!this.engine.Library.HasModuleLicenseRight({value:3}))return Promise.reject(St.v.noRedactionLicense);var t={},n=[];return this.pdfPage.getAnnots().then((function(n){return n.forEach((function(e){var n=e.getId();n&&(t[n]=e)})),e.annot.Apply()?e.pdfPage.update():new Error})).then((function(e){for(var r in t){t[r];-1===e.annotIds.indexOf(Number(r))&&n.push(r)}return n}))}},{key:"setRedactOverlayText",value:function(e){return this.engine.Library.HasModuleLicenseRight({value:3})?(void 0!==e&&(this.annot.SetOverlayText((0,W.Dp)(this.engine,e)),this.annot.ResetAppearanceStream()),this.updateModifyTime(),!0):Promise.reject(St.v.noRedactionLicense)}},{key:"removeRedactOverlayText",value:function(){return this.engine.Library.HasModuleLicenseRight({value:3})?(this.annot.RemoveOverlayText(),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0):Promise.reject(St.v.noRedactionLicense)}},{key:"setRedactOverlayTextAlignment",value:function(e){if(!this.engine.Library.HasModuleLicenseRight({value:3}))return Promise.reject(St.v.noRedactionLicense);var t=[this.engine.Alignment.e_AlignmentLeft,this.engine.Alignment.e_AlignmentCenter,this.engine.Alignment.e_AlignmentRight];return t[e]&&(this.annot.SetOverlayTextAlignment(t[e]),this.annot.ResetAppearanceStream()),this.updateModifyTime(),!0}},{key:"setRedactRepeat",value:function(e){return this.engine.Library.HasModuleLicenseRight({value:3})?(void 0!==e&&(this.annot.SetRepeat(e),this.annot.ResetAppearanceStream()),this.updateModifyTime(),!0):Promise.reject(St.v.noRedactionLicense)}},{key:"setRedactAutoFontSize",value:function(e){return this.engine.Library.HasModuleLicenseRight({value:3})?(void 0!==e&&(this.annot.SetAutoFontSize(e),this.annot.ResetAppearanceStream()),this.updateModifyTime(),!0):Promise.reject(St.v.noRedactionLicense)}},{key:"getRedactDefaultAppearance",value:function(){if(!this.engine.Library.HasModuleLicenseRight({value:3}))return Promise.reject(St.v.noRedactionLicense);var e=this.annot.GetDefaultAppearance(),t=e.font,n={textColor:e.text_color,textSize:e.text_size};return t.IsEmpty()||(n.fontName=t.GetName().toString()),n}},{key:"setRedactDefaultAppearance",value:function(e){if(!this.engine.Library.HasModuleLicenseRight({value:3}))return Promise.reject(St.v.noRedactionLicense);var t,n=this.annot.GetDefaultAppearance(),r=e.textColor,i=e.textSize,a=e.fontName;if(void 0===r&&(r=n.text_color),void 0===i&&(i=n.text_size),a){var o=(0,z.T2)(a);t=null!=o?new this.engine.Font(this.gsdkIDs[o]):new this.engine.Font((0,W.Dp)(this.engine,a),0,this.engine.Charset.e_CharsetANSI,0)}else n.font.IsEmpty()&&(t=new this.engine.Font(this.engine.StandardID.e_StdIDHelvetica));var s=((t=t||n.font)?this.engine.DefAPFlags.e_FlagFont.value:0)|this.engine.DefAPFlags.e_FlagTextColor.value|(i>0?this.engine.DefAPFlags.e_FlagFontSize.value:0),u=new this.engine.DefaultAppearance(s,t,i,r||16711680),c=this.annot.SetDefaultAppearance(u);return this.annot.ResetAppearanceStream(),this.updateModifyTime(),c}},{key:"setRedactOpacity",value:function(e,t){return this.engine.Library.HasModuleLicenseRight({value:3})?(this.annot.SetOpacity(e,t),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0):Promise.reject(St.v.noRedactionLicense)}},{key:"setRedactApplyFillColor",value:function(e){return this.engine.Library.HasModuleLicenseRight({value:3})?(this.annot.SetApplyFillColor(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0):Promise.reject(St.v.noRedactionLicense)}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e);t.quadPoints=this.getQuadPointsArray(),0===t.quadPoints.length?t.isArea=!0:t.isArea=!1,t.applyFillColor=this.annot.GetApplyFillColor(),t.fillColor=this.annot.GetFillColor(),t.overlayText=this.annot.GetOverlayText().toString(),t.justification=this.annot.GetOverlayTextAlignment().value+"";var n=this.annot.GetDefaultAppearance();if(t.defaultAppearance={flags:n.flags,textColor:n.text_color,textSize:n.text_size},!n.font.IsEmpty()){var r=n.font.GetName().toString();t.fontName=z.mz[r]}t.isRepeat=this.annot.GetRepeat(),t.isOverlayCode=this.annot.HasOverlayCode(),t.overlayCode=[];for(var a=this.annot.GetOverlayCode(),o=0;o<a.GetSize();o++)t.overlayCode.push(a.GetAt(o));return t}},{key:"getQuadPointsArray",value:function(){var e=[],t=this.annot.GetDict(),n=(0,W.n5)(this.engine,"QuadPoints");if(t.HasKey(n))for(var r=t.GetElement(n).GetArray(),i=r.GetElementCount()/8,a=0;a<i;a++){var o=[];o.push({x:r.GetElement(8*a).GetFloat(),y:r.GetElement(8*a+1).GetFloat()},{x:r.GetElement(8*a+2).GetFloat(),y:r.GetElement(8*a+3).GetFloat()},{x:r.GetElement(8*a+4).GetFloat(),y:r.GetElement(8*a+5).GetFloat()},{x:r.GetElement(8*a+6).GetFloat(),y:r.GetElement(8*a+7).GetFloat()}),e.push(o)}return e}},{key:"updateQuadPointsByCharIndex",value:function(e,t){try{if(-1===e||-1===t)return!1;if(e>t){var n=e;e=t,t=n}var r=this.pdfPage.getNormalTextPageSync(),i=r.GetTextRectCount(e,t-e+1);if(i<1)return r.delete(),!1;for(var a=this.engine,o=(new a.QuadPointsArray,a.QuadPoints,a.PointF),s=a.PDFArray.Create(),u=0,c=i;u<c;u++){var l=r.GetTextRect(u),d=r.GetBaselineRotation(u),f=l.top,h=l.right,g=l.bottom,p=l.left,v=new o(p,f),_=new o(h,f),m=new o(p,g),y=new o(h,g),S=void 0,b=void 0,D=void 0,P=void 0;switch(d.value%4){case 0:S=v,b=_,D=m,P=y;break;case 1:S=v,b=m,D=_,P=y;break;case 2:S=y,b=m,D=_,P=v;break;case 3:S=y,b=_,D=m,P=v}s.AddFloat(S.x),s.AddFloat(S.y),s.AddFloat(b.x),s.AddFloat(b.y),s.AddFloat(D.x),s.AddFloat(D.y),s.AddFloat(P.x),s.AddFloat(P.y)}var I=this.annot;return I.GetDict().SetAt((0,W.n5)(a,"QuadPoints"),s),I.ResetAppearanceStream(),r.delete(),this.updateModifyTime(),!0}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e))}}},{key:"create",value:function(e){return(0,M._)((0,O._)(i.prototype),"create",this).call(this,e)}},{key:"setRedactAppearance",value:function(e){var t,n=e.applyFillColor,r=e.isAutoFontSize,i=e.textColor,a=e.textSize,o=e.fontName,s=e.justification,u=e.isRepeat,c=e.overlayText,l=e.redactionCode,d=this.engine,f=this.annot.GetDefaultAppearance();if(void 0!==n&&this.annot.SetApplyFillColor(n),void 0!==r&&this.annot.SetAutoFontSize(r),i=void 0===i?f.text_color:i,a=void 0===a?f.text_size:parseFloat(a),o){var h=(0,z.T2)(o);t=null!=h?new d.Font(this.gsdkIDs[h]):new d.Font((0,W.Dp)(d,o),0,d.Charset.e_CharsetANSI,0)}else f.font.IsEmpty()&&(t=new d.Font(d.StandardID.e_StdIDHelvetica));var g=((t=t||f.font)?d.DefAPFlags.e_FlagFont.value:0)|d.DefAPFlags.e_FlagTextColor.value|(a>0?d.DefAPFlags.e_FlagFontSize.value:0),p=new d.DefaultAppearance(g,t,a,i||16711680);if(this.annot.SetDefaultAppearance(p),"0"===s&&this.annot.SetOverlayTextAlignment(d.Alignment.e_AlignmentLeft),"1"===s&&this.annot.SetOverlayTextAlignment(d.Alignment.e_AlignmentCenter),"2"===s&&this.annot.SetOverlayTextAlignment(d.Alignment.e_AlignmentRight),void 0!==u&&this.annot.SetRepeat(u),void 0!==c&&this.annot.SetOverlayText((0,W.Dp)(d,c)),l){var v=new d.Int32Array;l.forEach((function(e){return v.Add(e)})),this.annot.SetOverlayCode(v)}else this.annot.RemoveOverlayCode();return this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"removeOverlayText",value:function(){this.engine;return this.annot.RemoveOverlayText(),this.annot.ResetAppearanceStream(),!0}},{key:"setRedactFillColor",value:function(e,t){if("number"!=typeof e)throw new Error("Incorrect color value: ".concat(e));void 0===t&&(t=!1),e<0&&(e=0);var n=this.annot,r=this.engine;0===e?n.RemoveProperty({value:3}):(n.SetOpacity(n.GetOpacity(),t),n.SetFillColor&&n.SetFillColor(e)),n.ResetAppearanceStream(),R.Z.updateModifyTime(r,n)}}]),i}(Y);const Dt=bt;var Pt=function(e,t,n){var r=e.HEAPU8.buffer;return r.slice?r.slice(t,t+n):new Uint8Array(r,t,n).buffer},It=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a){var o;return(0,t._)(this,i),(o=n.call(this,e,r,a)).isAudioVideo=!0,o}return(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Sound(e)}},{key:"getSoundStream",value:function(){return this.annot.GetSoundStream()}},{key:"toJson",value:function(e){var t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this,e),n=this.engine;this.isAudioVideo||(t.action=this.action&&this.action.toJson()),t.opacity=this.getOpacity(),t.isAudioVideo=this.isAudioVideo;try{t.title=this.annot.GetTitle().toString();var r=this.getSoundStream(),a=this.annot.GetSamplingRate(),o=this.annot.GetBits(),s=this.annot.GetChannelCount();if(r){var u=r.GetDataSize(!1);if(u>0){var c=n._malloc(u);r.GetData(!1,u,c);var l=Pt(n,c,u);t.soundObj={data:l,sampleRate:a,sampleBits:o,channel:s,size:u},n._free(c)}}}catch(e){console.error(e)}var d=this.annot.GetDict(),f=d.GetElement((0,W.n5)(n,"AP"));if(f){var h=f.GetDirectObject().GetDict().GetElement((0,W.n5)(n,"N")),g=d.GetElement((0,W.n5)(n,"A")),p=g&&g.GetDirectObject();p&&(t.aObjNum=p.GetObjNum()),h&&h.GetDirectObject()&&(t.apObjNum=h.GetDirectObject().GetObjNum())}var v=d.GetElement((0,W.n5)(n,"MK")),_=v&&v.GetDirectObject().GetDict();if(_){var m=_.GetElement((0,W.n5)(n,"I")),y=m&&m.GetDirectObject();y&&(t.iObjNum=y.GetObjNum())}var S=d.GetElement((0,W.n5)(n,"Name"));return S&&(t.iconName=(S.GetName()||"").toString()),t}},{key:"setBorderColor",value:function(e){var t=this.annot;if(0==e)t.RemoveProperty({value:2});else{if(-1==e)return;t.SetBorderColor(e)}t.ResetAppearanceStream()}},{key:"getOpacity",value:function(){return this.annot.GetOpacity()}},{key:"getTitle",value:function(){return this.annot.GetTitle()}},{key:"create",value:function(e){e.rotate&&this.annot.SetRotation(this.engine.Rotation.values[e.rotate]),e.borderWidth&&this.setBorderWidth(e.borderWidth);var t=(0,M._)((0,O._)(i.prototype),"create",this).call(this,e);if(this.setBorderWidth(0),void 0!==e.opacity){var n=+e.opacity;this.setOpacity(n)}if(e.apObjNum){var r=this.doc,a=this.annot.GetDict(),o=this.engine,s=(0,W.n5)(o,"AP"),u=(0,W.n5)(o,"MK"),c=a.GetElement(s),l=a.GetElement(u);if(c||(c=o.PDFDictionary.Create().GetDict(),a.SetAt(s,c)),l||(l=o.PDFDictionary.Create().GetDict(),a.SetAt(u,l)),c.GetDirectObject().GetDict().SetAtReference((0,W.n5)(o,"N"),r.GetIndirectObject(+e.apObjNum),r),e.aObjNum){var d=(0,W.n5)(o,"A");a.GetElement(d)||a.SetAtReference(d,r.GetIndirectObject(+e.aObjNum),r);var f=this.annot.GetAction();f.IsEmpty()||(this.action=this.JR.actionManager.get(f,this.doc,this.JR),"ActionType_e_TypeRendition"==this.action.getType()&&(this.isAudioVideo=!0))}if(e.iObjNum){var h=l.GetDirectObject().GetDict();h.SetAtReference((0,W.n5)(o,"I"),r.GetIndirectObject(+e.iObjNum),r);var g=(0,W.n5)(o,"IF"),p=h.GetElement(g);p||(p=o.PDFDictionary.Create().GetDict(),h.SetAt(g,p));var v=p.GetDirectObject().GetDict(),_=(0,W.n5)(o,"FB"),m=(0,W.n5)(o,"P"),y=(0,W.n5)(o,"S"),S=o.PDFObject.CreateFromBoolean(!0),b=o.PDFObject.CreateFromName(m);v.SetAt(_,S),v.SetAt(y,b),(0,H.Z)(S,b)}}else e.multiBuffer&&(this.setMultiMedia(e.multiBuffer,e.fileName,e.contentType),this.isAudioVideo=!0),e.buffer?this.setImage(e.buffer):this.annot.ResetAppearanceStream();return t}},{key:"setMultiMedia",value:function(e,t,n){var r=this.annot.GetPage().GetDocument(),i=this.engine.Action.Create(r,this.engine.ActionType.e_TypeRendition),a=new this.engine.RenditionAction(i);a.SetOperationType(this.engine.OperationType.e_OpTypeAssociate),a.SetScreenAnnot(this.annot);var o=new this.engine.Rendition(r,null),s=new this.engine.WString(t);o.SetRenditionName(s),o.SetMediaClipName(s);var u=je.Z.createFile(this.engine,r,e);u.SetFileName(s),o.SetMediaClipFile(u);var c=new this.engine.String(n);o.SetMediaClipContentType(c),a.InsertRendition(o,-1),this.annot.SetAction(a),this.annot.ResetAppearanceStream(),(0,H.Z)(s,c,o,a),this.action=this.JR.actionManager.get(i,this.doc,this.JR)}},{key:"setImage",value:function(e){try{var t=pt.Z.createImage(this.engine,e);this.annot.SetImage(t,0,0),this.annot.ResetAppearanceStream(),this.updateModifyTime()}catch(e){var n=this.engine,r=(0,a._)(e,n.ErrorCode)?e:n.getErrorCode(e);console.warn(r)}return!0}},{key:"setOpacity",value:function(e){var t=this.annot;return e=+e,t.SetOpacity(e),t.ResetAppearanceStream(),[this.getId()]}},{key:"setRotation",value:function(e){var t=this.annot,n=this.engine.Rotation,r={0:n.e_Rotation0,90:n.e_Rotation90,180:n.e_Rotation180,270:n.e_Rotation270};return t.SetRotation(r[e]),t.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"setBorderStyle",value:function(e,t){return(0,M._)((0,O._)(i.prototype),"setBorderStyle",this).call(this,e,t),[this.getId()]}},{key:"removeAction",value:function(){return this.annot.RemoveAction(),this.updateModifyTime(),!0}}]),i}(Y),At=(function(e){(0,x._)(r,e);var n=(0,B._)(r);function r(e,i,a){return(0,t._)(this,r),n.call(this,e,i,a)}}(Y),function(){function e(n){(0,t._)(this,e),this.engine=n}return(0,r._)(e,[{key:"get",value:function(e,t,n){var r=this.engine.AnnotType;switch(e.GetType()){case r.e_Highlight:return new $(e,t,n);case r.e_Squiggly:return new xe(e,t,n);case r.e_StrikeOut:return new te(e,t,n);case r.e_Underline:return new re(e,t,n);case r.e_Line:return new ke(e,t,n);case r.e_PolyLine:return new Fe(e,t,n);case r.e_FileAttachment:return new We(e,t,n);case r.e_Note:return new Ne(e,t,n);case r.e_Circle:return new Le(e,t,n);case r.e_Caret:return new ze(e,t,n);case r.e_Polygon:return new Me(e,t,n);case r.e_FreeText:return new Ze(e,t,n);case r.e_Square:return new Ke(e,t,n);case r.e_Sound:return new It(e,t,n);case r.e_Ink:return new ht(e,t,n);case r.e_Stamp:return new ut(e,t,n);case r.e_Link:return new dt(e,t,n);case r.e_Screen:return new mt(e,t,n);case r.e_Widget:return new gt.Z(e,t,n);case r.e_Popup:return new yt(e,t,n);case r.e_Redact:return new Dt(e,t,n);default:return new R.Z(e,t,n)}}}]),e}());const wt=At;var Ct=function(){function e(n,r,i,a){(0,t._)(this,e),this.engine=i,this.doc=r,this.JR=a,this.originAction=n,this.action=this.createAction(n),this.initSubActions()}return(0,r._)(e,[{key:"createAction",value:function(e){return e}},{key:"destroy",value:function(){this.subAction.forEach((function(e){e.destroy()})),this.subAction=[],this.action.delete(),this.originAction.delete()}},{key:"toJson",value:function(){var e=this.getType().replace(/^ActionType_e_/,""),t=[],n=this.action.GetDict().GetObjNum(),r=this.action.GetSubActionCount();return this.subAction.forEach((function(e){t.push(e.toJson())})),{objNumber:n,type:e,subAction:t,subActionCount:r}}},{key:"setActionDataByIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this,r=1;r<=t;r++)n=n.subAction[0];return n.setActionData(e),this}},{key:"setSubAction",value:function(e,t){var n,r="[object Object]"===Object.prototype.toString.call(t);n=r?this.JR.actionManager.create(this.doc,t.type):this.JR.actionManager.create(this.doc,t),this.action.SetSubAction(e,n);var i=this.JR.actionManager.get(this.action.GetSubAction(e),this.doc,this.JR);return r&&i.create(t),this.initSubActions(),i}},{key:"insertSubAction",value:function(e,t){var n=this.action.GetSubActionCount();e=Math.max(0,Math.min(n,e));var r,i="[object Object]"===Object.prototype.toString.call(t);r=i?this.JR.actionManager.create(this.doc,t.type):this.JR.actionManager.create(this.doc,t),this.action.InsertSubAction(e,r);var a=this.JR.actionManager.get(this.action.GetSubAction(e),this.doc,this.JR);return i&&a.create(t),this.initSubActions(),a}},{key:"removeAllSubActions",value:function(){this.action.RemoveAllSubActions(),this.initSubActions()}},{key:"removeSubAction",value:function(e){this.action.RemoveSubAction(e),this.initSubActions()}},{key:"isEmpty",value:function(){return this.action.IsEmpty()}},{key:"getType",value:function(){return this.action.GetType().constructor.name}},{key:"setActionData",value:function(e){return!1}},{key:"initSubActions",value:function(){var e=this.action.GetSubActionCount();if(this.subAction=[],e>0)for(var t=0;t<e;t++)this.subAction.push(this.JR.actionManager.get(this.action.GetSubAction(t),this.doc,this.JR))}},{key:"create",value:function(e){}}],[{key:"create",value:function(e,t,n){var r=e.Action.Create(t,n);return n===e.ActionType.e_TypeSetOCGState?new e.SetOCGStateAction(r):n===e.ActionType.e_TypeThread?new e.ThreadAction(r):r}}]),e}(),kt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.URIAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);return e.uri=this.getURI(),e}},{key:"setActionData",value:function(e){return this.setURI(e.uri),!0}},{key:"create",value:function(e){return e.uri&&this.setURI(e.uri),!0}},{key:"getURI",value:function(){var e,t=this.action.GetURI();try{e=t.toString()}catch(s){isNaN(s)||(s=this.engine.getErrorCode(s)),console.warn(s);for(var n="",r=t.GetLength(),i=t.GetBuffer(),a=0;a<r;a++){var o=this.engine.HEAP8[i+a]>>>0&255;n+=String.fromCharCode(o)}e=n}return e}},{key:"setURI",value:function(e){var t=new this.engine.String(e);this.action.SetURI(t),t.delete()}}]),i}(Ct),Et=__webpack_require__(6550),Gt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.GotoAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this),t=this.getDestination();return e.destination=t.toJson(),e}},{key:"getDestination",value:function(){return new Et.Z(this.action.GetDestination(),this.doc,this.engine)}},{key:"setActionData",value:function(e){return this.setDestination(e.destination||e)}},{key:"create",value:function(e){if(e.destination)return this.setDestination(e.destination)}},{key:"setDestination",value:function(e){var t=this.doc;t.doc&&(t=t.doc);var n=Et.Z.create(this.engine,t,e);return this.action.SetDestination(n),!0}}]),i}(Ct),Tt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.LaunchAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this),t=this.getFileSpec();return e.fileSpec=t.toJson(),e}},{key:"getFileSpec",value:function(){return this.fileSpec=new je.Z(this.action.GetFileSpec(),this)}},{key:"setActionData",value:function(e){try{if(e.fileSpec)return this.create(e);e.buffer&&this.setFileSpec(e)}catch(e){return!1}return!0}},{key:"create",value:function(e){if(e.fileSpec){var t=new this.engine.FileSpec(this.doc);return t.SetFileName((0,W.Dp)(this.engine,e.fileSpec.fileName)),this.action.SetFileSpec(t),!0}try{e.buffer&&this.setFileSpec(e)}catch(e){return!1}return!0}},{key:"setFileSpec",value:function(e){var t=je.Z.createFile(this.engine,this.doc,e.fileData||new ArrayBuffer),n=new je.Z(t,this);return n.setFileName(e.fileName),e.description&&n.setDescription(e.description),e.modifiedDateTime&&n.setModifiedDateTime(e.modifiedDateTime),e.subtype&&n.setSubtype(e.subtype),this.action.SetFileSpec(t),this.toJson()}}]),i}(Ct),Ft=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.NamedAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);return e.name=this.getName(),e}},{key:"setActionData",value:function(e){try{this.setName(e.name)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{this.setName(e.name)}catch(e){return!1}return!0}},{key:"getName",value:function(){return this.JR.getPDFString(this.action.GetName())}},{key:"setName",value:function(e){var t=new this.engine.String(e);this.action.SetName(t),t.delete()}}]),i}(Ct),Rt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.JavaScriptAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);return e.javascript=this.getScript(),e}},{key:"setActionData",value:function(e){try{this.setScript(e.script||e.javascript)}catch(e){return!1}return!0}},{key:"create",value:function(e){var t=e.script;t||(t=e.javascript);try{t&&this.setScript(t)}catch(e){return!1}return!0}},{key:"getScript",value:function(){return this.JR.getPDFString(this.action.GetScript())}},{key:"setScript",value:function(e){var t=this.engine,n=(0,W.Dp)(t,e);this.action.GetDict().SetAtWString((0,W.n5)(t,"JS"),n),n.delete()}}]),i}(Ct),Mt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.SubmitFormAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);return e.flags=this.getFlags(),e.url=this.getURL(),e.fieldNames=this.getFieldNames(),e}},{key:"setActionData",value:function(e){try{this.setFlags(e.flags||0),e.url&&this.setURL(e.url),e.fieldNames&&this.setFieldNames(e.fieldNames)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{e.flags&&this.setFlags(e.flags),e.url&&this.setURL(e.url),e.fieldNames&&this.setFieldNames(e.fieldNames)}catch(e){return!1}return!0}},{key:"getFieldNames",value:function(){for(var e=this.action.GetFieldNames(),t=[],n=e.GetSize(),r=0;r<n;r++)t.push(this.JR.getPDFString(e.GetAt(r)));return t}},{key:"getFlags",value:function(){return this.action.GetFlags()}},{key:"getURL",value:function(){var e=this.action.GetURL();return 0===e.GetLength()?null:this.JR.getPDFString(e)}},{key:"setFieldNames",value:function(e){var t=this,n=new this.engine.WStringArray;e.forEach((function(e){var r=new t.engine.WString(e);n.Add(r),r.delete()}));var r=this.action.SetFieldNames(n);return n.delete(),r}},{key:"setFlags",value:function(e){return this.action.SetFlags(Number(e))}},{key:"setURL",value:function(e){return this.action.SetURL(new this.engine.String(e))}}]),i}(Ct),Ot=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.ResetFormAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);return e.flags=this.getFlags(),e.fieldNames=this.getFieldNames(),e}},{key:"setActionData",value:function(e){try{e.flags&&this.setFlags(e.flags),e.fieldNames&&this.setFieldNames(e.fieldNames)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{e.flags&&this.setFlags(e.flags),e.fieldNames&&this.setFieldNames(e.fieldNames)}catch(e){return!1}return!0}},{key:"getFieldNames",value:function(){for(var e=this.action.GetFieldNames(),t=[],n=e.GetSize(),r=0;r<n;r++)t.push(this.JR.getPDFString(e.GetAt(r)));return t}},{key:"getFlags",value:function(){return this.action.GetFlags()}},{key:"setFieldNames",value:function(e){var t=this,n=new this.engine.WStringArray;e.forEach((function(e){var r=new t.engine.WString(e);n.Add(r),r.delete()}));var r=this.action.SetFieldNames(n);return n.delete(),r}},{key:"setFlags",value:function(e){return this.action.SetFlags(Number(e))}}]),i}(Ct),xt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.ImportDataAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this),t=this.getFDFFileSpec();return e.fileSpec=t.toJson(),e}},{key:"setActionData",value:function(e){try{if(e.fileSpec)return this.create(e);e.buffer&&this.setFDFFileSpec(e)}catch(e){return!1}return!0}},{key:"create",value:function(e){if(e.fileSpec){var t=new this.engine.FileSpec(this.doc);return t.SetFileName((0,W.Dp)(this.engine,e.fileSpec.fileName)),this.action.SetFDFFileSpec(t),!0}try{e.buffer&&this.setFDFFileSpec(e)}catch(e){return!1}return!0}},{key:"getFDFFileSpec",value:function(){return this.fileSpec=new je.Z(this.action.GetFDFFileSpec(),this)}},{key:"setFDFFileSpec",value:function(e){var t=je.Z.createFile(this.engine,this.doc,e.buffer);new je.Z(t,this).setFileName(e.fileName),this.action.SetFDFFileSpec(t)}}]),i}(Ct),Bt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.RenditionAction(e)}},{key:"toJson",value:function(){for(var e=this,t=function(t){var n=e.action.GetRendition(t),r=n.GetMediaClipContentType(),i=void 0;try{i=r.toString()}catch(t){for(var o="",s=r.GetLength(),u=r.GetBuffer(),c=0;c<s;c++){var l=e.engine.HEAP8[u+c]>>>0&255;o+=String.fromCharCode(l)}i=o}var d=n.GetMediaClipFile(),f=d.GetFileName().toString(),h=new je.Z(d,e),g=h.getFileSize(),p=new Uint8Array(g);h.getStream((function(e,t,n){var r=new Uint8Array(e);p.set(r,t)})),a.push({fileSize:g,fileName:f,contentType:i,buffer:p})},n=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this),r=this.action.GetRenditionCount(),a=[],o=0;o<r;o++)t(o);return n.renditions=a,n}}]),i}(Ct),Nt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.HideAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);return e.fieldNames=this.getFieldNames(),e.hideState=this.getHideState(),e}},{key:"getFieldNames",value:function(){for(var e=this.action.GetFieldNames(),t=[],n=0;n<e.GetSize();n++){var r=e.GetAt(n);t.push(r.toString()),r.delete()}return e.delete(),t}},{key:"getHideState",value:function(){return this.action.GetHideState()}},{key:"setActionData",value:function(e){try{this.setFieldNames(e.fieldNames),this.setHideState(e.hideState)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{e.fieldNames&&this.setFieldNames(e.fieldNames),this.setHideState(e.hideState)}catch(e){return!1}return!0}},{key:"setFieldNames",value:function(e){var t=this,n=new this.engine.WStringArray;e.forEach((function(e){var r=new t.engine.WString(e);n.Add(r),r.delete()}));var r=this.action.SetFieldNames(n);return n.delete(),r}},{key:"setHideState",value:function(e){return this.action.SetHideState(e)}}]),i}(Ct),Lt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.RemoteGotoAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);e.destinationName=this.getDestinationName();var t=this.getDestination();e.destination=t.toJson();var n=this.getFileSpec();return e.fileSpec=n.toJson(),e.newWindowFlag=this.getNewWindowFlag(),e}},{key:"getDestinationName",value:function(){return this.JR.getPDFString(this.action.GetDestinationName())}},{key:"getDestination",value:function(){return new Et.Z(this.action.GetDestination(),this.doc,this.engine)}},{key:"getFileSpec",value:function(){return this.fileSpec=new je.Z(this.action.GetFileSpec(),this)}},{key:"getNewWindowFlag",value:function(){return this.action.GetNewWindowFlag().value}},{key:"setActionData",value:function(e){this.setDestination(e),e.destinationName&&this.setDestinationName(e.destinationName),this.setFileSpec(e.buffer,e.fileName),e.newWindowFlag&&this.setNewWindowFlag(e.newWindowFlag)}},{key:"create",value:function(e){this.setDestination(e.destination),e.destinationName&&this.setDestinationName(e.destinationName),this.setFileSpec(e.buffer,e.fileName),e.newWindowFlag&&this.setNewWindowFlag(e.newWindowFlag)}},{key:"setDestination",value:function(e){var t=this.doc,n=null;switch(e.type){case"ZoomXYZ":n=Et.Z.createXYZ;break;case"ZoomFitPage":n=Et.Z.createFitPage;break;case"ZoomFitHorz":n=Et.Z.createFitHorz;break;case"ZoomFitVert":n=Et.Z.createFitVert;break;case"ZoomFitRect":n=Et.Z.createFitRect;break;case"ZoomFitBBox":n=Et.Z.createFitBBox;break;case"ZoomFitBHorz":n=Et.Z.createFitBHorz;break;default:n=Et.Z.createFitBVert}var r=n(this.engine,t,e);return this.action.SetDestination(r),!0}},{key:"setDestinationName",value:function(e){return this.action.SetDestinationName(e),!0}},{key:"setFileSpec",value:function(e,t){var n=je.Z.createFile(this.engine,this.doc,e);new je.Z(n,this).setFileName(t),this.action.SetFileSpec(n)}},{key:"setNewWindowFlag",value:function(e){var t=[this.engine.NewWindowFlag.e_NewWindowFlagFalse,this.engine.NewWindowFlag.e_NewWindowFlagTrue,this.engine.NewWindowFlag.e_NewWindowFlagNone];this.action.SetNewWindowFlag(t[e])}}]),i}(Ct),jt=function(){function e(n,r,i){(0,t._)(this,e),this.engine=r,this.doc=i,this.embeddedGotoTarget=n}return(0,r._)(e,[{key:"toJson",value:function(){var e,t=this.getAttachedFileName(),n=this.getFileAttachmentAnnotIndex(),r=this.getPageIndex(),i=this.getRelationship(),a=this.embeddedGotoTarget.GetTarget();if(!a.IsEmpty()){var o=new this.constructor(a);e=o.toJson(),o.destroy()}return a.delete(),{attachedFileName:t,fileAttachmentAnnotIndex:n,pageIndex:r,relationship:i,target:e}}},{key:"getAttachedFileName",value:function(){return this.embeddedGotoTarget.GetAttachedFileName().toString()}},{key:"getFileAttachmentAnnotIndex",value:function(){return this.embeddedGotoTarget.GetFileAttachmentAnnotIndex()}},{key:"getPageIndex",value:function(){return this.embeddedGotoTarget.GetPageIndex()}},{key:"getRelationship",value:function(){return this.embeddedGotoTarget.GetRelationship().toString()}},{key:"getTarget",value:function(){return new this.constructor(this.embeddedGotoTarget.GetTarget())}},{key:"setAttachedFileName",value:function(e){var t=new this.engine.WString(e);this.embeddedGotoTarget.SetAttachedFileName(t),t.delete()}},{key:"setFileAttachmentAnnotIndex",value:function(e){this.embeddedGotoTarget.SetFileAttachmentAnnotIndex(e)}},{key:"setPageIndex",value:function(e){this.embeddedGotoTarget.SetPageIndex(e)}},{key:"setRelationship",value:function(e){var t=new this.engine.String(e);this.embeddedGotoTarget.SetRelationship(t),t.delete()}},{key:"setTarget",value:function(e){var t=e.attachedFileName,n=e.fileAttachmentAnnotIndex,r=e.pageIndex,i=e.relationship,a=e.target,o=this.constructor.create(this.engine,this.doc),s=new this.constructor(o,this.engine,this.doc);t&&s.setAttachedFileName(t),n>=0&&s.setFileAttachmentAnnotIndex(n),r>=0&&s.setPageIndex(r),i&&s.setRelationship(i),a&&s.setTarget(a),this.embeddedGotoTarget.SetTarget(o)}}],[{key:"create",value:function(e,t){return new e.EmbeddedGotoTarget(t)}}]),e}(),Ut=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){return(0,t._)(this,i),n.apply(this,arguments)}return(0,r._)(i,[{key:"createAction",value:function(e){return new this.engine.EmbeddedGotoAction(e)}},{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);e.destinationName=this.getDestinationName();var t=this.getDestination();e.destination=t.toJson();var n=this.getRootFile();return e.rootFile=n.toJson(),e.newWindowFlag=this.getNewWindowFlag(),this.action.GetTarget().IsEmpty()||(e.target=this.getTarget().toJson()),e}},{key:"getDestinationName",value:function(){return this.JR.getPDFString(this.action.GetDestinationName())}},{key:"getDestination",value:function(){return new Et.Z(this.action.GetDestination(),this.doc,this.engine)}},{key:"getRootFile",value:function(){return this.fileSpec=new je.Z(this.action.GetRootFile(),this)}},{key:"getNewWindowFlag",value:function(){return this.action.GetNewWindowFlag().value}},{key:"getTarget",value:function(){return new jt(this.action.GetTarget(),this.engine,this.doc)}},{key:"setActionData",value:function(e){this.setDestination(e),e.destinationName&&this.setDestinationName(e.destinationName),e.buffer&&this.setRootFile(e.buffer,e.fileName),e.newWindowFlag&&this.setNewWindowFlag(e.newWindowFlag),this.setTarget(e.target)}},{key:"create",value:function(e){this.setDestination(e.destination),e.destinationName&&this.setDestinationName(e.destinationName),e.buffer&&this.setRootFile(e.buffer,e.fileName),e.newWindowFlag&&this.setNewWindowFlag(e.newWindowFlag),e.target&&this.setTarget(e.target)}},{key:"setDestination",value:function(e){var t=this.doc,n=null;switch(e.type){case"ZoomXYZ":n=Et.Z.createXYZ;break;case"ZoomFitPage":n=Et.Z.createFitPage;break;case"ZoomFitHorz":n=Et.Z.createFitHorz;break;case"ZoomFitVert":n=Et.Z.createFitVert;break;case"ZoomFitRect":n=Et.Z.createFitRect;break;case"ZoomFitBBox":n=Et.Z.createFitBBox;break;case"ZoomFitBHorz":n=Et.Z.createFitBHorz;break;default:n=Et.Z.createFitBVert}var r=n(this.engine,t,e);return this.action.SetDestination(r),!0}},{key:"setDestinationName",value:function(e){return this.action.SetDestinationName(e),!0}},{key:"setRootFile",value:function(e,t){var n=je.Z.createFile(this.engine,this.doc,e);new je.Z(n,this).setFileName(t);try{this.action.SetRootFile(n)}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}}},{key:"setNewWindowFlag",value:function(e){var t=[this.engine.NewWindowFlag.e_NewWindowFlagFalse,this.engine.NewWindowFlag.e_NewWindowFlagTrue,this.engine.NewWindowFlag.e_NewWindowFlagNone];this.action.SetNewWindowFlag(t[e])}},{key:"setTarget",value:function(e){var t=e.attachedFileName,n=e.fileAttachmentAnnotIndex,r=e.pageIndex,i=e.relationship,a=e.target,o=jt.create(this.engine,this.doc),s=new jt(o,this.engine,this.doc);t&&s.setAttachedFileName(t),n>=0&&s.setFileAttachmentAnnotIndex(n),r>=0&&s.setPageIndex(r),i&&s.setRelationship(i),a&&s.setTarget(a),this.action.SetTarget(o)}}]),i}(Ct),Wt=__webpack_require__(7083),Ht=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a,o){var s;(0,t._)(this,i),(s=n.call(this,e,r,a,o)).action=new s.engine.SetOCGStateAction(e);var u=r.doc||r;return s.pdflayer=new Wt.Z(u,a),s}return(0,r._)(i,[{key:"toJson",value:function(){for(var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this),t=[],n=[],r=this.action.GetOCGStateCount(),a=0;a<r;a++)for(var o=this.action.GetOCGStateArray(a),s=o.GetSize(),u=0;u<s;u++){var c=o.GetAt(u).GetObjNum();0===a?t.push(c):n.push(c)}return e.visibleLayerIds=t,e.hideLayerIds=n,e}},{key:"setOCGState",value:function(e,t){var n=this.engine.OCGState,r=n.e_OCGStateOff,i=n.e_OCGStateOn;return e.length>0&&this._setState(e,r),t.length>0&&this._setState(t,i),this.toJson()}},{key:"_setState",value:function(e,t){for(var n=new this.engine.PDFDictionaryArray,r=0;r<e.length;r++){var i=this.pdflayer.getLayerNodeById(e[r]).layer_node;n.Add(i.GetDict())}this.action.InsertOCGStates(this.doc,0,t,n)}},{key:"setActionData",value:function(e){this.create(e)}},{key:"create",value:function(e){var t=e.hideLayerIds,n=e.visibleLayerIds;try{return this.setOCGState(t,n)}catch(e){return console.error(e),!1}}}]),i}(Ct),zt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a,o){var s;return(0,t._)(this,i),(s=n.call(this,e,r,a,o)).doc=r,s.engine=a,s.action=new s.engine.ThreadAction(e),s}return(0,r._)(i,[{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this);return this.action.IsDestThreadInCurrentDoc()?(e.dest_thread=this.action.GetDestinationThread(),e.dest_thread_index=this.action.GetDestinationThreadIndex(),e.dest_thread_title=this.action.GetDestinationThreadTitle().toString()):e.file_spec=this.action.GetFileSpec(),e}},{key:"setActionData",value:function(e){try{this.setThreadIndex(e.dest_thread_index)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{this.setThreadIndex(e.dest_thread_index)}catch(e){console.error(e)}return!0}},{key:"setThreadIndex",value:function(e){var t=new this.engine.FileSpec(this.doc);this.action.SetDestinationThreadIndex(t,e)}}]),i}(Ct),Kt=function(){function e(n){(0,t._)(this,e),this.engine=n}return(0,r._)(e,[{key:"get",value:function(e,t,n){var r=this.engine,i=r.ActionType;switch(e&&!e.IsEmpty()&&e.GetType()||null){case i.e_TypeThread:return new zt(e,t,r,n);case i.e_TypeSetOCGState:return new Ht(e,t,r,n);case i.e_TypeURI:return new kt(e,t,r,n);case i.e_TypeLaunch:return new Tt(e,t,r,n);case i.e_TypeNamed:return new Ft(e,t,r,n);case i.e_TypeJavaScript:return new Rt(e,t,r,n);case i.e_TypeResetForm:return new Ot(e,t,r,n);case i.e_TypeSubmitForm:return new Mt(e,t,r,n);case i.e_TypeImportData:return new xt(e,t,r,n);case i.e_TypeGoto:return new Gt(e,t,r,n);case i.e_TypeRendition:return new Bt(e,t,r,n);case i.e_TypeHide:return new Nt(e,t,r,n);case i.e_TypeGoToR:return new Lt(e,t,r,n);case i.e_TypeGoToE:return new Ut(e,t,r,n);case i.e_TypeUnknown:case i.e_TypeSound:case i.e_TypeMovie:case i.e_TypeTrans:case i.e_TypeGoTo3DView:default:return new Ct(e,t,r,n)}}},{key:"create",value:function(e,t){var n=this.engine.ActionType;return Ct.create(this.engine,e,n["e_"+t])}},{key:"getActionByDict",value:function(e,t){return new this.engine.Action(e,t)}}]),e}(),Jt=function(){function e(n,r,i,a,o){(0,t._)(this,e),this.id=(0,l.Ki)("graphics_object"),this.engine=a,this.c_page=r,!i.objectMap&&(i.objectMap=new Map),i.objectMap.set(n,this.id),this.parent=i,this.graphicsObject=n,this.jr=o}return(0,r._)(e,[{key:"getType",value:function(){var e=this.graphicsObject.GetType();return e?e.value:-1}},{key:"isParentPage",value:function(){return!this.parent.c_page}},{key:"toJson",value:function(){for(var e=this.graphicsObject,t=(e.GetBlendMode().value,e.GetFillColor()),n=e.GetStrokeColor(),r=e.GetGraphState(),i=[],a=0;a<r.dashes.GetSize();a++)i.push(r.dashes.GetAt(a));var o=e.GetMatrix(),s=o,u=e.GetRect();if(!this.isParentPage()){var c=this.parent.matrix;c.TransformRect(u),(s=new this.engine.Matrix(c.a,c.b,c.c,c.d,c.e,c.f)).Concat(o.a,o.b,o.c,o.d,o.e,o.f,!1)}return{id:this.id,graphState:{dashes:i,lineCap:r.line_cap.value,lineJoin:r.line_join.value,lineWidth:r.line_width,lineLimit:r.line_limit},fillColor:t,strokeColor:n,hasTransparency:e.HasTransparency(),type:e.GetType()?e.GetType().value:-1,matrix:{a:s.a,b:s.b,c:s.c,d:s.d,e:s.e,f:s.f},rect:{left:u.left,top:u.top,right:u.right,bottom:u.bottom}}}},{key:"setMatrix",value:function(e){var t=new this.engine.Matrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,this.graphicsObject.SetMatrix(t),this.c_page.GenerateContent(),t.delete}},{key:"setRect",value:function(e){var t=this.graphicsObject.GetMatrix(),n=this.graphicsObject.GetRect();if(!n.IsEmpty()){var r=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);if(!r.IsEmpty()){if(!this.isParentPage()){var i=new this.engine.Matrix;i.SetReverse(this.parent.matrix),i.TransformRect(r)}var a=new this.engine.Matrix;a.MatchRect(r,n),this.graphicsObject.Transform(a,!0),r.delete(),this.c_page.GenerateContent(),t.delete()}}}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.engine,r=this.graphicsObject.GetRect(),i=new n.Matrix;if(i.d=-1,i.f=r.Height(),i.Scale(e,e,!1),this.isParentPage())i.Rotate(this.c_page.GetRotation().value*Math.PI/2+t/180*Math.PI,0);else{var a=this.parent.getMatrix(),o=new n.Matrix(a.a,a.b,a.c,a.d,a.e,a.f),s=new n.Matrix;s.Rotate(-this.c_page.GetRotation().value*Math.PI/2+t/180*Math.PI,0),o.Concat(s,!1),o.Concat(i,!1),s.delete(),i.delete(),i=o}i.TransformRect(r),i.e-=r.left,i.f-=r.bottom;var u=r.Width(),c=r.Height(),l=Math.max(u*e,1),d=Math.max(c*e,1),f=new n.Bitmap(l,d,n.DIBFormat.e_DIBArgb,0,0),h=new n.Renderer(f,!0);h.RenderGraphicsObject(this.graphicsObject,this.c_page,i);var g=f;l=g.GetWidth(),d=g.GetHeight();var p,v=g.GetBuffer(),_=d*g.GetPitch(),m=v+_;return p=n.HEAPU8.buffer.slice?n.HEAPU8.buffer.slice(v,m):new Uint8Array(n.HEAPU8.buffer,v,_).buffer,i.delete(),h.delete(),f.delete(),{buffer:p,width:l,height:d}}},{key:"updateGraphState",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.graphicsObject.GetGraphState();switch(e){case"BorderStyle":var i=new this.engine.FloatArray;i.SetSize(n.length,-1);for(var a=0;a<n.length;a++)i.SetAt(a,n[a]);r.dashes=i;break;case"BorderWidth":r.line_width=t}this.graphicsObject.SetGraphState(r),r.dashes.delete()}},{key:"setBorderStyle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.updateGraphState("BorderStyle",e,t),n&&this.c_page.GenerateContent(),this.toJson()}},{key:"setBorderWidth",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.updateGraphState("BorderWidth",e),t&&this.c_page.GenerateContent(),this.toJson()}},{key:"setBorderColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=255*this.graphicsObject.GetStrokeOpacity()|0;return this.graphicsObject.SetStrokeColor((16777215&e|n<<24)>>>0),t&&this.c_page.GenerateContent(),this.toJson()}},{key:"setFillColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=255*this.graphicsObject.GetFillOpacity()|0;return this.graphicsObject.SetFillColor((16777215&e|n<<24)>>>0),t&&this.c_page.GenerateContent(),this.toJson()}},{key:"setOpacity",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.graphicsObject.SetFillOpacity(e),this.graphicsObject.SetStrokeOpacity(e),t&&this.c_page.GenerateContent(),this.toJson()}},{key:"remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isParentPage())this.c_page.RemoveGraphicsObject(this.graphicsObject);else{var t=this.parent.graphicsObject.GetGraphicsObjects();t.RemoveGraphicsObject(this.graphicsObject),t.GenerateContent()}e&&this.c_page.GenerateContent()}},{key:"moveToPosition",value:function(e,t){var n,r=this.isParentPage()?this.c_page:this.parent.graphicsObject.GetGraphicsObjects();if(e!=U.Bo.FIRST&&e!=U.Bo.LAST){var i=!0,a=!1,s=void 0;try{for(var u,c=this.parent.objectMap[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=(0,o._)(u.value,2),d=l[0];n=l[1]==t?d:null}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}}var f,h=r.GetGraphicsObjectPosition(this.graphicsObject);switch(e){case U.Bo.FIRST:f=r.GetLastGraphicsObjectPosition(this.engine.GraphicsObjectType.e_TypeAll);break;case U.Bo.LAST:f=0;break;case U.Bo.BEFORE:f=r.GetGraphicsObjectPosition(n);break;case U.Bo.AFTER:var g=r.GetGraphicsObjectPosition(n);f=r.GetPrevGraphicsObjectPosition(g,this.engine.GraphicsObjectType.e_TypeAll)}return r.MoveGraphicsObjectByPosition(h,f),r.GenerateContent(),this.toJson()}}]),e}(),Vt=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a,o,s){var u;return(0,t._)(this,i),(u=n.call(this,e,r,a,o)).graphicsObject=e.GetTextObject(),u.jr=s,u}return(0,r._)(i,[{key:"toJson",value:function(){var e=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this),t={},n=this.engine,r=this.c_page,a=r.GetDocument(),o=this.graphicsObject.GetTextState(r),s=o.font,u={};if(!s.IsEmpty()){u.name=s.GetName().toString();var c=s.GetFamilyName().toString();u.familyName=c;var l=u.name;try{l=s.GetBaseFontName(a).toString()||l}catch(e){}u.baseName=l,u.ascent=s.GetAscent(),u.descent=s.GetDescent(),u.isItalic=s.IsItalic(),u.isBold=s.IsBold(),!u.isItalic&&l.toLowerCase().includes("italic")&&(u.isItalic=!0),!u.isBold&&l.toLowerCase().includes("bold")&&(u.isBold=!0);var d,f=u.isBold?700:400,h=u.styles=s.GetStyles(a),g=n.Charset.e_CharsetDefault.value;s.GetFontType(a)==n.FontTypes.e_FontTypeCIDFont&&(void 0!==(g=s.GetCIDCharset(a))&&g!==n.Charset.e_CharsetDefault||(g=n.Charset.values[F(l,!0,!0)])||(g=n.Charset.e_CharsetANSI),g===n.CIDCharset.e_CIDCharsetJAPAN1?g=n.Charset.e_CharsetShift_JIS:g===n.CIDCharset.e_CIDCharsetKOREA1&&(g=n.Charset.e_CharsetHangeul),g=g.value),u.charset=g,s.IsEmbedded(a)?(u.isEmbedded=!0,u.nameKey="fv_"+this.id):s.IsStandardFont(a)?(u.isStandard=!0,u.standardId=s.GetStandard14Font(a).value,(d=w(l,g,0,f,h))&&(d="fv_"+d[0].url.replace(/\./g,"_"),u.nameKey=d)):(d=w(l,g,0,f,h))&&(d="fv_"+d[0].url.replace(/\./g,"_"),u.nameKey=d)}return t.textState={text:this.graphicsObject.GetText().toString(),charSpace:o.charspace,font:u,size:o.font_size,vertical_size:o.font_vertical_size,position:{x:o.origin_position.x,y:o.origin_position.y},matrix:[o.GetMatrixA(),o.GetMatrixB(),o.GetMatrixC(),o.GetMatrixD()],mode:o.textmode.value,wordSpace:o.wordspace},Object.assign({},e,t)}},{key:"setText",value:function(e){var t=this.engine,n=this.c_page,r=n;this.isParentPage()||(r=this.parent.graphicsObject.GetGraphicsObjects());for(var i=n.GetDocument(),a=this.graphicsObject,o=a.GetTextState(n),s=a.GetMatrix(),u=parseInt(180*Math.atan2(s.b,s.a)/Math.PI),c=o.font,l=c.GetFontType(i),d=Qt(a,r,t.GraphicsObjectType.e_TypeText)||n.GetLastGraphicsObjectPosition(t.GraphicsObjectType.e_TypeAll),f=e.split(/\n/),h=[a],g=f.length-1;g>0;g--){var p=a.Clone().GetTextObject();h[g]=p,p.SetText((0,W.Dp)(t,"")),r.InsertGraphicsObject(d,p)}var v=[];if(c.IsEmpty())return Promise.resolve();if(c.IsStandardFont(i))for(var _=0,m=f.length;_<m;_++)if(e=f[_],a=h[_],!e||/^[\u0000-\u00FF]+$/.test(e))a.SetText(new this.engine.WString(e)),v[_]=[a];else{v[_]=$t(e,/[\u0000-\u00FF]+/g,a,n,c,t,this,_)}else if(c.IsEmbedded(i))for(var y=a.GetText().toString().replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),S=new RegExp("^["+y+"]+$"),b=0,D=f.length;b<D;b++)e=f[b],a=h[b],!e||S.test(e)?(a.SetText(new this.engine.WString(e)),v[b]=[a]):v[b]=$t(e,new RegExp("["+y+"]+","g"),a,n,c,t,this);else for(var P=0,I=f.length;P<I;P++)if(e=f[P],a=h[P],l==t.FontTypes.e_FontTypeCIDFont){var A=Zt(t,c,i);if(A&&A!==t.Charset.e_CharsetDefault){var w=Xt(A=A.value);if(w)!e||new RegExp("^"+w.source+"$").test(e)?(a.SetText(new t.WString(e)),v[P]=[a]):v[P]=$t(e,w,a,n,c,t,this,P);else{var C=en(e,a,n,c,t,r,0);v[P]=C,C.length>1&&(P||this.graphicsObject!==a||(this.graphicsObject=C[0]),r.RemoveGraphicsObject(a))}}else{var k=en(e,a,n,c,t,r,0);v[P]=k,k.length>1&&(P||this.graphicsObject!==a||(this.graphicsObject=k[0]),r.RemoveGraphicsObject(a))}}else{var E=c.GetName().toString();try{E=c.GetBaseFontName(i).toString()||E}catch(e){}var G=F(E,!1,!0)||t.Charset.e_CharsetANSI.value;/(FoxitSansOTF)|(FoxitSansPS)/.test(E)&&(G=t.Charset.e_CharsetANSI.value);var T=c.IsSupportEmbedded(i),R=[t.Charset.e_CharsetANSI,t.Charset.e_CharsetSymbol,t.Charset.e_CharsetShift_JIS,t.Charset.e_CharsetHangeul,t.Charset.e_CharsetGB2312,t.Charset.e_CharsetChineseBig5];if(T&&-1===R.indexOf(G)){var M=c.Embed(i);M.IsEmpty()||(c=M,o.font=c,a.SetTextState(n,o,!1,400))}var O=Xt(G);if(O)!e||new RegExp("^"+O.source+"$").test(e)?(a.SetText(new t.WString(e)),v[P]=[a]):v[P]=$t(e,O,a,n,c,t,this,P);else{var x=en(e,a,n,c,t,r,0);v[P]=x,x.length>1&&(P||this.graphicsObject!==a||(this.graphicsObject=x[0]),r.RemoveGraphicsObject(a))}}for(var B=0,N=0,L=0,j=v.length;L<j;L++)for(var U=v[L],H=0,z=U.length;H<z;H++){var K=U[H].GetRect(),J=K.top-K.bottom;B=Math.max(B,J);var V=K.right-K.left;N=Math.max(N,V)}B+=3,N+=3;for(var Y=0,Z=0,q=1,X=v.length;q<X;q++){switch(u){case 0:Y-=B;break;case 90:Z+=N;break;case 180:case-180:Y+=B;break;case 270:case-90:Z-=N}for(var Q=v[q],$=0,ee=Q.length;$<ee;$++){var te=Q[$],ne=te.GetTextState(n);if(ne.origin_position=new t.PointF(ne.origin_position.x+Z,ne.origin_position.y+Y),te.SetTextState(n,ne,!1,400),!te.GetText().toString()){var re=new t.WString("");te.SetText(re)}}}return r.GenerateContent(),this.reParsePage()}},{key:"setItalic",value:function(e){var t,n=this.c_page,r=n.GetDocument(),i=this.graphicsObject,a=this.engine,o=i.GetTextState(n),s=o.font;if(s.IsEmpty())return Promise.resolve();if(s.IsStandardFont(r)){var u,c=a.StandardID,l=s.GetStandard14Font(r);if(e)switch(l){case c.e_StdIDCourier:u=c.e_StdIDCourierI;break;case c.e_StdIDCourierB:u=c.e_StdIDCourierBI;break;case c.e_StdIDHelvetica:u=c.e_StdIDHelveticaI;break;case c.e_StdIDHelveticaB:u=c.e_StdIDHelveticaBI;break;case c.e_StdIDTimes:u=c.e_StdIDTimesI;break;case c.e_StdIDTimesB:u=c.e_StdIDTimesBI}else switch(l){case c.e_StdIDCourierI:u=c.e_StdIDCourier;break;case c.e_StdIDCourierBI:u=c.e_StdIDCourierB;break;case c.e_StdIDHelveticaI:u=c.e_StdIDHelvetica;break;case c.e_StdIDHelveticaBI:u=c.e_StdIDHelveticaB;break;case c.e_StdIDTimesI:u=c.e_StdIDTimes;break;case c.e_StdIDTimesBI:u=c.e_StdIDTimesB}u&&(t=new a.Font(u))}else{var d=s.GetStyles(r),f=a.Styles.e_StyleItalic.value;e?d|=f:d&=~f;var h=Zt(a,s,r),g=s.GetName().toString();try{g=s.GetBaseFontName(r).toString()||g}catch(e){}if(!(/(FoxitSansOTF)|(FoxitSansPS)/.test(g)||h&&h!==a.Charset.e_CharsetDefault)){var p=F(g,!0,!0);-1!==p&&(h=a.Charset.values[p])}if(h&&h!==a.Charset.e_CharsetDefault||(h=a.Charset.e_CharsetANSI),g=g.toLowerCase(),e){if(g.includes("regular"))g=g.replace("regular","italic");else{var v=g.includes(",")?"italic":",italic";g+=v}g.includes("notosansmonocjksc")&&(g=g.replace("notosansmonocjksc","notosanssc"))}else g.includes("italic")?g=g.replaceAll("italic",""):g.includes("oblique")&&(g=g.replaceAll("oblique","")),g.endsWith(",")&&(g=g.substr(0,g.length-1)),g.includes("foxitsansps")&&(g=g.replace("foxitsansps","foxitsansotf"));var _=new a.WString(g),m=s.IsBold()||g.includes("blod");t=new a.Font(_,d,h,m?700:400),(0,H.Z)(_)}if(t){if(o.font=t,i.SetTextState(n,o,!1,400),i.GetText().toString()||i.SetText(new this.engine.WString("")),!this.isParentPage())this.parent.graphicsObject.GetGraphicsObjects().GenerateContent();return n.GenerateContent(),(0,H.Z)(t),this.reParsePage()}return Promise.resolve()}},{key:"setBold",value:function(e){var t,n=this.c_page,r=n.GetDocument(),i=this.graphicsObject,a=this.engine,o=i.GetTextState(n),s=o.font;if(s.IsEmpty())return Promise.resolve();if(s.IsStandardFont(r)){var u,c=a.StandardID,l=s.GetStandard14Font(r);if(e)switch(l){case c.e_StdIDCourier:u=c.e_StdIDCourierB;break;case c.e_StdIDCourierI:u=c.e_StdIDCourierBI;break;case c.e_StdIDHelvetica:u=c.e_StdIDHelveticaB;break;case c.e_StdIDHelveticaI:u=c.e_StdIDHelveticaBI;break;case c.e_StdIDTimes:u=c.e_StdIDTimesB;break;case c.e_StdIDTimesI:u=c.e_StdIDTimesBI}else switch(l){case c.e_StdIDCourierB:u=c.e_StdIDCourier;break;case c.e_StdIDCourierBI:u=c.e_StdIDCourierI;break;case c.e_StdIDHelveticaB:u=c.e_StdIDHelvetica;break;case c.e_StdIDHelveticaBI:u=c.e_StdIDHelveticaI;break;case c.e_StdIDTimesB:u=c.e_StdIDTimes;break;case c.e_StdIDTimesBI:u=c.e_StdIDTimesI}u&&(t=new a.Font(u))}else{var d=s.GetStyles(r),f=a.Styles.e_StylesBold.value;e?d|=f:d&=~f;var h=Zt(a,s,r),g=s.GetName().toString();try{g=s.GetBaseFontName(r).toString()||g}catch(e){}if(!(/(FoxitSansOTF)|(FoxitSansPS)/.test(g)||h&&h!==a.Charset.e_CharsetDefault)){var p=F(g,!0,!0);-1!==p&&(h=a.Charset.values[p])}if(h&&h!==a.Charset.e_CharsetDefault||(h=a.Charset.e_CharsetANSI),g=g.toLowerCase(),e){if(g.includes("regular"))g=g.replace("regular","bold");else if(g.includes("italic"))g=g.replace("italic","bolditalic");else if(g.includes("oblique"))g=g.replace("oblique","boldoblique");else{var v=g.includes(",")?"bold":",bold";g+=v}g.includes("notosansmonocjksc")&&(g=g.replace("notosansmonocjksc","notosanssc"))}else g.includes("bold")&&(g=g.replaceAll("bold","")),g.endsWith(",")&&(g=g.substr(0,g.length-1)),g.includes("foxitsansps")&&(g=g.replace("foxitsansps","foxitsansotf"));var _=new a.WString(g);t=new a.Font(_,d,h,e?700:400),(0,H.Z)(_)}if(t){if(o.font=t,i.SetTextState(n,o,!1,400),i.GetText().toString()||i.SetText(new this.engine.WString("")),!this.isParentPage())this.parent.graphicsObject.GetGraphicsObjects().GenerateContent();return n.GenerateContent(),(0,H.Z)(t),this.reParsePage()}return Promise.resolve()}},{key:"setFontSize",value:function(e){var t=this.c_page,n=this.graphicsObject,r=n.GetTextState(t),i=(r.font,r.font_vertical_size/r.font_size);(r.font_size=e/i,n.SetTextState(t,r,!1,400),n.GetText().toString()||n.SetText((0,W.Dp)(this.engine,"")),this.isParentPage())||this.parent.graphicsObject.GetGraphicsObjects().GenerateContent();return t.GenerateContent(),this.reParsePage()}},{key:"setStandardFont",value:function(e){var t=this.graphicsObject,n=t.GetText().toString(),r=this.engine,i=this.c_page;e=r.StandardID.values[e];var a=t.GetTextState(i),o=a.font;return o=new r.Font(e),a.font=o,t.SetTextState(i,a,!1,400),this.setText(n)}},{key:"setFontByName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:458863,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.c_page,i=this.graphicsObject,a=i.GetText().toString(),o=i.GetTextState(r),s=o.font,u=this.engine,c=new u.WString(e);return s=new u.Font(c,t,u.Charset.values[n]||u.Charset.e_CharsetANSI,400),(0,H.Z)(c),o.font=s,i.SetTextState(r,o,!1,400),this.setText(a)}},{key:"setFillColor",value:function(e){(this.graphicsObject.SetFillColor((4278190080|e)>>>0),this.isParentPage())||this.parent.graphicsObject.GetGraphicsObjects().GenerateContent();return this.c_page.GenerateContent(),this.toJson()}},{key:"reParsePage",value:function(){return Promise.resolve()}},{key:"getWoff",value:function(){var e=this.engine,t=this.c_page,n=t.GetDocument(),r=this.graphicsObject.GetTextState(t).font;if(r.IsEmpty())return null;if(r.IsEmbedded(n))return Je.Z.getWoffDataBuffer(r.GetWoffData(n),this.engine);var i=Zt(e,r,n)||0;i&&(i=i.value);var a=r.GetName().toString();try{a=r.GetBaseFontName(n).toString()||a}catch(e){}var o=this.jr.getFontBuffer(a,r.GetStyles(n),0,i,r.IsBold()?700:400,!0);return o?{buffer:o}:null}}],[{key:"create",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=r.TextObject.Create(),s=e.originPosition;if(!s)throw new Error("originPosition is required");var u,c=s.x,l=s.y,d=e.charspace||0,f=e.wordspace||0,h=e.fontSize||12,g=e.textmatrix||[1,0,0,1],p=r.Mode.values[e.textmode||0];if(e.font){var v=e.font;if(void 0!==v.standardId)u=new r.Font(r.StandardID.values[v.standardId]);else{var _=new r.WString(v.name);u=new r.Font(_,v.styles,r.Charset.values[1==v.charset?0:v.charset],v.weight||0),(0,H.Z)(_)}}else u=new r.Font((0,W.Dp)(r,"FoxitSansOTF"),458863,r.Charset.e_CharsetANSI,400);var m=o.GetTextState(t);m.font=u,m.font_size=h,m.charspace=d,m.wordspace=f,m.textmode=p;var y=new r.PointF(c,l);if(m.origin_position=y,m.textmatrix=g,o.SetTextState(t,m,!1,400),e.matrix){var S=e.matrix;o.SetMatrix(new r.Matrix(S[0],S[1],S[2],S[3],S[4],S[5]))}var b=new r.WString(e.text||"");o.SetText(b),e.fillColor&&o.SetFillColor((4278190080|e.fillColor)>>>0),a=a||t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll),t.InsertGraphicsObject(a,o),e.text&&t.GenerateContent();var D=i.get(o,t,n);return e.text&&e.text.length>0&&D.setText(e.text),(0,H.Z)(u,y,b),D}}]),i}(Jt);const Yt=Vt;function Zt(e,t,n){var r,i=e.Charset,a=e.CIDCharset;if(t.GetFontType(n)==e.FontTypes.e_FontTypeCIDFont)switch(t.GetCIDCharset(n)){case a.e_CIDCharsetGB1:case a.CIDCharsetCNS1:case a.CIDCharsetJAPAN1:case a.CIDCharsetKOREA1:r=i.e_CharsetGB2312;break;case a.CIDCharsetUNICODE:r=i.e_CharsetANSI}return r}function qt(e){for(var t=[[/[\u0000-\u00FF]+/g,{name:"Arial",styles:32,charset:1}],[/[\u0000-\u007f\u8140-\uA0FE\uA996\uA1A1-\uA9FE\uA840-\uA9A0\uF8A1-\uFEFE\uA140-\uA7A0\u200F-\u2027\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uFF00-\uFFEF]+/g,{name:"SimSun",styles:34,charset:134}],[/[\u4E00-\uA0FE\uA140-\uA3BF\uA259-\uA261\uA3C0-\uA3FE\u2E80-\u303F\u31C0-\u4DBF\uFF00-\uFFEF]+/g,{name:"SimSun",styles:34,charset:136}],[/[\u0000-\u007f\u2E80-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF]+/g,{name:"Meiryo",styles:34,charset:128}],[/[\u0000-\u007f\u1100-\u11FF\u3130-\u318F\uAC00-\uD7AF\uFF00-\uFFEF\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF]+/g,{name:"Korean",styles:32,charset:129}],[/[\u0E00-\u0E7F]+/g,{name:"Angsana New",styles:32,charset:222}],[/[\u0370-\u03FF\u1F00-\u1FFF]+/g,{name:"Arial",styles:32,charset:161}],[/[\u0590-\u05FF]+/g,{name:"Aharoni",styles:32,charset:177}],[/[\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]+/g,{name:"Arabic",styles:32,charset:178}]],n=0,r=t.length;n<r;n++)if(new RegExp("^"+t[n][0].source+"$").test(e))return[{text:e,info:t[n][1]}];for(var i,a=[],o=0,u=0,c=t.length;u<c;u++){for(t[u][0].lastIndex=o;i=t[u][0].exec(e);){var l=i.index;if(l>o){var d,f=e.slice(o,l);(d=a).push.apply(d,(0,s._)(qt(f)))}var h=i[0];a.push({text:h,info:t[u][1]}),o=l+h.length}if(o>=e.length)break}return a.length?a:[{text:e,info:null}]}function Xt(e){switch(e){case 0:case 2:case 238:case 204:return/[\u0000-\u00FF]+/g;case 134:return/[\u0000-\u007f\u8140-\uA0FE\uA996\uA1A1-\uA9FE\uA840-\uA9A0\uF8A1-\uFEFE\uA140-\uA7A0\u200F-\u2027\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uFF00-\uFFEF]+/g;case 136:return/[\u4E00-\uA0FE\uA140-\uA3BF\uA259-\uA261\uA3C0-\uA3FE\u2E80-\u303F\u31C0-\u4DBF\uFF00-\uFFEF]+/g;case 128:return/[\u0000-\u007f\u2E80-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F]+/g;case 129:return/[\u0000-\u007f\u1100-\u11FF\u3130-\u318F\uAC00-\uD7AF\uFF00-\uFFEF\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F]+/g;case 222:return/[\u0E00-\u0E7F]+/g;case 161:case 162:case 186:return/[\u0370-\u03FF\u1F00-\u1FFF]+/g;case 177:return/[\u0590-\u05FF]+/g;case 178:return/[\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]+/g;default:return!1}}function Qt(e,t,n){for(var r=t.GetFirstGraphicsObjectPosition(n);r;){if(t.GetGraphicsObject(r).GetTextObject().Handle()===e.Handle())return r;r=t.GetNextGraphicsObjectPosition(r,n)}return r}function $t(e,t,n,r,i,a,o,u){var c=[],l=0,d=t.exec(e),f=e.length;if(d){var h=d.index,g=d[0];h!==l&&c.push([0,e.slice(l,h)]),c.push([1,g]),l=h+g.length}else c=[[0,e]],l=f;for(;d=t.exec(e);){var p=d.index,v=d[0];c.push([0,e.slice(l,p)]),c.push([1,v]),l=p+v.length}l<f&&c.push([0,e.slice(l)]);var _=0,m=[],y=c.length,S=r;o.isParentPage()||(S=o.parent.graphicsObject.GetGraphicsObjects());for(var b,D=Qt(n,S,a.GraphicsObjectType.e_TypeText)||r.GetLastGraphicsObjectPosition(a.GraphicsObjectType.e_TypeAll),P=y;P--;){var I=n.Clone().GetTextObject();S.InsertGraphicsObject(D,I),m[P]=I}y&&(o.graphicsObject=m[0]);for(var A=[],w=0,C=y;w<C;w++){var k=m[w],E=c[w],G=E[0],T=E[1],F=k.GetTextState(r);if(F.origin_position=new a.PointF(F.origin_position.x+_,F.origin_position.y),k.SetTextState(r,F,!1,400),G)k.SetText(new a.WString(T)),A.push(k);else{var R,M=en(T,k,r,i,a,S,_);(R=A).push.apply(R,(0,s._)(M)),M.length>1&&(u||o.graphicsObject!==k||(o.graphicsObject=M[0]),S.RemoveGraphicsObject(k))}_+=(b=k.GetRect()).right-b.left+1}return y&&S.RemoveGraphicsObject(n),A}function en(e,t,n,r,i,a,o){var s=r.IsBold()?700:400,u=r.IsItalic(),c=[i.Charset.e_CharsetANSI,i.Charset.e_CharsetSymbol,i.Charset.e_CharsetShift_JIS,i.Charset.e_CharsetHangeul,i.Charset.e_CharsetGB2312,i.Charset.e_CharsetChineseBig5],l=n.GetDocument(),d=qt(e);if(1===d.length){var f=t,h=d[0].info;if(h){var g=t.GetTextState(n),p=i.Charset.values[h.charset]||i.Charset.e_CharsetANSI,v=h.styles;u&&(v|=64),s>=700&&(v|=262144),g.font=new i.Font(new i.WString(h.name),v,p,s);var _=g.font.IsEmbedded(l);if(g.font.IsSupportEmbedded(l)&&!_&&-1===c.indexOf(p)){var m=g.font.Embed(l);m.IsEmpty()||(g.font=m)}f.SetTextState(n,g,!1,400)}return f.SetText(new i.WString(d[0].text)),[f]}for(var y=Qt(t,a,i.GraphicsObjectType.e_TypeText)||n.GetLastGraphicsObjectPosition(i.GraphicsObjectType.e_TypeAll),S=[],b=d.length;b--;){var D=t.Clone().GetTextObject();a.InsertGraphicsObject(y,D),S[b]=D}for(var P=0,I=d.length;P<I;P++){var A=S[P],w=A.GetTextState(n),C=d[P],k=C.text,E=C.info,G=void 0;if(w.origin_position=new i.PointF(w.origin_position.x+o,w.origin_position.y),E){G=new i.WString(E.name);var T=i.Charset.values[E.charset]||i.Charset.e_CharsetANSI,F=E.styles;u&&(F|=64),s>=700&&(F|=262144),w.font=new i.Font(G,F,T,s);var R=w.font.IsEmbedded(l);if(w.font.IsSupportEmbedded(l)&&!R&&-1===c.indexOf(T)){var M=w.font.Embed(l);M.IsEmpty()||(w.font=M)}(0,H.Z)(G)}A.SetTextState(n,w,!1,400),G=new i.WString(k),A.SetText(G);var O=A.GetRect();o+=O.right-O.left+1,(0,H.Z)(G,w.origin_position)}return S}var tn=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a,o){var s;if((0,t._)(this,i),(s=n.call(this,e,r,a,o)).matrix=e.GetMatrix(),!s.isParentPage()){var u=s.parent.getMatrix();s.matrix.Concat(u,!1)}return s.graphicsObject=e.GetFormXObject(),s}return(0,r._)(i,[{key:"getMatrix",value:function(){return this.matrix}},{key:"getGraphicsObjectsInRect",value:function(e,t,n){for(var r=this.graphicsObject.GetGraphicsObjects(),i=this.engine.GraphicsObjectType.e_TypeAll,a=[],o=r.GetFirstGraphicsObjectPosition(i);o;){var u=r.GetGraphicsObject(o),c=u.GetRect();if(this.matrix.TransformRect(c),e.Contains(c)){var l=n.get(u,this.c_page,this),d=l.getType();if(t!=d&&0!=t&&5!=d);else{if(0==t&&targetType<4)a.push(element);else if(0==t&&targetType>3)continue;if(d===t)a.push(l);else if(5===d){var f;(f=a).push.apply(f,(0,s._)(l.getGraphicsObjectsInRect(e,t,n)))}}}o=r.GetNextGraphicsObjectPosition(o,i)}return a}},{key:"getGraphicsObjectAtPoint",value:function(e,t,n,r){for(var i=this.graphicsObject.GetGraphicsObjects(),a=this.engine.GraphicsObjectType.e_TypeAll,o=i.GetFirstGraphicsObjectPosition(a);o;){var s=i.GetGraphicsObject(o),u=s.GetRect();if(this.matrix.TransformRect(u),u.Contains(e,t)){var c=r.get(s,this.c_page,this),l=s.GetType().value;if(l===n)return c;if(5===l)return c.getGraphicsObjectAtPoint(e,t,n,r)}o=i.GetNextGraphicsObjectPosition(o,a)}return null}},{key:"getGraphicsObjectsAtPoint",value:function(e,t,n,r,i){for(var a=[],o=this.graphicsObject.GetGraphicsObjects(),s=this.engine.GraphicsObjectType.e_TypeAll,u=o.GetFirstGraphicsObjectPosition(s);u;){var c=o.GetGraphicsObject(u),l=c.GetRect();if(this.matrix.TransformRect(l),l.Contains(e,t)){var d=i.get(c,this.c_page,this),f=c.GetType().value;5===f?a=a.concat(d.getGraphicsObjectsAtPoint(e,t,n,r,i)):f!==n&&0!=n||a.push(d)}u=o.GetNextGraphicsObjectPosition(u,s)}return a}},{key:"toJson",value:function(){return null}}]),i}(Jt),nn=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a,o,s){var u;return(0,t._)(this,i),(u=n.call(this,e,r,a,o,s)).graphicsObject=e.GetPathObject(),u}return(0,r._)(i,[{key:"toJson",value:function(){for(var e=this.graphicsObject,t=(0,M._)((0,O._)(i.prototype),"toJson",this).call(this),n=this.graphicsObject.GetPathData(),r=n.GetPointCount(),a=[],o=0;o<r;o++){var s=n.GetPoint(o);a.push({x:s.x,y:s.y,type:n.GetPointType(o).value})}var u={fillMode:e.GetFillMode().value,strokeState:e.GetStrokeState(),path:a,needStroke:e.GetStrokeState()};return Object.assign(u,t)}},{key:"setBorderColor",value:function(e){return this.graphicsObject.SetStrokeState(0!==e),(0,M._)((0,O._)(i.prototype),"setBorderColor",this).call(this,e)}},{key:"setFillColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0===e)this.graphicsObject.SetFillColor(4278190080),this.graphicsObject.SetFillMode(this.engine.FillMode.e_FillModeNone);else{var n=255*(this.opacity||this.graphicsObject.GetFillOpacity())|0;this.graphicsObject.SetFillColor((16777215&e|n<<24)>>>0),this.graphicsObject.SetFillMode(this.engine.FillMode.e_FillModeWinding)}return t&&this.c_page.GenerateContent(),this.toJson()}},{key:"setOpacity",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.opacity=e,(0,M._)((0,O._)(i.prototype),"setOpacity",this).call(this,e,t)}},{key:"isPointInLine",value:function(e,t){var n,r,i,o,s,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,l=this.graphicsObject.GetPathData(),d=l.GetPointCount(),f=this.graphicsObject.GetMatrix();if((0,a._)(this.parent,tn)){var h=this.parent.graphicsObject.GetMatrix();h.Concat(f.a,f.b,f.c,f.d,f.e,f.f,!1),f.delete(),f=h}for(var g=[],p=0;p<d;p++){var v=l.GetPoint(p);switch(v=f.TransformPoint(v.x,v.y),l.GetPointType(p).value){case 1:r=n=[v.x,v.y];break;case 2:o=(i=[v.x,v.y])[0]-r[0],s=i[1]-r[1],u=Math.max(Math.abs(o),Math.abs(s));for(var _=0;_<u;_++){if(rn([e,t],[r[0]+o*_/u,r[1]+s*_/u])<c)return!0}r=i;break;case 3:o=r[0]-n[0],s=r[1]-n[1],u=Math.max(Math.abs(o),Math.abs(s));for(var m=0;m<u;m++){if(rn([e,t],[n[0]+o*m/u,n[1]+s*m/u])<c)return!0}n=r=[];case 4:case 5:var y=[v.x,v.y];if(g.push(y),u=Math.ceil(Math.max(Math.abs(v.x-r[0]),Math.abs(v.y-r[1]))),3==g.length){for(var S=0;S<u;S++){if(rn([e,t],an(S/u,r,g[0],g[1],g[2]))<c)return!0}g=[],r=y}}}return!1}}],[{key:"create",value:function(e,t,n,r,i){var a=r.PathObject.Create();try{var o,s=new r.Path,u=[],c=!0,l=!1,d=void 0;try{for(var f,h=e.points[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var g=f.value;switch(g[0]){case"m":o=new r.PointF(g[1],g[2]),s.MoveTo(o),o.delete();break;case"l":o=new r.PointF(g[1],g[2]),s.LineTo(o),o.delete();break;case"c":u.push(new r.PointF(g[1],g[2])),3==u.length&&(s.CubicBezierTo(u[0],u[1],u[2]),u.length=0);break;case"h":s.CloseFigure()}}}catch(e){l=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(l)throw d}}(0,H.Z)(u),a.SetPathData(s),s.delete(),a.SetStrokeColor(4278190080);var p=a.GetGraphState();p.line_width=e.borderWidth||1,a.SetGraphState(p);var v=t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll);t.InsertGraphicsObject(v,a),t.GenerateContent(),t.StartParse(0,null,!0),v=t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll),a=t.GetGraphicsObject(v)}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}return i.get(a,t,n)}}]),i}(Jt);function rn(e,t){var n=t[1]-e[1],r=t[0]-e[0];return Math.sqrt(r*r+n*n)}function an(e,t,n,r,i){var a=[1,1],o=1-e;return a[0]=t[0]*o*o*o+3*n[0]*e*o*o+3*r[0]*e*e*o+i[0]*e*e*e,a[1]=t[1]*o*o*o+3*n[1]*e*o*o+3*r[1]*e*e*o+i[1]*e*e*e,a}var on=function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(e,r,a,o){var s;return(0,t._)(this,i),(s=n.call(this,e,r,a,o)).imageObject=e.GetImageObject(),s}return(0,r._)(i,[{key:"setRotation",value:function(e){var t=e*Math.PI/180,n=this.graphicsObject.GetRect(),r=(n.right+n.left)/2,i=(n.top+n.bottom)/2,a=new this.engine.Matrix;return a.RotateAt(-t,-r,-i,0),this.graphicsObject.Transform(a,!0),this.c_page.GenerateContent(),a.delete(),this.toJson()}},{key:"getStream",value:function(){var e=this.engine,t=this.imageObject.GetStream();if(t){var n=t.GetDataSize(!1);if(!(n<=0)){var r=e._malloc(n);t.GetData(!1,n,r);var i=Pt(e,r,n);return e._free(r),i}}}}],[{key:"create",value:function(e,t,n,r,i){var a=r.ImageObject.Create(n.doc);try{var o=pt.Z.createImage(r,e.buffer);a.SetImage(o,0);var s=a.GetMatrix(),u=e.rect,c=u.left,l=u.right,d=u.top,f=u.bottom;s.a=l-c,s.d=d-f,s.Translate(c,f,0),a.SetMatrix(s);var h=t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll);t.InsertGraphicsObject(h,a),t.GenerateContent(),t.StartParse(0,null,!0),h=t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll),a=t.GetGraphicsObject(h)}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}return i.get(a,t,n)}}]),i}(Jt),sn=function(){function e(n,r){(0,t._)(this,e),this.engine=n,this.jr=r}return(0,r._)(e,[{key:"get",value:function(e,t,n){var r=this.engine,i=r.GraphicsObjectType;switch(e.GetType()){case i.e_TypeText:return new Yt(e,t,n,r,this.jr);case i.e_TypePath:return new nn(e,t,n,r,this.jr);case i.e_TypeImage:return new on(e,t,n,r,this.jr);case i.e_TypeFormXObject:return new tn(e,t,n,r,this.jr);default:return new Jt(e,t,n,r,this.jr)}}},{key:"create",value:function(e,t,n){var r=this.engine,i=r.GraphicsObjectType;switch(e.type){case i.e_TypeText.value:return Yt.create(e,t,n,r,this);case i.e_TypePath.value:return nn.create(e,t,n,r,this);case i.e_TypeImage.value:return on.create(e,t,n,r,this);default:return}}}]),e}(),un=__webpack_require__(3715),cn=(__webpack_require__(952),navigator.userAgent),ln=cn.toLowerCase(),dn=/macintosh|mac os x/.test(ln),fn=/ipad|iphone/.test(ln),hn=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(cn)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_","")),gn=!0;function pn(){return gn}function vn(e){var t=function(e){var t=e.toString(16).toUpperCase();return 1===t.length?"0"+t:t};return"#"+t(e>>0&255)+t(e>>8&255)+t(e>>16&255)}function _n(e){return(parseInt(e.slice(1,3),16)<<0)+(parseInt(e.slice(3,5),16)<<8)+(parseInt(e.slice(5,7),16)<<16)}(fn||dn)&&hn<11&&(gn=!1),gn=!(!gn||"object"!=typeof WebAssembly);var mn,yn=function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=new e.FloatArray;if(Array.isArray(t))t.forEach((function(e){return r.Add(e)}));else{var i=((16711680&t)>>16)/255,a=((65280&t)>>8)/255,o=((255&t)>>0)/255;r.Add(i),r.Add(a),r.Add(o)}n||(n=1);var s=new e.ColorSpace({value:n}),u=new e.Color(s);return u.SetValue(r),u}(e,t.value,t.space)};function Sn(e,t,n,r){return n.map((function(n){var i=n.value;switch(n.type){case"EditorPage":var a,o=i<0?0:i;if(t.editPages[o])a=t.editPages[o];else{var s,u=t.doc.pageIndexMap[o];s=u?u.page:t.doc.doc.GetPage(o),a=t.editPages[o]=r.Create(s,100)}return i>=0&&(t.lastEditorPage=a),a;case"PointF":return new e.PointF(i[0],i[1]);case"Image":return pt.Z.createImage(e,i,1);case"RectF":return new e.CFX_FloatRect(i.left,i.bottom,i.right,i.top);case"ShadingColorArray":return function(e,t){var n=new e.ShadingColorArray,r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=new e.peShadingColor;c.from=u.from,c.to=u.to,c.from_color=_n(u.fromColor),c.to_color=_n(u.toColor),n.Add(c)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,i);case"PageCenterAlignmentType":case"GraphicsObjectAlignmentType":case"RenderingOrder":case"DrawType":case"GraphicsObjectFilter":case"WritingDirection":case"LineCap":case"LineJoin":case"JoinSpiltOperationType":case"FontOperationType":case"NumberingType":case"BulletType":case"TextMode":return{value:i};case"FindOption":var c=new e.FindOption;return c.Set(1&i,2&i,4&i,8&i),c;case"Int32Array":var l=new e.Int32Array;return i.forEach((function(e){return l.Add(e)})),l;case"FloatArray":var d=new e.FloatArray;return i.forEach((function(e){return d.Add(e)})),d;case"WString":return(0,W.Dp)(e,i);case"Color":return yn(e,n)}return n}))}function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout((function(){t()}),e)}))}var Dn={Release:function(){},TextChanged:function(){},IsShiftKeyDown:function(){},IsControlKeyDown:function(){},GetPageWindow:function(){return 33},GetGeneralTextStyle:function(){return new mn.GeneralTextStyleStruct}},Pn={Release:function(){},OnSelectionChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];postMessage({workflow:"out",type:"selectionChange"})},KillTimer:function(e){postMessage({workflow:"out",type:"toggleCaret",msg:!1}),clearInterval(e)},OnCaretChange:function(e,t,n){postMessage({workflow:"out",type:"caretChange",msg:{charProp:{lineLeading:e.fLineLeading,lineIndent:e.fLineIndent,alignment:e.nAlignment,enableSoftReturn:e.bEnableSoftReturn,rtl:e.bRTL,secSpace:e.fSecSpace},wordProp:{fontSize:t.fFontSize,wordColor:vn(t.dwWordColor),strokeColor:vn(t.dwStrokeColor),scriptType:t.nScriptType,wordStyle:t.nWordStyle,charSpace:t.fCharSpace,horzScale:t.nHorzScale,wordSpace:t.fWordSpace,xOffset:t.fXOffset,yOffset:t.fYOffset,renderingMode:t.nRenderingMode,lineWidth:t.fLineWidth,charCode:t.dwCharCode,alphal:t.nAlphal/255,isCross:Boolean(4&t.nWordStyle),isUnderline:Boolean(2&t.nWordStyle),isBold:Boolean(262144&t.nWordStyle||11===t.nRenderingMode),isItalic:Boolean(64&t.nWordStyle)},fontName:n}})},OnCursorChange:function(e,t){postMessage({workflow:"out",type:"cursorChange",msg:t.value})},OnEnterEdit:function(e,t){return postMessage({workflow:"out",type:"enterEdit",msg:t.value}),!1},OnProcessEdit:function(e,t){return postMessage({workflow:"out",type:"processEdit",msg:t.value}),!1},OnContentChange:function(e,t,n){return postMessage({workflow:"out",type:"contentChange"}),!1},OnContentChangeStart:function(e,t,n){for(var r=0;r<n.GetSize();r++){var i=n.GetAt(r).GetFormContainer();1==e.value&&i&&(Pn.formObjs=Pn.formObjs||[],Pn.formObjs.push(i))}var a=Gn(n),o=t.GetPage().GetIndex();postMessage({workflow:"out",type:"contentChange",msg:{type:e.value,graphicsObject:a,pageIndex:o,stage:"start"}})},OnContentChangeEnd:function(e,t,n,r){var i=n.GetSize(),a=t.GetPage();if(i>0){for(var o=0;o<i;o++){var s=n.GetAt(o).GetFormContainer();s&&s.GetGraphicsObjects().GenerateContent()}a.GenerateContent()}if(1==e.value&&Pn.formObjs){var u=!0,c=!1,l=void 0;try{for(var d,f=Pn.formObjs[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){d.value.GetGraphicsObjects().GenerateContent()}}catch(e){c=!0,l=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}Pn.formObjs=[]}var h=Gn(n),g=a.GetIndex();postMessage({workflow:"out",type:"contentChange",msg:{type:e.value,graphicsObject:h,pageIndex:g,stage:"end"}})}},In={Release:function(){},Show:function(e,t){postMessage({workflow:"out",type:"showTipMsg",msg:e})},MoveTo:function(e){postMessage({workflow:"out",type:"moveTip",msg:{x:e.x,y:e.y}})},SetTip:function(e,t){postMessage({workflow:"out",type:"setTipMsg",msg:e.toString()})}},An={},wn={},Cn={Release:function(){},CreatePopupMenu:function(){var e=(Date.now()+1e3*Math.random()|0)%2147483647;return An[e]=[],e},CreatePopupSubMenu:function(){var e=(Date.now()+1e3*Math.random()|0)%2147483647;return An[e]=[],e},AppendMenuItem:function(e,t){t.value;if(12!==t.value){var n=t.constructor.name,r={name:n,enable:!0,isCheck:!0};wn[n]=r,An[e].push(r)}},AppendSubMenu:function(e,t,n){var r=t.constructor.name,i={name:r,enable:!0,isCheck:!0,subItems:An[n]};wn[r]=i,An[e].push(i)},RemoveMenuItem:function(e,t,n){},AppendSeparator:function(e){An[e].push({name:"-"})},EnableMenuItem:function(e,t,n,r){var i=t.constructor.name,a=wn[i];a&&(a.enable=n)},CheckMenuItem:function(e,t,n){var r=t.constructor.name;wn[r].isCheck=n},InsertMenuItem:function(e,t,n,r){},InsertSeparator:function(e,t){},DestroyMenu:function(e){An={}},IsMenuEnabled:function(e){return!0}},kn={Release:function(){},CanPasteGraphicObject:function(){},GetClipboardText:function(){return new mn.WString(__webpack_require__.g.clipboardText||"")},SetClipboardText:function(e,t){var n=t.toString();__webpack_require__.g.clipboardText=n,postMessage({workflow:"out",type:"setClipboardText",msg:n})},IsFormatAvailable:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!0},PasteBitmap:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!0},CopyBitmap:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]},CopyGraphicObject:function(){},PasteGraphicObject:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]}},En=function(){function e(n,r,i){(0,t._)(this,e),mn=n,this.setCallbacks(r),Dn.IsShiftKeyDown=r.IsShiftKeyDown,Dn.IsControlKeyDown=r.IsControlKeyDown;var a=n.EditPageContextCallback.implement(Dn),o=n.EditPageContext.Create(a);Pn.OnInvalid=r.OnInvalid,Pn.OnExitEdit=r.OnExitEdit,Pn.SetTimerCallback=this.SetTimerCallback.bind(this);var s=n.OperationNotifierCallback.implement(Pn),u=n.TipsCallback.implement(In),c=n.ClipboardCallback.implement(kn);o.SetOperationNotifierCallback(s),o.SetTipsCallback(u),o.SetClipboardCallback(c);var l=n.PopupMenuCallback.implement(Cn);o.SetPopupMenuCallback(l),i.length&&(o.SetRotateCtrlIcon(i[0]),o.SetBitmap(n.ImageResourceID.e_ImageResourceIDRedPoint,i[1]),o.SetBitmap(n.ImageResourceID.e_ImageResourceIDBluePoint,i[2]),o.SetBitmap(n.ImageResourceID.e_ImageResourceIDGreenPoint,i[3])),o.SetSystemDPI(96,96),this.context=o}return(0,r._)(e,[{key:"SetTimerCallback",value:function(e,t){var n=setInterval((function(){mn.OnTimeout(t,n)}),e);return postMessage({workflow:"out",type:"toggleCaret",msg:!0}),n}},{key:"setCallbacks",value:function(e){return this.callbacks=e,["GetRenderMatrix","GetClientRect","GetPageVisibleRect","GetPageRect","GetPageViewScale","GetDefaultEditorPage","GetLatestPDFPage","GetTemplate","GetToolbarFontName","GetString"].forEach((function(t){return Dn[t]=e[t]})),["OnInvalid","OnSetPropsAsDefault","OnAddUndo","OnUndoRedoBeginEdit","OnUndoRedoEndEdit"].forEach((function(t){return Pn[t]=e[t]})),Cn.TrackPopupMenu=function(t,n,r,i){return e.TrackPopupMenu(An[t],n,r,i)},["CopyGraphicObject","PasteGraphicObject","CanPasteGraphicObject"].forEach((function(t){return kn[t]=e[t]})),this.context}}]),e}();function Gn(e){var t={};if(e.GetSize()){var n=e.GetAt(0).GetGraphicsObject();t.type=n.GetType().value;var r=n.GetRect();t.rect={left:r.left,top:r.top,right:r.right,bottom:r.bottom}}return t}const Tn=En;var Fn=navigator.platform,Rn=0;/^win/i.test(Fn)?Rn=0:/^mac/i.test(Fn)?Rn=1:(/^linux/i.test(Fn)||/^x11/i.test(Fn))&&(Rn=2);const Mn=Rn;var On,xn=__webpack_require__(703);function Bn(e){On=e.engine,[Ln,jn,Wn,Kn,Hn,zn].forEach((function(t){!function(e,t){Nn(!e.instances),e.instances=[],e.instances.push(null),e.Create=function(){var r=(0,n._)(e,(0,s._)(Array.prototype.slice.call(arguments).concat([t])));return r.index=e.instances.length,e.instances.push(r),r},e.Get=function(t){return e.instances[t]},e.Release=function(t){delete e.instances[t]}}(t,e)})),function(e,t){var n;for(n in t){var r=e[n];r&&t[n].forEach((function(e){r[e]||Object.defineProperty(r,e,{writable:!0,enumerable:!1,value:function(t){if(0===arguments.length)throw new TypeError("missing argument 0 when calling function "+n+"."+e);return r.prototype[e].apply(t,Array.prototype.slice.call(arguments,1))}})}))}}(globalThis,{String:["substr","toUpperCase","substring"]});var t=function(){if(!On.JSCallback)return null;var e=On.JSCallback.implement({FooValue:function(e){},InitializeEngine:function(){return!0},FinalizeEngine:function(){},CreateRuntime:function(){return Ln.Create().index},ReleaseRuntime:function(e){Ln.Release(e)},GetPrivateData:function(e){return(e=Ln.Get(e)).GetPrivateData()},CreateContext:function(e,t,n){var r;return e=Ln.Get(e),n&&(r=Wn.Create(e)).cpp.SetObject(n,0),jn.Create(e,Kn.Create(t,e),r).index},ReleaseContext:function(e){jn.Release(e)},GetGlobalObject:function(e){return jn.Get(e).GetGlobalObject().cpp},GetRuntime:function(e){return jn.Get(e).GetRuntime().index},EnableCompatibleMode:function(e,t){jn.Get(e).EnableCompatibleMode(t)},DefineFunction:function(e,t){jn.Get(e).DefineFunction(t)},DefineClass:function(e,t){return jn.Get(e).DefineClass(t).index},GetClass:function(e,t){var n=jn.Get(e).GetClass(t);return n?n.index:0},CreateValue:function(e){return Wn.Create(Ln.Get(e)).cpp},ReleaseValue:function(e){Wn.Release(e)},CallFunction:function(e,t,n,r){return Wn.Get(e.GetHandle()).CallFunction(t?Wn.Get(t.GetHandle()):null,Wn.Get(n.GetHandle()),r)},SetFunctionBind:function(e,t,n){return Wn.Get(t.GetHandle()).SetFunctionBind(Wn.Get(e.GetHandle()),Wn.Get(n.GetHandle()))},ExecuteScript:function(e,t,n,r){return jn.Get(e).ExecuteScript(t.toString(),n,r)},ThrowMessage:function(e,t){},GetReturnValueMessage:function(e,t,n){var r=Wn.Get(e.GetHandle());return"_error"in r.js&&(r.js._error.name&&t.Assign(new On.String(r.js._error.name)),r.js._error.message&&n.Assign(new On.String(r.js._error.message)),!0)},GetReturnValueLineInfo:function(e,t){return!0}});return e}();t&&On.SetJSCallback(t)}var Nn=console.assert;console.debug;var Ln=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,[{key:"GetPrivateData",value:function(){return this.privateData||(this.privateData=On.PrivateData.Create()),this.privateData}}]),e}(),jn=function(){function e(n,r,i,a){var s,u=this;(0,t._)(this,e),this.runtime=n,this.functions=[],this.classes=[],this.globalObject=i?r?((s=Wn.Create(n)).js=r.CreateJSFrom(i.js),s):i:r?((s=Wn.Create(n)).js=new r.js,s):((s=Wn.Create(n)).js={},s);var c=this.globalObject.js;c.getProxyTarget&&(c=c.getProxyTarget());var l=this;c._getContext=function(){return l},this.globalObject.contextOfGlobalObject=this;var d="\n        with (this) {\n            function __exec() {\n                try {\n                    return [eval(arguments[0]), arguments[1] && eval('(' + arguments[1] + ')').bind(arguments[2] ? arguments[2]: this)];\n                } catch(__error__) {\n                    // console.warn('fxjse script error', __error__, arguments[0]);\n                    return [{\n                        _error: {\n                            name: __error__.name,\n                            message: __error__.message \n                        }\n                    }, arguments[1] && eval('(' + arguments[1] + ')').bind(arguments[2] ? arguments[2]: this)];\n                }\n            }\n            function __execScope() {\n                with (arguments[0]) {\n                    try{\n                        return eval(arguments[1]);\n                    } catch(__error__) {\n                        // console.warn('fxjse script error', __error__, arguments[1]);\n                        return {\n                            _error: {\n                                name: __error__.name,\n                                message: __error__.message \n                            }\n                        }\n                    }\n                    \n                }\n            }\n            return {\n                exec: __exec.bind(this),\n                execScope: __execScope.bind(this),\n                __execCode: __exec.toString(),\n                __execScopeCode: __execScope.toString()\n            };\n        }\n        ";"Root"===r.cppClass.name.toString()?(a.globalContext=this,this._contextClosure=new Function(d).bind(this.globalObject.js)()):this._contextClosure=a.globalContext.execScope(this.globalObject.js,"\n                (function(){\n                    ".concat(d,"\n                }).call(arguments[0])\n            ")),this.exec=function(e){var t=(0,o._)(u._contextClosure.exec(e,u._contextClosure.__execCode),2),n=t[0],r=t[1];return u._contextClosure.exec=r,n},this.getProp=function(e){return u._contextClosure.exec(e)[0]},this.execScope=function(e,t){return(0,o._)(u._contextClosure.exec("",u._contextClosure.__execScopeCode,e),2)[1].call(e,e,t)},this.nest=function(e){u._contextClosure.exec("")}}return(0,r._)(e,[{key:"ExecuteScript",value:function(e,t,n){var r,i;r=n?Wn.Get(n.GetHandle()).js:this.globalObject.js;try{i=n?this.execScope(r,e.toString()):this.exec(e.toString())}catch(e){return!1}return t&&(Wn.Get(t.GetHandle()).js=i),!i||(i.getProxyTarget&&(i=i.getProxyTarget()),!i._error)}},{key:"GetGlobalObject",value:function(){return this.globalObject}},{key:"GetRuntime",value:function(){return this.runtime}},{key:"EnableCompatibleMode",value:function(e){}},{key:"DefineFunction",value:function(e){var t=Hn.Create(e,this.runtime);e.handle=t.index,this.functions.push(t),this.GetGlobalObjectJS()[t.name]=t.js,t.thisValue=this.globalObject}},{key:"DefineClass",value:function(e){this.classes.push(Kn.Create(e,this.runtime));var t=this.classes.at(-1);try{this.GetGlobalObjectJS()[e.name.toString()]=t.js}catch(e){}return t}},{key:"GetClass",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.classes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.HasName(e))return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"GetGlobalObjectJS",value:function(){return this.globalObject.js.getProxyTarget?this.globalObject.js.getProxyTarget():this.globalObject.js}}]),e}(),Un=function e(n){(0,t._)(this,e),this.data=n},Wn=function(){function e(n){(0,t._)(this,e),this.runtime=n,this.js="_not_set_"}return(0,r._)(e,[{key:"cpp",get:function(){if(this._cpp)return this._cpp;var t=this;return this._cpp=On.Value.implement({GetHandle:function(){return Nn(t.index),t.index},SetDeath:function(){delete t.js},GetRuntime:function(){return t.runtime.index},IsUndefined:function(){return void 0===t.js},IsNull:function(){return null===t.js},IsBoolean:function(){return"boolean"==typeof t.js},IsUTF8String:function(){return"_not_set_"!==t.js&&((0,a._)(t.js,On.String)||"string"==typeof t.js)},IsNumber:function(){return"number"==typeof t.js},IsInteger:function(){return Number.isInteger(t.js)},IsObject:function(){return null!==t.js&&(!(0,a._)(t.js,On.String)&&("object"==typeof t.js||"function"==typeof t.js))},IsArray:function(){return(0,a._)(t.js,Array)},IsFunction:function(){return"function"==typeof t.js},IsDate:function(){return(0,a._)(t.js,Un)||(0,a._)(t.js,Date)},ToBoolean:function(){return"boolean"==typeof t.js?t.js:(0,a._)(t.js,On.String)?Number.parseInt(t.js.toString())>0:!!t.js},ToFloat:function(){return Number.parseFloat(t.js)},ToDouble:function(){if((0,a._)(t.js,Un));else if((0,a._)(t.js,Date))return t.js.getTime();return Number.parseFloat(t.js)},ToInteger:function(){return"boolean"==typeof t.js?t.js?1:0:(0,a._)(t.js,On.String)?t.js.IsEmpty()?0:Number.parseInt(t.js.toString()):Number.parseInt(t.js)},ToUTF8String:function(){if((0,a._)(t.js,On.String)||(0,a._)(t.js,On.WString))return new On.String(t.js.toString());if(null===t.js)return new On.String("null");if(void 0===t.js)return new On.String("undefined");if("boolean"==typeof t.js)return new On.String(t.js?"true":"false");if((0,a._)(t.js,Array))return 0===t.js.length?new On.String(""):new On.String(t.js.toString());if(t.js._cpp_data&&t.js._cpp_data.clazz>0){var e=Kn.Get(t.js._cpp_data.clazz).cppClass.name.toString();return new On.String("[object ".concat(e,"]"))}return"_not_set_"===t.js?new On.String(""):new On.String(t.js+"")},ToObject:function(e){return t.js._cpp_data?0===e||e===t.js._cpp_data.clazz?t.js._cpp_data.object:0:(0,a._)(t.js,Array)||(0,a._)(t.js,Un)||(0,a._)(t.js,Date)||"function"==typeof t.js?0:t.index},SetUndefined:function(){t.js=void 0},SetNull:function(){t.js=null},SetBoolean:function(e){t.js=!!e},SetUTF8String:function(e){var n=e.toString();"_not_set_"===n&&(n=""),t.js=n},SetInteger:function(e){t.js=e},SetFloat:function(e){t.js=e},SetDouble:function(e){t.js=e},SetObject:function(e,n){if(t.js={_cpp_data:{object:e,clazz:n}},n){var r=Kn.Get(n).CreateJSFrom(t.js);t.js=r}},SetArray:function(n){for(var r=[],i=0;i<n.GetSize();++i)r[i]=e.Get(n.GetAt(i).GetHandle()).js;t.js=r},SetDate:function(e){t.js=new Date(e)},Set:function(n){var r=n;r.IsBoolean()?t.js=r.ToBoolean():r.IsInteger()?t.js=r.ToInteger():r.IsNumber()?t.js=r.ToFloat():r.IsUTF8String()?t.js=r.ToUTF8String().toString():r.IsObject()?t.js=e.Get(r.GetHandle()).js:r.IsNull()&&(t.js=null)},GetObjectProp:function(n,r){if((n=n.toString(),(0,a._)(t.js,Array))&&"length"===n)return(s=e.Get(r.GetHandle())).js=t.js.length,!0;if(((i=t.js).getProxyTarget&&(i=i.getProxyTarget()),n in i)&&void 0!==(l=i[n]))return(s=e.Get(r.GetHandle())).js=l,!0;if(t.js._getClass){var i,o=t.js._getClass();if((i=t.js).getProxyTarget&&(i=i.getProxyTarget()),o.IsDynamicProperty(i,n,!1)&&!o.IsDynamicProperty(i,n,!0)){var s=e.Get(r.GetHandle()),u=t.contextOfGlobalObject;if(u){if(n in globalThis)return s.js=globalThis[n],!0;try{u.globalObject.js._getClass().mustQueryIn=!0;var c=u.getProp(n);return u.globalObject.js._getClass().mustQueryIn=!1,s.js=c,!0}catch(e){return!1}}}}var l=t.js[n];s=e.Get(r.GetHandle());if(void 0===l){var d=t.contextOfGlobalObject;if(d){if(n in globalThis)return s.js=globalThis[n],!0;try{var f=d.getProp(n);return s.js=f,!0}catch(e){return!1}}}return s.js=l,!0},SetObjectProp:function(n,r){return t.js[n.toString()]=e.Get(r.GetHandle()).js,!0},GetObjectPropByIdx:function(n,r){return Nn((0,a._)(t.js,Array)),Nn(0<=n&&n<t.js.length),e.Get(r.GetHandle()).js=t.js[n],!0},SetObjectPropByIdx:function(n,r){return Nn((0,a._)(t.js,Array)),Nn(n==t.js.length),t.js[n]=e.Get(r.GetHandle()).js,!0},DeleteObjectProp:function(e){delete t.js[e.toString()];var n=t.js;return n.getProxyTarget&&(n=n.getProxyTarget()),n[e.toString()]=void 0,!0},ObjectHasOwnProp:function(e,n){if(t.js.hasOwnProperty(e.toString()))return!0;if((n||t.js.getProxyTarget&&t.js.getProxyTarget()._getContext)&&t.js._getClass){var r=t.js._getClass(),i=t.js;return i.getProxyTarget&&(i=i.getProxyTarget()),r.IsDynamicProperty(i,e.toString(),!1)}return!1},SetObjectOwnProp:function(n,r){var i=t.js;return i.getProxyTarget&&(i=i.getProxyTarget()),i[n.toString()]=e.Get(r.GetHandle()).js,!0},CreateDataProp:function(n,r){t.js[n.toString()]=e.Get(r.GetHandle()).js}}),this._cpp}},{key:"SetFunctionBind",value:function(e,t){return Nn("function"==typeof this.js),e.js=Vn(this.js,t.js),!0}},{key:"CallFunction",value:function(t,n,r){if("function"!=typeof this.js)return!1;for(var i=[],o=0;o<r.GetSize();++o){var s=e.Get(r.GetAt(o).GetHandle()).js;(0,a._)(s,On.String)&&(s=s.toString()),i.push(s)}try{return n.js=this.js.call(null==t?void 0:t.js,i),!0}catch(e){return!1}}}]),e}(),Hn=function(){function e(n,r){(0,t._)(this,e),this.cpp=n,this.thisValue=void 0,this.runtime=r;var i=this;this.js=function(){var e=Wn.Create(r);return i.Call(i.thisValue,e,arguments),e.js}}return(0,r._)(e,[{key:"name",get:function(){return this.cpp.name.toString()}},{key:"Call",value:function(e,t,n){if(this.cpp){var r=Jn(n,t,this.runtime);return e||(e=this.thisValue),this.cpp.Run(null==e?void 0:e.cpp,r),!0}}}]),e}(),zn=function(){function e(n,r){(0,t._)(this,e),this.cpp=n,this.clazz=r}return(0,r._)(e,[{key:"name",get:function(){return this.cpp.name.toString()}},{key:"getter",get:function(){var e=this;return function(){return e.getValue()}}},{key:"getValue",value:function(){var e=Wn.Create(this.clazz.runtime);return this.cpp.Get(this.clazz.thisValue.cpp,this.cpp.name,e.cpp),this.cpp.name.toString(),e.js}},{key:"setter",get:function(){var e=this;return function(t){if(!(0,a._)(t,On.ValueWrapper)){var n=Wn.Create(e.clazz.runtime);n.js=t,t=n}e.cpp.Set(e.clazz.thisValue.cpp,e.cpp.name,t.cpp)}}}]),e}(),Kn=function(){function e(n,r){(0,t._)(this,e),this.cppClass=n,this.runtime=r,this.thisValue=Wn.Create(r);var i=this;this.js=function(){var e;return(e=i).CreateJSFrom.apply(e,[{}].concat(Array.prototype.slice.call(arguments)))};var a=this.cppClass.GetConstructor();this.ctor=Hn.Create(a,this.runtime),a&&(a.handle=this.ctor.index),this.ctor.thisValue=this.thisValue}return(0,r._)(e,[{key:"CreateJSFrom",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;this.DefineProperties(e);var a=(i=this.ctor.js).call.apply(i,[e].concat((0,s._)(n)));return a&&a._cpp_data&&Object.assign(e,a),this.DefineMethods(e),e=this.DefineDynamicProperty(e),this.thisValue.js=e,a&&"object"!=typeof a&&"_not_set_"!==a?a:e}},{key:"DefineProperties",value:function(e){for(var t={},n=this.cppClass.properties,r=0;r<n.GetSize();++r){var i=zn.Create(n.GetAt(r),this);t[i.name]={get:i.getter,set:i.setter}}try{Object.defineProperties(e,t)}catch(e){}}},{key:"HasName",value:function(e){return this.cppClass.name.toString()==e.toString()}},{key:"DefineMethods",value:function(e){for(var t=this,n=function(n){var i=r.GetAt(n),a=Hn.Create(i,t.runtime);i.handle=a.index,a.clazz=t,a.thisValue=t.thisValue;var o={};o[a.name]={get:function(){return a.js}};try{a.name in e||Object.defineProperties(e,o)}catch(e){}},r=this.cppClass.methods,i=0;i<r.GetSize();++i)n(i)}},{key:"DefineDynamicProperty",value:function(e){var t=this,n={get:function(e,n,r){var i,a;if(n in e)i=(a=Reflect).get.apply(a,arguments);else if("symbol"===(void 0===n?"undefined":(0,N._)(n))){var o;i=(o=Reflect).get.apply(o,arguments)}else if("name"!=n&&n in globalThis)i=globalThis[n];else if(t.IsDynamicProperty(e,n,!1))i=t.GetDynamicProperty(e,n);else{var s;i=(s=Reflect).get.apply(s,arguments)}return i},set:function(e,n,r){var i,a,o;return"string"!=typeof n?(i=Reflect).set.apply(i,arguments):n in e?(a=Reflect).set.apply(a,arguments):"name"!=n&&n in globalThis?globalThis[n]=r:t.IsDynamicProperty(e,n,!0)?function(e,n,r){var i=Wn.Create(t.runtime);i.js=e;var a=Wn.Create(t.runtime);return a.js=r,t.cppClass.SetProperty(i.cpp,new On.String(n),a.cpp),r}(e,n,r):(o=Reflect).set.apply(o,arguments)},has:function(e,n){if("arguments"===n)return!1;var r;if("symbol"===(void 0===n?"undefined":(0,N._)(n)))return(r=Reflect).has.apply(r,arguments);if(Reflect.has(e,n))return!0;if(n in globalThis)return!0;var i=!0;if(e._getContext&&(i=!1),t.mustQueryIn&&(i=!0),t.IsDynamicProperty(e,n,i)){var a=t.GetDynamicProperty(e,n);if("_not_set_"!==a&&void 0!==a)return!0}return!1},deleteProperty:function(e,n){var r;if("string"==typeof n&&!(n in e)){var i=Wn.Create(t.runtime);if(i.js=e,t.cppClass.GetPropertyType(i.cpp,new On.String(n),!0)===On.PropType.e_PropTypeMethod)return!1}return(r=Reflect).deleteProperty.apply(r,arguments)}};return e.getProxyTarget=function(){return e},e._getClass=function(){return t},new Proxy(e,n)}},{key:"IsDynamicProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Wn.Create(this.runtime);r.js=e;var i=this.cppClass.GetPropertyType(r.cpp,new On.String(t),n);return i===On.PropType.e_PropTypeProperty||i===On.PropType.e_PropTypeMaybe||i===On.PropType.e_PropTypeMethod}},{key:"GetDynamicProperty",value:function(t,n){var r=Wn.Create(this.runtime);r.js=t;var i=this.cppClass.GetPropertyType(r.cpp,new On.String(n),!1);if(i===On.PropType.e_PropTypeProperty||i===On.PropType.e_PropTypeMaybe){var a=Wn.Create(this.runtime);if(this.cppClass.GetProperty(r.cpp,new On.String(n),a.cpp),a.js&&a.js._cpp_data)if(a.js._cpp_data.clazz)return e.Get(a.js._cpp_data.clazz).CreateJSFrom(a.js.getProxyTarget?a.js.getProxyTarget():a.js);return a.js}if(i===On.PropType.e_PropTypeMethod){var o=this;return function(){var e=Wn.Create(o.runtime),t=Jn(arguments,e,o.runtime);return o.cppClass.CallMethod(r.cpp,new On.String(n),o.cppClass.name,t),e.js}}}}]),e}();function Jn(e,t,n){return On.Arguments.implement({GetRuntime:function(){return n.index},GetLength:function(){return e.length},GetValue:function(t){if(t<e.length){var r=Wn.Create(n);return r.js=e[t],r.cpp}return null},GetReturnValue:function(){return t.cpp}})}var Vn=function(e,t){var n;e._get_origin_function&&(e=e._get_origin_function());var r=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=e).call.apply(n,[t].concat((0,s._)(i)))};return r._get_origin_function=function(){return e},r};var Yn=__webpack_require__(2379),Zn=function(){function e(n,r,a){(0,t._)(this,e),(0,i._)(this,"engine",void 0),(0,i._)(this,"clientId",void 0),(0,i._)(this,"syncBaseUrl",void 0),(0,i._)(this,"strings",{}),this.engine=n,this.clientId=r,this.syncBaseUrl=a}return(0,r._)(e,[{key:"initStrings",value:function(e){this.strings=e}},{key:"Release",value:function(){}},{key:"GetAppInfo",value:function(e){var t="Foxit PDF SDK For Web";switch(e){case this.engine.AppInfo.e_AppInfoVersion:t="11.0";break;case this.engine.AppInfo.e_AppInfoType:t="Exchange-Pro";break;case this.engine.AppInfo.e_AppInfoLanguage:t="en-US";break;case this.engine.AppInfo.e_AppInfoPlatform:t="Web";break;case this.engine.AppInfo.e_AppInfoName:t="Acrobat";break;case this.engine.AppInfo.e_AppInfoVariation:t="Full"}return new this.engine.WString(t)}},{key:"Beep",value:function(e){}},{key:"MsgBox",value:function(e,t,n,r){var i=e.toString(),a=t.toString(),o=n.value,s=r.value;return{value:(0,Yn.Z)(this.syncBaseUrl,this.clientId,"XFAAppProvider","msgBox",{message:i,title:a,iconType:o,buttonType:s})}}},{key:"Response",value:function(e,t,n,r){var i=e.toString(),a=t.toString(),o=n.toString(),s=(0,Yn.Z)(this.syncBaseUrl,this.clientId,"XFAAppProvider","response",{question:i,title:a,defaultValue:o,isPassword:r});return new this.engine.WString(s)}},{key:"DownLoadUrl",value:function(e){return null}},{key:"PostRequestURL",value:function(e,t,n,r,i){return new this.engine.WString("")}},{key:"PutRequestURL",value:function(e,t,n){return!1}},{key:"LoadString",value:function(e){var t=e&&this.strings[e.value]||"";return new this.engine.WString(t)}},{key:"ShowFileDialog",value:function(e,t,n){return null}}],[{key:"getInstance",value:function(t,n,r){return e.instance||(e.instance=new e(t,n,r)),e.instance}}]),e}();function qn(e){var t=e.engine,n=e.id;if(t.initActionCallback){t.initActionCallback();var r,a=Yn.Z.bind(null,e.syncBaseUrl,n,"ActionCallback"),o=t.JSTimerCallback.implement({SetTimeout:function(e,n){var r=setTimeout((function(){t.TimerProc(n,0,r,0)}),e);return r}});t.Library.SetJSTimer(o);var s=t.ActionCallback.implement((r={Release:function(){},InvalidateRect:function(e,t,n){return!1},GetCurrentPage:function(e){return 0},SetCurrentPage:function(e,t){},GetPageRotation:function(e,t){return{value:0}},SetPageRotation:function(e,t,n){return!1},ExecuteNamedAction:function(e,t){return!1},SetDocChangeMark:function(e,t){return!0},GetDocChangeMark:function(e){return!0},GetOpenedDocCount:function(){return 1},GetOpenedDoc:function(e){return null},GetCurrentDoc:function(){return e.currentDoc},CreateBlankDoc:function(){return null},OpenDoc:function(e,t){return!1},Beep:function(e){return!1},Response:function(e,n,r,i,o){var s=e.toString(),u=n.toString(),c=r.toString(),l=i.toString(),d=a("response",{question:s,title:u,defaultValue:c,label:l,isPassword:o});return new t.WString(d)},GetFilePath:function(e){return new t.WString("")},Print:function(e,t,n,r,i,a,o,s){return!1},SubmitForm:function(e,t,n,r){return!1},LaunchURL:function(e){return!1},BrowseFile:function(){return new t.WString("")}},(0,i._)(r,"BrowseFile",(function(e,n,r){return new t.WString("")})),(0,i._)(r,"GetLanguage",(function(){return t.Language.e_LanguageENU})),(0,i._)(r,"Alert",(function(e,t,n,r){var i=e.toString(),o=t.toString();return parseInt(a("alert",{message:i,title:o,type:n,icon:r}))})),(0,i._)(r,"GetIdentityProperties",(function(){return null})),(0,i._)(r,"PopupMenu",(function(e){return null===e||0===e.GetSize()?new t.String(""):e.GetAt(0).GetName()})),(0,i._)(r,"GetAppInfo",(function(e){var n="";switch(e){case t.AppInfoType.e_AppInfoTypeFormsVersion:n="7.3";break;case t.AppInfoType.e_AppInfoTypeViewerType:n="Exchange-Pro";break;case t.AppInfoType.e_AppInfoTypeViewerVariation:n="Full Expired";break;case t.AppInfoType.e_AppInfoTypeViewerVersion:n="11.007";break;case t.AppInfoType.e_AppInfoTypeAppVersion:n="10.0"}return new t.WString(n)})),(0,i._)(r,"MailData",(function(e,t,n,r,i,a,o,s){return!1})),(0,i._)(r,"VerifySignature",(function(e,t){return-1})),(0,i._)(r,"ExecuteMenuItem",(function(e){a("alert",{message:"Executing MenuItem is currently not supported for dynamic XFA.",title:"",type:0,icon:3})})),r));t.Library.SetActionCallback(s)}}(0,i._)(Zn,"instance",void 0);var Xn="cache",Qn=new h.Z(Xn,"FoxitPDFSDKForWeb_"+Xn),$n="wasmBinary",er="asmMem",tr="FOPN_foweb",nr=[{bsStandardName:"Helvetica",bsSubstName:"Arial",wWeight:400,bItalic:0},{bsStandardName:"Helvetica-Bold",bsSubstName:"Arial",wWeight:700,bItalic:0},{bsStandardName:"Helvetica-BoldOblique",bsSubstName:"Arial",wWeight:700,bItalic:1},{bsStandardName:"Helvetica-Oblique",bsSubstName:"Arial",wWeight:400,bItalic:1},{bsStandardName:"Times-Roman",bsSubstName:"Times New Roman",wWeight:400,bItalic:0},{bsStandardName:"Times-Bold",bsSubstName:"Times New Roman",wWeight:700,bItalic:0},{bsStandardName:"Times-BoldItalic",bsSubstName:"Times New Roman",wWeight:700,bItalic:1},{bsStandardName:"Times-Italic",bsSubstName:"Times New Roman",wWeight:400,bItalic:1}],rr=function(){function n(e){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.postMessageToUi,o=i.cache,s=void 0===o?{}:o,u=i.enginePath,c=void 0===u?".":u,d=i.fontPath,f=void 0===d?"http://webpdf.foxitsoftware.com/webfonts":d,h=i.readBlock,g=void 0===h?8192:h,p=(i.fontMap,i.brotli),v=i.fontInfoPath,_=i.syncBaseUrl;(0,t._)(this,n);var m=(0,l.dD)(),y=m.promise;this.jrEnginePromise=y,this.enginePath=c,this.fontPath=f,this.fontInfoPath=v,this.serverFontCache={};var S=p.core;this.customFontMaps=[],this.certCacheMap=new Map,this.isFontCacheEnabled=!0,this.configurations={annotation:{cemicircleCloudy:!1,syncTextScaling:!1}},this.syncBaseUrl=_;var b,D={onRuntimeInitialized:function(){},printErr:function(e){console.warn("[JR ENGINE]",e)},locateFile:function(e){return"gsdk.wasm"===e?!1===S||-1!==navigator.userAgent.indexOf("Edge")?[c,e].join("/")+"?h="+un.wasmHash:"data:application/octet-stream;base64,"+[c,e+".brotli"].join("/")+"?h="+un.wasmHash:/^\w+?:\/\/.*/.test(e)?e:[c,e].join("/")+"?h="+un.wasmHash},readBinary:function(e){var t="data:application/octet-stream;base64,";return 0===e.indexOf(t)&&(e=e.replace(t,"")),new Promise((function(t,n){!1===S?or(e,t,n):ar(e,t,n,$n,a,s.wasmBinary)}))},readAsync:function(e,t,n){if(!1===S)or(e,t,n);else{if(s.asmMem===e)return void Qn.get(s.asmMem).then((function(r){r?t(r):ar(e,t,n,er,a,s.asmMem)}),(function(){ar(e,t,n,er,a)}));ar(e,t,n,er,a)}}};if(s.wasmBinary===[c,"gsdk.wasm.brotli"].join("/")+"?h="+un.wasmHash){var P=(0,l.dD)();b=P.promise,Qn.get($n).then((function(e){e&&(D.wasmBinary=e)})).finally((function(){P.resolve()}))}else b=Promise.resolve();b.then((function(e){var t;return D.wasmBinary||(t=pn()?D.readBinary(D.locateFile("gsdk.wasm")).then((function(e){return e&&(D.wasmBinary=e)})):Promise.resolve()),t})).then((function(){return GSDK(D).then((function(e){r.engine=e,e.wasmBinary=null,GSDK=null,r.annotManager=new wt(e),r.actionManager=new Kt(e),r.graphicsObjectManager=new sn(e,r),m.resolve()}))})),this.pdfDocCache={},this.fontInfoMap={},this.userName="Foxit Web",this.defaultReadBlockSize=g,this.id=Date.now()+Math.random()}return(0,r._)(n,[{key:"setConfiguration",value:function(e){this.configurations=(0,l.Qk)(this.configurations,e)}},{key:"initFontManager",value:function(){var e=this;this.jrEnginePromise.then((function(){var t=e.engine,n=0,r=0;t.setThirdPartyFontMgr(t.ThirdPartyFontMgrCallback.implement({GetThirdPartyFont:function(n,r,i,a,o){for(var s=0;s<nr.length;s++)if(n===nr[s].bsStandardName){var u=8388608|o;s%4==1||s%4==2?u=16777216:u&=-16777217,s%4>=2?u|=33554432:u&=-33554433,n=nr[s].bsSubstName,i=nr[s].bItalic,a=nr[s].wWeight,o=u;break}try{var c=[n,r,i,a,o].join("-");if(e.fontInfoMap[c])return e.fontInfoMap[c];var l=Date.now(),d=T(e.fontPath,n,r,i,a,o);if(postMessage({workflow:"fontProfile",fontName:n,time:Date.now()-l}),!d)return null;var f=t.ThirdPartyFontInfo.implement({GetFaceIndex:function(){return 0},GetFontFileData:function(){var e=t._malloc(d.byteLength);return t.HEAPU8.set(new Uint8Array(d),e),e},GetFontFileSize:function(){return d.byteLength}});return e.fontInfoMap[c]=f}catch(t){return isNaN(t)||(t=e.engine.getErrorCode(t)),console.warn(t),null}},GetWebFontFileStream:function(e){var n=function(e){var t=m[e-1];return t?G(t.url,t.isBrotli):null}(e);if(!n)return null;var r=null;try{r=t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return n.byteLength},WriteBlock:function(e,t,n){return console.warn("readonly mode, write function shouldn't be called"),!0},ReadBlock:function(e,r,i){var a=n.slice(r,r+i);return t.HEAPU8.set(a,e),!0}})}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}return r},GetFontFilesPos:function(e){return function(e){return 0===m.length?0:(e+1)%(m.length+1)}(e)},GetPlatformIDFromThirdParty:function(){return Mn},CountCachedFontFromThirdParty:function(){return e.getCustomUploadFontsCount()},MGetCachedFontDataFromThirdParty:function(t){r=t;var i=e.getCustomUploadFontByIndex(t);if(!i)return 0;var a=new Uint8Array(i.value);n=a.byteLength;var o=e.engine._malloc(n);return e.engine.HEAPU8.set(a,o),o},GetCachedName:function(){var t=e.getCustomUploadFontByIndex(r);if(!t)return 0;var n="custom__"+t.name;return new e.engine.WString(n)},MGetFontFileDataByNameFromThirdParty:function(t){if(t=(t=t.toString()).trim(),e.isFontCacheEnabled&&(e.fontDataCache||(e.fontDataCache=new Map),""!=t&&e.fontDataCache.has(t))){var r=e.fontDataCache.get(t);return n=r.fontSize,r.fontData}var i,a=/^custom__/;if(a.test(t)){t=t.replace(a,"");var o=e.getCustomUploadFontByName(t);i=o?o.value:null}else i=e.getFontFromServer(t);if(!i)return n=0,0;var s=new Uint8Array(i);n=s.byteLength;var u=e.engine._malloc(n);return e.engine.HEAPU8.set(s,u),e.isFontCacheEnabled&&e.fontDataCache.set(t,{fontData:u,fontSize:n}),u},MGetNotExistFontFamilyFromThirdParty:function(){var t=e.getNotExistFontsString();if(!t)return 0;var r=new e.engine.String(t),i=e.engine.HEAPU8.slice(r.GetBuffer(),r.GetBuffer()+t.length);n=t.length;var a=e.engine._malloc(t.length);return e.engine.HEAPU8.set(i,a),a},GetSize:function(){return n},MGetFoxitFontDataByFontNameFromThirdParty:function(r){var i=e.enginePath+"/../FoxitFonts/"+r.toString(),a=e.getFontFromServer(i,!1);if(!a)return n=0,0;var o=new Uint8Array(a);n=o.byteLength;var s=t._malloc(n);return t.HEAPU8.set(o,s),s},MGetNotExistFreeFontFileName:function(){return 0},MGetNotExistFreeFontFileNameFromThirdParty:function(){return new t.String("")},MGetAllFreeFontInfoFromThirdParty:function(){var r=e.getAllFreeFont(e.fontInfoPath);if(!r)return n=0,0;var i=new Uint8Array(r);n=i.byteLength;var a=t._malloc(n);return t.HEAPU8.set(i,a),a}}));var i=0;t.SetThirdPartyCMapProVider(t.ThirdPartyCMapProviderCallback.implement({MGetCMapFileDataFromThirdParty:function(n){var r=e.enginePath+"/../cmaps/"+n.toString(),a=e.getFontFromServer(r,!1);if(!a)return i=0,0;var o=new Uint8Array(a);i=o.byteLength;var s=t._malloc(i);return t.HEAPU8.set(o,s),s},GetSize:function(){return i}}))})).then((function(){setTimeout((function(){v.get(g).then((function(e){if(e)for(var t=Object.keys(e),n=t.length;n--;)!function(e){v.get(e).then((function(t){t&&(A[e]=t)}),(function(){}))}(t[n])}),(function(){}))}),0)}))}},{key:"setFontCacheEnabled",value:function(e){this.isFontCacheEnabled=e}},{key:"getFontBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:400;return T(this.fontPath,e,r,n,i,t)}},{key:"updatePdfDocCache",value:function(e){var t=e.id;this.pdfDocCache[t]=e}},{key:"getPDFDocById",value:function(e){return this.pdfDocCache[e]||null}},{key:"destroyDoc",value:function(e){delete this.pdfDocCache[e]}},{key:"checkLicense",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.cm,r=(0,l.dD)();return this.jrEnginePromise.then((function(){return Bn(e),e.engine.initialize(t,n).toString().split(" ")})).then((function(t){var n=0==+t[0];return n&&(e.engine.Library.SetDefaultFileSize(e.defaultReadBlockSize),e.engine.Library.SetRenderConfig(new e.engine.RenderConfig(1)),e.engine.setCacheSize(572),e.initFontManager(),qn(e)),r.resolve({flag:n,id:e.id,other:t.slice(1).join(" ")})})),r.promise}},{key:"checkLicense2",value:function(e){var t=this,n=(0,l.dD)();return this.jrEnginePromise.then((function(){return Bn(t),t.engine.initialize(e,"").toString().split(" ")})).then((function(e){return 0===+e[0]?(t.engine.Library.SetDefaultFileSize(8192),t.engine.setCacheSize(572),t.engine.Library.SetRenderConfig(new t.engine.RenderConfig(1)),t.initFontManager(),qn(t),n.resolve({flag:!0,id:t.id,other:e.slice(1).join(" ")})):n.resolve({flag:!1})})),n.promise}},{key:"createNewPortfolioDoc",value:function(e,t,n){var r=this.engine,i=new FileReaderSync,o=new d.Z(this,{isCreatePortfolio:!0}),s=o.pdfPortfolio.portfolio;if(s.SetInitialViewMode(r.InitialViewMode.e_InitialViewTileMode),(0,a._)(e,Blob)){var u=i.readAsArrayBuffer(e),c=u.byteLength,l=r._malloc(c);r.HEAPU8.set(new Uint8Array(u),l);var f=r.createPDFDocWithBuffer(l,c);f.Load(new r.String("")),o.doc.RemovePage(0),o.doc.InsertDocument(0,f,0,new r.WString),l&&r._free(l),l=null}if(Array.isArray(t)&&t.length){var h=new r.PortfolioFolderNode(s.GetRootNode());t.forEach((function(e,t){var n=r.ReaderCallback.implement({Release:function(){},GetSize:function(){return e.size},GetPosition:function(){return e.size},ReadBlock:function(t,n,a){var o=new Uint8Array(i.readAsArrayBuffer(e.slice(n,n+a)));return r.HEAPU8.set(o,t),!0}}),a=h.AddFile(n,new r.WString(e.name));0===t&&s.SetInitialFileSpecKeyName(a.GetKeyName()),a.GetFileSpec().SetModifiedDateTime(R.Z.ToDateTime(r,e.lastModified||e.lastModifiedDate))}));for(var g=s.GetSchemaFields(),p=0;p<g.GetSize();p++){if(g.GetAt(p).GetKeyName().toString()==s.GetSortingFieldKeyName().toString()){g.RemoveAt(p);break}}s.SetSchemaFields(g),s.SetSortingFieldKeyName(new r.String("FileName"))}this.setMetaData(o,n,"");var v=[];return o.getStream({writeStream:function(e,t,n){v.push(e)}},0).then((function(e){for(var t=new Uint8Array(e),n=0,r=0,i=v.length;r<i;r++){var a=v[r];t.set(new Uint8Array(a),n),n+=a.byteLength}return o.destroy(),t.buffer}))}},{key:"createNewDoc",value:function(e,t,n){var r,i,a=new d.Z(this,{isCreate:!0});return this.setMetaData(a,e,t),n&&(n.width&&(r=n.width),n.height&&(i=n.height)),a.insertPage(0,r,i).then((function(e){var t=[];return a.getStream({writeStream:function(e,n,r){t.push(e)}},0).then((function(e){for(var n=new Uint8Array(e),r=0,i=0,o=t.length;i<o;i++){var s=t[i];n.set(new Uint8Array(s),r),r+=s.byteLength}return a.destroy(),n.buffer}))}))}},{key:"setMetaData",value:function(e,t,n){var r,i,a=this.engine,o=(0,W.Dp)(a,"Title"),s=(0,W.Dp)(a,"Author"),u=(0,W.Dp)(a,"Producer");r=t?(0,W.Dp)(a,t):(0,W.Dp)(a,"Untitled.pdf"),i=n?(0,W.Dp)(a,n):(0,W.Dp)(a,"Unknown");var c=(0,W.Dp)(a,"Foxit PDFWebSDK");e.setMetadataValue(o,r),e.setMetadataValue(s,i),e.setMetadataValue(u,c);var l=(new Date).toString();e.setMetadataValue("CreationDate",l),e.setMetadataValue("ModDate",l)}},{key:"getPDFDoc",value:function(e){var t=new d.Z(this,e);return this.updatePdfDocCache(t),t}},{key:"getPDFDocByEngineDoc",value:function(e){var t=new d.Z(this,{doc:e});return this.updatePdfDocCache(t),t}},{key:"getFDFDoc",value:function(e){var t=this,n=e.size,r=e.getBuffer,i=e.release,a=this.engine.ReaderCallback.implement({Release:function(){i&&i()},GetSize:function(){return n},ReadBlock:function(e,n,i){var a=new Uint8Array(r(n,i));return t.engine.HEAPU8.set(a,e),!0}});return Promise.resolve(new this.engine.FDFDoc(a))}},{key:"getFDFFromURL",value:function(e){var t=this,n=+this.requestData("GET",!1,e,1,1,!0).getResponseHeader("Content-Range").match("bytes[^]+?/([^]+)")[1],r=this.engine.ReaderCallback.implement({Release:function(){},GetSize:function(){return n},ReadBlock:function(n,r,i){var a=new Uint8Array(t.requestData("GET",!1,e,r,i));return t.engine.HEAPU8.set(a,n),!0}});return Promise.resolve(new this.engine.FDFDoc(r))}},{key:"getPDFDocAsync",value:function(e){var t=e.size,n=e.getBuffer,r=e.release,i=new d.Z(this,{getBuffer:n,size:t,release:r,async:!0});return this.updatePdfDocCache(i),i}},{key:"getPDFDocByReaderCalback",value:function(e){var t=new d.Z(this.engine,{readerCallbackParams:e});return this.updatePdfDocCache(t),t}},{key:"getPDFDocByAsyncReaderCallback",value:function(e){var t=new d.Z(this.engine,{readerCallbackParams:e,async:!0});return this.updatePdfDocCache(t),t}},{key:"requestData",value:function(e,t,n,r,i,a){var o=new XMLHttpRequest;if(o.open(e,n,t),void 0!==r){var s="bytes="+r+"-"+(r+i-1);o.setRequestHeader("Range",s)}o.responseType="arraybuffer",o.send(null);var u=o.status;if(u>=200&&u<300||304===u)return a?o:o.response}},{key:"createReaderCallback",value:function(e){var t=this.engine;return this.engine.ReaderCallback.implement({jr:this,engine:t,url:e,load:function(){var e=this.jr.requestData("GET",!1,this.url),t=this.docBuffer=new Uint8Array(e);this.size=t.length},Release:function(){this.docBuffer=null},GetSize:function(){return this.size||this.load(),this.size},ReadBlock:function(e,t,n){this.size||this.load();var r=this.docBuffer.slice(t,t+n);return this.engine.HEAPU8.set(r,e),!0}})}},{key:"createReaderCallbackByBuffer",value:function(e){var t=this.engine;return this.engine.ReaderCallback.implement({jr:this,engine:t,load:function(){var t=this.docBuffer=new Uint8Array(e);this.size=t.length},Release:function(){this.docBuffer=null},GetSize:function(){return this.size||this.load(),this.size},ReadBlock:function(e,t,n){this.size||this.load();var r=this.docBuffer.slice(t,t+n);return this.engine.HEAPU8.set(r,e),!0}})}},{key:"registerSecurityCallback",value:function(e,t){return this.unRegisterSecurityCallback(e),"FoxitDRM"===e&&this.registerDRMSecurityCallback(t)}},{key:"registerCustomWebPluginSecurityCallback",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=e||"untitled.pdf",o=this.engine;this.registeredCustomWebPluginSecurityCallback&&this.unRegisterSecurityCallback(t);var s=(null==n?void 0:n.securityCallback)||{};try{var u=o.CustomSecurityCallback.implement({JSUseStandardCryptoMethod:function(){if(!s.JSUseStandardCryptoMethod)return!1;var e=null,t=s.JSUseStandardCryptoMethod,n=new XMLHttpRequest;return n.open("POST",t,!1),n.responseType="json",n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(e=n.response)},n.send(JSON.stringify({fileName:a})),e},JSCreateContext:function(e,t,n){if(!s.JSCreateContext)return i;var r=s.JSCreateContext,o=new XMLHttpRequest;return o.open("POST",r,!1),o.responseType="text",o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&o.responseText},o.send(JSON.stringify({fileName:a})),i},JSReleaseContext:function(e){if(!s.JSReleaseContext)return!0;var t=null,n=s.JSReleaseContext,r=new XMLHttpRequest;return r.open("POST",n,!1),r.responseType="json",r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(t=r.response)},r.send(JSON.stringify({fileName:a})),t},JSGetUserPermissions:function(e,t){if(!s.JSGetUserPermissions){var n=0;return 4&t&&(n|=4),8&t&&(n|=8),16&t&&(n|=16),32&t&&(n|=32),n}var r=null,i=s.JSGetUserPermissions,a=new XMLHttpRequest;return a.open("POST",i,!1),a.responseType="json",a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(r=a.response)},a.send(JSON.stringify({permission:t})),r},JSIsOwner:function(e){if(!s.JSIsOwner)return!1;var t=null,n=s.JSIsOwner,r=new XMLHttpRequest;return r.open("POST",n,!1),r.responseType="json",r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(t=r.response)},r.send(JSON.stringify({fileName:a})),t},JSGetCipher:function(e){if(!s.JSGetCipher)return o.CipherType.e_CipherAES;var t=s.JSGetCipher,n=new XMLHttpRequest;return n.open("POST",t,!1),n.responseType="json",n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&n.response},n.send(JSON.stringify({fileName:a})),o.CipherType.e_CipherAES},JSGetEncryptKey:function(e){if(!s.JSGetEncryptKey)return new o.String("");var t=null,n=s.JSGetEncryptKey,r=new XMLHttpRequest;return r.open("POST",n,!1),r.responseType="json",r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(t=r.response)},r.send(JSON.stringify({size})),t},JSGetDecryptedSize:function(e,t){if(!s.JSGetDecryptedSize)return t;var n=s.JSGetDecryptedSize,r=new XMLHttpRequest;return r.open("POST",n,!1),r.responseType="json",r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&r.response},r.send(JSON.stringify({fileName:a,size:t})),t},JSStartDecryptor:function(e,t,n){if(!s.JSStartDecryptor)return 0;var r=s.JSStartDecryptor,i=new XMLHttpRequest;return i.open("POST",r,!1),i.responseType="json",i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&i.response},i.send(JSON.stringify({fileName:a,objNum:t,genNum:n})),0},JSDecryptData:function(e,t,n){var i,u=null,c=new o.String(""),l=o._malloc(n),d=o.HEAPU8.buffer;i=d.slice?new Uint8Array(d.slice(t,t+n)):new Uint8Array(d,t,n),o.HEAPU8.set(i,l);for(var f=new Uint8Array(n),h=0;h<n;h++)f[h]=o.HEAP8[l+h];var g=s.JSDecryptData,p=new XMLHttpRequest;p.open("POST",g,!1),p.onreadystatechange=function(){p.readyState===XMLHttpRequest.DONE&&(u=r.stringToUint8Array(atob(p.responseText)))},p.send(JSON.stringify({buf:btoa(String.fromCharCode.apply(null,f)),fileName:a}));for(var v=0;v<n;v++)o.HEAP8[l+v]=u[v];return c.Load(l,n),c},JSFinishDecryptor:function(e){if(!s.JSFinishDecryptor)return new o.String("");var t=s.JSFinishDecryptor,n=new XMLHttpRequest;return n.open("POST",t,!1),n.responseType="json",n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&n.response},n.send(),new o.String("")},JSGetEncryptedSize:function(e,t,n,r,i){if(!s.JSGetEncryptedSize)return i;var o=s.JSGetEncryptedSize,u=new XMLHttpRequest;return u.open("POST",o,!1),u.responseType="json",u.onreadystatechange=function(){u.readyState===XMLHttpRequest.DONE&&u.response},u.send(JSON.stringify({fileName:a,srcDataLen:i,genNum:n})),i},JSEncryptData:function(e,t,n,i,u,c,l){var d,f=null,h=o.HEAPU8.buffer;d=h.slice?new Uint8Array(h.slice(i,i+u)):new Uint8Array(h,i,u),o.HEAPU8.set(d,c);var g=s.JSEncryptData,p=new XMLHttpRequest;p.open("POST",g,!1),p.onreadystatechange=function(){p.readyState===XMLHttpRequest.DONE&&(f=r.stringToUint8Array(atob(p.responseText)))},p.send(JSON.stringify({buf:btoa(String.fromCharCode.apply(null,d)),fileName:a}));for(var v=0;v<u;v++)o.HEAP8[c+v]=f[v];return u}});this.customWebPluginSecurityCallback=u;var c=o.Library.RegisterCustomSecurityCallback((0,W.n5)(o,t),u);return c&&(this.registeredCustomWebPluginSecurityCallback=!0),c}catch(e){return console.log(e),!1}}},{key:"registerDRMSecurityCallback",value:function(){var e=this;if(this.registeredDRMSecurityCallback)return!0;try{var t=this.engine,n=t.DRMSecurityCallback.implement({Release:function(){},GetSecurityType:function(){return t.EncryptType.e_EncryptFoxitDRM},IsOwner:function(t,n){var r=e.getPDFDocFromCDoc(t);return!!r&&e.getDrmProperty(r,"isOwner")},GetUserPermissions:function(t,n){var r=e.getPDFDocFromCDoc(t);return r?e.getDrmProperty(r,"userPermissions"):0},GetCipherType:function(n,r){var i=e.getPDFDocFromCDoc(n);return i?t.CipherType.values[e.getDrmProperty(i,"cipher")]:t.CipherType.e_CipherNone},GetKeyLength:function(t,n){var r=e.getPDFDocFromCDoc(t);return r?e.getDrmProperty(r,"keyLength"):16},GetFileID:function(n,r){var i=e.getPDFDocFromCDoc(n);return i?new t.String(e.getDrmProperty(i,"fileId","")):new t.String("")},GetInitialKey:function(n,r){var i=e.getPDFDocFromCDoc(n);return i?new t.String(e.getDrmProperty(i,"initialKey","")):new t.String("")}}),r=t.Library.RegisterSecurityCallback((0,W.n5)(t,"FoxitDRM"),n);return r&&(this.registeredDRMSecurityCallback=!0),r}catch(e){return!1}}},{key:"stringToUint8Array",value:function(e){for(var t=[],n=0,r=e.length;n<r;++n)t.push(e.charCodeAt(n));return new Uint8Array(t)}},{key:"registerOpenFileSecurityCallback",value:function(e){var t=this.engine;this.registeredOpenFileSecurityCallback&&this.unRegisterSecurityCallback(tr);try{var n=t.CustomSecurityCallback.implement({JSUseStandardCryptoMethod:function(){return!0},JSCreateContext:function(t,n,r){return e.$$ptr},JSReleaseContext:function(e){return!0},JSGetUserPermissions:function(e,t){var n=0;return 4&t&&(n|=4),8&t&&(n|=8),16&t&&(n|=16),32&t&&(n|=32),n},JSIsOwner:function(e){return!1},JSGetCipher:function(n){return e.cipher&&2===e.cipher?t.CipherType.e_CipherAES:t.CipherType.e_CipherRC4},JSGetEncryptKey:function(n){var r=new t.String(""),i=t._malloc(e.encryptKey.length),a=new Uint8Array(e.encryptKey);return t.HEAPU8.set(a,i),r.Load(i,e.encryptKey.length),r},JSGetDecryptedSize:function(e,t){},JSStartDecryptor:function(e,t,n){},JSDecryptData:function(e,t,n){},JSFinishDecryptor:function(e){},JSGetEncryptedSize:function(e,t,n,r,i){},JSEncryptData:function(e,t,n,r,i,a,o){}}),r=t.Library.RegisterCustomSecurityCallback((0,W.n5)(t,tr),n);return r&&(this.registeredOpenFileSecurityCallback=!0),r}catch(e){return!1}}},{key:"unRegisterSecurityCallback",value:function(e){var t=this.engine,n=(0,W.n5)(t,e);try{return this.engine.Library.UnregisterSecurityCallback(n)}catch(e){try{return this.engine.Library.UnregisterSecurityCallback(n)}catch(e){return!1}}}},{key:"unRegisterSecurityHandler",value:function(e,t){return this.customWebPluginSecurityCallback=null,this.unRegisterSecurityCallback(t)}},{key:"initializeFxjse",value:function(){return!!this.hasInitializeFxjse||!(this.hasInitializeFxjse||!this.engine.Library.InitializeFxjse)&&(this.engine.Library.InitializeFxjse(),this.hasInitializeFxjse=!0,!0)}},{key:"finalizeFxjse",value:function(){this.hasInitializeFxjse&&this.engine.Library.FinalizeFxjse&&(this.engine.Library.FinalizeFxjse(),this.hasInitializeFxjse=!1)}},{key:"registerXFAAppProvider",value:function(){this.engine.Library.RegisterXFAAppProviderCallback&&!this.XFAAppHandler&&(this.XFAAppHandler=this.engine.AppProviderCallback.implement(Zn.getInstance(this.engine,this.id,this.syncBaseUrl)),this.engine.Library.RegisterXFAAppProviderCallback(this.XFAAppHandler))}},{key:"setXFAString",value:function(e){Zn.getInstance(this.engine,this.id,this.syncBaseUrl).initStrings(e)}},{key:"syncMessage",value:function(e,t,n){return(0,Yn.Z)(this.syncBaseUrl,this.id,e,t,n)}},{key:"setUserName",value:function(e){this.userName=e}},{key:"getUserName",value:function(){return this.userName}},{key:"getRotatedAnnotRect",value:function(e){var t=e.GetRect(),n={left:t.left,top:t.top,right:t.right,bottom:t.bottom,rotate:0};return t.delete(),n}},{key:"getHexString",value:function(e){for(var t="",n=e.GetLength(),r=e.GetBuffer(),i=0;i<n;i++){var a=this.engine.HEAP8[r+i]>>>0&255;t+=String.fromCharCode(a)}return t}},{key:"getPDFDocFromCDoc",value:function(e){var t=this.pdfDocCache;for(var n in t){var r=t[n];if(e.Equals(r.doc))return r}}},{key:"getDrmProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.otherData;if(!r)return n;var i=r.drm;return i?i[t]:n}},{key:"getPDFString",value:function(e){var t;try{t=e.toString()}catch(s){var n="";e.GetBuffer||(e=e.UTF8Encode());for(var r=e.GetBuffer(),i=0,a=e.GetLength();i<a;i++){var o=this.engine.HEAP8[r+i]>>>0&255;n+=String.fromCharCode(o)}t=this.pdfNameDecoding(n)}return t}},{key:"pdfNameDecoding",value:function(e){if(254==e.charCodeAt(0)&&255==e.charCodeAt(1)){for(var t="",n=2;n<e.length;n+=2)t+=String.fromCharCode((e.charCodeAt(n)<<8)+e.charCodeAt(n+1));return t}return e}},{key:"setFontMap",value:function(e){!function(e){e&&(y=e)}(e)}},{key:"setWatermarkFontMap",value:function(e){!function(e){e&&(m=e)}(e)}},{key:"addFontMap",value:function(e){e&&(this.customFontMaps=this.customFontMaps.concat(e))}},{key:"getCharsetByFontName",value:function(e){if(e){for(var t=0,n=this.customFontMaps.length;t<n;t++){var r=this.customFontMaps[t];if(r.name.replace(" ","").replace("-","")===e)return this.engine.Charset.values[r.charset||0]}return this.engine.Charset.e_CharsetANSI}}},{key:"getFontInfoByFontName",value:function(e){if(e){for(var t=0,n=this.customFontMaps.length;t<n;t++){var r=this.customFontMaps[t];if(r.name.replace(" ","").replace("-","")===e)return{charset:this.engine.Charset.values[r.charset||0],style:r.style}}return{charset:this.engine.Charset.e_CharsetANSI,style:0}}}},{key:"setActionToDict",value:function(e,t,n){var r,i=this.engine,a=this.actionManager;if(r=a.create(e,actionJson.type),-1==trigger)try{this.engineWidget.SetAction(jsaction)}catch(e){isNaN(e)||(e=i.getErrorCode(e)),console.warn(e)}else{var o,s=(0,W.n5)(i,"AA"),u=engineWidget.GetDict(),c=u.GetElement(s);if(c){var l=c.GetDict();o=new i.AdditionalAction(this.pdfPage.doc,l)}else{var d=i.PDFDictionary.Create();u.SetAt(s,d),o=new i.AdditionalAction(this.pdfPage.doc,d)}o.SetAction(i.TriggerEvent.values[trigger],r)}var f=a.get(r,this.doc,this.JR);return f.create(actionJson),f}},{key:"asyncOperation",value:function(e,t){var n=this;t||(t=(0,l.dD)());try{t.resolve(e())}catch(r){if(17!==this.engine.getErrorCode(r).value)throw r;return setTimeout((function(){n.asyncOperation(e,t)}),30),t.promise}return t.promise}},{key:"setJPXDownSample",value:function(e){this._JPXDownSample=e}},{key:"getJPXDownSample",value:function(){var e=this._JPXDownSample;return void 0===e||!!e}},{key:"SetJSObjectRef",value:function(e){return this.objectMap=this.objectMap||{},this.objectMap[e.Handle()]=e,e.Handle()}},{key:"GetJSObjectFromPtr",value:function(e){if(this.objectMap)return this.objectMap[e]}},{key:"getEditorContext",value:function(e,t){return this.pageEditorContext=new Tn(this.engine,e,t),this.pageEditorContext.context}},{key:"storeNotExistFonts",value:function(e){this._notExistFonts=e}},{key:"getNotExistFontsString",value:function(){return(this._notExistFonts||[]).join("\n")}},{key:"checkFontNotExist",value:function(e){return(this._notExistFonts||[]).find((function(t){return t===e}))}},{key:"checkCertificatePassword",value:function(e,t){var n=this.engine;if("string"==typeof e){var r=new XMLHttpRequest;r.open("get",e,!1),r.responseType="blob",r.send(),e=r.response}var i=(new FileReaderSync).readAsArrayBuffer(e),a=n.StreamCallback.implement({GetSize:function(){return i.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,t,r){var a=new Uint8Array(i,t,r);return n.HEAPU8.set(a,e),!0}});return n.CheckCertPassword(a,new n.String(t))}},{key:"getCertificateString",value:function(e,t){var n,r=this.engine;if((0,a._)(e,ArrayBuffer))n=e;else{var i=new FileReaderSync;n=i.readAsArrayBuffer(e)}var o=r.StreamCallback.implement({GetSize:function(){return n.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,t,i){var a=new Uint8Array(n,t,i);return r.HEAPU8.set(a,e),!0}});return t?r.GetCerFromPfx(o,new r.String(t)):r.ReadFileContent(o)}},{key:"getCertificateInfo",value:function(e,t){var n=this.engine,r={},i=this.getCertificateString(e,t);if(t&&(r.pfxFile=e),!i.GetLength())return r;var a=n.HEAPU8.subarray(i.GetBuffer(),i.GetBuffer()+i.GetLength());r.cerFile=new Blob([a],{type:"application/pkix-cert"}),r.serial=n.GetCertificateInfo(i,new n.String("SerialNumber")).toString(),r.validPeriodFrom=n.GetCertificateInfo(i,new n.String("ValidPeriodFrom")).toString(),r.validPeriodTo=n.GetCertificateInfo(i,new n.String("ValidPeriodTo")).toString();var o=n.GetCertificateInfo(i,new n.String("Issuer")).toString(),s=JSON.parse(o);s.CN||(o=n.GetCertificateInfo(i,new n.String("Subject")).toString(),s=JSON.parse(o)),r.subjectName=s.CN||"",r.issuerName=s.CN||"",r.email=s.E||"",r.orgName=s.O||"",r.orgUnit=s.OU||"",r.country=s.C||"";var u=n.GetCertificateInfo(i,new n.String("KeyUsage")).toString();return r.keyUsageStr=u,u.indexOf("Digital Signature")>=0&&u.indexOf("Data Encipherment")>=0?r.keyUsage=2:u.indexOf("Digital Signature")>=0?r.keyUsage=0:u.indexOf("Data Encipherment")>=0?r.keyUsage=1:r.keyUsage=-1,r}},{key:"storeCustomUploadFonts",value:function(e){this._customUploadFonts=e}},{key:"getCustomUploadFontsCount",value:function(){return this._customUploadFonts?this._customUploadFonts.length:0}},{key:"getCustomUploadFontByIndex",value:function(e){var t=this._customUploadFonts;return t?t[e]:null}},{key:"getCustomUploadFontByName",value:function(e){var t=this._customUploadFonts;return t?t.find((function(t){return t.name===e})):null}},{key:"storeFontServerRoot",value:function(e){this._fontServerRoot=e}},{key:"getFontServerRoot",value:function(){return this._fontServerRoot||""}},{key:"getFontFromServer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Date.now(),r=(t?this.getFontServerRoot():"")+e,i=this.serverFontCache[r];if(i)return i;var a=new XMLHttpRequest;return a.open("GET",r,!1),a.responseType="arraybuffer",a.send(),a.status>=200&&a.status<300||304===a.status||self.location.href.startsWith("file:")&&0===a.status?(postMessage({workflow:"fontProfile",name:e,time:Date.now()-n}),this.serverFontCache[r]=a.response):void 0}},{key:"getAllFreeFont",value:function(e){if(e)return this.getFontFromServer(e,!1)}},{key:"cacheFontConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.storeNotExistFonts(e.notExistFonts),this.storeCustomUploadFonts(e.customUploadFonts),this.storeFontServerRoot(e.fontServerRoot)}},{key:"getFxcoreFontList",value:function(){var e=this.engine,t=[];if(!e.getFontCommonList)return t;for(var n=e.getFontCommonList(),r=n.GetSize();r--;)t[r]=n.GetAt(r).toString();return t}},{key:"getPDFCertArrayFromPDFFile",value:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=this;return(0,e._)((function(){var e,l,d,f,h,g;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return e=[],(0,a._)(t,ArrayBuffer)?[4,(l=s.getPDFDoc({buffer:t})).parseByPassword(i)]:[3,2];case 1:if(u.sent(),l.doc.GetPDFCertArray)for(d=function(t){var i=f.GetAt(t);if(i.IsEmpty())return"continue";var a=i.GetCertBuffer(),u=!1;o.length&&(u=o.some((function(e){return e.IsEqual(a)})));var l=i.GetIsOwner();i.GetTrustType();if(u?l?i.SetTrustType(s.engine.TrustType.e_TrustTypeOwner.value):i.SetTrustType(s.engine.TrustType.e_TrustTypeEUTL.value|s.engine.TrustType.e_TrustTypeFATL.value):(o.push(a),2==n?i.SetTrustType(s.engine.TrustType.e_TrustTypeEUTL.value):l?i.SetTrustType(s.engine.TrustType.e_TrustTypeOwner.value):i.SetTrustType(s.engine.TrustType.e_TrustTypeFATL.value)),u)return"continue";var d=(0,xn.bs)(s.engine,a),h=d.issuerChain,g=void 0===h?[]:h,p=d.subjectChain,v=void 0===p?[]:p,_=g[g.length-1]||{},m=_.issuerName,y=void 0===m?"":m,S=_.issuerInfo,b=void 0===S?"":S,D=(0,c._)({},v[v.length-1]||{});delete D.level;var P=i.GetIsTrustedRoot();if(!u){var I=(0,c._)({cerFile:new Blob([new Uint8Array(s.engine.HEAP8.slice(a.GetBuffer(),a.GetBuffer()+a.GetLength()))]),type:r,isCertTrustedRoot:P,issuerName:y,issuerInfo:b},D);e.push(I);var A=I.serialNumber,w=I.country,C="".concat(A,"_").concat(w,"_").concat(y);s.certCacheMap.set(C,{uniqueSerialNumber:C,cert:a})}},f=l.doc.GetPDFCertArray(),h=f.GetSize(),g=0;g<h;g++)d(g);u.label=2;case 2:return[2,e]}}))}))()}},{key:"getFATLAndEUTLList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,l.dD)(),r=[],i=[],a=[];return t.forEach((function(t){var n=t.url,r=t.trust_type,o=t.type,s=t.purpose_code,u=e.requestData("GET",!1,n);i.push(e.getPDFCertArrayFromPDFFile(u,r,o,s,a))})),Promise.all(i).then((function(e){e.forEach((function(e){var t;(t=r).push.apply(t,(0,s._)(e))})),n.resolve(r)})),n.promise}},{key:"getAllTrustCert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.getCertsByKeys(e)}},{key:"updateCertCacheMap",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var n=t.uniqueSerialNumber,r=void 0===n?"":n,i=t.cert;e.certCacheMap.set(r,{uniqueSerialNumber:r,cert:i})}))}},{key:"getCertsByKeys",value:function(){var e=this,t=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(n){e.certCacheMap.has(n)&&t.push(e.certCacheMap.get(n))})),t}},{key:"ensureSideModeLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"openssl";if(this.sideModuleMap=this.sideModuleMap||{},"openssl"===e)this.sideModuleMap[e]||(this.sideModuleMap[e]=!0,Promise.resolve());return Promise.resolve()}},{key:"getCharBBox",value:function(e,t){var n=new this.engine.Font(e).GetCharBBox(t);return{top:n.top,left:n.left,right:n.right,bottom:n.bottom,width:n.Width(),height:n.Height()}}},{key:"getFontToneByFontID",value:function(e){var t=new this.engine.Font(e);return{ascent:t.GetAscent(),descent:t.GetDescent()}}},{key:"getCharWidthByFontID",value:function(e,t){return new this.engine.Font(e).GetCharWidth(t)}},{key:"checkJRModule",value:function(e){return(this._initedModules&e)===e}},{key:"putJRModule",value:function(e){return this._initedModules|=e}}]),n}();const ir=rr;function ar(e,t,n,r,i){or(e,(function(n){var a=(0,__webpack_require__(402).Z)(new Uint8Array(n)).buffer;t(a),Qn.set(r,a).then((function(){i(r,e)}),(function(){}))}),n)}function or(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}var sr=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,[{key:"extendsWorkerAPI",value:function(e,t,n,r,i,a){var o=this.apis,s=this.workerObj;for(var u in o)e[u]=o[u];Object.assign(s,{getPageByID:n,getDocByID:t,jrPromise:r,resolve:i,reject:a})}}]),e}();const ur=sr;var cr,lr=__webpack_require__(9444),dr={},fr={},hr=new(function(e){(0,x._)(r,e);var n=(0,B._)(r);function r(){var e;return(0,t._)(this,r),(e=n.call(this)).workerObj=dr,e.apis=fr,e}return r}(ur)),gr=function(e,t){if(!t)throw console.warn(e),new Error("Unable to updateField: document not found by id: "+e)};function pr(e,t,n){return dr.getDocByID(n).then((function(e){return e.doc.HasForm()?e.loadForm().toJson():null})).then((function(t){var n=[];t&&(n=t.fields.map((function(e){return e.image?e.image.buffer:null})).filter(Boolean)),dr.resolve(e,t,n)})).catch((function(r){if(isNaN(r)||(r=t.getErrorCode(r)),r!==t.ErrorCode.e_ErrDataNotReady)throw r;setTimeout((function(){pr(e,t,n)}),200)}))}fr.loadForm=function(e,t){var n=t.docId;if(cr)return pr(e,cr,n);dr.jrPromise.then((function(t){return cr=t.engine,pr(e,cr,n)}))},fr.reloadFieldByName=function(e,t){var n=t.docId,r=t.fieldName;return dr.getDocByID(n).then((function(e){return gr(n,e),e.loadForm().getField(r).toJson()})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.hasForm=function(e,t){var n=t.docId;return dr.getDocByID(n).then((function(t){dr.resolve(e,t.hasForm())}))},fr.updateField=function(e,t){var n=t.docId,r=t.title,i=t.key,a=t.value;return dr.getDocByID(n).then((function(e){var t=e.loadForm().getField(r);return t&&t.update(i,a)||t.toJson()})).then((function(t){dr.resolve(e,t)}))},fr.setFieldValue=function(e,t){var n=t.docId,r=t.title,i=t.value;return dr.getDocByID(n).then((function(t){gr(n,t);var a=t.loadForm().getField(r);a&&a.setValue(i),dr.resolve(e)}))},fr.updateMKProperty=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.key,o=t.value;return dr.getDocByID(n).then((function(e){return e.getPageById(r).getAnnotById(i)})).then((function(t){dr.resolve(e,t.updateMKProperty(a,o))}))},fr.setWidgetAS=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.AS;return dr.getDocByID(n).then((function(e){return e.getPageById(r).getAnnotById(i)})).then((function(t){return t.setAS(a),dr.resolve(e)}))},fr.getFieldsValue=function(e,t){var n=t.docId;return dr.getDocByID(n).then((function(t){var n=t.loadForm();dr.resolve(e,n.getFieldsValue())}))},fr.destroyForm=function(e,t){var n=t.docId;return dr.getDocByID(n).then((function(t){dr.resolve(e,t&&t.destroyForm())}))},fr.addControl=function(e,t){var n=t.docId,r=t.pageIndex,i=t.fieldName,a=t.fieldType,o=t.rect,s=t.options;return dr.getDocByID(n).then((function(e){gr(n,e);var t=e.loadForm(),u=t.engineForm,c=e.engine,l=e.JR,d=new c.WString(""),f=u.GetFieldCount(d);d.delete();var h=new c.CFX_FloatRect(o.left,o.bottom,o.right,o.top);return e.getPageByIndex(r).then((function(n){var r,o,d=new c.WString(i);if(i){var g=u.ValidateFieldName(c.FieldType.values[a],d);if(!g)for(var p=i.replace(/[^0-9]/gi,""),v=i.substr(0,i.indexOf(p)),_=parseInt(p);_++,d=new c.WString(v+_),!(g=u.ValidateFieldName(c.FieldType.values[a],d)););}if(7==a){var m=s&&s.isESignCN;if((o=m?n.page.AddSignature(h,d,c.SignatureType.e_SignatureTypeOrdinary,!1,!1):n.page.AddSignature(h,d,c.SignatureType.e_SignatureTypeOrdinary,!1)).IsEmpty())return{failed:!0};var y=(r=o.GetControl(0)).GetWidget();s&&void 0!==s.mkRotate&&(y.SetMKRotation({value:s.mkRotate}),y.ResetAppearanceStream())}else try{var S=(r=u.AddControl(n.page,d,c.FieldType.values[a],h)).GetWidget();if(s&&void 0!==s.mkRotate&&S.SetMKRotation({value:s.mkRotate}),1==a){var b=S.GetMKIconFit();b.horizontal_fraction=parseFloat(.5),b.vertical_fraction=parseFloat(.5),b.scale_way_type=c.ScaleWayType.e_ScaleWayAlways,S.SetMKIconFit(b)}if(s&&s.stateName,s&&"CreateImageStateHandler"===s.stateName){S.SetMKIconCaptionRelation(c.MKIconCaptionRelation.e_MKRelationNoCaption),S.SetHighlightingMode(c.HighlightingMode.e_HighlightingInvert);var D=S.GetMKIconFit();D.is_proportional_scaling=!0,S.SetMKIconFit(D);var P=l.createReaderCallback(s.imagePath),I=new c.Image(P);S.SetMKNormalIconImage(I,0);var A=c.Action.Create(e.doc,c.ActionType.e_TypeJavaScript),w=new c.JavaScriptAction(A);w.SetScript(new c.WString("event.target.buttonImportIcon()")),t.addAAToDict(S.GetDict(),w,{trigger:14,field:i})}S.ResetAppearanceStream(),o=r.GetField()}catch(e){console.log(e)}if(!o)throw new Error("Field not exist");if(o.IsEmpty())throw new Error("Permission error");h.delete();var C=new c.WString(""),k=u.GetFieldCount(C);return C.delete(),d.delete(),n.update().then((function(){var e=o.GetFlags(),n=o.GetDict();if(n){var r=new c.String("Ff"),s=n.GetElement(r);s&&(e=s.GetInteger()),r.delete()}if(i=o.GetName().toString(),0==f)return t.toJson().then((function(t){return{form:t,fieldName:i,fieldFlags:e}}));if(k==f)return t.getField(i).getControlsJson().then((function(t){return{controls:t,fieldName:i,fieldFlags:e}}));var u=t.addJRField(o,i,k-1);return 7==a?u.toJson():u.getControlsJson().then((function(t){return{controls:t,fieldName:i,fieldFlags:e}}))}))}))})).then((function(t){dr.resolve(e,t)}))},fr.addSignatureControlBatch=function(e,t){var n=t.docId,r=t.signatureInfos,i=t.shareVDictType;return dr.getDocByID(n).then((function(t){var n,a=t.engine,o=t.loadForm();if("string"==typeof i){if(!(n=o.getField(i).engineField))throw new Error("The signature is not exist.");if(n.IsSigned())throw new Error("The signature is signed.");if(!n.GetSignatureDict())throw new Error("The signature have no V dictionary.")}var s=[];return r.reduce((function(e,r,u){var c=r.pageIndex,l=r.rect;return e.then((function(){return t.getPageByIndex(c).then((function(e){var t,r=new a.CFX_FloatRect(l.left,l.bottom,l.right,l.top),d=new a.WString("");return 0===i?t=e.page.AddSignature(r,d,a.SignatureType.e_SignatureTypeOrdinary,!1):1===i&&0===u?(t=e.page.AddSignature(r,d,a.SignatureType.e_SignatureTypeOrdinary,!1),n=t):t=e.page.AddSignatureWithExistedVDict(r,d,a.SignatureType.e_SignatureTypeOrdinary,!1,n),e.update().then((function(){return o.addJRField(t,t.GetName().toString()).toJson().then((function(e){s.push({pageIndex:c,json:e})}))}))}))}))}),Promise.resolve()).then((function(){dr.resolve(e,s)}))}))},fr.createFieldByCopyControl=function(e,t){var n=t.docId,r=t.pageIndex,i=t.fieldType,a=t.newFieldName,o=t.newRect,s=t.srcFieldName,u=t.srcObjectNumber;return dr.getDocByID(n).then((function(e){gr(n,e);var t=e.loadForm(),c=t.engineForm,l=e.engine,d=new l.WString(""),f=c.GetFieldCount(d);d.delete();var h=new l.CFX_FloatRect(o.left,o.bottom,o.right,o.top);return e.getPageByIndex(r).then((function(e){var n,r,o=new l.WString(a);if(a){var d=c.ValidateFieldName(l.FieldType.values[i],o);if(!d)for(var g=a.replace(/[^0-9]/gi,""),p=a.substr(0,fieldName.indexOf(g)),v=parseInt(g);v++,o=new l.WString(p+v),!(d=c.ValidateFieldName(l.FieldType.values[i],o)););}if(7==i){if((r=e.page.AddSignature(h,o,l.SignatureType.e_SignatureTypeOrdinary,!1)).IsEmpty())return{failed:!0}}else try{var _=(n=c.AddControl(e.page,o,l.FieldType.values[i],h)).GetWidget(),m=new l.WString(s),y=function(e,t){for(var n=0,r=e.GetControlCount();n<r;n++)if(e.GetControl(n).GetDictionaryObjectNumber()==t)return e.GetControl(n).GetWidget()}(c.GetField(0,m),u);_.CopyPropertyFromOtherWidget(y),_.ResetAppearanceStream(),r=n.GetField()}catch(e){console.log(e)}if(!r)throw new Error("Field not exist");if(r.IsEmpty())throw new Error("Permission error");h.delete();var S=new l.WString(""),b=c.GetFieldCount(S);return S.delete(),o.delete(),e.update().then((function(){var e=r.GetFlags(),n=r.GetDict();if(n){var o=new l.String("Ff"),s=n.GetElement(o);s&&(e=s.GetInteger()),o.delete()}if(a=r.GetName().toString(),0==f)return t.toJson().then((function(t){return{form:t,fieldName:a,fieldFlags:e}}));if(b==f)return t.getField(a).getControlsJson().then((function(t){return{controls:t,fieldName:a,fieldFlags:e}}));var u=t.addJRField(r,a,b-1);return 7==i?u.toJson():u.getControlsJson().then((function(t){return{controls:t,fieldName:a,fieldFlags:e}}))}))}))})).then((function(t){dr.resolve(e,t)}))},fr.validateFieldName=function(e,t){var n=t.docId,r=t.fieldName,i=t.fieldType;return dr.getDocByID(n).then((function(e){gr(n,e),8==i&&(i=6);var t=e.engine,a=e.loadForm().engineForm,o=new t.WString(r),s=a.ValidateFieldName(t.FieldType.values[i],o),u=a.GetField(0,o);return o.delete(),(u.IsEmpty()||7!=u.GetType().value)&&s})).then((function(t){dr.resolve(e,t)}))},fr.renameField=function(e,t){var n=t.docId,r=t.fieldName,i=t.newName;return dr.getDocByID(n).then((function(e){gr(n,e);var t=e.engine,a=e.loadForm(),o=a.engineForm;delete e.form;var s=new t.WString(r),u=o.GetField(0,s);if(s.delete(),s=new t.WString(i),u.IsEmpty())return!1;for(var c=o.RenameField(u,s),l=(u=o.GetField(0,s)).GetControlCount(),d=0;d<l;d++){u.GetControl(d).GetWidget().ResetAppearanceStream()}return s.delete(),a.destroy(),!!c&&e.loadForm().toJson()})).then((function(t){dr.resolve(e,t)}))},fr.removeField=function(e,t){var n=t.docId,r=t.fieldName;return dr.getDocByID(n).then((function(e){if(!e)throw console.warn(n),new Error(n);var t=e.engine,i=e.loadForm().engineForm,a=new t.WString(r),o=i.GetField(0,a);a.delete();for(var s={},u=o.GetControlCount(),c=0;c<u;c++){s[o.GetControl(c).GetWidget().GetPage().GetIndex()]=1}7==o.GetType().value?e.doc.RemoveSignature(new t.Signature(o)):i.RemoveField(o),e.reloadPageAnnots(Object.keys(s))})).then((function(t){dr.resolve(e,!0)}))},fr.removeControl=function(e,t){var n=t.docId,r=t.pageIndex,i=t.fieldName,a=t.controlObjectNumber;return dr.getDocByID(n).then((function(t){gr(n,t);var o=t.loadForm(),s=o.engineForm,u=o.getField(i).engineField;if(7==u.GetType().value)r=u.GetControl(0).GetWidget().GetPage().GetIndex(),t.doc.RemoveSignature(u);else{for(var c,l=u.GetControlCount(),d=0;d<l;d++){var f=u.GetControl(d),h=f.GetWidget();h.IsEmpty()||h.GetDict().GetObjNum()==a&&(r=(c=f).GetWidget().GetPage().GetIndex())}c&&!c.IsEmpty()&&s.RemoveControl(c)}0===u.GetControlCount()&&o.removeField(i),t.getPageByIndex(r).then((function(e){e.update()})),dr.resolve(e,!0)}))},fr.isLastSignature=function(e,t){var n=t.docId,r=t.fieldName;return dr.getDocByID(n).then((function(t){var i;gr(n,t);for(var a,o=t.loadForm().engineForm,s=(0,W.Dp)(t.engine,""),u=o.GetFieldCount(s),c=0;c<u;c++){var l=o.GetField(c,s);if(!l.IsEmpty()&&l.GetName().toString()===r){i=l;break}}i&&7===i.GetType().value&&(a=(i=new t.engine.Signature(i)).IsLast()),dr.resolve(e,a)}))},fr.fixPageFields=function(e,t){var n=t.docId,r=t.pageIndex;return dr.getDocByID(n).then((function(t){gr(n,t),t.loadForm().engineForm.FixPageFields(r),dr.resolve(e,!0)}))},fr.getControlCount=function(e,t){var n=t.docId,r=t.pageIndex;return dr.getDocByID(n).then((function(e){return gr(n,e),Promise.all([e,e.getPageByIndex(r)])})).then((function(e){var t=(0,o._)(e,2),n=t[0],r=t[1];return r.isVirtual?0:n.loadForm().engineForm.GetControlCount(r.page)})).then((function(t){dr.resolve(e,t)}))},fr.setFieldsValue=function(e,t){var n=t.docId,r=t.fieldsValue,i=t.resetAP;return dr.getDocByID(n).then((function(t){gr(n,t),t.loadForm().setFieldsValue(r,i),dr.resolve(e,!0)}))},fr.updateFormControl=function(e,t){var n=t.docId,r=t.fieldName,i=t.objectNumber,a=t.key,o=t.value;return dr.getDocByID(n).then((function(t){gr(n,t);var s=t.loadForm().updateFormControl(r,i,a,o);dr.resolve(e,s||!0)}))},fr.setLockAction=function(e,t){var n=t.docId,r=t.title,i=t.type,a=t.fieldNames;return dr.getDocByID(n).then((function(e){gr(n,e);var t=e.loadForm().getField(r);t&&t.setLockAction(i,a)})).then((function(){dr.resolve(e)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.VerifySignature=function(e,t){var n=t.docId,r=t.fieldName,i=t.verifyConfig;return dr.getDocByID(n).then((function(e){return gr(n,e),e.loadForm().getField(r).VerifySignature(i)})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.getDigitalSignatureInfo=function(e,t){var n=t.docId,r=t.fieldName,i=t.trustedCertificateList;return dr.getDocByID(n).then((function(e){return gr(n,e),e.loadForm().getField(r).getDigitalSignatureInfo(i)})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.verifyDocSignature=function(e,t){var n=t.docId,r=t.verifyConfig;return dr.getDocByID(n).then((function(e){return gr(n,e),e.verifyDocSignature(r)})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.verifySignatureLtv=function(e,t){var n=t.docId,r=t.fieldName,i=t.verifyConfig;return dr.getDocByID(n).then((function(e){gr(n,e);var t=e.loadForm().getField(r);return lr.ZP.loadWasmModule(lr.v6).then((function(){return t.verifySignatureLtv(i)}))})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.clearSignature=function(e,t){var n=t.docId,r=t.fieldName,i=t.verifyConfig;return dr.getDocByID(n).then((function(e){return gr(n,e),e.loadForm().getField(r).clearSignature(i)})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.getSignatureBitmap=function(e,t){var n=t.docId,r=t.fieldName;return dr.getDocByID(n).then((function(e){return gr(n,e),e.loadForm().getField(r).getSignatureBitmap()})).then((function(t){dr.resolve(e,t,t?[t.buffer]:[])}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.setSignatureBitmap=function(e,t){var n=t.docId,r=t.fieldName,i=t.buffer;return dr.getDocByID(n).then((function(e){return gr(n,e),e.loadForm().getField(r).setSignatureBitmap(i)})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.getControlPageIndex=function(e,t){var n=t.docId,r=t.fieldName,i=t.objectNumber;return dr.getDocByID(n).then((function(e){gr(n,e);var t=e.loadForm().getField(r);if(!t)return-1;for(var a=t.engineField,o=a.GetControlCount(),s=0;s<o;s++){var u=a.GetControl(s);if(i==u.GetDictionaryObjectNumber()){var c=u.GetWidget();return c.IsEmpty()?-1:c.GetPage().GetIndex()}}return-1})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.copyControls=function(e,t){var n=t.docId,r=(t.pageIndex,t.dstPageIndex),i=t.controls;return dr.getDocByID(n).then((function(e){return gr(n,e),Promise.all([0,e.getPageByIndex(r)]).then((function(t){var n=(0,o._)(t,2),r=n[0],a=n[1];return e.loadForm().copyControls(r,a,i)}))})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.duplicateWidget=function(e,t){var n=t.docId,r=t.pages,i=t.fieldName,a=t.objectNumber;return dr.getDocByID(n).then((function(e){gr(n,e);var t=r.map((function(t){return e.getPageByIndex(t)})),o=e.loadForm();return Promise.all(t).then((function(e){return o.duplicateWidget(e,i,a)}))})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.removeAction=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.trigger,o=(t.parentObject,t.objectNumber);return dr.getDocByID(n).then((function(e){return e.getPageById(r).getAnnotById(i)})).then((function(t){dr.resolve(e,t.removeAction(a,o))}))},fr.duplicateField=function(e,t){var n=t.docId,r=t.fieldName,i=t.pageIndex,a=t.annotObjNum,s=t.columns,u=t.rows,c=t.positions;return dr.getDocByID(n).then((function(e){return gr(n,e),Promise.all([e,e.getPageByIndex(i)])})).then((function(e){var t=(0,o._)(e,2),n=t[0],i=t[1];return n.loadForm().duplicateField(r,i,a,s,u,c)})).then((function(e){return e.loadForm().toJson()})).then((function(t){dr.resolve(e,t)}),(function(t){dr.reject(e,{err:-1},[],t)}))},fr.setCO=function(e,t){var n=t.docId,r=t.CO;return dr.getDocByID(n).then((function(t){gr(n,t);t.engine;t.loadForm().setCO(r),dr.resolve(e,!0)}))},fr.moveControl=function(e,t){var n=t.docId,r=t.fieldId,i=t.fieldName,a=t.newName;return dr.getDocByID(n).then((function(e){gr(n,e);for(var t=e.engine,o=e.loadForm(),s=o.engineForm,u=o.getField(i).engineField,c=u.GetControlCount(),l=new t.WString(a),d="",f=0;f<c;f++){var h=u.GetControl(f);if(h.GetWidget().GetDict().GetObjNum()===r){d=s.MoveControl(h,l);break}}return delete e.form,l.delete(),o.destroy(),!!d&&e.loadForm().toJson()})).then((function(t){dr.resolve(e,t)}))},fr.getAAJson=function(e,t){var n=t.docId,r=t.fieldName;return dr.getDocByID(n).then((function(e){return e.loadForm().getField(r).getAAJson()})).then((function(t){dr.resolve(e,t)}))};const vr=hr.extendsWorkerAPI.bind(hr);var _r={},mr={},yr=new(function(e){(0,x._)(i,e);var n=(0,B._)(i);function i(){var e;return(0,t._)(this,i),(e=n.call(this)).workerObj=_r,e.apis=mr,e}return(0,r._)(i,[{key:"extendsWorkerAPI",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,M._)((0,O._)(i.prototype),"extendsWorkerAPI",this).apply(this,t),this}},{key:"clearObjectFromCache",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ar.apply(null,t)}}]),i}(ur)),Sr={};function br(e,t,n){var r=Sr[t]=Sr[t]||{};(r[n]=r[n]||{})[e.id]=e}var Dr={};function Pr(e,t,n,r){var i=Dr[t]=Dr[t]||{};(i[n]=i[n]||{})[r]=e}function Ir(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{r=Sr[e][t][n]}catch(e){}if(!r&&!i)throw new Error("Couldn't obtain the graphic object from cache and the operation cannot be performed!");return r}function Ar(e,t,n){try{n?delete Sr[e][t][n]:t?delete Sr[e][t]:e&&delete Sr[e]}catch(e){}}mr.getGraphicsObjectAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.point,o=t.tolerance,s=t.type,u=t.rect;return _r.getPageByID(n,r).then((function(e){return u?e.getGraphicsObjectsInRect(u,o,s):e.getGraphicsObjectAtPoint(i,o,s)})).then((function(t){if((0,a._)(t,Array)){var i=[];return t.forEach((function(e){br(e,n,r),i.push(e.toJson())})),void _r.resolve(e,i)}t?(br(t,n,r),_r.resolve(e,t.toJson())):_r.resolve(e,{})}))},mr.setGraphicsObjectMatrix=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.matrix,o=Ir(n,r,i);o.setMatrix(a),_r.resolve(e,o.toJson())},mr.setGraphicsObjectRect=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.rect,o=Ir(n,r,i);o.setRect(a,!0),_r.resolve(e,o.toJson())},mr.getGraphicsObjectBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.scale,o=t.rotation,s=Ir(n,r,i).render(a,o,null);_r.resolve(e,s,[s.buffer])},mr.setGraphicsObjectBorderStyle=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.style,o=t.dashes,s=Ir(n,r,i);s.setBorderStyle(a,o,!0),_r.resolve(e,s.toJson())},mr.setGraphicsObjectBorderWidth=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.width,o=Ir(n,r,i);o.setBorderWidth(a,!0),_r.resolve(e,o.toJson())},mr.setGraphicsObjectBorderColor=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.color,s=Ir(r,i,a);s&&(n=s.setBorderColor(o,!0)),_r.resolve(e,n)},mr.setGraphicsObjectFillColor=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.color,o=Ir(n,r,i);o.setFillColor(a,!0),_r.resolve(e,o.toJson())},mr.setGraphicsObjectOpacity=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.opacity,s=Ir(r,i,a);s&&(n=s.setOpacity(parseFloat(o),!0)),_r.resolve(e,n)},mr.addGraphicsObject=function(e,t){var n=t.docId,r=t.pageId,i=t.info;return Promise.all([_r.jrPromise,_r.getPageByID(n,r)]).then((function(e){var t=(0,o._)(e,2),n=t[0],r=t[1];return Promise.all([n,r,r.c_pagePromise])})).then((function(e){var t=(0,o._)(e,3),n=t[0],r=t[1],a=t[2];return n.graphicsObjectManager.create(i,a,r)})).then((function(t){br(t,n,r),_r.resolve(e,t.toJson())}))},mr.setImageObjectOpacity=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.opacity,s=Ir(r,i,a);s&&(n=s.setOpacity(o,!0)),_r.resolve(e,n)},mr.removeGraphicsObject=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.resetContent,s=Ir(r,i,a,!0);s&&(n=s.remove(o),s=null,Ar(r,i,a)),_r.resolve(e,n)},mr.moveGraphicsObjectByPosition=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.type,s=t.graphicObjectId,u=Ir(r,i,a,!0);u&&(n=u.moveToPosition(o,s)),_r.resolve(e,n)},mr.setImageObjectRotation=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.rotation,o=Ir(n,r,i);o.setRotation(a,!0),_r.resolve(e,o.toJson())},mr.getImageObjectStream=function(e,t){var n=Ir(t.docId,t.pageId,t.id);_r.resolve(e,n.getStream())},mr.setTextObjectChar=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.char,o=Ir(n,r,i);return o.setText(a).then((function(){_r.resolve(e,o.toJson())}))},mr.setTextObjectItalic=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.italic,o=Ir(n,r,i);return o.setItalic(a).then((function(){_r.resolve(e,o.toJson())}))},mr.setTextObjectBold=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.bold,o=Ir(n,r,i);return o.setBold(a).then((function(){_r.resolve(e,o.toJson())}))},mr.setTextObjectFontSize=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.size,o=Ir(n,r,i);return o.setFontSize(a).then((function(){_r.resolve(e,o.toJson())}))},mr.setTextObjectStandardFont=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.standardId,o=Ir(n,r,i);return o.setStandardFont(a).then((function(){_r.resolve(e,o.toJson())}))},mr.setTextObjectFontByName=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.name,o=t.styles,s=t.charset,u=Ir(n,r,i);return u.setFontByName(a,o,s).then((function(){_r.resolve(e,u.toJson())}))},mr.getTextObjectWoff=function(e,t){var n=Ir(t.docId,t.pageId,t.id).getWoff();return _r.resolve(e,n,[])},mr.pasteGraphicObject=function(e,t,n,r,i,a){var o=Dr[t][r.id][i],s=n.page,u=s.GetLastGraphicsObjectPosition(n.engine.GraphicsObjectType.e_TypeAll);s.InsertGraphicsObject(u,o.graphicsObject),o.setRect(a),s.GenerateContent(),br(o,t,n.id),function(e,t,n){try{n?delete Dr[e][t][n]:t?delete Dr[e][t]:e&&delete Dr[e]}catch(e){}}(t,r.id,i);var c=o.graphicsObject.Clone();Pr(n.JR.graphicsObjectManager.get(c,s,n),t,r.id,i),_r.resolve(e,o.toJson())},mr.getGraphicsObjectByIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.index;return _r.getPageByID(n,r).then((function(e){return e.getGraphicsObjectByIndex(i)})).then((function(t){t?(br(t,n,r),_r.resolve(e,t.toJson())):_r.resolve(e,{})}))},mr.getGraphicsObjectsCount=function(e,t){var n=t.docId,r=t.pageId;return _r.getPageByID(n,r).then((function(e){return e.getGraphicsObjectsCount()})).then((function(t){_r.resolve(e,t)}))},mr.addPageImage=function(e,t){var n=t.docId,r=t.pageId,i=t.imageBuffer,a=t.point,o=t.width,s=t.height,u=t.rotation;return _r.getPageByID(n,r).then((function(e){return e.addImage(i,a,o,s,u)})).then((function(t){t&&br(t,n,r),_r.resolve(e,t&&t.toJson())}))},mr.cloneGraphicObject=function(e,t){var n=t.docId,r=t.pageId,i=t.srcPageId,a=t.ids;Dr={};var o=a.map((function(e){return Ir(n,i,e)}));return _r.getPageByID(n,r).then((function(t){var r=o.map((function(e){return e.graphicsObject.Clone()})),i=t.page,s=[],u=[];r.forEach((function(e){s.push(t.JR.graphicsObjectManager.get(e,i,t))})),s.forEach((function(e,r){Pr(e,n,t.id,a[r]),u.push(e.toJson())})),_r.resolve(e,u)}))},mr.getGraphicsObjectsByRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect,a=t.tolerance,o=t.type,s=t.isInRect;return _r.getPageByID(n,r).then((function(e){return e.getGraphicsObjectsByRect(i,a,o,s)})).then((function(t){if(Array.isArray(t)){var i=[];return t.forEach((function(e){br(e,n,r),i.push(e.toJson())})),void _r.resolve(e,i)}t?(br(t,n,r),_r.resolve(e,t.toJson())):_r.resolve(e,{})}))};const wr=yr.extendsWorkerAPI.bind(yr);var Cr=function(){function e(){(0,t._)(this,e),(0,i._)(this,"bitmaps",void 0),(0,i._)(this,"gsdk",void 0),this.bitmaps=new Map}return(0,r._)(e,[{key:"setGSDK",value:function(e){this.gsdk=e}},{key:"destroy",value:function(){this.bitmaps.forEach((function(e){return e.delete()}))}},{key:"render",value:function(e,t,n){var r=this.gsdk,i=this.bitmaps,a=0|n.width,o=0|n.height,s=a+"-"+o,u=i[s]||(i[s]=new r.Bitmap(a,o,r.DIBFormat.e_DIBArgb,0,0));u.FillRect(16777215,null);var c=new r.Renderer(u,!0);return e(c),this.getBitmapBuffer(r,t,u,c)}},{key:"getBitmapBuffer",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];n.GetFormat()!=e.DIBFormat.e_DIBRgb32&&n.GetFormat()!=e.DIBFormat.e_DIBArgb&&n.ConvertFormat(e.DIBFormat.e_DIBRgb32);var a,o=n.GetBuffer(),s=n.GetWidth(),u=n.GetHeight(),c=u*n.GetPitch(),l=o+c;return a=e.HEAPU8.buffer.slice?e.HEAPU8.buffer.slice(o,l):new Uint8Array(e.HEAPU8.buffer,o,c).buffer,i&&r.delete(),{index:t,buffer:a,width:s,height:u,left:0,top:0}}}]),e}();const kr=new Cr;var Er=function(){function e(){var n=this;(0,t._)(this,e),(0,i._)(this,"Release",(function(){})),(0,i._)(this,"FindFontInFormatBar",(function(e){})),(0,i._)(this,"EnableFormatToolBar",(function(e){})),(0,i._)(this,"SetOwnerFontName",(function(e){for(var t=[],n=0,r=e.GetSize();n<r;n++)t.push(e.GetAt(n).toString());postMessage({workflow:Wr,type:"fontNameChange",msg:t})})),(0,i._)(this,"ClearOwnerFontName",(function(e){})),(0,i._)(this,"UpdateTextFormat",(function(e,t,r,i,a,o,s){var u=r?r.toString():"Helvetica";n.setToolbarFont({value:u}),postMessage({workflow:Wr,type:"updateTextFormat",msg:{secProps:{lineLeading:e.fLineLeading,lineIndent:e.fLineIndent,alignment:e.nAlignment,enableSoftReturn:e.bEnableSoftReturn,rtl:e.bRTL,secSpace:e.fSecSpace>=0?e.fSecSpace:0},wordProp:{fontSize:t.fFontSize,wordColor:vn(t.dwWordColor),strokeColor:vn(t.dwStrokeColor),scriptType:t.nScriptType,wordStyle:t.nWordStyle,charSpace:t.fCharSpace,horzScale:t.nHorzScale,wordSpace:t.fWordSpace,xOffset:t.fXOffset,yOffset:t.fYOffset,renderingMode:t.nRenderingMode,lineWidth:t.fLineWidth,charCode:t.dwCharCode,alphal:t.nAlphal/255,isCross:Boolean(4&t.nWordStyle),isUnderline:Boolean(2&t.nWordStyle),isBold:Boolean(262144&t.nWordStyle||11===t.nRenderingMode),isItalic:Boolean(64&t.nWordStyle)},fontName:u,bulletType:i.value,numberType:a.value,select:o}})}))}return(0,r._)(e,[{key:"setToolbarFont",value:function(e){}}]),e}(),Gr={},Tr={},Fr={trackPopupMenu:function(e,t,n,r){},TrackPopupMenu:function(e,t,n,r){return Fr.trackPopupMenu(Gr[e],t,n,r)},Release:function(){},CreatePopupMenu:function(){var e=(Date.now()+1e3*Math.random()|0)%2147483647;return Gr[e]=[],e},CreatePopupSubMenu:function(){var e=(Date.now()+1e3*Math.random()|0)%2147483647;return Gr[e]=[],e},AppendMenuItem:function(e,t){var n={name:t,enable:!0,isCheck:!0,id:t};Tr[t]=n,Gr[e].push(n)},AppendSubMenu:function(e,t,n){Gr[e].push({name:t,subItems:Gr[n]})},RemoveMenuItem:function(e,t,n){},AppendSeparator:function(e){Gr[e].push({name:"-"})},EnableMenuItem:function(e,t,n,r){var i=Tr[t];i&&(i.enable=n)},CheckMenuItem:function(e,t,n){Tr[t].isCheck=n},InsertMenuItem:function(e,t,n,r){},InsertSeparator:function(e,t){},DestroyMenu:function(e){Gr={}},IsMenuEnabled:function(e){return!0}};const Rr=Fr;var Mr,Or,xr,Br=function(){function e(){(0,t._)(this,e),(0,i._)(this,"isEdit",!1),(0,i._)(this,"isGroup",!1),(0,i._)(this,"endCallback",void 0),(0,i._)(this,"endEditCallback",void 0)}return(0,r._)(e,[{key:"Release",value:function(){}},{key:"BeginEdit",value:function(e){this.isEdit=!0}},{key:"EndEdit",value:function(){this.isEdit=!1,this.is_edit&&this.endEditCallback()}},{key:"IsUndoRedoing",value:function(){}},{key:"BeginUndoGroup",value:function(){this.isGroup=!0}},{key:"EndUndoGroup",value:function(e){this.isGroup=!1,this.endCallback(),this.is_edit=e}},{key:"SetOwnUndoMode",value:function(e){e||this.endEditCallback()}},{key:"Restore",value:function(e){}},{key:"registerEndGroup",value:function(e){this.endCallback=e}},{key:"registerEndEdit",value:function(e){this.endEditCallback=e}}]),e}(),Nr=!0,Lr=!1;function jr(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n.includes(r)?e.replaceAll(new RegExp(r,"gi"),""):e}var Ur,Wr="touchup",Hr=function(){function e(n){var r=this,a=this;(0,t._)(this,e),(0,i._)(this,"undoCallback",void 0),(0,i._)(this,"lastUndo",[]),(0,i._)(this,"undos",[]),(0,i._)(this,"redos",[]),(0,i._)(this,"OnContentChange",void 0),(0,i._)(this,"lastEditUndo",[]),(0,i._)(this,"editUndos",[]),(0,i._)(this,"editRedos",[]),(0,i._)(this,"Undo",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n,r;t?e?(n=a.editUndos,r=a.editRedos):(n=a.editRedos,r=a.editUndos):e?(n=a.undos,r=a.redos):(n=a.redos,r=a.undos);var i=n.pop();if(!i)return;if(Array.isArray(i))if(e)for(var o=i.length-1;o>=0;o--)Mr.TouchupUndo(i[o],e);else for(var s=0;s<i.length;s++)Mr.TouchupUndo(i[s],e);else Mr.TouchupUndo(i,e);r.push(i)}catch(e){console.log("undo err",e)}})),this.undoCallback=n,n.registerEndGroup((function(){r.editUndos.push(r.lastEditUndo),r.lastEditUndo=[],r.undos.push(r.lastUndo),r.lastUndo=[],"ReplaceAll"===xr&&(r.editUndos=[],r.editRedos=[],r.undos=[],r.redos=[],setTimeout((function(){xr=null}),2e3))})),n.registerEndEdit((function(){r.undos=r.undos.reduce((function(e,t){return t.length>1&&e.push(t),e}),[]),r.redos=[],r.editUndos=r.editUndos.reduce((function(e,t){return t.length>1&&e.push(t),e}),[]),r.editRedos=[]}))}return(0,r._)(e,[{key:"Release",value:function(){}},{key:"OnEnterEditing",value:function(e){return postMessage({workflow:Wr,type:"enterEdit"}),!1}},{key:"OnExitEditing",value:function(){return postMessage({workflow:Wr,type:"exitEdit"}),!1}},{key:"OnInvalid",value:function(e,t,n){}},{key:"SetTimerCallback",value:function(e,t){var n=setInterval((function(){Mr.OnTimeout(t,n)}),e);return Nr&&postMessage({workflow:Wr,type:"toggleCaret",msg:!0}),n}},{key:"KillTimer",value:function(e){Nr&&postMessage({workflow:Wr,type:"toggleCaret",msg:!1}),clearInterval(e)}},{key:"OnAddUndo",value:function(e,t){if(postMessage({workflow:Wr,type:"docModified"}),t){if(this.undoCallback.isGroup)return void this.lastEditUndo.push(e);this.editUndos.push(e),this.editRedos=[]}else{if(this.undoCallback.isGroup)return void this.lastUndo.push(e);this.undos.push(e),this.redos=[]}}},{key:"OnChangeDoc",value:function(e){}},{key:"OnLROnPageWithoutText",value:function(e){var t=e.GetPage().GetIndex();postMessage({workflow:Wr,type:"pageWithoutText",msg:t})}},{key:"OnTextInputReachesLimit",value:function(e){var t=e.GetPage().GetIndex();postMessage({workflow:Wr,type:"onTextInputReachesLimit",msg:t})}}]),e}(),zr={Create:function(e,t){return postMessage({workflow:Wr,type:"progressCreate",msg:[e,t]}),101},IsCancelled:function(e){return!1}};Ur=self.Proxy?new Proxy(zr,{get:function(e,t){return e[t]?e[t]:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];postMessage({workflow:Wr,type:"progress"+t.toString(),msg:n.map((function(e){return(0,a._)(e,Mr.WString)?e.toString():e}))})}}}):function(){};var Kr=function(){function e(){var n=this;(0,t._)(this,e),(0,i._)(this,"touchMgr",void 0),(0,i._)(this,"matrixes",void 0),(0,i._)(this,"visibleIndexes",[]),(0,i._)(this,"GetVisiblePage",void 0),(0,i._)(this,"GetDefaultEditorPage",void 0),(0,i._)(this,"GetPage",void 0),(0,i._)(this,"GetLatestPDFPage",void 0),(0,i._)(this,"GetCurrentEditorPage",void 0),(0,i._)(this,"IsShiftKeyDown",void 0),(0,i._)(this,"IsControlKeyDown",void 0),(0,i._)(this,"font",{type:"WString",value:""}),(0,i._)(this,"revertRects",[]),(0,i._)(this,"Release",(function(){})),(0,i._)(this,"GetRenderMatrix",(function(e){var t=new Mr.Matrix,r=e.GetPage();if(!n.matrixes)return t;var i=n.matrixes[r.GetIndex()];if(!i)return t;var a=i[2];t.Set(a.a,a.b,a.c,a.d,a.e,a.f);var o=n.matrixes.dpr||1;return t.Scale(o,o,!1),t})),(0,i._)(this,"GetClientRect",(function(e){var t=n.matrixes.uiRect,r=t.width,i=t.height,a=n.matrixes.dpr||1,o=new Mr.CFX_FloatRect;return o.left=0,o.top=0,o.right=r*a,o.bottom=i*a,o})),(0,i._)(this,"GetPageVisibleRect",(function(e){var t=e.GetPage(),r=n.matrixes[t.GetIndex()],i=new Mr.CFX_FloatRect;if(!r)return i;var a=r[3],o=n.matrixes.dpr||1;i.left=a.left*o,i.top=a.top*o,i.right=a.right*o,i.bottom=a.bottom*o;var s=n.GetRenderMatrix(e),u=new Mr.Matrix;return u.SetReverse(s),u.TransformRect(i),s.delete(),u.delete(),i})),(0,i._)(this,"GetPageRect",(function(e){var t=e.GetPage(),r=n.matrixes[t.GetIndex()],i=new Mr.CFX_FloatRect;if(!r)return i;var a=r[4],o=n.matrixes.dpr||1;return i.left=a.left*o,i.top=a.top*o,i.right=a.right*o,i.bottom=a.bottom*o,i})),(0,i._)(this,"GetPageViewScale",(function(e){var t=e.GetPage().GetIndex(),r=n.matrixes[t];return r?r[0]:4/3})),(0,i._)(this,"GotoPageView",(function(e,t,n){var r=e.GetPage().GetIndex();return postMessage({workflow:Wr,type:"gotoPageView",msg:{index:r,left:t,top:n}}),!0})),(0,i._)(this,"ScrollToCenterPoint",(function(e,t){var n=e.GetPage().GetIndex();postMessage({workflow:Wr,type:"gotoPageView",msg:{index:n,left:t.x,top:t.y}})})),(0,i._)(this,"Scroll",(function(e,t){console.log("Scroll")})),(0,i._)(this,"GetString",(function(e){return(0,W.Dp)(Mr,"string"+e)})),(0,i._)(this,"ShowMessageBox",(function(e,t,n){return postMessage({workflow:Wr,type:"showMessageBox",msg:{id:e.value,flag:t,data:n}}),!0})),(0,i._)(this,"ChangeCursor",(function(e){postMessage({workflow:Wr,type:"cursorChange",msg:e&&e.value})})),(0,i._)(this,"GetPageWindow",(function(e){return e.GetPage().GetIndex()+1e3})),(0,i._)(this,"SetClipboardText",(function(e,t){__webpack_require__.g.clipboardText=t.toString()})),(0,i._)(this,"GetClipboardText",(function(){return(0,W.Dp)(Mr,__webpack_require__.g.clipboardText||"")})),(0,i._)(this,"DrawRect",(function(e,t,r){return!n.touchMgr.lastEditorPage||(r.TransformRect(t),n.revertRects.push({left:t.left,right:t.right,top:t.top,bottom:t.bottom}),!0)}))}return(0,r._)(e,[{key:"GetToolbarFontName",value:function(){if(this.font.value){if((0,z.Cl)(this.font.value))return(0,W.Dp)(Mr,this.font.value);var e=this.font.value;return e=jr(e,"bold"),e=jr(e,"italic"),(e=jr(e,"oblique")).endsWith(",")&&(e=e.substr(0,e.length-1)),(0,W.Dp)(Mr,e)}return(0,W.Dp)(Mr,this.font.value)}},{key:"setToolbarFont",value:function(e){this.font=e}},{key:"GetTextTemplate",value:function(e,t,n){if(t){var r=Mr.getPETextObj(t);if(r.GetType()==Mr.GraphicsObjectType.e_TypeText){var i={font:new Mr.Font(new Mr.WString((0,z.gO)()),0,0,0),fontName:(0,z.gO)(),fontSize:16,charSpace:0,wordSpace:0,textMode:Mr.Mode.e_ModeFill.value,horizontalScale:100,strokeColor:0,fillColor:0,fontIsItalic:!1,fontIsBold:!1,opacity:1};this.touchMgr.doc.pageEditor&&(i=this.touchMgr.doc.pageEditor.handle("getDefaultProperty",null,[1]));var a=r.GetTextObject();this.font.value=i.fontName;var o=new Mr.TextState;o.font=i.font,o.font_size=i.fontSize,o.charspace=i.charSpace,o.wordspace=i.wordSpace,o.textmode=i.textMode,o.origin_position.x=0,o.origin_position.y=0,o.SetMatrixA(i.horizontalScale/100),o.SetMatrixB(0),o.SetMatrixC(0),o.SetMatrixD(1);var s=e.GetPage(),u=this.matrixes[s.GetIndex()],c=u?u[1]/90:0;switch(4-(s.GetRotation().value+c)%4){case 1:o.SetMatrixA(0),o.SetMatrixB(-1),o.SetMatrixC(i.horizontalScale/100),o.SetMatrixD(0);break;case 2:o.SetMatrixA(-1),o.SetMatrixB(0),o.SetMatrixC(0),o.SetMatrixD(-1);break;case 3:o.SetMatrixA(0),o.SetMatrixB(1),o.SetMatrixC(-i.horizontalScale/100),o.SetMatrixD(0)}a.SetTextState(e.GetPage(),o,i.fontIsItalic,i.fontIsBold?550:400),a.SetFillColor(i.fillColor),a.SetStrokeColor(i.strokeColor),a.SetFillOpacity(i.opacity),a.SetStrokeOpacity(i.opacity)}}}},{key:"IsTextDirectionEnabled",value:function(){return!1}},{key:"GetTextDirection",value:function(){return{value:0}}}]),e}(),Jr=function(){function e(){(0,t._)(this,e),(0,i._)(this,"rects",[]),(0,i._)(this,"currTextRects",[])}return(0,r._)(e,[{key:"Release",value:function(){}},{key:"OnEnterReplaceAll",value:function(e){}},{key:"OnExitReplaceAll",value:function(e){}},{key:"GetLastedDocTempPath",value:function(e){return(0,W.Dp)(Mr,"c:/fakepath.pdf")}},{key:"ReParseTextPage",value:function(e,t,n){}},{key:"AddSelectTextRects",value:function(e,t){if(Nr)for(var n=[],r=0;r<t.GetSize();r++){var i=t.GetAt(r),a={left:i.left,right:i.right,top:i.top,bottom:i.bottom};n.push(a),this.currTextRects=n,this.rects.push(a)}}},{key:"GetSelectPDFRect",value:function(e){var t=new Mr.RectFArray;return this.rects.forEach((function(e){var n=new Mr.CFX_FloatRect(e.left,e.bottom,e.right,e.top);t.Add(n)})),t}},{key:"AddSelect",value:function(e,t){if(Nr){this.rects=[];for(var n=0;n<t.GetSize();n++){var r=t.GetAt(n);this.rects.push({left:r.left,right:r.right,top:r.top,bottom:r.bottom})}}}},{key:"DeselectAll",value:function(){this.rects=[]}}]),e}(),Vr=function(){function n(){var e=this;(0,t._)(this,n),(0,i._)(this,"targets",{}),(0,i._)(this,"target",void 0),(0,i._)(this,"controlDown",!1),(0,i._)(this,"shiftDown",!1),(0,i._)(this,"findReplace",void 0),(0,i._)(this,"providerCallback",void 0),(0,i._)(this,"operationNotifier",void 0),(0,i._)(this,"lastInvalid",void 0),(0,i._)(this,"editPages",void 0),(0,i._)(this,"doc",void 0),(0,i._)(this,"jrMgr",void 0),(0,i._)(this,"popMenuAction",-1),(0,i._)(this,"lastRButtonUpArgs",void 0),(0,i._)(this,"updateTask",void 0),(0,i._)(this,"modifiedObjects",[]),(0,i._)(this,"lastEditorPage",void 0),(0,i._)(this,"cProvider",void 0),(0,i._)(this,"OnInvalidDelay",void 0),(0,i._)(this,"skipThrottle",!1),(0,i._)(this,"findReplaceCallback",void 0),(0,i._)(this,"currentSelectionPageIndex",-1),(0,i._)(this,"isActivated",!1),(0,i._)(this,"OnInvalid",(function(){var t=e.render();if(t){var n={workflow:Wr,type:"updateView",msg:{bitmapInfo:t,revertRects:e.providerCallback.revertRects}};postMessage(n,[t.buffer])}})),(0,i._)(this,"OnContentChange",(function(t,n,r,i){var a=n.GetPage(),o=a.GetIndex();if(r){for(var s=0;s<r.GetSize();s++){var u=r.GetAt(s);u.GenerateContent(),e.modifiedObjects.push(u)}if(e.doc.pageIndexMap[o]){var c=e.doc.pageIndexMap[o];if(c.needReParse)return void c.parsedPage().then((function(e){a.GenerateContent()}))}a.GenerateContent()}postMessage({workflow:Wr,type:"contentChange",msg:{type:t.value,graphicsObjectType:Mr.GraphicsObjectType.e_TypeText.value,pageIndex:o}})})),(0,i._)(this,"setJRMgr",(function(t){e.jrMgr=t})),(0,i._)(this,"GetVisiblePage",(function(t){var n=new Mr.TouchupEditorPageArray;return e.providerCallback.visibleIndexes.forEach((function(e){var r=t.GetPage(e),i=Mr.TUEditorPage.Create(r,101);n.Add(i)})),n})),(0,i._)(this,"GetDefaultEditorPage",(function(t){var n=t?t.GetIndex():e.providerCallback.visibleIndexes[0],r=e.doc.doc.GetPage(n);return Mr.TUEditorPage.Create(r,101)})),(0,i._)(this,"TrackPopupMenu",(function(t,n,r,i){if(-1!==e.popMenuAction){var a=e.popMenuAction;return e.popMenuAction=-1,e.render(),a}var o={},s=i.GetPage().GetIndex(),u=e.providerCallback.matrixes.dpr||1;return o.position={x:n/u,y:r/u},o.menu=t,o.pageIndex=s,postMessage({workflow:Wr,type:"showPopupMenu",msg:o}),-1>>>0})),(0,i._)(this,"GetPage",(function(t,n){var r;return r=e.doc.pageIndexMap[n]?e.doc.pageIndexMap[n].page:t.GetPage(n),Mr.TUEditorPage.Create(r,100)})),(0,i._)(this,"GetCurrentEditorPage",(function(){return e.GetDefaultEditorPage(0)})),(0,i._)(this,"IsShiftKeyDown",(function(){return e.shiftDown})),(0,i._)(this,"IsControlKeyDown",(function(){return e.controlDown})),(0,i._)(this,"setTextToolProperty",(function(t){var n=e.doc.engine,r=n.AdvEditStyleType,i=n.LineType,a={editTextBox:r.e_AdvEditStyleType_EditTextBox,editTextCaret:r.e_AdvEditStyleType_EditTextCaret,addTextBox:r.e_AdvEditStyleType_AddTextBBox};return Object.entries(a).forEach((function(n){var r=(0,o._)(n,2),a=r[0],s=r[1],u=t[a];u?(e.jrMgr.ConfigColorStyle(s,!u.color,u.color),e.jrMgr.ConfigLineStyle(s,i.values[u.lineType?u.lineType:"0"])):(e.jrMgr.ConfigColorStyle(s,!0,null),e.jrMgr.ConfigLineStyle(s,i.values[0]))})),e.jrMgr.GenerateConfigInfo()}))}return(0,r._)(n,[{key:"render",value:function(){var e=this;if(!this.target||!this.target.Render||!this.providerCallback.matrixes)return null;var t=this.providerCallback.matrixes.uiRect,n=this.providerCallback.matrixes.dpr,r={width:t.width*n,height:t.height*n};this.providerCallback.revertRects=[];var i=kr.render((function(t){var n=e.GetVisiblePage(e.doc.doc);return e.target.Render(n,t)}),{},r);return i.left=t.left,i.top=t.top,i}},{key:"pageModified",value:function(e){var t=this,n=new Mr.TouchupEditorPageArray;e.forEach((function(e){var r=t.doc.pageIndexMap[e].page,i=Mr.TUEditorPage.Create(r,101);n.Add(i)})),this.jrMgr.OnPageContentChange(n)}},{key:"setCObject",value:function(e,t,n,r){this.providerCallback=n,n.touchMgr=this,this.operationNotifier=t,this.editPages={},this.doc=e,this.cProvider=r}},{key:"updateMatrix",value:function(e){if(this.cProvider.SetSystemDPI(96*e.dpr,96*e.dpr),JSON.stringify(this.providerCallback.matrixes)!=JSON.stringify(e)){var t=e.visibleIndexes;0!=t.length&&(this.providerCallback.matrixes=e,this.providerCallback.visibleIndexes=t,this.OnInvalidDelay())}}},{key:"handleFindReplaceEvent",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];xr=t;var i=this.findReplace;if(i||(i=this.findReplace=this.jrMgr.GetFindReplace()).SetHighlightColor(1325662463),"AbortReplaceAll"!=t){if("ReplaceAll"==t)return Nr=!1,Lr=!1,this.doc.getPageCount().then((function(t){var a,o=0,s=[r[0],0,{type:"FindOption",value:4|3&r[1].value}],c=[r[2]],l=r[3]||0,d=0,f=Sn(Mr,n,s,Mr.TUEditorPage),h=Sn(Mr,n,c,Mr.TUEditorPage),g=n,p=(a=(0,e._)((function(e){var n,r;return(0,u.Jh)(this,(function(a){switch(a.label){case 0:return f[1]=e,postMessage({workflow:Wr,type:"replaceAllProgress",msg:{pageIndex:d,total:t}}),Lr&&postMessage({workflow:Wr,type:"replaceAllProgress",msg:{pageIndex:-1}}),d>=t||Lr?(Nr=!0,[2,o]):[4,g.doc.getPageByIndex(e)];case 1:return(n=a.sent()).needReParse?[4,n.parsedPage()]:[3,3];case 2:a.sent(),a.label=3;case 3:return o+=function(e,t,n){for(var r=0;e.Find.apply(e,t);)e.Replace.apply(e,n),r++;return r}(i,f,h),d++,(r=e+1)>=t&&(r=0),[2,bn().then((function(){return p(r)}))]}}))})),function(e){return a.apply(this,arguments)});return p(l)}));var a=Sn(Mr,this,r,Mr.TUEditorPage);return this.findReplaceCallback&&(this.findReplaceCallback.currTextRects=[]),"Find"==t?this.doc.getPageByIndex(r[1]).then((function(e){return e.parsedPage()})).then((function(e){return i[t].apply(i,a)})).then((function(e){var t;return n.currentSelectionPageIndex=r[1],{isFound:e,pageIndex:r[1],rectArray:null===(t=n.findReplaceCallback)||void 0===t?void 0:t.currTextRects}})):i[t].apply(i,a)}Lr=!0}},{key:"triggerPopMenuAction",value:function(e){this.popMenuAction=e,this.target.OnRButtonUp&&this.target.OnRButtonUp.apply(this.target,this.lastRButtonUpArgs)}},{key:"handleTouchUpEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.target;switch("OnKeyDown"==e&&(17==n[0]&&(this.controlDown=!0),16==n[0]&&(this.shiftDown=!0)),"OnKeyUp"==e&&(17==n[0]&&(this.controlDown=!1),16==n[0]&&(this.shiftDown=!1)),e){case"OnLButtonDown":this.skipThrottle=!0;var i=Sn(Mr,this,n,Mr.TUEditorPage),a=r&&r.OnLButtonDown;return setTimeout((function(){t.OnInvalidDelay()}),50),a&&a.apply(r,i);case"Undo":return this.operationNotifier.Undo(n[0],n[1]),n[1]?[this.operationNotifier.editUndos,this.operationNotifier.editRedos]:[this.operationNotifier.undos,this.operationNotifier.redos];case"OnActivate":var o=n[0];if(r=this.targets[o])this.target=r;else switch(o){case"touchup":r=this.target=this.targets[o]=this.jrMgr.GetTouchup();break;case"spellcheck":r=this.target=this.targets[o]=this.jrMgr.GetTouchupSpellCheck();break;case"joinSplit":r=this.target=this.targets[o]=this.jrMgr.GetJoinSplit()}n="touchup"==o?[n[1]]:[];break;case"OnFontNameChanged":this.providerCallback.setToolbarFont(n[0]);break;case"OnChar":for(var u in n[0])this.target.OnChar(n[0].charCodeAt(u));return[this.operationNotifier.editUndos,this.operationNotifier.editRedos];case"OnRButtonUp":var c=Sn(Mr,this,n,Mr.TUEditorPage);return this.lastRButtonUpArgs=c,void(this.target.OnRButtonUp&&this.target.OnRButtonUp.apply(this.target,c));case"GetEditInfo":return void(Or=this.target.GetEditInfo());case"EditContent":return void this.target.EditContent(Or);case"JoinSplitToEditText":var l=n[0],d=this.targets.joinSplit.GetEditInfo(),f=this.target=this.targets[l]=this.jrMgr.GetTouchup();return f.OnActivate(!1),void setTimeout((function(){t.OnInvalidDelay(),d.editor_page.IsEmpty()||f.EditContent(d)}));case"ClearRedo":return this.operationNotifier.redos=[],this.operationNotifier.editRedos=[],[this.operationNotifier.undos,this.operationNotifier.redos];case"GetUndoManager":return[this.operationNotifier.undos,this.operationNotifier.redos];case"generateContent":return void this.generateContent(!0);case"SelectContent":var h=this.doc.doc.GetPage(n[0]),g=new Mr.SelectTextInfoArray;return n[1].forEach((function(e){var t,n,r,i,a=new Mr.SelectTextInfo;-1==(t=Math).min.apply(t,(0,s._)(e))?(a.nStartIndex=(n=Math).max.apply(n,(0,s._)(e)),a.nEndIndex=-1):(a.nStartIndex=(r=Math).min.apply(r,(0,s._)(e)),a.nEndIndex=(i=Math).max.apply(i,(0,s._)(e)));g.Add(a)})),void r.SelectContent(h,g);case"GetClipboardText":return __webpack_require__.g.clipboardText;case"UpdateClipboardText":return void(__webpack_require__.g.clipboardText=n[0])}var p=Sn(Mr,this,n,Mr.TUEditorPage),v=r&&r[e],_=v&&v.apply(r,p)&&[this.operationNotifier.undos,this.operationNotifier.redos];return"OnActivate"!==e&&"OnDeactivate"!==e||(this.isActivated="OnActivate"===e,postMessage({workflow:Wr,type:e})),_}},{key:"destroy",value:function(){var e=this;for(var t in["tu","providerCallback","operationNotifier","lastInvalid","editPages","doc","jrMgr","popMenuAction"].forEach((function(t){return e[t]=[]})),this.targets){this.targets[t].delete()}}},{key:"generateContent",value:function(e){var t=this,n=function(e){if(t.doc.pageIndexMap[e]){var n=t.doc.pageIndexMap[e];if(n.needReParse)return n.parsedPage().then((function(t){r.editPages[e].GetPage().GenerateContent()})),"continue"}t.editPages[e].GetPage().GenerateContent()},r=this;if(this.target){for(var i in this.target.ExitEditing&&e&&this.target.ExitEditing(0),this.editPages)n(i);this.modifiedObjects.forEach((function(e){return e.GenerateContent()})),this.modifiedObjects=[]}}}]),n}(),Yr=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&t.touchupMgr&&(t.touchupMgr.delete(),t.touchup.destroy(),t.touchupMgr=null,t.touchup=null),t.touchup)return t.touchup;Mr=e,kr.setGSDK(e);var n=t.touchup=new Vr,r=new Kr;r.IsShiftKeyDown=n.IsShiftKeyDown,r.IsControlKeyDown=n.IsControlKeyDown;var i=new e.TouchupProvider(e.TouchupProviderCallback.implement(r)),a=new Br,o=new Hr(a);a.Restore=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.Undo(t[0],!0)},o.OnContentChange=n.OnContentChange,n.OnInvalidDelay=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){var r=this,i=arguments;n||(n=setTimeout((function(){e.apply(r,i),n=null}),t))}}(n.OnInvalid),o.OnInvalid=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i;if(n.skipThrottle)return n.OnInvalid(),void(n.skipThrottle=!1);(i=n).OnInvalidDelay.apply(i,(0,s._)(t))},r.GetVisiblePage=n.GetVisiblePage,r.GetDefaultEditorPage=n.GetDefaultEditorPage,r.GetPage=n.GetPage,i.SetOperationNotifierCallback(e.TouchupOperationNotifierCallback.implement(o)),i.SetProgressBarCallback(e.ProgressBarCallback.implement(Ur)),Rr.trackPopupMenu=n.TrackPopupMenu,i.SetPopupMenuCallback(e.TouchupPopupMenuCallback.implement(Rr));var u=new Er;return u.setToolbarFont=function(e){r.setToolbarFont(e)},i.SetTextFormatCallback(e.TextFormatCallback.implement(u)),n.findReplaceCallback=new Jr,i.SetFindReplaceCallback(e.FindReplaceCallback.implement(n.findReplaceCallback)),i.SetUndoCallback(e.UndoCallback.implement(a)),r.GetLatestPDFPage=function(e,n){return t.pageIndexMap[n].page},r.GetCurrentEditorPage=n.GetCurrentEditorPage,i.SetIsSpellCheckAvailable(!1),n.setJRMgr(t.touchupMgr=new e.TouchupMgr(i,t.doc)),t.addDestroyHook((function(e){t.touchupMgr&&(t.touchupMgr.delete(),t.touchup.destroy(),t.touchupMgr=null,t.touchup=null,Mr=null)})),t.beforeSave((function(e){return t.touchup.generateContent(e)})),n.setCObject(t,o,r,i),n};var Zr=function(e,t,n,r){var i=t.GetType().value,a=t.GetWidth(),o=t.GetHeight(),s=Number((t.GetOpacity()+.005).toFixed(2)),u=t.GetXPosition(),c=t.GetYPosition(),l=t.CanChangeRenderingOrder(e.RenderingOrder.e_RenderingOrderFront),d=t.CanChangeRenderingOrder(e.RenderingOrder.e_RenderingOrderBack),f=n.GetSelectionCount(),h=-1,g=null;return f>0&&(h=(g=n.GetSelection().GetAt(0)).GetPageIndex(r)),{type:i,width:a,height:o,opacity:s,count:f,xPosition:u,yPosition:c,canChangeFront:l,canChangeBack:d,clipPathCount:1===f&&g?g.GetGraphicsObject().GetClipPathCount():0,pageIndex:h}},qr=function(e){if(e.IsEmpty())return 0;var t=4278190080;if((e=e.ConvertToRGB({value:0})).IsEmpty())return 0;for(var n=e.GetValue(),r=0;r<n.GetSize();r++){t|=(255*n.GetAt(r)|0)<<16-8*r}return t>>>0};function Xr(e){return e.IsEmpty()?0:e.GetColorSpace().GetColorSpaceType().value}function Qr(e,t,n,r){if(t.IsEmpty())return{};if(function(e){var t=e.GetWidth(),n=e.GetHeight(),r=e.GetOpacity(),i=e.GetXPosition(),a=e.GetYPosition();return 0===t&&0===n&&0===r&&0===i&&0===a}(t))return{};switch(t.GetType().value){case 0:break;case 1:return function(e,t,n,r){var i=Zr(e,t,n,r),a=new e.TextObjectUtils(t);i.fontName=a.GetFont(!0).toString(),i.baseFontName=a.GetFont(!1).toString(),i.fontSize=a.GetFontSize();var o=a.GetFillColor();o.IsEmpty()?(i.fillColor=0,i.fillColorSpace=0):(i.fillColor=qr(o),i.fillColorSpace=o.GetColorSpace().GetColorSpaceType().value);var s=a.GetStrokeColor();s.IsEmpty()?(i.strokeColor=0,i.strokeColorSpace=0):(i.strokeColor=qr(s),i.strokeColorSpace=s.GetColorSpace().GetColorSpaceType().value),i.horizontalScale=a.GetHorizontalScale(),i.charSpace=a.GetCharSpace(),i.charSpace<0&&(i.charSpace=0),i.wordSpace=a.GetWordSpace(),i.canRemoveTextKerning=a.CanRemoveTextKerning(),i.canMergeText=a.CanMergeText(),i.canSplitText=a.CanSplitText(),i.canText2Path=a.CanText2Path(),i.isWordSpaceValid=a.IsWordSpaceValid().value,i.fontIsBold=a.GetFontIsBold(),i.fontIsItalic=a.GetFontIsItalic(),i.textMode=a.GetTextMode().value;try{if(1===i.count){var u=n.GetSelection().GetAt(0);i.text=u.GetGraphicsObject().GetTextObject().GetText().toString()}else i.text=""}catch(e){i.text=""}return i}(e,t,n,r);case 2:return function(e,t,n,r){var i=Zr(e,t,n,r),a=new e.PathObjectUtils(t);i.lineWidth=a.GetLineWidth(),i.miterLimit=a.GetMiterLimit(),i.lineCap=a.GetLineCap().value,i.lineJoin=a.GetLineJoin().value;for(var o=a.GetLineStyle(),s=i.lineStyle=[],u=0;u<o.GetSize();u++){var c=o.GetAt(u);s.push(c)}var l=a.GetFillColor();return i.fillColor=qr(l),i.fillColorSpace=Xr(l),l=a.GetStrokeColor(),i.strokeColor=qr(l),i.strokeColorSpace=Xr(l),i}(e,t,n,r);case 3:return function(e,t,n,r){return Zr(e,t,n,r)}(e,t,n,r);case 4:return function(e,t,n,r){var i=Zr(e,t,n,r),a=new e.ShadingObjectUtils(t);i.cursorColor=a.GetGridientCursorColor(),i.cursorLocation=a.GetGridientCursorLocation();var o=i.iCursorIndex=a.GetGridientCursorIndex();i.color=a.GetGridientColorAt(o);for(var s=a.GetGradientColor(),u=i.gradientArray=[],c=0;c<s.GetSize();c++){var l=s.GetAt(c);u.push({from:l.from,to:l.to,fromColor:vn(l.from_color),toColor:vn(l.to_color)})}return i}(e,t,n,r);case 5:return Zr(e,t,n,r)}}var $r=function(e,t){return{type:t.GetType().value,isEmpty:t.IsEmpty()}};function ei(e,t){if(t.IsEmpty())return{};switch(t.GetType().value){case 0:case 1:case 3:break;case 2:return function(e,t){var n=$r(0,t),r=new e.TextEditor(t),i={isSelect:r.IsSelect(),canPaste:r.CanPaste(),isAdd:r.IsAdd()};return Object.assign(i,n)}(e,t);case 4:return function(e,t){var n=$r(0,t),r={isClipPathMode:new e.PathEditor(t).IsClipPathMode()};return Object.assign(r,n)}(e,t);case 5:return function(e,t){var n=$r(0,t),r={isReferenceLineWorking:new e.ShadingEditor(t).IsReferenceLineWorking()};return Object.assign(r,n)}(e,t)}}var ti=function(){function e(n,r){(0,t._)(this,e),this.gsdkIns=r,this.pageEditor=n,this.undos=[],this.redos=[],this.editUndos=[],this.editRedos=[],this.aggregateCount=1,this.aggregatedItems=[]}return(0,r._)(e,[{key:"undo",value:function(e,t){var n,r,i=this.gsdkIns,a=t?"PEUndo":"PERedo";e?t?(n=this.editUndos,r=this.editRedos):(n=this.editRedos,r=this.editUndos):t?(n=this.undos,r=this.redos):(n=this.redos,r=this.undos);var o=n.pop();o&&(Array.isArray(o)?o.forEach((function(e){return i[a](e)})):i[a](o),r.push(o))}},{key:"aggregateUndo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.aggregateCount=e}},{key:"OnAddUndo",value:function(e,t){this.aggregatedItems.unshift(e),this.aggregateCount-=1,this.aggregateCount<=0&&(t?(this.editUndos.push(this.aggregatedItems),this.editRedos=[]):(this.undos.push(this.aggregatedItems),this.redos=[],postMessage({workflow:"out",type:"onAddUndo",msg:{item:e}})),this.aggregateCount=1,this.aggregatedItems=[])}},{key:"OnUndoRedoBeginEdit",value:function(e){this.editUndos=[],this.editRedos=[]}},{key:"OnUndoRedoEndEdit",value:function(e){this.editUndos=[],this.editRedos=[]}},{key:"destroy",value:function(){var e=this.gsdkIns;this.aggregateCount=1,this.aggregatedItems.forEach((function(t){e.PEUndoItemRelease(t)})),[this.editRedos,this.editUndos,this.undos,this.redos].forEach((function(t){return t.forEach((function(t){Array.isArray(t)?t.forEach((function(t){return e.PEUndoItemRelease(t)})):e.PEUndoItemRelease(t)}))}))}}]),e}();const ni=ti;var ri,ii=function(){function e(n,r){(0,t._)(this,e),this.gsdkIns=r,this.pageEditor=n,this.pasteMargin=5,this.graphicArray=null,this.autoCalPastePos=!0,this.lastPageIndex=0,this.selectionX=0,this.selectionY=0,this.selectionHeight=0,this.pasteX=0,this.pasteY=0,this.offsetX=0,this.offsetY=0}return(0,r._)(e,[{key:"destroy",value:function(){this.pageEditor=null}},{key:"CanPasteGraphicObject",value:function(){return!!this.graphicArray}},{key:"CopyGraphicObject",value:function(){var e=this.gsdkIns;this._deleteGraphicArray();for(var t=this.pageEditor.PE.GetSelection(),n=new e.GraphicsObjectArray,r=t.GetSize(),i=-1/0,a=1/0,o=1/0,s=0;s<r;s++){var u=t.GetAt(s).GetGraphicsObject().Clone();n.Add(u);var c=u.GetRect(),l=c.top,d=c.left,f=c.bottom;i=Math.max(l,i),a=Math.min(d,a),o=Math.min(f,o)}this.selectionX=a,this.selectionY=i,this.selectionHeight=i-o,this.pasteX=a,this.pasteY=i,this.offsetY=this.selectionHeight+this.pasteMargin,this.lastPageIndex=this.pageEditor.lastEditorPage.GetPage().GetIndex(),this.graphicArray=n}},{key:"PasteGraphicObject",value:function(e){var t=this.pageEditor.lastEditorPage.GetPage(),n=t.GetIndex();this.autoCalPastePos&&(this.pasteX+=this.offsetX,this.pasteY-=this.offsetY,n!==this.lastPageIndex?(this.pasteX=0,this.pasteY=t.GetHeight(),this.lastPageIndex=n):this.pasteY<this.selectionHeight/2&&(this.pasteY=this.pageEditor.lastEditorPage.GetPage().GetHeight()));var r=this._pasteGraphicArrayAtPoint(this.pasteX,this.pasteY);return this.autoCalPastePos=!0,r}},{key:"setPastePos",value:function(e,t){this.autoCalPastePos=!1,this.pasteX=e,this.pasteY=t}},{key:"_pasteGraphicArrayAtPoint",value:function(e,t){var n=new this.gsdkIns.GraphicsObjectArray;if(!this.graphicArray)return n;for(var r=e-this.selectionX,i=t-this.selectionY,a=this.graphicArray.GetSize(),o=0;o<a;o++){var s=this.graphicArray.GetAt(o),u=s.GetRect(),c=s.Clone();this._moveGraphicObject(c,u.left+r,u.top+i),n.Add(c)}return n}},{key:"_moveGraphicObject",value:function(e,t,n){var r=this.gsdkIns,i=e.GetRect(),a=i.top-i.bottom,o=i.right-i.left,s=new r.CFX_FloatRect;s.top=n,s.bottom=n-a,s.left=t,s.right=t+o;var u=new r.Matrix;u.MatchRect(s,i),e.Transform(u,!0),s.delete()}},{key:"_deleteGraphicArray",value:function(){if(this.graphicArray){for(var e=this.graphicArray.GetSize(),t=0;t<e;t++)this.graphicArray.GetAt(t).delete();this.graphicArray.delete(),this.graphicArray=null}}}]),e}(),ai=__webpack_require__(6382);var oi={1:{font:null,fontSize:16,charSpace:0,wordSpace:0,fontIsItalic:!1,fontIsBold:!1,fillColor:4278190080,strokeColor:4278190080,opacity:1,horizontalScale:100,textMode:0},2:{strokeColor:4278190080,strokeColorSpace:2,fillColor:0,fillColorSpace:0,opacity:1}},si=new ai.Z,ui=function(){function e(n,r){(0,t._)(this,e),ri=n,this.doc=r,this.editPages={},this.oldEditPages={},this.scales={},this.lastUpdate=0,this.lastRButtonUpArgs=null,this.popMenuAction=null,this.clipBoardManager=new ii(this,n),this.undoManager=new ni(this,n),this.modifiedPage={},this.editingFontName="Helvetica",this.selectionPageIndex=-1,this.startEdit=!1}return(0,r._)(e,[{key:"init",value:function(e){return this.context=e,this.PE=new ri.PageEditor(e),this}},{key:"updateMatrix",value:function(e){var t=e.dpr||1;this.context.SetSystemDPI(96*t,96*t),Object.assign(this.scales,e)}},{key:"handle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Sn(ri,this,n,ri.EditorPage),i={};if(this.lastEditorPage){var a=this.lastEditorPage.GetPage();a.IsEmpty()||(this.modifiedPage[a.GetIndex()]=1)}switch("OnKeyDown"==e&&(17==n[0]&&(this.controlDown=!0),16==n[0]&&(this.shiftDown=!0)),"OnKeyUp"==e&&(17==n[0]&&(this.controlDown=!1),16==n[0]&&(this.shiftDown=!1)),e){case"Undo":if(this.undoManager.undo(n[0],n[1]),this.doc.touchup){var o=this.generateContent();this.doc.touchup.pageModified(o)}break;case"OnChar":for(var u=0;u<n[0].length;u++){var l=n[0].charCodeAt(u);this.PE.OnChar(l,n[1]||0)}break;case"OnHitObjectTest":this.PE[e].apply(this.PE,r),r.push(0),this.PE.OnMouseMove.apply(this.PE,r);break;case"GetGraphicsObjectUtils":var d=this.PE.GetGraphicsObjectUtils();return Qr(ri,d,this.PE,this.doc.doc);case"GetSelection":for(var f=this.PE.GetSelection(),h=[],g=0;g<f.GetSize();g++){f.GetAt(g);h.push({})}return h;case"GetGraphicsObjectEditor":var p=this.PE.GetGraphicsObjectEditor();return ei(ri,p);case"OnRButtonUp":this.lastRButtonUpArgs=r,this.PE.OnRButtonUp.apply(this.PE,r);break;case"OnLButtonDown":case"OnLButtonDoubleClick":this.skipThrottle=1,i=this.PE[e].apply(this.PE,r);break;case"Paste":2===n.length&&this.clipBoardManager.setPastePos(n[0],n[1]),this.PE.Paste(!1),i=this.lastEditorPage.GetPage().GetIndex();break;case"CreateImage":var v;if(i=(v=this.PE).CreateImage.apply(v,(0,s._)(r)))i=this.lastEditorPage.GetPage().GetIndex();break;case"getDefaultProperty":1===n[0]?((i=(0,c._)({},oi[n[0]])).fontName=si.getDefaultFontName(),i.font=si.getDefaultFont(ri)):i=oi[n[0]]||{};break;case"EndEdit":this.startEdit=!1;var _=this.generateContent();this.doc.touchup&&this.doc.touchup.pageModified(_),i=this.PE[e].apply(this.PE,r);break;case"StartEdit":this.startEdit=!0,r=[];default:i=this.PE[e].apply(this.PE,r),"HasSelection"===e&&(this.selectionPageIndex=i?this.lastEditorPage.GetPage().GetIndex():-1);break;case"ChangeLanguage":this.strings=r[0];break;case"ClearRedo":this.undoManager.editRedos=[],this.undoManager.redos=[],i=n[0]?[this.undoManager.editUndos,this.undoManager.editRedos]:[this.undoManager.undos,this.undoManager.redos];break;case"GetUndoManager":i=n[0]?[this.undoManager.editUndos,this.undoManager.editRedos]:[this.undoManager.undos,this.undoManager.redos]}return i}},{key:"changePEProperty",value:function(e,t,n){var r,i=JSON.parse(JSON.stringify(n)),a=this.PE.GetGraphicsObjectUtils();switch(n=Array.isArray(n)?n:[n],n=Sn(ri,this,n,ri.EditorPage),this.lastEditorPage&&(this.modifiedPage[this.lastEditorPage.GetPage().GetIndex()]=1),e){case 0:case 3:r=a[t].apply(a,n);break;case 1:var o=new ri.TextObjectUtils(a);if("SetFont"===t){var s=new ri.WString(n[0]),u=n[1],c=n[2];this.undoManager.aggregateUndo(1),r=o.SetFont(s,!1,!1,ri.FontOperationType.e_FontOperationTypeName),r=o.SetFont(s,u,!1,ri.FontOperationType.e_FontOperationTypeBold),r=o.SetFont(s,!1,c,ri.FontOperationType.e_FontOperationTypeItatic)}else r=o[t].apply(o,n);break;case 2:var l=new ri.PathObjectUtils(a);r=l[t].apply(l,n);break;case 4:var d=new ri.ShadingObjectUtils(a);if(n=Sn(ri,this,n,ri.EditorPage),"RenderGridient"==t){d.SetGradientCurrentInfo(d.GetGradientColor());var f=n[0]+"-"+n[1],h=bitmaps[f]||(bitmaps[f]=new ri.Bitmap(n[0],n[1],ri.DIBFormat.e_DIBArgb,0,0));h.FillRect(4294967295,null);var g=new ri.Renderer(h,!0);d.RenderGridient(g);var p=getBitmapBuffer(ri,0,h,g);return p.left=0,p.top=0,p}r=d[t].apply(d,n)}postMessage({workflow:"out",type:"propertyChanged",msg:{type:e,fn:t,param:i}});var v=this.lastEditorPage.GetPage(),_=v.GetIndex(),m=this.doc.pageIndexMap[_];return m.needReParse?m.parsedPage().then((function(e){return v.GenerateContent(),[_,r]})):(v.GenerateContent(),[_,r])}},{key:"changeEditingProperty",value:function(e,t){var n=this.PE.GetGraphicsObjectEditor();if(this.lastEditorPage&&(this.modifiedPage[this.lastEditorPage.GetPage().GetIndex()]=1),"IsEmpty"===e)return n.IsEmpty();switch(n.GetType().value){case 2:n=new ri.TextEditor(n),"OnWritingDirectionChanged"==e?t[0]=ri.WritingDirection.values[t[0]]:"OnFontNameChanged"===e&&(this.editingFontName=t[0],t[0]=new ri.WString(t[0]));break;case 3:break;case 4:n=new ri.PathEditor(n);break;case 5:n=new ri.ShadingEditor(n)}return n[e].apply(n,t)}},{key:"triggerPopMenuAction",value:function(e){this.popMenuAction=e;var t=Object.keys(ri.PopupMenuItem.values).find((function(t){return ri.PopupMenuItem.values[t].constructor.name==e})),n=ri.PopupMenuItem.values[t];this.popMenuAction=n.value,["PopupMenuItem_e_PopupMenuItemTextUndo","PopupMenuItem_e_PopupMenuItemTextRedo"].includes(e)?(this.handle("Undo",void 0,[!0,"PopupMenuItem_e_PopupMenuItemTextUndo"===e]),this.popMenuAction=null):this.PE.OnRButtonUp.apply(this.PE,this.lastRButtonUpArgs),["PopupMenuItem_e_PopupMenuItemPathAddLine","PopupMenuItem_e_PopupMenuItemPathAddRectangle","PopupMenuItem_e_PopupMenuItemPathAddEllipse","PopupMenuItem_e_PopupMenuItemPathAddLineDrawing"].includes(e)&&postMessage({workflow:"out",type:"editObject"})}},{key:"updateView",value:function(){var e=this;if(this.scales){var t=this.scales.uiRect;if(t&&t.width&&t.height){var n=this.scales.dpr||1,r={width:t.width*n,height:t.height*n},i=kr.render((function(t){return e.PE.Render(t)}),null,r),a=this.PE.GetGraphicsObjectEditor();if(!a.IsEmpty()&&5===a.GetType().value)new ri.ShadingEditor(a).IsReferenceLineWorking()&&(i.isRedraw=!0);i.left=t.left,i.top=t.top,postMessage({workflow:"out",type:"updateView",msg:{bitmapInfo:i}},[i.buffer])}}}},{key:"destroy",value:function(){var e=this;for(var t in this.editPages){this.editPages[t].delete()}for(var n in this.oldEditPages){this.oldEditPages[n].delete()}this.clipBoardManager.destroy(),this.undoManager.destroy(),si.destroy(),["doc","editPages","scales","updateType","lastUpdate","lastRButtonUpArgs","popMenuAction","clipBoardManager","editRedos","editUndos","undos","redos"].forEach((function(t){return e[t]=[]}))}},{key:"generateContent",value:function(){var e=this,t=function(t){if(e.doc.pageIndexMap[t]){var i=e.doc.pageIndexMap[t];if(i.needReParse)return i.parsedPage().then((function(e){var i=n.editPages[t];r.push(t),i.GetPage().GenerateContent()})),"continue"}var a=e.editPages[t];r.push(t),a.GetPage().GenerateContent()},n=this,r=[];for(var i in this.editPages)t(i);return r}},{key:"setEditingObjectToolProperty",value:function(e){var t=this,n=this.doc.engine,r=n.AdvEditStyleType,i=n.LineType,a={editObjectBox:r.e_AdvEditStyleType_EditObjectBox,editShapeBox:r.e_AdvEditStyleType_EditShapeBox};return Object.entries(a).forEach((function(n){var r=(0,o._)(n,2),a=r[0],s=r[1],u=e[a];u?(t.PE.ConfigColorStyle(s,!u.color,u.color),t.PE.ConfigLineStyle(s,i.values[u.lineType?u.lineType:"0"])):(t.PE.ConfigColorStyle(s,!0,null),t.PE.ConfigLineStyle(s,i.values[0]))})),this.PE.GenerateConfigInfo()}},{key:"TrackPopupMenu",value:function(e,t,n,r){if(null!==this.popMenuAction){var i=this.popMenuAction;return this.popMenuAction=null,i}var a=this.PE.GetGraphicsObjectUtils(),s=this.PE.GetGraphicsObjectEditor(),u={},c=r.GetPage().GetIndex(),l=(0,o._)(this.scales[c],4);l[0],l[1],l[2],l[3];u.activeObject=Qr(ri,a,this.PE,this.doc.doc)||null,u.editingObject=ei(ri,s)||{};var d=this.scales.dpr||1;return u.position={x:t/d,y:n/d},u.menu=e,u.pageIndex=c,postMessage({workflow:"out",type:"showPopupMenu",msg:u}),-1>>>0}},{key:"GetPageViewScale",value:function(e){var t=e.GetPage().GetIndex();return this.scales[t][0]}},{key:"OnInvalid",value:function(e,t){this.updateView()}},{key:"GetRenderMatrix",value:function(e){var t=new ri.Matrix,n=e.GetPage();if(n.IsEmpty())return t.a=0,t.d=0,t;var r=n.GetIndex();if(-1==(this.scales.visibleIndexes||[]).indexOf(r))return t.a=0,t.d=0,t;var i=this.scales[n.GetIndex()];if(!i)return t;var a=(0,o._)(i,4),s=(a[0],a[1],a[2]);a[3];t.Set(s.a,s.b,s.c,s.d,s.e,s.f);var u=this.scales.dpr||1;return t.Scale(u,u,!1),t}},{key:"GetPageVisibleRect",value:function(e){var t=e.GetPage().GetIndex(),n=this.scales[t],r=new ri.CFX_FloatRect;if(!n||-1==(this.scales.visibleIndexes||[]).indexOf(t))return r;var i=(0,o._)(n,4),a=(i[0],i[1],i[2],i[3]);return r.left=a.left,r.top=a.top,r.right=a.right,r.bottom=a.bottom,r}},{key:"GetRect",value:function(e){var t=e.GetPage().GetIndex(),n=(0,o._)(this.scales[t],4),r=(n[0],n[1],n[2],n[3]),i=new ri.CFX_FloatRect;return-1==(this.scales.visibleIndexes||[]).indexOf(t)||(i.left=r.left,i.top=r.top,i.right=r.right,i.bottom=r.bottom),i}},{key:"GetDefaultEditorPage",value:function(){if(!this.lastEditorPage){var e,t=(this.scales.visibleIndexes||[])[0];if(this.editPages[t])this.lastEditorPage=this.editPages[t];else e=this.doc.pageIndexMap[t]?this.doc.pageIndexMap[t].page:this.doc.doc.GetPage(t),this.lastEditorPage=ri.EditorPage.Create(e,100)}return this.lastEditorPage}},{key:"GetClientRect",value:function(){var e=this.scales.uiRect,t=this.scales.dpr||1,n=new ri.CFX_FloatRect;return n.left=0,n.top=0,n.right=e.width*t,n.bottom=e.height*t,n}},{key:"OnSetPropsAsDefault",value:function(e,t){var n=this.PE.GetGraphicsObjectUtils(),r=Qr(ri,n,this.PE,this.doc.doc);if(1===e.value){var i;try{i=t.GetAt(0).GetGraphicsObject().GetTextObject().GetTextState(this.lastEditorPage.GetPage()).font}catch(e){i=new ri.Font(ri.StandardID.e_StdIDHelvetica)}si.setDefaultFont(i,this.doc.doc)}r.opacity=r.opacity,oi[e.value]=r}},{key:"OnExitEdit",value:function(e,t){var n=this;return setTimeout((function(){n.generateContent()})),postMessage({workflow:"out",type:"exitEdit",msg:t.value}),!1}},{key:"GetTemplate",value:function(e,t){if(t){var n=ri.getPEGraphic(t),r=n.GetType();if(r==ri.GraphicsObjectType.e_TypeText){var i=n.GetTextObject(),a=oi[1],o=new ri.TextState;o.font=si.getDefaultFont(ri),o.font_size=a.fontSize,o.charspace=a.charSpace,o.wordspace=a.wordSpace,o.textmode=ri.Mode.values[a.textMode]||ri.Mode.e_ModeFill,o.origin_position.x=0,o.origin_position.y=0,o.SetMatrixA(a.horizontalScale/100),o.SetMatrixB(0),o.SetMatrixC(0),o.SetMatrixD(1);var s=e.GetPage(),u=this.scales[s.GetIndex()][1]/90;switch(4-(s.GetRotation().value+u)%4){case 1:o.SetMatrixA(0),o.SetMatrixB(-1),o.SetMatrixC(a.horizontalScale/100),o.SetMatrixD(0);break;case 2:o.SetMatrixA(-1),o.SetMatrixB(0),o.SetMatrixC(0),o.SetMatrixD(-1);break;case 3:o.SetMatrixA(0),o.SetMatrixB(1),o.SetMatrixC(-a.horizontalScale/100),o.SetMatrixD(0)}i.SetTextState(e.GetPage(),o,a.fontIsItalic,a.fontIsBold?550:400),i.SetFillColor(a.fillColor),i.SetStrokeColor(a.strokeColor),i.SetFillOpacity(a.opacity),i.SetStrokeOpacity(a.opacity)}else if(r==ri.GraphicsObjectType.e_TypePath){var c=n.GetPathObject(),l=oi[2];if(l){var d=l.strokeColor,f=l.fillColor,h=l.fillColorSpace,g=l.strokeColorSpace,p=l.opacity,v=l.lineStyle,_=l.lineWidth,m=l.lineCap,y=l.miterLimit,S=l.lineJoin,b=c.GetColorState();if(h){var D=new ri.ColorSpace({value:h}),P=new ri.Color(D);b.SetFillColor(P)}if(g){var I=new ri.ColorSpace({value:g}),A=new ri.Color(I);b.SetStrokeColor(A)}if(c.SetColorState(b),0===f?(c.SetFillColor(l.fillColor),c.SetFillMode(this.doc.engine.FillMode.e_FillModeNone),c.SetFillOpacity(0)):(c.SetFillColor(l.fillColor),c.SetFillMode(this.doc.engine.FillMode.e_FillModeWinding),c.SetFillOpacity(1)),c.SetStrokeState(0!==d),c.SetStrokeColor(d),c.SetFillOpacity(p),c.SetStrokeOpacity(p),_||v||m||y||S){var w=c.GetGraphState();if(_&&(w.line_width=_),v){var C=new this.doc.engine.FloatArray;C.SetSize(v.length,-1);for(var k=0;k<v.length;k++)C.SetAt(k,v[k]);w.dashes=C,w.dashes.delete()}m&&(w.line_cap=this.doc.engine.LineCapStyle.values[m]),y&&(w.miter_limit=y),S&&(w.line_join=this.doc.engine.LineJoinStyle.values[S]),c.SetGraphState(w)}}}}}},{key:"GetLatestPDFPage",value:function(e,t){return this.doc.doc.GetPage(t)}},{key:"GetToolbarFontName",value:function(){return new ri.WString(this.editingFontName)}},{key:"GetString",value:function(e){return new ri.WString(this.strings[e.value]||"")}},{key:"IsShiftKeyDown",value:function(){return this.shiftDown}},{key:"IsControlKeyDown",value:function(){return this.controlDown}}]),e}();const ci=function(e,t){if(e.pageEditor)return e.pageEditor;kr.setGSDK(e.engine);var n=e.pageEditor=new ui(e.engine,e),r=n.clipBoardManager,i=n.undoManager;ri=e.engine;var a={};return["CopyGraphicObject","PasteGraphicObject","CanPasteGraphicObject"].forEach((function(e){return a[e]=r[e].bind(r)})),["OnAddUndo","OnUndoRedoBeginEdit","OnUndoRedoEndEdit"].forEach((function(e){return a[e]=i[e].bind(i)})),["GetDefaultEditorPage","GetRenderMatrix","GetClientRect","GetPageVisibleRect","GetPageViewScale","OnInvalid","TrackPopupMenu","OnSetPropsAsDefault","GetTemplate","GetLatestPDFPage","GetToolbarFontName","GetString","OnExitEdit","IsShiftKeyDown","IsControlKeyDown"].forEach((function(e){return a[e]=n[e].bind(n)})),a.GetPageRect=n.GetPageVisibleRect.bind(n),n.OnInvalid=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){var r=this,i=arguments;n||(n=setTimeout((function(){e.apply(r,i),n=null}),t))}}(n.OnInvalid.bind(n),66),a.OnInvalid=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i;if(n.skipThrottle)return n.updateView(),void(n.skipThrottle=0);(i=n).OnInvalid.apply(i,(0,s._)(t))},n.init(e.JR.getEditorContext(a,t.map((function(t){var n=e.JR.requestData("GET",!1,t);return pt.Z.createImage(e.engine,n).GetFrameBitmap(0)})))),e.beforeSave((function(t){t&&e.pageEditor.PE.ClearSelection(1),e.pageEditor.generateContent()})),e.addDestroyHook((function(t){return e.pageEditor.destroy()})),n};var li={},di={},fi=new(function(e){(0,x._)(r,e);var n=(0,B._)(r);function r(){var e;return(0,t._)(this,r),(e=n.call(this)).workerObj=li,e.apis=di,e}return r}(ur));di.handlePageEditorEvent=function(e,t){var n=t.docId,r=t.fn,i=t.delay,a=t.args;return lr.ZP.loadWasmModule(lr.M7).then((function(){return li.getDocByID(n)})).then((function(t){var n=ci(t,a);try{li.resolve(e,n.handle(r,i,a))}catch(e){console.error(e)}}))},di.updateWinlessMatrix=function(e,t){var n=t.docId,r=t.type,i=t.matrixes;return li.getDocByID(n).then((function(t){if(1===r)lr.ZP.loadWasmModule(lr.yd).then((function(){Yr(t.engine,t).updateMatrix(i),li.resolve(e)}));else lr.ZP.loadWasmModule(lr.M7).then((function(){var n=ci(t);n.updateMatrix(i),n.lastEditorPage&&n.updateView(!1),li.resolve(e)}))}))},di.changePEProperty=function(e,t){var n=t.docId,r=t.type,i=t.fn,a=t.param;return lr.ZP.loadWasmModule(lr.M7).then((function(){return li.getDocByID(n)})).then((function(t){var n=ci(t);return Promise.resolve(n.changePEProperty(r,i,a)).then((function(t){return li.resolve(e,t)}))}))},di.changeEditingProperty=function(e,t){var n=t.docId,r=t.fn,i=t.args;return lr.ZP.loadWasmModule(lr.M7).then((function(){return li.getDocByID(n)})).then((function(t){var n=ci(t);li.resolve(e,n.changeEditingProperty(r,i))}))},di.triggerPopMenuAction=function(e,t){var n=t.docId,r=t.action;return lr.ZP.loadWasmModule(lr.M7).then((function(){return li.getDocByID(n)})).then((function(t){var n=ci(t);li.resolve(e,n.triggerPopMenuAction(r))}))},di.handleTouchUpEvent=function(e,t){var n=t.docId,r=t.fn,i=t.args;return lr.ZP.loadWasmModule(lr.yd).then((function(){return li.getDocByID(n)})).then((function(t){"restartTouchup"==r&&(r="");var n=Yr(t.engine,t);li.resolve(e,n.handleTouchUpEvent(r,i))}))},di.handleFindReplaceEvent=function(e,t){var n=t.docId,r=t.fn,i=t.args;return lr.ZP.loadWasmModule(lr.yd).then((function(){return li.getDocByID(n)})).then((function(e){var t=Yr(e.engine,e).handleFindReplaceEvent(r,i);if("ReplaceAll"===r&&e.pageEditor){var n=e.pageEditor;n.undoManager.editUndos=[],n.undoManager.editRedos=[],n.undoManager.undos=[],n.undoManager.redos=[]}return t})).then((function(t){return li.resolve(e,t)}))},di.triggerTUPopMenuAction=function(e,t){var n=t.docId,r=t.action,i=t.args;return lr.ZP.loadWasmModule(lr.yd).then((function(){return li.getDocByID(n)})).then((function(t){var n=Yr(t.engine,t);li.resolve(e,n.triggerPopMenuAction(r,i))}))},di.reInitPageEditor=function(e,t){var n=t.docId;return li.getDocByID(n).then((function(t){var n=t.pageEditor;n&&(n.oldEditPages=n.editPages,n.editPages={}),li.resolve(e)}))},di.loadAdvEditorConfigFile=function(e,t){var n=t.docId,r=t.fileBuffer,i=t.moduleName;return li.getDocByID(n).then((function(t){var n=!0;"pageEditor"===i?t.pageEditor?lr.ZP.loadWasmModule(lr.M7).then((function(){ci(t),function(e,t){var n=e.engine,r=new FileReaderSync,i=n.ReaderCallback.implement({Release:function(){},GetSize:function(){return t.size},ReadBlock:function(e,i,a){if(t&&t.size>0){var o=new Uint8Array(r.readAsArrayBuffer(t.slice(i,i+a)));return n.HEAPU8.set(o,e),!0}return!1}});e.pageEditor.PE.SetConfigFileCallback(i)}(t,r)})):n=!1:lr.ZP.loadWasmModule(lr.yd).then((function(){Yr(t.engine,t),function(e,t){var n=e.engine,r=new self.FileReaderSync,i=n.ReaderCallback.implement({Release:function(){},GetSize:function(){return t.size},ReadBlock:function(e,i,a){if(t&&t.size>0){var o=new Uint8Array(r.readAsArrayBuffer(t.slice(i,i+a)));return n.HEAPU8.set(o,e),!0}return!1}});e.touchupMgr.SetConfigFileCallback(i)}(t,r)})),li.resolve(e,n)}))},di.setAdvEditorTextToolStyle=function(e,t){var n=t.docId,r=t.style;return lr.ZP.loadWasmModule(lr.yd).then((function(e){return li.getDocByID(n)})).then((function(t){var n=Yr(t.engine,t);li.resolve(e,n.setTextToolProperty(r))}))},di.setAdvEditorEditingObjectToolStyle=function(e,t){var n=t.docId,r=t.style;return lr.ZP.loadWasmModule(lr.M7).then((function(e){return li.getDocByID(n)})).then((function(t){var n=ci(t);li.resolve(e,n.setEditingObjectToolProperty(r))}))};const hi=fi.extendsWorkerAPI.bind(fi);function gi(e,t){var n=e.engine.PageLabelsStyle;switch(t){case n.e_None:return"none";case n.e_DecimalNums:return"decimalNums";case n.e_UpperRomanNums:return"upperRomanNums";case n.e_LowerRomanNums:return"lowerRomanNums";case n.e_UpperLetters:return"upperLetters";case n.e_LowerLetters:return"lowerLetters"}return"decimalNums"}function pi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!0===t?function(e,t){var n=e.engine,r=new n.PageLabels(e.doc),i=e.doc.GetPageCount(),s=(0,o._)(t,2),u=s[0],c=s[1],l=c+1,d=!0;if(l<i){var f=r.HasPageLabel(c);if(0==r.HasPageLabel(l)){var h=n.PageLabelsStyle.e_None,g="",p=-1;if(0==f){for(var v=c-1;v>=0;v--)if(r.HasPageLabel(v)){h=r.GetPageLabelStyle(v),g=r.GetPageLabelPrefix(v),u<=v?p=r.GetPageLabelStart(v):d=!1;break}-1===p&&(p=u+1)}else h=r.GetPageLabelStyle(c),g=r.GetPageLabelPrefix(c),p=r.GetPageLabelStart(c);g=(0,a._)(g,n.WString)?g:new n.WString(g),r.SetPageLabel(l,h,p,g)}}if(0==d)return;for(var _=c;_>=u;_--)0!=_&&r.HasPageLabel(_)&&r.RemovePageLabel(_)}(e,n):function(e,t,n){var r=n.styleType,i=void 0===r?"decimalNums":r,s=n.prefix,u=void 0===s?"":s,c=n.start,l=void 0===c?1:c,d=e.engine,f=new d.PageLabels(e.doc),h=e.doc.GetPageCount(),g=(0,o._)(t,2),p=g[0],v=g[1],_=v+1;if(_<h){var m=f.HasPageLabel(v);if(0==f.HasPageLabel(_)){var y=d.PageLabelsStyle.e_DecimalNums,S="",b=-1;if(0==m){for(var D=v-1;D>=0;D--)if(f.HasPageLabel(D)){y=f.GetPageLabelStyle(D),S=f.GetPageLabelPrefix(D);var P=f.GetPageLabelStart(D);b=p<=D?P:p-D+P;break}-1===b&&(b=p+1)}else y=f.GetPageLabelStyle(v),S=f.GetPageLabelPrefix(v),b=f.GetPageLabelStart(v);S=(0,a._)(S,d.WString)?S:new d.WString(S),f.SetPageLabel(_,y,b,S)}}var I=new d.WString(u),A=function(e,t){var n={none:"e_None",decimalNums:"e_DecimalNums",upperRomanNums:"e_UpperRomanNums",lowerRomanNums:"e_LowerRomanNums",upperLetters:"e_UpperLetters",lowerLetters:"e_LowerLetters"}[t];return e.engine.PageLabelsStyle[n]}(e,i);f.SetPageLabel(p,A,l,I);for(var w=p+1;w<=v;w++)f.HasPageLabel(w)&&f.RemovePageLabel(w)}(e,n,r)}var vi=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,null,[{key:"insertPagesByRange",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.insertPages(e,s,1)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"insertPages",value:function(e,t,n){var r=e.engine,i=new r.PageOperationInfo;i.type=r.PageOperationType.e_PageOperationInsert,i.page_index_1=t,i.page_count=n,e.doc.UpdatePageLabels(i)}},{key:"deletePages",value:function(e,t){var n=e.engine,r=new n.PageOperationInfo;r.type=n.PageOperationType.e_PageOperationDelete;var i=!0,a=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=(0,o._)(u.value,2),d=l[0],f=l[1];f=void 0===f?d:f,r.page_index_range.AddSegment(d,f,n.RangeFilter.e_All)}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}e.doc.UpdatePageLabels(r)}},{key:"reversePages",value:function(e,t){var n=e.engine,r=new n.PageOperationInfo;r.type=n.PageOperationType.e_PageOperationReverse;var i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r.page_index_range.AddSegment(c,c,n.RangeFilter.e_All)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}e.doc.UpdatePageLabels(r)}},{key:"replacePages",value:function(e,t,n,r,i){var a=e.engine,o=new a.PageOperationInfo;o.type=a.PageOperationType.e_PageOperationReplace,o.page_index_1=t,o.page_count=n-t+1,o.page_index_range.AddSegment(r,i,a.RangeFilter.e_All),e.doc.UpdatePageLabels(o)}},{key:"swapPages",value:function(e,t,n){var r=e.engine,i=new r.PageOperationInfo;i.type=r.PageOperationType.e_PageOperationSwap,i.page_index_1=t,i.page_index_2=n,e.doc.UpdatePageLabels(i)}},{key:"movePages",value:function(e,t,n){var r=e.doc.GetPageCount(),i=n;t[0]<n&&(i=n-1),i<0&&(i=0),i>=r&&(i=r-1);var a=e.engine,o=new a.PageOperationInfo;o.type=a.PageOperationType.e_PageOperationMove;var s=!0,u=!1,c=void 0;try{for(var l,d=t[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var f=l.value;o.page_index_range.AddSegment(f,f,a.RangeFilter.e_All)}}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}o.page_index_1=i,e.doc.UpdatePageLabels(o)}}]),e}();function _i(){return(_i=(0,e._)((function(e){return(0,u.Jh)(this,(function(t){switch(t.label){case 0:return[4,e.doc.Sanitize()];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}var mi=["bRemoveBookmark","bRemoveComment","bRemoveContent","bRemoveFileattachment","bRemoveForm","bRemoveHideLayer","bRemoveHideText","bRemoveLink","bRemoveMetadata","bRemoveOverlaping","bRemoveSearchIndex"];function yi(){return yi=(0,e._)((function(e,t){var n,r,i,a,o,s,c,l,d;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:n=e.doc,r=e.engine,i=new r.RemoveInfo,a=!0,o=!1,s=void 0;try{for(c=mi[Symbol.iterator]();!(a=(l=c.next()).done);a=!0)d=l.value,i[d]=!!t[d]}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return[4,n.RemoveHiddenInfo(i)];case 1:return[2,u.sent()]}}))})),yi.apply(this,arguments)}var Si=__webpack_require__(4983),bi=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,[{key:"init",value:function(e,t){var n,r;this[t]||(this[t]=(n=e[t],r=!1,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!r&&n)return r=!0,n.apply(this,t)})),this[t]()}}]),e}();const Di=new bi;var Pi,Ii=navigator.userAgent.toLowerCase(),Ai=/opera|opr/.test(Ii),wi=/msie/.test(Ii),Ci=/trident/.test(Ii),ki=/\sapplewebkit\//.test(Ii),Ei=/chrome/.test(Ii),Gi=/safari/.test(Ii),Ti=(/firefox/.test(Ii),/edg\//.test(Ii),(Ci||wi)&&!Ai&&"msSaveBlob"in navigator&&(!!(Pi=Ii.match(/msie ([\d\.]+)/))&&parseInt(Pi[1])),Ii.indexOf("edge"),Ai),Fi=ki,Ri=!/huawei/.test(Ii)&&!Ti&&Gi&&!Ei;navigator.product,/maxthon/.test(Ii),/tencenttraveler/.test(Ii)||/qqbrowser/.test(Ii),/wechat/.test(Ii),/metasr/.test(Ii)||/sogou/.test(Ii),/baidubrowser/.test(Ii),/ucbrowser/.test(Ii),/liebao/.test(Ii),/miuibrowser/.test(Ii),/huaweibrowser/.test(Ii)||/huaweialp/.test(Ii),/crios/.test(Ii);function Mi(e,t){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,e._)((function(e,t){var n,r,i,a,o;return(0,u.Jh)(this,(function(s){switch(s.label){case 0:return[4,e.getPageCount()];case 1:for(n=s.sent(),r=[],i=(null==t?void 0:t.start)||0,a=(null==t?void 0:t.end)||n,o=i;o<a;o++)r.push(Ni(e,o));return[4,Promise.all(r)];case 2:return[2,s.sent()]}}))}))).apply(this,arguments)}function xi(){return(xi=(0,e._)((function(e){var t,n,r,i;return(0,u.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.getPageCount()];case 1:t=a.sent(),n=[],r=0,a.label=2;case 2:return r<t?[4,e.getPageByIndex(r)]:[3,6];case 3:return[4,a.sent().getPureTexts()];case 4:i=a.sent(),n.push(i),a.label=5;case 5:return r++,[3,2];case 6:return[2,n.join("")]}}))}))).apply(this,arguments)}function Bi(){return(Bi=(0,e._)((function(e){var t,n,r,i,a,o;return(0,u.Jh)(this,(function(s){switch(s.label){case 0:return[4,e.getPageCount()];case 1:t=s.sent(),n="",r=!1,i=0,s.label=2;case 2:return i<t?[4,e.getPageByIndex(i)]:[3,6];case 3:return[4,(a=s.sent()).getPureTexts()];case 4:if(o=s.sent(),n+=o)return[3,6];a.isScannedPage()&&(r=!0),s.label=5;case 5:return i++,[3,2];case 6:return[2,!n&&r]}}))}))).apply(this,arguments)}function Ni(e,t){return Li.apply(this,arguments)}function Li(){return(Li=(0,e._)((function(e,t){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,e.getPageByIndex(t)];case 1:return[4,ji(n.sent())];case 2:return[2,n.sent()]}}))}))).apply(this,arguments)}function ji(e){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,e._)((function(e){var t,n,r,i,a,o,s,c,l,d,f,h,g,p,v,_,m,y,S,b,D,P,I,A,w,C,k,E;function G(e){if(e)for(var t=0;t<e.GetSize();t++){var n=e.GetAt(t),r=n.text_array;if(r)for(var a=0;a<r.GetSize();a++){var o=r.GetAt(a),s=o.rect,u={left:s.left,right:s.right,top:s.top,bottom:s.bottom};i.push({is_table:!1,rect:u,text_content:(o.text_content||o.content).toString()})}G(n.sublist_array)}}return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return[4,e.doParsePage()];case 1:for(t=u.sent(),n=new e.engine.CFX_FloatRect(0,0,0,0),r=t.ExportDataForChatGPT(!0,n),i=[],a=0;a<r.GetSize();a++)if(o=r.GetAt(a),s=o.rect,c=s.left,l=s.right,d=s.top,f=s.bottom,h={left:c,right:l,top:d,bottom:f},11!==o.type.value)if(12===o.type.value){for(g=[],p=0;p<o.table_data.GetSize();p++){for(v=o.table_data.GetAt(p),_=[],m=0;m<v.cell_array.GetSize();m++)y=v.cell_array.GetAt(m),S=o.rect,b=S.left,D=S.right,P=S.top,I=S.bottom,A={left:b,right:D,top:P,bottom:I},w="td",y.isHeader&&(w="th"),C="",y.nRowSpan>1&&(C+=' rowspan="'+y.nRowSpan+'"'),y.nCellSpan>1&&(C+=' colspan="'+y.nCellSpan+'"'),k=(k=y.content.toString()).replace("\n","<br/>"),E="<"+w+C+">"+k+"</"+w+">",_.push({content:E,rect:A});g.push({cells:_})}i.push({is_table:!0,rect:h,table_data:g})}else i.push({is_table:!1,rect:h,text_content:(o.text_content||o.content).toString()});else G(o.list_item);return[2,i]}}))}))).apply(this,arguments)}function Wi(e){for(var t=[],n=e.GetSize(),r=0;r<n;r++){var i=e.GetAt(r),a=i.rect,o={left:a.left,right:a.right,top:a.top,bottom:a.bottom};t.push({is_table:!1,rect:o,text_content:i.text_content.toString()})}return t}function Hi(e){return zi.apply(this,arguments)}function zi(){return(zi=(0,e._)((function(e){var t,n;return(0,u.Jh)(this,(function(r){return t=e.FetchPageForChatGPT(),n=Wi(t),[2,Promise.resolve(n)]}))}))).apply(this,arguments)}function Ki(e){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,e._)((function(e){var t,n;return(0,u.Jh)(this,(function(r){return t=e.FetchParagraphForChatGPT(),n=Wi(t),[2,Promise.resolve(n)]}))}))).apply(this,arguments)}function Vi(e){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,e._)((function(e){var t,n;return(0,u.Jh)(this,(function(r){return t=e.FetchCaptionForChatGPT(),n=Wi(t),[2,Promise.resolve(n)]}))}))).apply(this,arguments)}function Zi(e){return qi.apply(this,arguments)}function qi(){return(qi=(0,e._)((function(e){var t,n;return(0,u.Jh)(this,(function(r){return t=e.FetchTableForChatGPT(),n=function(e){for(var t=[],n=e.GetSize(),r=0;r<n;r++){for(var i=e.GetAt(r),a=i.rect,o={left:a.left,right:a.right,top:a.top,bottom:a.bottom},s=[],u=0;u<i.table_data.GetSize();u++){for(var c=i.table_data.GetAt(u),l=[],d=0;d<c.cell_array.GetSize();d++){var f=c.cell_array.GetAt(d);l.push({content:f.content.toString(),rect:o})}s.push({cells:l})}t.push({is_table:!0,rect:o,table_data:s})}return t}(t),[2,Promise.resolve(n)]}))}))).apply(this,arguments)}function Xi(e,t,n){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,e._)((function(e,t,n){var r,i,a,s,c,l,d,f,h,g,p,v,_,m,y;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:if(r=n.type,i=n.pages,a=[],!(s={page:Hi,section:Ki,figure:Vi,table:Zi})[r])return[2,Promise.resolve()];for(c=s[r],l=new e.Range,i.split(",").filter((function(e){return!!e})).forEach((function(t){if(t.indexOf("-")>=0){var n=(0,o._)(t.split("-"),2),r=n[0],i=n[1];l.AddSegment(Number(r)-1,Number(i)-1,[e.RangeFilter.e_All,e.RangeFilter.e_Odd,e.RangeFilter.e_Even][0])}else l.AddSingle(Number(t)-1)})),d=[],f=l.GetSegmentCount(),h=0;h<f;h++)for(g=l.GetSegmentStart(h),p=l.GetSegmentEnd(h),v=g;v<=p;v++)d.push(v);_=d.length,m=0,u.label=1;case 1:return m<_?[4,t.getPageByIndex(d[m])]:[3,5];case 2:return[4,u.sent().doParsePage()];case 3:y=u.sent(),a.push(c(y)),u.label=4;case 4:return m++,[3,1];case 5:return[4,Promise.all(a)];case 6:return[2,u.sent()]}}))})),Qi.apply(this,arguments)}const $i={PDFArticle:__webpack_require__(2012).Z};var ea=__webpack_require__(7021),ta=__webpack_require__(6975),na="cache",ra=(new h.Z(na,"FoxitPDFSDKForWeb_"+na),navigator.userAgent.toLowerCase());function ia(){var e;return!(!("ActiveXObject"in self)||!(e=ra.match(/msie ([\d\.]+)/)))&&10===parseInt(e[1])}/iP(hone|od|ad)/i.test(ra);var aa={};self.trace=function(e){};var oa=(0,l.dD)(),sa=oa.promise,ua=!1,ca=!1,la=!1,da={},fa=(0,l.dD)(),ha=fa.promise,ga=!1,pa={};vr(pa,Oa,Ba,sa,Fa,Ta),hi(pa,Oa,Ba,sa,Fa,Ta);var va,_a,ma,ya=wr(pa,Oa,Ba,sa,Fa,Ta),Sa={},ba=(va={},{push:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;(i=va[e]=va[e]||[]).push.apply(i,(0,s._)(n))},get:function(e){return va[e]||[]}}),Da={},Pa={},Ia={},Aa=function e(n,r){(0,t._)(this,e),this.reason=n,this.transfers=r},wa=(_a=(0,e._)((function(e,t){var r,o,c,d,f,h,g,p,v,_,m,y,S;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return"object"!=typeof(r=t[0])?[2]:r.wasm?[4,lr.ZP.loadWasmModule(r.wasm)]:[3,2];case 1:u.sent(),u.label=2;case 2:if(!(o=r.path))return[2];c=o.split("/"),d="",f=null,h=1,g=!0,p=!1,v=void 0;try{for(_=function(){var a=y.value;switch(a){case"doc":"jr"!==d&&console.error("path is incorrect"),f=Oa(t[h++]);break;case"page":"doc"!==d&&console.error("path is incorrect");var o=t[h++];f=f.then((function(e){return e.getPageById(o)}));break;case"annot":"page"!==d&&console.error("path is incorrect");var u=t[h++];f=f.then((function(e){return e.getAnnotById(u)}));break;case"3d":"doc"!==d&&console.error("path is incorrect"),f=f.then((function(e){return e.getPDF3D()}));break;case"action":"doc"!==d&&console.error("path is incorrect");var c=t[h++];f=f.then((function(e){return e.getIndirectObject(c).then((function(e){return sa.then((function(t){var n=e.pdfDoc;return t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t)}))}))}));break;case"layer":"doc"!==d&&console.error("path is incorrect"),f=f.then((function(e){return e.pdfLayer?e.pdfLayer:e.getLayerNodes().thne((function(){return e.pdfLayer}))}));break;case"jr":""!==d&&console.error("path is incorrect"),f=sa;break;default:var g="construct"==e?(0,l.Ki)(a):t[h++];f=f.then((function(o){return"construct"==e?(o.construct=function(){for(var e in $i)if($i.hasOwnProperty(e)&&r.className==e){var u=$i[e],c=(0,n._)(u,[o].concat((0,s._)(t.slice(h)))),l=o[a];return l?l[g]=c:o[a]=(0,i._)({},g,c),{objId:g,json:c.toJson?c.toJson():""}}},o):o[a][g]}))}d=a},m=c[Symbol.iterator]();!(g=(y=m.next()).done);g=!0)_()}catch(e){p=!0,v=e}finally{try{g||null==m.return||m.return()}finally{if(p)throw v}}return!0===(S=r.transfer)?S=["buffer"]:(0,a._)(S,Array)||(S=[]),[2,{parentObjPromise:f,name:e,args:t.slice(h),transfer:S}]}}))})),function(e,t){return _a.apply(this,arguments)});function Ca(e){return Da[e]}function ka(e,t){for(var n=e.params||[],r=e.more.paramsInfo||[],i=[],a=n.length;a--;){var o=n[a],s=r[a]||{};s.isObject?!(i[a]=Ca(o))&&s.enumName&&(i[a]=Ea(o,s.enumName,t)):i[a]=n[a]}return i}function Ea(e,t,n){for(var r=t.split("."),i=n,a=0,o=r.length;a<o;a++)i=i[r[a]];return i.values[e]}function Ga(e,t){try{self.postMessage(e,t)}catch(t){self.postMessage(e)}}function Ta(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{error:-1},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ia()&&(n=n[0]),t&&r&&(t.e=r.constructor?r.constructor.name:r),Ga({id:e,type:1,params:t},n)}function Fa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ia()&&(n=n[0]),Ga({id:e,type:0,params:t},n)}function Ra(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ia()&&(n=n[0]);var r=(0,l.Ki)("worker_back"),i=(0,l.dD)();return Sa[r]=function(e){i.resolve(e)},Ga({callId:e,params:t,backId:r},n),i.promise}function Ma(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ia()&&(n=n[0]),Ga({uiListener:e,params:t},n)}function Oa(e){var t=new Error('The document corresponding to the ID("'.concat(e,'") cannot be found or has been deleted!'));return sa.then((function(t){return t.getPDFDocById(e)})).then((function(e){if(!e)throw t;return e}))}function xa(e,t){return Oa(e).then((function(e){return e.getPageByIndex(t)})).then((function(e){if(!e)throw new Error("Cannot access the page with the specified index: ".concat(t));return e}))}function Ba(e,t){return Oa(e).then((function(e){return e.getPageById(t)}))}function Na(e,t,n){var r=t.docId,i=t.pageId,a=t.x,o=t.y,s=t.width,u=t.height,c=t.scale,l=t.rotate;return Ba(r,i).then((function(e){return e.getImageDataByTile(a,o,s,u,c,l,n)})).then((function(t){var n=[];t.buffer&&(n=[t.buffer]),Fa(e,t,n)}))}self.onmessage=function(){var t=(0,e._)((function(e){var t,n,r,i,o,s,c,d,f,h,g,p,v;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:if(t=e.data,n=t.params,r=t.backId)return[2,Sa[r](n)];i=t.name,o=t.id,u.label=1;case 1:return u.trys.push([1,6,,7]),(c=pa[i])?(s=c(o,n),[3,5]):[3,2];case 2:return Array.isArray(n)&&n.length>0&&"object"==typeof n[0]?[4,wa(i,n)]:[3,4];case 3:if(!(s=u.sent()))throw p=new Error("Method not implemented."),Error(p+JSON.stringify(t));return d=s.parentObjPromise,f=s.name,h=s.args,g=s.transfer,s=d.then((function(e){var t=e[f];return t&&t.apply(e,h)}),(function(e){if(e===ea.Z)throw new Error("Method not permission.");throw e})).then((function(e){Fa(o,e,e&&(e.transfers||function(e,t){return e.length?e.map((function(e){var n=t;return(0,a._)(e,Array)?e.forEach((function(e){n=(n||{})[e]})):n=n[e],n})):[]}(g,e)))}),(function(e){Ta(o,{error:-1,message:"web-pdf-jr-worker-error\r\n"+f+"\r\n"+e.toString(),stack:e.stack})})),[3,5];case 4:!function(e){var t=e.id,n=e.name,r=n.split(".");sa.then((function(e){return e.engine})).then((function(t){for(var n=t,i=0,a=r.length;i<a;i++){var o=void 0;if(o=n[r[i]]){var s=r[i+1];if("prototype"===s){var u=void 0;try{n=Ca(u=e.more.self)}catch(e){n=new o}if(i++,"destroy"===r[i+1])return u}else"create"===s?(n=new o.apply(o,ka(e)),i++):n="function"==typeof o?o.apply(n,ka(e)):o}}return function(e){if(!e)return"";var t=(0,l.Ki)("obj");return Da[t]=e,t}(n)})).then((function(e){Fa(t,e)}),(function(e){Ta(t,{code:e.code,stack:e.stack,message:e.message})}))}(t),u.label=5;case 5:return(0,a._)(s,Promise)&&s.catch((function(e){var t,r;(0,a._)(e,Aa)?(r=e.reason,t=e.transfers):(t=[],r=e),sa.then((function(e){if((0,a._)(r,e.engine.ErrorCode)&&(r=r.value),"number"==typeof r){var s=e.engine.getErrorCode(r);"number"!=typeof s&&(s=r),Ta(o,{error:r,message:"Unknown engine error! error: ".concat(r,", code: ").concat(s,", Worker function name: ").concat(i,", parameters: ").concat(JSON.stringify(n))},t,null)}else(0,a._)(r,Error)&&Ta(o,{error:"number"==typeof r.error?r.error:-1,message:r.message,stack:r.stack},t,r)}))})),[3,7];case 6:return v=u.sent(),Ta(o,{error:-1,message:"web-pdf-jr-worker-error\r\n"+i+"\r\n"+v.toString(),stack:v.stack}),[3,7];case 7:return[2]}}))}));return function(e){return t.apply(this,arguments)}}(),pa.initJREngine=function(e,t){var n=t.enginePath,r=t.licenseSN,i=t.licenseKey,a=t.fontPath,o=t.cache,s=(t.compatibilityURL,t.l),u=t.d,c=t.readBlock,d=void 0===c?8192:c,f=t.fontMap,h=void 0===f?[]:f,g=t.brotli,p=void 0===g?{}:g,v=t.fontInfoPath,_=t.syncBaseUrl;la&&sa.then((function(t){return Fa(e,{version:self.gsdkVersion,clientId:t.id})}));var m=function(e){Di.init(e,"initAction"),Di.init(e,"initAnnot"),Di.init(e,"initForm"),Di.init(e,"initGraphicsObject"),Di.init(e,"initOptimizer"),Di.init(e,"initConnectPDF"),Di.init(e,"initFillSign"),Di.init(e,"initLayer"),Di.init(e,"initPDFObject"),Di.init(e,"initPortfolio")};if(sa.then((function(t){if(ma)return Fa(e,{other:ma,version:self.gsdkVersion,clientId:t.id}),m(t.engine);Fa(e,{version:self.gsdkVersion,clientId:t.id}),m(t.engine)})),!ca&&!ua){var y=(0,l.dD)();ua=y.promise.then((function(){return ca=!0,new ir(null,{enginePath:n,fontPath:a,cache:o,postMessageToUi:Ma,readBlock:d,fontMap:h,brotli:p,fontInfoPath:v,syncBaseUrl:_})})).then((function(t){t.jrEnginePromise.catch((function(t){Ta(e,{error:3},null,t)})),(s?t.checkLicense2(s):t.checkLicense(r,i)).then((function(n){var r=n.flag,i=n.other;if(lr.ZP.init(t),self.gsdkVersion=t.engine.Library.GetVersion().toString(),r){var a,o=t.engine.Library.GetLicenseKeyInfo;try{a=o().toString()}catch(e){}if(a){var s=a.match(/<Domains>((.|\r?\n)*)<\/Domains>/);if(s){s=s[1];for(var c,l=/<Domain>([^<]+)<\/Domain>/g,d=!1,f=!1;c=l.exec(s);){var h=c[1],g=void 0;if(h)for(var p=h.split(/,|，|\r?\n/),v=p.length;v--;){var _=p[v];if(_){d=!0;var m=void 0;try{m=new RegExp(_.replace(/\./g,"\\.").replace(/\*\*/g,"福昕").replace(/\*/g,".?").replace(new RegExp("福昕","g"),".*")).test(u)}catch(e){}if(m){f=!0,g=!0;break}}}if(g)break}if(d&&!f)return void Ta(e,{error:2})}}if(i&&(i=JSON.parse(i))){var y=!0;if(i.h){y=!1;var S=i.h;0;for(var b=S.length;b--;){var D=S[b];if(new RegExp(D).test(u)){y=!0;break}}}if(!y)return void Ta(e,{error:2});var P=Date.now(),I=i.b;if(I&&!(y=P>I))return void Ta(e,{error:2});var A=i.e;if(A&&!(y=P<A))return void Ta(e,{error:2});if(!y)return void Ta(e,{error:2})}ma=i,la=!0,oa.resolve(t)}else Ta(e,{error:2})}))}),(function(){Ta(e)}));try{if(!pn())throw new Error("not support asm");importScripts(n+"/gsdk.js?h="+un.jsHash),y.resolve(),ca=!0}catch(t){return console.error(t),Ta(e,{error:1})}}},pa.getPDFDocByFile=function(e,t){var n=t.file,r=t.option;return sa.then((function(e){if((0,a._)(n,ArrayBuffer))return e.getPDFDoc({buffer:n});var t=Ja(n);return t.size<20971520&&!r.ReadBlockOption?e.getPDFDoc({buffer:t.read(0,t.size)}):e.getPDFDoc({size:t.size,getBuffer:function(e,n){return t.read(e,n)},destroyCallback:function(){t.destroy()},ReadBlockOption:r.ReadBlockOption})})).then((function(e){return e.setOriginalStream(n),e.id})).then((function(t){Fa(e,t)}))},pa.getPDFDocFromImageFile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return sa.then((function(r){var i=r.engine,a=Ja(t),o=a.read(0,a.size),s=pt.Z.createImage(i,o),u=s.GetWidth(),c=s.GetHeight(),l=t.name,d={width:u,height:c};return r.createNewDoc(l,n,d).then((function(e){return r.getPDFDoc({buffer:e})})).then((function(t){Fa(e,{docId:t.id,width:u,height:c,buffer:o})}))}))},pa.createNewDoc=function(e,t){var n=t.title,r=t.author,i=t.pageSize;return sa.then((function(e){return e.createNewDoc(n,r,i)})).then((function(t){Fa(e,t,[t])}))},pa.createNewPortfolioDoc=function(e,t){var n=t.fileCoversheet,r=t.files,i=t.title;return sa.then((function(e){return e.createNewPortfolioDoc(n,r,i)})).then((function(t){Fa(e,t,[t])}))},pa.createSummarizeComments=function(e,t){var n,r=t.docId,i=t.writeStream,a=t.param;return Oa(r).then((function(e){return n=e,e.createSummarizeComments({writeStream:function(e,t,n){Ra(i,{arrayBuffer:e,offset:t,size:n},[e])}},a)})).then((function(t){ba.push(n.id,i),Fa(e,t)}),(function(t){Ta(e,{err:-1},[],t)}))},pa.setIcons=function(e,t){var n=t.icons;sa.then((function(e){var t=at();t.initIconProvider(e,e.engine),t.setIcons(n)})),Fa(e)},pa.addIcon=function(e,t){var n=t.icon;Fa(e,at().addIcon(n))},pa.removeIcon=function(e,t){var n=t.type,r=t.catalog,i=t.name;at().removeIcon(n,r,i),Fa(e)},pa.previewIconDoc=function(e,t){var n=t.icon,r=Promise.resolve();return"Digital"===n.category&&(r=lr.ZP.loadWasmModule(lr.sg)),r.then((function(t){return sa.then((function(t){var r=at();r.initIconProvider(t,t.engine);var i=r.previewIconDoc(n);Fa(e,i,[i])}))}))},pa.checkCertificatePassword=function(e,t){var n=t.pfxFile,r=t.password;return sa.then((function(e){return e.checkCertificatePassword(n,r)})).then((function(t){Fa(e,t)}))},pa.getCertificateInfo=function(e,t){var n=t.file,r=t.password;return sa.then((function(e){return e.getCertificateInfo(n,r)})).then((function(t){Fa(e,t)}))},pa.createCertificateFile=function(e,t){var n=t.docId,r=t.info;return Oa(n).then((function(e){return e.createCertificateFile(r)})).then((function(t){Fa(e,t)}))},pa.getCertificateSerials=function(e,t){return Oa(t.docId).then((function(e){return e.getCertificateSerials()})).then((function(t){Fa(e,t)}))},pa.parseByCertificate=function(e,t){var n=t.docId,r=t.info;return Oa(n).then((function(t){t.parseByCertificate(r).then((function(n){0===n.code&&(n.info=t.toJson()),Fa(e,n)}))})).catch((function(t){Ta(e,null,[],t)}))},pa.parsePDFDocByPassword=function(e,t){var n,r=t.id,i=t.password,a=t.initData,o=void 0===a?{}:a;return sa.then((function(e){e.engine.Library.SetDefaultFileSize(o.readBlock||e.defaultReadBlockSize);var t=Array.isArray(o.fdf);if(o.fdf&&o.fdf.file){var n=o.fdf.file,r=Ua(n),i=Wa(n);return e.getFDFDoc({size:r,getBuffer:function(e,t){return i(e,t)}}).then((function(e){o.fdf.file=e}))}if(t)return Promise.all(o.fdf.map((function(t,n){var r=Ua(t.file),i=Wa(t.file);return e.getFDFDoc({size:r,getBuffer:function(e,t){return i(e,t)}}).then((function(e){return o.fdf[n].file=e}))})))})).then((function(){return Oa(r)})).then((function(e){return n=e,e.parseByPassword(i,o)})).then((function(t){if(sa.then((function(e){})),0===t.code){t.info=n.toJson();var r=n.doc.CheckPassword(new n.engine.String(i||""));t.info.hasOwnerPassword=3===r.value||n.doc.HasOwnerPassword()}Fa(e,t)})).catch((function(t){Ta(e,null,[],t)})).finally((function(e){return n=null}))},pa.getPageCount=function(e,t){return Oa(t).then((function(e){return e.getPageCount()})).then((function(t){Fa(e,t)}),(function(t){Ta(e,null,[],t)}))},pa.getFileVersion=function(e,t){return Oa(t).then((function(e){return e.getFileVersion()})).then((function(t){Fa(e,t)}),(function(t){Ta(e,null,[],t)}))},pa.getPDFDocInfoById=function(e,t){return Oa(t).then((function(t){Fa(e,t.toJson())}))},pa.getMetadata=function(e,t){return Oa(t).then((function(t){Fa(e,t.getMetadata())}))},pa.setMetadataValue=function(e,t){var n=t.id,r=t.key,i=t.value;return Oa(n).then((function(t){Fa(e,t.setMetadataValue(r,i))}))},pa.getPageInfoByIndex=function(e,t){return xa(t.id,t.index).then((function(e){return e.preparsed?e.preparseJsonPromise:e.toJson()})).then((function(t){Fa(e,t)})).catch((function(e){0}))},pa.getDocPermission=function(e,t){return Oa(t).then((function(e){return e.getPermission()})).then((function(t){Fa(e,t)}))},pa.getPageWidth=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getWidth()})).then((function(t){Fa(e,t)}))},pa.getPageHeight=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getHeight()})).then((function(t){Fa(e,t)}))},pa.getPageImageData=function(e,t){var n=t.docId,r=t.pageId,i=t.scale;return Ba(n,r).then((function(e){return e.getImageData(i)})).then((function(t){var n=[];t.buffer&&(n=[t.buffer]),Fa(e,t,n)}))},pa.destroyDoc=function(e,t){var n=t.id;ba.get(n).forEach((function(e){var t;t=e,self.postMessage({destroyId:t})})),Ia[n]&&delete Pa[Ia[n]],Oa(n).then((function(t){return sa.then((function(e){e.destroyDoc(n)})).then((function(){ya.clearObjectFromCache(n),t&&t.destroy();var r=da[n];r&&(r(),delete da[n]),Fa(e)}))})).catch((function(t){Ta(e,null,[],t)}))},pa.getImageDataByTile=Na,pa.getImageDataWithoutAnnotByTile=function(e,t){var n=t.docId,r=t.pageId,i=t.x,a=t.y,o=t.width,s=t.height,u=t.scale,c=t.rotate;return sa.then((function(t){Na(e,{docId:n,pageId:r,x:i,y:a,width:o,height:s,scale:u,rotate:c},[t.engine.ContentFlag.e_RenderPage.value])}))},pa.getAnnot=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e?e.getAnnotById(i).then((function(t){if(!t)return[null];var n=$a(e,t);return n?[t,n]:[t]})):[null]})).then((function(e){var t=(0,o._)(e,2),n=t[0],r=t[1],i={};if(n){var a,s=n.engine;r&&(a=new s.TextPage(r,s.TextParseFlags.e_ParseTextNormal.value)),i=n.toJson(null,{cTextPage:a});try{n.destroy()}catch(e){}a&&(a.delete(),r.delete())}return i})).then((function(t){Fa(e,t)}))},pa.getPageAnnotIDList=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getAnnotIDList()})).then((function(t){Fa(e,t)}))},pa.getAnnots=function(t,n){var r,i=n.docId,a=n.pageId,c=n.idList,l=n.reload;return Ba(i,a).then((function(e){return e?(r=e,e.getAnnots(c,void 0,l)):[]})).then(function(){var t=(0,e._)((function(e){var t,n,i;return(0,u.Jh)(this,(function(a){return t={},n=!1,e.map((function(e,r){var i=e.annot,a=i.GetType(),o=e.engine,s=o.AnnotType;if(a===s.e_UnknownType)return!1;n||-1===[s.e_Highlight,s.e_Underline,s.e_Squiggly,s.e_StrikeOut].indexOf(a)||(n=e);var u=i.GetDict(),c=u.GetObjNum(),l=t[c]=t[c]||{},d=c;l.index=r,l.id=d,l.objectNumber=d;var f=(0,W.n5)(o,"IRT");if(u.HasKey(f)){var h=u.GetElement(f).GetDict().GetObjNum(),g=(0,W.n5)(o,"RT"),p=(0,W.n5)(o,"State"),v=(0,W.n5)(o,"StateModel"),_=t[h]=t[h]||{};if(u.HasKey(p)&&u.HasKey(v)){var m=u.GetElement(v).GetString().toString(),y=i.GetModifiedDateTime(),S=0;switch(y.IsValid()&&(y=y.ToUTCTime(),S=Date.UTC(y.year,y.month-1,y.day,y.hour,y.minute,y.second,y.milliseconds)),m){case"Marked":(_.markedStates=_.markedStates||[]).push({index:r,id:d,time:S,objectNumber:d});break;case"Review":(_.reviewStates=_.reviewStates||[]).push({index:r,id:d,time:S,objectNumber:d})}}else if(u.HasKey(g)){if("Group"===u.GetElement(g).GetString().toString())_.isGroupHeader=!0,_.isGroup=!0,(_.groupElements=_.groupElements||[]).push({index:r,id:d,objectNumber:d}),l.isGroup=!0,l.groupHeader=_;else _.hasReplies=!0,(_.replies=_.replies||[]).push({index:r,id:d,content:i.GetContent().toString(),objectNumber:d})}else{_.hasReplies=!0,(_.replies=_.replies||[]).push({index:r,id:d,content:i.GetContent().toString(),objectNumber:d})}}})),(i=n&&$a(r,n))?[2,[e,t,i]]:[2,[e,t]]}))}));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,e._)((function(e){var t,n,i,a,s,c,l,d,f,h,g,p,v,_,m,y,S;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:t=(0,o._)(e,3),n=t[0],i=t[1],a=t[2],s=[],c=null==r?void 0:r.engine,a&&(l=new c.TextPage(a,c.TextParseFlags.e_ParseTextNormal.value)),d=!0,f=!1,h=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),g=n[Symbol.iterator](),u.label=2;case 2:return(d=(p=g.next()).done)?[3,5]:(v=p.value,_=v.engine,(m=v.annot)?0===(y=m.GetType().value)?[3,4]:(s.push(v.toJson(i,{cTextPage:l})),y!==_.AnnotType.e_FileAttachment.value?[3,4]:[4,new Promise((function(e){return setTimeout(e)}))]):[3,4]);case 3:u.sent(),u.label=4;case 4:return d=!0,[3,2];case 5:return[3,8];case 6:return S=u.sent(),f=!0,h=S,[3,8];case 7:try{d||null==g.return||g.return()}finally{if(f)throw h}return[7];case 8:return l&&(l.delete(),a.delete()),[2,s]}}))}));return function(e){return t.apply(this,arguments)}}()).then((function(e){var n;r&&!r.isVirtual&&(n=e).push.apply(n,(0,s._)(r.getFakeAnnots())),Fa(t,e)}))},pa.setRenderFlag=function(e,t){var n=t.docId,r=t.flags;return Oa(n).then((function(e){e.setRenderFlag(r)}))};var La={};function ja(e,t){var n=t.progressiveId,r=La[n];r?(r.bitmap.delete(),r.renderer.delete(),r.progressive.delete(),delete La[n],e&&Fa(e)):Fa(e)}function Ua(e){return(0,a._)(e,Blob)?e.size:e.byteLength}function Wa(e){return(0,a._)(e,Blob)?(e=new Blob([e]),function(t,n){return(new FileReaderSync).readAsArrayBuffer(e.slice(t,t+n))}):e.slice?function(t,n){return e.slice(t,t+n)}:function(t,n){return new Uint8Array(e,t,n).buffer}}pa.getPageBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.scale,a=t.rotate,o=t.rect,s=t.flags,u=t.usage,c=t.id,l=t.isSharedPage,d=t.annotData;return Ba(n,r).then((function(e){return e?e.getBitmap(i,a,o,s,u,""==c,l,d):null})).then((function(t){if(t){var n=t.image;if(t.isVirtual)Fa(e,n,[n.buffer]);else{var r=[];n.buffer&&(r=[n.buffer]),n.progressiveId=c,Fa(e,n,r),delete t.image,100==n.rate?(t.bitmap.delete(),t.renderer.delete(),t.progressive.delete&&t.progressive.delete()):La[c]=t}}else Fa(e,null)}))},pa.progressContinue=function(e,t){var n=t.progressiveId,r=La[n];if(r){var i=r.progressive,a=i.GetRateOfProgress();100==a&&Fa(e,{rate:100}),Si.Z.startTick(100);var o=i.Continue(),s=r.page,u=r.renderer,c=r.usage,l=r.matrix,d=r.renderFlags;100==(a=2==o.value?100:i.GetRateOfProgress())&&s.renderAnnots(u,c,l,d);var f=r.getBitmapBuffer(r.engine,r.bitmap,r.renderer,!1);f.rate=a,f.progressiveId=n,f.x=r.x,f.y=r.y;var h=[];f.buffer&&(h=[f.buffer]),Fa(e,f,h),100==f.rate&&ja(null,{progressiveId:n})}else Fa(e,{isEmpty:1,progressiveId:n})},pa.cancleProgress=ja,pa.getPageAndHighlightBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.scale,a=t.rotate,o=t.rect,s=t.exclude;return Ba(n,r).then((function(e){return e.getPageAndHighlightBitmap(i,a,o,s)})).then((function(t){var n=[];t.buffer&&(n=[t.buffer]),Fa(e,t,n)}))},pa.getAnnotBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.scale,o=t.rotate,s=t.rect,u=t.renderAppearanceType;return Ba(n,r).then((function(e){return e.getAnnotBitmap(i,a,o,s,u)})).then((function(t){var n=[];t.buffer&&(n=[t.buffer]),Fa(e,t,n)}))},pa.getAnnotBitmapByRange=function(e,t){var n=t.docId,r=t.pageId,i=t.range,a=t.scale,o=t.rotate,s=t.rect;return Ba(n,r).then((function(e){return e.getAnnotBitmapByRange(i,a,o,s)})).then((function(t){var n=[];t.buffer&&(n=[t.buffer]),Fa(e,t,n)}))},pa.getAnnotIdAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance;return Ba(n,r).then((function(e){return e.getAnnotIdAtPoint(i.x,i.y,a)})).then((function(t){Fa(e,t)}))},pa.getAnnotIdAtDevicePoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance,o=t.matrix;return Ba(n,r).then((function(e){return e.getAnnotIdAtDevicePoint(i.x,i.y,a,o)})).then((function(t){Fa(e,t)}))},pa.getAnnotObjectNumAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance;return Ba(n,r).then((function(e){return e.getAnnotObjectNumAtPoint(i.x,i.y,a)})).then((function(t){Fa(e,t)}))},pa.getAnnotObjectNumAtDevicePoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance,o=t.matrix;return Ba(n,r).then((function(e){return e.getAnnotObjectNumAtDevicePoint(i.x,i.y,a,o)})).then((function(t){Fa(e,t)}))},pa.getAnnotObjNumByNM=function(e,t){var n=t.docId,r=t.pageId,i=t.nm;return Ba(n,r).then((function(e){return e.getAnnotObjNumByNM(i)})).then((function(t){Fa(e,t)}))},pa.getCharInfoAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance;return Ba(n,r).then((function(e){return e.getCharInfoAtPoint(i.x,i.y,a)})).then((function(t){Fa(e,t)}))},pa.getThumb=function(e,t){var n=t.docId,r=t.pageId,i=t.rotate,a=t.ratio;return Ba(n,r).then((function(t){return t?t.getThumb(i,a).then((function(t){var n=[];t.buffer&&(n=[t.buffer]),Fa(e,t,n)})):Ta(e,new Error("Page not exists: "+r))}))},pa.getMediaBoxBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.width,a=t.height;return Ba(n,r).then((function(t){return t?t.getMediaBoxBitmap(i,a).then((function(t){var n=[];t.buffer&&(n=[t.buffer]),Fa(e,t,n)})):Ta(e,new Error("Page not exists: "+r))}))},pa.updateAnnotQuadPointsByCharIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.startCharIndex,o=t.endCharIndex;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.updateQuadPointsByCharIndex(a,o)})).then((function(t){Fa(e,t)}))},pa.setAnnotContent=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.content;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setContent(a)})).then((function(t){Fa(e,t)}))},pa.setAnnotBorderColor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.color;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setBorderColor(a)})).then((function(){Fa(e,!0)}))},pa.setAnnotOpacity=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.opacity;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setOpacity(a)})).then((function(t){Fa(e,t)}))},pa.setAnnotRotation=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.rotation;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRotation(a)})).then((function(t){Fa(e,t)}))},pa.removeAnnot=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){if(e.hasAnnot(i))return e.getAnnotById(i)})).then((function(e){return e?e.remove():[i]})).then((function(t){Fa(e,t||[])}))},pa.annotAddReply=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.content;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.addReply(a)})).then((function(e){return e.pdfPage.update().then((function(){return e}))})).then((function(t){Fa(e,t.toJson()),t.destroy()}))},pa.setAnnotRect=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.rect;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRect(a)})).then((function(t){Fa(e,t)}))},pa.setAnnotRectAndInnerRect=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.rect,o=t.innerRect;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setAnnotRectAndInnerRect(a,o)})).then((function(t){Fa(e,t)}))},pa.getAnnotInnerRect=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){t.getInnerRect?Fa(e,t.getInnerRect()):Fa(e,!1)}))},pa.moveAnnotTo=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.position;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.moveTo(a.left,a.top)})).then((function(t){return Fa(e,t)}))},pa.setAnnotInnerRect=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.rect;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setInnerRect(a)})).then((function(t){return Fa(e,t)}))},pa.setAnnotAPBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.url,o=t.size;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setAnnotAPBitmap(a,o)})).then((function(t){return Fa(e,t)}))},pa.getBitmapBuffer=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.getBitmapBuffer()})).then((function(t){var n=[];t.buffer&&(n=[t.buffer]),Fa(e,t,n)}))},pa.getPDFDocStream=function(e,t){var n,r=t.docId,i=t.writeStream,a=t.flag,o=t.endAllOperations;return Oa(r).then((function(e){return n=e,e.getStream({writeStream:function(e,t,n){Ra(i,{arrayBuffer:e,offset:t,size:n},[e])},endAllOperations:o},a)})).then((function(t){ba.push(n.id,i),Fa(e,t)}))},pa.setAnnotBorderStyle=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.style,o=t.styleParam;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setBorderStyle(a,o)})).then((function(t){Fa(e,t)}))},pa.setAnnotBorderWidth=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.width;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setBorderWidth(a)})).then((function(t){Fa(e,t)}))},pa.setAnnotFillColor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.color;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return!!e.setFillColor(a).length})).then((function(t){Fa(e,t)}))},pa.setRedactAnnotFillColor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.color,o=t.onlyForFill;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactFillColor(a,o),!0})).then((function(t){Fa(e,t)}))},pa.setAnnotBorderInfo=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.borderInfo;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setBorderInfo(a),!0})).then((function(t){Fa(e,t)}))},pa.setRedactOverlayText=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.overlayText;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactOverlayText(a)})).then((function(t){Fa(e,t)}))},pa.setRedactApplyFillColor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.color;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactApplyFillColor(a)})).then((function(t){Fa(e,t)}))},pa.removeRedactOverlayText=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.removeRedactOverlayText()})).then((function(t){Fa(e,t)}))},pa.setRedactOverlayTextAlignment=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.alignment;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactOverlayTextAlignment(a)})).then((function(t){Fa(e,t)}))},pa.setRedactRepeat=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.isRepeat;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactRepeat(a)})).then((function(t){Fa(e,t)}))},pa.setRedactAutoFontSize=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.isAutoFontSize;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactAutoFontSize(a)})).then((function(t){Fa(e,t)}))},pa.getRedactDefaultAppearance=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){Fa(e,t.getRedactDefaultAppearance())}))},pa.setRedactDefaultAppearance=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.appearance;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactDefaultAppearance(a)})).then((function(t){Fa(e,t)}))},pa.setRedactOpacity=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.opacity,o=t.only4Fill;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactOpacity(a,o)})).then((function(t){Fa(e,t)}))},pa.setAnnotIconName=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.iconName;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setIconName(a)})).then((function(t){Fa(e,t)}))},pa.getFileattachmentStream=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.writeStream;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.getStream({writeStream:function(e,t,n){Ra(a,{arrayBuffer:e,offset:t,size:n},[e])}})})).then((function(t){ba.push(i,a),Fa(e,t)}))},pa.setAnnotEndingStyle=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.isBeginning,o=t.style;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){o=parseInt(o),a?e.setLineStartStyle(o):e.setLineEndStyle(o)})).then((function(){Fa(e)}))},pa.setLineStartPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.x,o=t.y;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setStartPoint(a,o)})).then((function(){Fa(e)}))},pa.setLineEndPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.x,o=t.y;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setEndPoint(a,o)})).then((function(){Fa(e)}))},pa.setAnnotLeaderLineLength=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.length;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setLeaderLineLength(a)})).then((function(){Fa(e)}))},pa.setAnnotLeaderLineExtend=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.length;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setLeaderLineExtensionLength(a)})).then((function(){Fa(e)}))},pa.setAnnotLeaderLineOffset=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.offset;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setLeaderLineOffset(a)})).then((function(){Fa(e)}))},pa.setAnnotCaptionOffset=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.x,o=t.y;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setCaptionOffset(a,o)})).then((function(){Fa(e)}))},pa.updateAnnotVertexes=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.pointIndex,o=t.x,s=t.y;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.updateVertexes(a,o,s)})).then((function(){Fa(e)}))},pa.setAnnotVertexes=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.vertexes;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setVertexes(a)})).then((function(){Fa(e)}))},pa.setHighlightingMode=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.highlightingMode;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setHighlightingMode(a)})).then((function(t){Fa(e,t)}))};var Ha=65536,za=function e(n,r,i){(0,t._)(this,e),this.bufStart=n,this.bufSize=r,this.buffer=i},Ka=function(){function e(n){(0,t._)(this,e),this.blob=n,this.bufferMap={}}return(0,r._)(e,[{key:"loadFSToMem",value:function(e,t){for(var n=Math.floor(e/Ha),r=new FileReaderSync,i=Math.min(t,this.blob.size-e),a=r.readAsArrayBuffer(this.blob.slice(e,e+i)),o=this.bufferMap[n]=new za(e,i,a),s=n;s<=n+Math.ceil((t-1)/Ha)-1;)this.bufferMap[s]=o,s++}},{key:"read",value:function(e,t){for(var n=this.bufferMap,r=Math.floor(e/Ha),i=new Uint8Array(t),a=r,o=0;o<t;a++){if(!n[a]){var s=Math.max(Ha,((t-o-1)/Ha|1)*Ha);a*Ha+s<e+t&&(s+=Ha),this.loadFSToMem(a*Ha,s)}var u=n[a],c=u.bufSize,l=u.bufStart,d=u.buffer,f=Math.min(t-o,c-(e+o-l));i.set(new Uint8Array(d,e+o-l,f),o),o+=f}return i}}]),e}();function Ja(e){var t,n,r=[];if((0,a._)(e,Blob)){e=new Blob([e]),t=e.size;Math.ceil(t/Ha);var i=new Ka(e);n=function(e,t){return i.read(e,t)}}else t=e.byteLength,n=e.slice?function(t,n){return e.slice(t,t+n)}:function(t,n){return new Uint8Array(e,t,n).buffer};return{size:t,read:n,destroy:function(){e=null,t=0,n=null;for(var i=r.length;i--;)delete r[i];r=null}}}function Va(e){for(var t=[],n=e.GetMatchRects(),r=0,i=n.GetSize();r<i;r++){var a=n.GetAt(r);t[r]={left:a.left,right:a.right,top:a.top,bottom:a.bottom}}return{pageIndex:e.GetMatchPageIndex(),startCharIndex:e.GetMatchStartCharIndex(),endCharIndex:e.GetMatchEndCharIndex(),sentenceStartIndex:e.GetMatchSentenceStartIndex(),sentence:e.GetMatchSentence().toString(),rectArray:t}}pa.importFromFDF=function(e,t){var n=t.docId,r=t.fdf,i=t.dataType;return sa.then((function(e){var t=Ua(r),i=Wa(r),a=function(e,t){return i(e,t)};return e.getFDFDoc({size:t,getBuffer:a}).then((function(r){return r.IsEmpty()&&Ri?(r.delete(),Promise.all([e.getFDFDoc({size:t,getBuffer:a}),Oa(n)])):Promise.all([r,Oa(n)])}))})).then((function(e){var t=(0,o._)(e,2),n=t[0],r=t[1];return[r.importFromFDF(n,i),r,n]})).then((function(e){var t=(0,o._)(e,3),n=(t[0],t[1]);return t[2].delete(),Promise.all(n.getAllLoadedPages().map((function(e){return e.update()})))})).then((function(){Fa(e)}))},pa.importFromFDFFile=function(e,t){var n=t.docId,r=t.file,i=t.size,s=t.type;return sa.then((function(e){var t;return(0,a._)(r,Uint8Array)?t=e.getFDFDoc({size:r.byteLength,getBuffer:function(e,t){return r.slice?r.slice(e,e+t):new Uint8Array(r,e,t).buffer}}):"string"==typeof r&&(t=e.getFDFFromURL(r,i)),t})).then((function(e){return Promise.all([e,Oa(n)])})).then((function(e){var t=(0,o._)(e,2),n=t[0],r=t[1],i=r.importFromFDF(n,s);return Promise.all(r.getAllLoadedPages().map((function(e){return e.update()}))).then((function(){return i}))})).then((function(t){Fa(e,t)}))},pa.setCalloutLineEndingStyle=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.endingStyle;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setCalloutLineEndingStyle(a)})).then((function(){Fa(e)}))},pa.setDefaultAppearance=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.da;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){t.setDefaultAppearance(a);Fa(e)}))},pa.setAction=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.type,o=t.trigger,s=t.append;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setAction(o,a,s)})).then((function(t){Fa(e,t.toJson())}))},pa.removeAnnotAction=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.removeAction()})).then((function(t){Fa(e,t)}))},pa.getAction=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.getAction()})).then((function(t){var n;n=t?t.toJson():null,Fa(e,n)}))},pa.getStructureRoles=function(e,t){return Oa(t.docId).then((function(e){return e.getStructureRoles(e)})).then((function(t){Fa(e,t)}))},pa.addBookmarksFromStructureRoles=function(e,t){var n=t.docId,r=t.structureRoles,i=t.rootTitle;return Oa(n).then((function(e){return e.addBookmarksFromStructureRoles(r,i)})).then((function(t){Fa(e,t)}))},pa.addAnnotReviewState=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.stateName;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.addReviewState(a)})).then((function(e){return e.pdfPage.update().then((function(){return e}))})).then((function(t){Fa(e,t.toJson())}))},pa.addAnnotMarkedState=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.stateName;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.addMarkedState(a)})).then((function(e){return e.pdfPage.update().then((function(){return e}))})).then((function(t){Fa(e,t.toJson())}))},pa.removeAllStateAnnots=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){var t=e.removeAllStateAnnots();return!!t&&e.pdfPage.update().then((function(e){return t}))})).then((function(t){return Fa(e,t)}))},pa.setStateName=function(e,t){var n=t.docId,r=t.pageId,i=t.stateAnnotId,a=t.stateName;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){t.setStateName(a),Fa(e,!0)}))},pa.setNoteOpenStatus=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.isOpen;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){var n=t.setOpenStatus(a);Fa(e,n)}))},pa.setActionDataByIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.data,o=t.actionIndex;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){var t=e.action.setActionDataByIndex(a,o);return e.updateModifyTime(),t})).then((function(t){Fa(e,t.toJson())}))},pa.setCalloutLinePoints=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.calloutLinePoints;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setCalloutLinePoints(a)})).then((function(){Fa(e)}))},pa.updateCalloutFigure=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.outerRect,o=t.innerRect,s=t.calloutLinePoints;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.updateCalloutFigure(a,o,s)})).then((function(){Fa(e)}))},pa.updateRectFigure=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.outerRect,o=t.innerRect;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return!!e.updateRectFigure&&e.updateRectFigure(a,o)})).then((function(t){Fa(e,t)}))},pa.setSubject=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.subject;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setSubject(a)})).then((function(t){Fa(e,t)}))},pa.setTitle=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.title;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setTitle(a)})).then((function(t){Fa(e,t)}))},pa.setCreateDateTime=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.date;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setCreateDateTime(a)})).then((function(t){Fa(e,t)}))},pa.setModifiedDateTime=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.date;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setModifiedDateTime(a)})).then((function(t){Fa(e,t)}))},pa.setUniqueId=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.newId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setUniqueId(a,!0)})).then((function(t){Fa(e,t)}))},pa.setDefaultAp=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.defaultAppearance;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setDefaultAp(a)})).then((function(t){Fa(e,t)}))},pa.setAlignment=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.value;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setAlignment(a),!0})).then((function(t){Fa(e,t)}))},pa.exportToStardardXml=function(e,t){var n=t.docId,r=t.fileName,i=t.callbackId;return lr.ZP.loadWasmModule(lr.eL).then((function(){return Oa(n)})).then((function(e){return e.exportToStardardXml(r,(function(e){Ra(i,e)}))})).then((function(t){Fa(e,t)}))},pa.exportToFDF=function(e,t){var n=t.docId,r=t.fileType,i=t.dataType,a=t.pageAnnots;return Oa(n).then((function(e){return e.exportToFDF(r,i,a)})).then((function(t){Fa(e,t)}))},pa.exportToImage=function(e,t){var n=t.docId,r=t.imageSetting,i=t.fileName,a=t.pageRange,o=t.callbackId;return lr.ZP.loadWasmModule(lr.eL).then((function(){return Oa(n)})).then((function(e){return e.exportToImage(r,i,a,(function(e){Ra(o,e)}))})).then((function(t){Fa(e,t)}))},pa.exportToTxt=function(e,t){var n=t.docId,r=t.taskName,i=t.pageRange,a=t.callbackId;return lr.ZP.loadWasmModule(lr.eL).then((function(){return Oa(n)})).then((function(e){return e.exportToTxt(r,i,(function(e){Ra(a,e)}))})).then((function(t){Fa(e,t)}))},pa.exportImageObjectToImage=function(e,t){var n=t.docId,r=t.graphicsObject,i=t.imageSetting,a=t.fileName,o=t.callbackId;return lr.ZP.loadWasmModule(lr.eL).then((function(){return Oa(n)})).then((function(e){return e.exportImageObjectToImage(r,i,a,(function(e){Ra(o,e)}))})).then((function(t){Fa(e,t)}))},pa.cancelExport=function(e,t){return Oa(t.docId).then((function(e){return e.cancelExport()})).then((function(t){Fa(e,t)}))},pa.setAnnotFlag=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.flag;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setAnnotFlag(a)})).then((function(t){Fa(e,!0)}))},pa.addAnnot=function(e,t){var n=t.docId,r=t.pageId,i=t.annot;return Ba(n,r).then((function(e){return e.addAnnot(i)})).then((function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i?t[n]=i.toJson():t[n]=null}return t})).then((function(t){Fa(e,t)}))},pa.setImage=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.buffer;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setImage(a)})).then((function(t){Fa(e,!0)}))},pa.getAllModuleLicenseRight=function(e){return sa.then((function(e){var t=e.engine,n=t.ModuleName,r=(Object.keys(n).filter((function(e){return 0===e.indexOf("e_ModuleName")})),{});return Object.entries(U.f5).forEach((function(e){var n=e[0].toLowerCase(),i=t.Library.HasModuleLicenseRight({value:e[1]});r[n]=i})),r})).then((function(t){Fa(e,t)}))},pa.ensureSideModeLoaded=function(e,t){var n=t.moduleType;return sa.then((function(t){return t.ensureSideModeLoaded(n).then((function(t){return Fa(e,!0)}))}))},pa.setDictionaryEntry=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.key,o=t.value;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setDictionaryEntry(a,o)})).then((function(t){Fa(e,t)}))},pa.getDictionaryEntry=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.key;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.getDictionaryEntry(a)})).then((function(t){Fa(e,t)}))},pa.resetAppearanceStream=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){t.resetAppearanceStream(),Fa(e)}))},pa.isLinearized=function(e,t){return Oa(t.docId).then((function(e){return e.isLinearized()})).then((function(t){Fa(e,t)}))},pa.getLayerNodes=function(e,t){return Oa(t.docId).then((function(e){return e.getLayerNodes()})).then((function(t){Fa(e,t)}))},pa.setLayerNodeVisiable=function(e,t){var n=t.docId,r=t.layerId,i=t.visiable;return Oa(n).then((function(e){return!!e.pdfLayer&&e.pdfLayer.setLayerNodeVisiable(r,i)})).then((function(t){Fa(e,t)}))},pa.addAnnotGroup=function(e,t){var n=t.docId,r=t.pageId,i=t.annots,a=t.headerIndex;return Ba(n,r).then((function(e){return e.addAnnotGroup(i,a)})).then((function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i?t[n]=i.toJson():t[n]=null}return t})).then((function(t){Fa(e,t)}))},pa.getBlankPageIndexes=function(e,t){return Oa(t.docId).then((function(e){return e.getBlankPageIndexes()})).then((function(t){Fa(e,t)}))},pa.getBookmarks=function(e,t){return Oa(t.docId).then((function(e){return e.getBookmarks()})).then((function(t){Fa(e,t)}))},pa.getCurFileSymbolId=function(e,t){return Oa(t.docId).then((function(e){return e.getCurFileSymbolId()})).then((function(t){Fa(e,t)}))},pa.getFadeOutBackground=function(e,t){var n=t.docId,r=t.imgBuffer;return Oa(n).then((function(e){return e.getFadeOutBackground(r)})).then((function(t){Fa(e,t)}))},pa.getConvertToMono=function(e,t){var n=t.docId,r=t.imgBuffer;return Oa(n).then((function(e){return e.getConvertToMono(r)})).then((function(t){Fa(e,t)}))},pa.createRootBookmark=function(e,t){return Oa(t.docId).then((function(e){return e.createRootBookmark()})).then((function(t){Fa(e,t)}))},pa.setBookmarkProperty=function(e,t){var n=t.docId,r=t.bkId,i=t.properties;return Oa(n).then((function(e){return e.setBookmarkProperty(r,i)})).then((function(t){Fa(e,t)}))},pa.removeBookmark=function(e,t){var n=t.docId,r=t.bkId,i=t.isOldVersion;return Oa(n).then((function(e){return e.removeBookmark(r,i)})).then((function(t){Fa(e,t)}))},pa.getBookmarkDestination=function(e,t){var n=t.docId,r=t.bkId;return Oa(n).then((function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.getDestination()})).then((function(t){Fa(e,t)}))},pa.setBookmarkDestination=function(e,t){var n=t.docId,r=t.bkId,i=t.gotoAction;return Oa(n).then((function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.setDestination(i)})).then((function(t){Fa(e,t)}))},pa.getBookmarkAction=function(e,t){var n=t.docId,r=t.bkId;return Oa(n).then((function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.getAction()})).then((function(t){Fa(e,t)}))},pa.setBookmarkAction=function(e,t){var n=t.docId,r=t.bkId,i=t.action;return Oa(n).then((function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.setAction(i)})).then((function(t){Fa(e,t)}))},pa.moveBookmarkAction=function(e,t){var n=t.docId,r=t.bkId,i=t.moveInfo;return Oa(n).then((function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.moveAction(i)})).then((function(t){Fa(e,t)}))},pa.removeBookmarkAction=function(e,t){var n=t.docId,r=t.bkId,i=t.action;return Oa(n).then((function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.removeAction(i)})).then((function(t){Fa(e,t)}))},pa.getTextRectsAtRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect;return Ba(n,r).then((function(e){return e.getTextRectsAtRect(i)})).then((function(t){Fa(e,t)}))},pa.getTextContinuousRectsAtRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect;return Ba(n,r).then((function(e){return e.getTextContinuousRectsAtRect(i)})).then((function(t){Fa(e,t)}))},pa.getTextContinuousRectsAtPoints=function(e,t){var n=t.docId,r=t.pageId,i=t.point1,a=t.point2,o=t.tolerance,s=t.start,u=t.end,c=t.isTextIndex;return Ba(n,r).then((function(e){return e.getTextContinuousRectsAtPoints(i,a,o,s,u,c)})).then((function(t){Fa(e,t)}))},pa.getTextContinuousCharsAtRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect,a=t.allInRect;return Ba(n,r).then((function(e){return e.getTextContinuousCharsAtRect(i,a)})).then((function(t){Fa(e,t)}))},pa.getDoubleClickTextRectAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.doubleClickPoint,a=t.tolerance;return Ba(n,r).then((function(e){return e.getDoubleClickTextRectAtPoint(i,a)})).then((function(t){Fa(e,t)}))},pa.getTextSearch=function(e,t){var n=t.docId,r=t.pageId,i=t.pattern,a=t.flags;return Ba(n,r).then((function(e){return e.getTextSearch(i,a)})).then((function(t){var n=t.textSearch,r=t.textPage,i=t.strPattern,a=(0,l.Ki)("page_text_search");aa[a]={textSearch:n,textPage:r,strPattern:i},Fa(e,a)}))},pa.getAnnotTextSearch=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.pattern,o=t.flags;return Ba(n,r).then((function(e){return e.getAnnotTextSearch(i,a,o)})).then((function(t){var n=t.textSearch,r=t.strPattern,i=(0,l.Ki)("annot_text_search");aa[i]={textSearch:n,strPattern:r},Fa(e,i)}))},pa.textSearchFindNext=function(e,t){var n=t.id,r=aa[n];return r?(r=r.textSearch).FindNext()?void Fa(e,Va(r)):Fa(e,null):Ta(e,null,[],"No text search found!!")},pa.textSearchFindPrev=function(e,t){var n=t.id,r=aa[n];return r?(r=r.textSearch).FindPrev()?void Fa(e,Va(r)):Fa(e,null):Ta(e,null,[],"No text search found!!")},pa.textSearchDestroy=function(e,t){var n=t.id;try{var r=aa[n];r.strPattern.delete(),r.textSearch.delete(),r.textPage.delete(),delete aa[n]}catch(e){}finally{Fa(e)}},pa.registerSecurityCallback=function(e,t){var n=t.type,r=t.options;return sa.then((function(e){return e.registerSecurityCallback(n,r)})).then((function(t){Fa(e,t)}))},pa.registerCustomWebPluginSecurityCallback=function(e,t){var n=t.fileName,r=t.filter,i=t.pluginSecurityObj;return sa.then((function(e){return e.registerCustomWebPluginSecurityCallback(n,r,i)})).then((function(t){Fa(e,t)}))},pa.unRegisterSecurityHandler=function(e,t){var n=t.pluginId,r=t.filter;return sa.then((function(e){return e.unRegisterSecurityHandler(n,r)})).then((function(t){Fa(e,t)}))},pa.customProtectDoc=function(e,t){var n=t.docId,r=t.filter;return Oa(n).then((function(e){return e.customProtectDoc(r)})).then((function(t){Fa(e,t)}))},pa.setDocOpenAction=function(e,t){var n=t.docId,r=t.type,i=t.params;return Oa(n).then((function(e){return e.setOpenAction(r,i)})).then((function(t){Fa(e,t)}))},pa.setDocActionData=function(e,t){var n=t.docId,r=t.data,i=t.index;return Oa(n).then((function(e){return e.action.setActionDataByIndex(r,i)})).then((function(t){Fa(e,t.toJson())}))},pa.moveCaretRectByCharIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.charIndex;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.moveRectByCharIndex(a)})).then((function(t){Fa(e,!0)}))},pa.setAnnotIntent=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.intent;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setIntent(a)})).then((function(t){Fa(e,t)}))},pa.setInkList=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.inkList;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setInkList(a)})).then((function(t){Fa(e,t)}))},pa.setUserName=function(e,t){var n=t.name;return sa.then((function(e){return e.setUserName(n)})).then((function(){Fa(e)}))},pa.getUserName=function(e){return sa.then((function(e){return e.getUserName()})).then((function(t){return Fa(e,t)}))},pa.flatten=function(e,t){var n=t.docId,r=t.pageId,i=t.option;return lr.ZP.loadWasmModule(lr.sg).then((function(){return Ba(n,r)})).then((function(e){return e.flatten(i)})).then((function(t){t?Fa(e,t):Ta(e)}))},pa.setDynamicInfoFormula=function(e,t){var n=t.seperator,r=t.timeFormat;at().setDynamicInfoFormula(n,r),Fa(e)},pa.getDynamicInfoFormula=function(e){Fa(e,at().getDynamicInfoFormula())},pa.setDigitalTimeFormat=function(e,t){var n=t.timeFormat;at().setDigitalTimeFormat(n),Fa(e)},pa.setDigitalInfo=function(e,t){var n=t.identityInfo;at().setDigitalInfo(n),Fa(e)},pa.updatePageInfo=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.toJson()})).then((function(t){Fa(e,t)}))},pa.setPageRotation=function(e,t){var n=t.docId,r=t.pageId,i=t.rotation;return Ba(n,r).then((function(e){return e.setRotation(i)})).then((function(t){Fa(e,t)}))},pa.getSecurityType=function(e,t){return Oa(t.docId).then((function(e){return e.getSecurityType()})).then((function(t){Fa(e,t)}))},pa.setCertificateAndPermission=function(e,t){var n=t.docId,r=t.infos,i=t.cipher,a=t.isEncryptMetadata;return Oa(n).then((function(e){return e.setCertificateAndPermission(r,i,a)})).then((function(t){Fa(e,t)}))},pa.setPasswordAndPermission=function(e,t){var n=t.docId,r=t.userPassword,i=t.ownerPassword,a=t.permission,o=t.cipher,s=t.isEncryptMetadata;return Oa(n).then((function(e){return e.setPasswordAndPermission(r,i,a,o,s)})).then((function(t){Fa(e,t)}))},pa.removeSecurity=function(e,t){return Oa(t.docId).then((function(e){return e.removeSecurity()})).then((function(t){Fa(e,t)}))},pa.checkPassword=function(e,t){var n=t.docId,r=t.password;return Oa(n).then((function(e){return e.checkPassword(r)})).then((function(t){Fa(e,t)}))},pa.getPermission=function(e,t){return Oa(t.docId).then((function(e){return e.getPermission()})).then((function(t){Fa(e,t)}))},pa.getStdCipherOptions=function(e,t){return Oa(t.docId).then((function(e){return e.getStdCipherOptions()})).then((function(t){Fa(e,t)}))},pa.addWatermark=function(e,t){var n=t.docId,r=t.pageId,i=t.data;return Ba(n,r).then((function(e){return e.addWatermark(i)})).then((function(t){Fa(e,t)}))},pa.getUserPassword=function(e,t){var n=t.docId,r=t.password;return Oa(n).then((function(e){return e.getUserPassword(r)})).then((function(t){Fa(e,t)}))},pa.getPasswordType=function(e,t){return Oa(t.docId).then((function(e){return e.getPasswordType()})).then((function(t){Fa(e,t)}))},pa.setPasswordType=function(e,t){var n=t.docId,r=t.type;return Oa(n).then((function(e){return e.setPasswordType(r)})).then((function(t){Fa(e,t)}))},pa.movePageTo=function(e,t){var n=t.docId,r=t.pageId,i=t.destIndex;return Oa(n).then((function(e){return e.movePageTo(r,i)})).then((function(t){Fa(e,t)}))},pa.insertPage=function(e,t){var n=t.docId,r=t.pageIndex,i=t.width,a=t.height;return Oa(n).then((function(e){return e.insertPage(r,i,a)})).then((function(t){Fa(e,t)}))},pa.removePage=function(e,t){var n,r=t.docId,i=t.pageIndex;return Oa(r).then((function(e){try{n=e.pageIndexMap[i].id}catch(e){}return e.removePage(i)})).then((function(t){t&&ya.clearObjectFromCache(r,n),Fa(e,t)}))},pa.markRedactAnnot=function(e,t){var n=t.docId,r=t.pageId,i=t.rects,a=t.annot;return Ba(n,r).then((function(e){return e.markRedactAnnot(i,a)})).then((function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i?t[n]=i.toJson():t[n]=null}return t})).then((function(t){Fa(e,t)}))},pa.applyRedaction=function(e,t){return Oa(t.docId).then((function(e){return e.applyRedaction()})).then((function(t){Fa(e,t)}))},pa.redactApply=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.apply()})).then((function(t){Fa(e,t)}))},pa.setActionDestination=function(e,t){var n=t.docId,r=t.objNum,i=t.destination;return Oa(n).then((function(t){var a=function(){return t.getIndirectObject(r).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setDestination(i),r}))})).then((function(t){Fa(e,t.toJson())}))};return"number"==typeof i.pageIndex?xa(n,i.pageIndex).then((function(t){if(!t.isVirtual)return a();Fa(e,null)})):a()}))},pa.setActionFieldNames=function(e,t){var n=t.docId,r=t.objNum,i=t.fieldNames;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setFieldNames(i),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.setActionHideState=function(e,t){var n=t.docId,r=t.objNum,i=t.isHide;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setHideState(i),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.setActionScript=function(e,t){var n=t.docId,r=t.objNum,i=t.script;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setScript(i),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.setActionOCGState=function(e,t){t.docId,t.objNum,t.layerIds},pa.setActionURI=function(e,t){var n=t.docId,r=t.objNum,i=t.uri;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setURI(i),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.setActionFlags=function(e,t){var n=t.docId,r=t.objNum,i=t.flags;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setFlags(i),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.insertSubAction=function(e,t){var n=t.docId,r=t.objNum,i=t.index,a=t.type;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.insertSubAction(i,a),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.setSubAction=function(e,t){var n=t.docId,r=t.objNum,i=t.index,a=t.type;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setSubAction(i,a),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.removeAllSubActions=function(e,t){var n=t.docId,r=t.objNum;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.removeAllSubActions(),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.removeSubAction=function(e,t){var n=t.docId,r=t.objNum,i=t.index;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.removeSubAction(i),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.setActionData=function(e,t){var n=t.docId,r=t.objNum,i=t.data;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setActionData(i),r}))})).then((function(t){Fa(e,t.toJson())}))},pa.moveAction=function(e,t){var n=t.docId,r=t.pageId,i=t.objNum,a=t.moveInfo;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){var n=t.moveAction(a);Fa(e,n)}))},pa.getActionFileStream=function(e,t){var n=t.docId,r=t.objNum,i=t.writeStream;return Oa(n).then((function(e){return e.getIndirectObject(r)})).then((function(e){return sa.then((function(t){var n=e.pdfDoc;return t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t).getFileSpec().getStream((function(e,t,n){Ra(i,{arrayBuffer:e,offset:t,size:n},[e])}))}))})).then((function(t){Fa(e,t)}))};var Ya=function(e){var t=new Error("request error: ".concat(e.statusText));return t.error=e.status,t};function Za(e,t,n,r){var i=new XMLHttpRequest;if(i.open(e.type||"GET",e.url||e.url,!1,e.user,e.password),i.responseType="arraybuffer",e.headers){var a=e.headers;for(var o in a)i.setRequestHeader(o,a[o])}if(i.setRequestHeader("Range","bytes="+t+"-"+Math.min(t+n-1,r-1)),i.send(e.data),!(i.status>=200&&i.status<300||304===i.status))throw new Error("request error: "+i.status);return new Blob([i.response])}function qa(e,t,n){setTimeout((function(){try{var r=e.next();if(r.done)return void n(r.value);Ma(t,r.value),qa(e,t,n)}catch(e){Ma(t,-1),n(e.status)}}))}function Xa(e,t){Oa(t.docId).then((function(e){return e.getPDFDictInfo()})).then((function(t){return Fa(e,t)}))}function Qa(e,t){var n=t.docId,r=t.pageId,i=t.objects;Ba(n,r).then((function(e){return e.addAnnotObjects(i)})).then((function(t){return Fa(e,t.map((function(e){return e.toJson()})))}))}function $a(e,t){var n=e.page;if(!e.isVirtual&&(!n||!n.IsParsed()||e.needReParse)&&-1!==["highlight","squiggly","strikeout","underline"].indexOf(t.getType())){n=t.annot.GetPage();var r=function(e,t,n){var r=t.StartParse(0,null,n),i=e.ProgressiveState.e_ToBeContinued,a=e.ProgressiveState.e_Finished;if((0,ta.Z)(r,i,a))return t;t.delete()}(t.engine,n,e.needReParse);if(r)return n}}pa.getPDFDocIdByHttpRangeRequest=function(e,t){var n,r,i,s=t.size,u=t.range,c=void 0===u?{}:u;if(s)r=Promise.resolve(s),n=Promise.resolve({});else{var d=(0,l.dD)();r=d.promise;var f=(0,l.dD)();n=f.promise;var h=function(){var e=new XMLHttpRequest;if(e.open(c.type||"GET",c.url||c.url,!0,c.user,c.password),e.responseType="arraybuffer",c.headers){var t=c.headers;for(var n in t)e.setRequestHeader(n,t[n])}void 0===c.firstRequestStatus&&e.setRequestHeader("Range","bytes=0-1"),e.onreadystatechange=function(){if(4===e.readyState)if(e.status>=200&&e.status<300||304===e.status){try{var t;c.extendOptions&&(t=e.getResponseHeader(c.extendOptions))?f.resolve(JSON.parse(atob(t))):f.resolve({})}catch(e){f.resolve({})}var n=e.getAllResponseHeaders();if(n){var r=n.trim().split(/[\r\n]+/),o={};r.forEach((function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");o[n]=r}));var s,u=o["content-range"]||o["Content-Range"];u&&-1!==(s=u.lastIndexOf("/"))?d.resolve(+u.slice(s+1)):(0,a._)(e.response,ArrayBuffer)?(i=e.response,d.resolve(i.byteLength)):(l.mA.getLogger("[JR-Worker]").error("The response header which names 'Content-Range' cannot be obtained. Please confirm whether the HTTP server response is correct. If it is a cross-domain request, please check whether the value of 'Access-Control-Expose-Headers' contains 'Content-Range'"),d.reject(Ya(e)))}else d.reject(Ya(e))}else 0===e.status&&void 0===c.firstRequestStatus?(c.firstRequestStatus=e.status,h()):d.reject(Ya(e))},e.send(c.data)};h()}return Promise.all([r,sa,n]).then((function(e){var t=(0,o._)(e,3),n=t[0],r=t[1],s=t[2],u=n;if(s.isHttp=!0,i){if((0,a._)(i,ArrayBuffer))return r.getPDFDoc({buffer:i});var l=Ja(i);return l.size<20971520?r.getPDFDoc({buffer:l.read(0,l.size)}):r.getPDFDoc({size:u,getBuffer:function(e,t){return l.read(e,t)},initOpenOptions:s,destroyCallback:function(){l.destroy()},docId:c.docId})}return r.getPDFDoc({size:n,getBuffer:function(e,t){return function(e,t,n,r){for(var i=e.url,a=e.id||i,o=Pa[a]=Pa[a]||{buffers:[]},s=+(e.chunkSize||131072),u=Math.floor(t/s),c=Math.floor((t+n)/s),l=o.buffers,d=u,f=c;d<=f;d++)l[d]||(l[d]=Za(e,d*s,s,r));if(u===c){var h=l[u],g=t-u*s;return(new FileReaderSync).readAsArrayBuffer(h.slice(g,g+n))}for(var p=l[u],v=t-u*s,_=[p.slice(v)],m=u+1,y=c-1;m<=y;m++)_.push(l[m]);return p=l[c],_.push(p.slice(0,(t+n)%s)),(new FileReaderSync).readAsArrayBuffer(new Blob(_))}(c,e,t,u)},initOpenOptions:s,docId:c.docId})})).then((function(e){return i?e.setOriginalStream(i):e.setOriginalStream(c),Ia[e.id]=c.id||c.url,e.id})).then((function(t){Fa(e,t)}))},pa.setPopupOpenStatus=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.status;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setOpenStatus(a)})).then((function(t){Fa(e,t)}))},pa.removePageAllAnnot=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.removeAllAnnot()})).then((function(){Fa(e)}))},pa.getAnnotWoff=function(e,t){var n=t.docId,r=t.pageId,i=t.id;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.getWoff()})).then((function(t){Fa(e,t)}))},pa.drmEncrypt=function(e,t){var n=t.docId,r=t.options;return Oa(n).then((function(e){return e.drmEncrypt(r)})).then((function(t){return t?Fa(e):Ta(e,{error:-1})}))},pa.getTemplates=function(e,t){return Oa(t.docId).then((function(e){return e.getTemplates()})).then((function(t){return Fa(e,t)}))},pa.hideTemplate=function(e,t){var n=t.docId,r=t.templateObj,i=t.isHidden;return Oa(n).then((function(e){return e.hideTemplate(r,i)})).then((function(t){return Fa(e,t)}))},pa.spawnPage=function(e,t){var n=t.docId,r=t.templateObj,i=t.nPage,a=t.bRename,o=t.bOverlay;return Oa(n).then((function(e){return e.spawnPage(n,r,i,a,o)})).then((function(t){return Fa(e,t)}))},pa.removeTemplate=function(e,t){var n=t.docId,r=t.name;return Oa(n).then((function(e){return e.removeTemplate(r)})).then((function(t){return Fa(e,t)}))},pa.getFontBufferByName=function(e,t){var n=t.docId,r=t.fontName;return Oa(n).then((function(e){return e.getFontBufferByName(r)})).then((function(t){return Fa(e,t)}))},pa.getPageSizes=function(e,t){var n=t.docId,r=t.index,i=t.count;return Oa(n).then((function(e){return e.getPageSizes(r,i)})).then((function(t){return Fa(e,t)}))},pa.setMeasureRatio=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.ratioInfo;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setMeasureRatio(a)})).then((function(){Fa(e)}))},pa.setMeasureUnit=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.unit,o=t.measureType;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setMeasureUnit(a,o)})).then((function(){Fa(e)}))},pa.setMeasureConversionFactor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.factor;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){e.setMeasureConversionFactor(a)})).then((function(){Fa(e)}))},pa.startImportPages=function(e,t){var n=t.docId,r=t.destIndex,i=t.file,a=t.password,o=t.flags,s=t.layerName,u=t.startIndex,c=t.endIndex;return Oa(n).then((function(e){var t=Ua(i),n=Wa(i);return e.startImportPages(r,{size:t,getBuffer:function(e,t){return n(e,t)}},a,o,s,u,c)})).then((function(t){return Fa(e,t)}))},pa.importPagesFromPDFDocs=function(e,t){var n=t.docId,r=t.destIndex,i=t.srcDocs,a=t.layerName;return Oa(n).then((function(e){return Promise.all(i.map((function(e){var t=e.srcDocId,n=e.srcPages;return Oa(t).then((function(e){return{srcDoc:e,srcPages:n}}))}))).then((function(t){return e.importPagesFromPDFDocs(r,t,a)}))})).then((function(t){return Fa(e,t)}))},pa.exportPagesToPDFDocs=function(e,t){var n=t.docId,r=t.srcPages,i=t.destDocs,a=t.layerName,o=t.bookmarkTitle;return Oa(n).then((function(e){return Promise.all(i.map((function(e){var t=e.destDocId,n=e.destIndex;return Oa(t).then((function(e){return{destDoc:e,destIndex:n}}))}))).then((function(t){return e.exportPagesToPDFDocs(r,t,a,o)}))})).then((function(t){return Fa(e,t.map((function(e){var t=e.doc,n=e.name;return{docId:t?t.id:null,name:n}})))}))},pa.extractPages=function(e,t){var n=t.docId,r=t.pageRange,i=t.writeStream,a=t.file,o=t.password;return lr.ZP.loadWasmModule(lr.LQ).then((function(){return Oa(n)})).then((function(e){var t;if(a){var n=Ua(a),s=Wa(a);t={size:n,getBuffer:function(e,t){return s(e,t)}}}return e.extractPages(r,{writeStream:function(e,t,n){Ra(i,{arrayBuffer:e,offset:t,size:n},[e])}},t,o)})).then((function(t){return ba.push(n,i),Fa(e,t)}))},pa.copyPages=function(e,t){var n=t.docId,r=t.pageRange,i=t.destIndex;return Oa(n).then((function(e){return e.copyPages(r,i)})).then((function(t){return Fa(e,t)}))},pa.saveCopyPagesData=function(e,t){var n=t.docId,r=t.pageRange;return Oa(n).then((function(e){return e.saveCopyPagesData(r)})).then((function(t){Fa(e,t)}))},pa.pastePages=function(e,t){var n=t.docId,r=t.destIndex;return Oa(n).then((function(e){return e.pastePages(r)})).then((function(t){Fa(e,t)})).catch((function(t){return Ta(e,t)}))},pa.embedAllPageThumbnail=function(e,t){return Oa(t.docId).then((function(t){qa(t.embedAllPageThumbnail(),"embeddingProgress",Fa.bind(null,e))}))},pa.removeEmbeddedPageThumbnail=function(e,t){return Oa(t.docId).then((function(t){qa(t.removeEmbeddedPageThumbnail(),"removingProgress",Fa.bind(null,e))}))},pa.cancelEmbedAllPageThumbnail=function(e,t){return Oa(t.docId).then((function(e){return e.cancelEmbedAllPageThumbnail()})).then((function(t){Fa(e,t)}))},pa.cancelRemoveEmbeddedPageThumbnail=function(e,t){return Oa(t.docId).then((function(e){return e.cancelRemoveEmbeddedPageThumbnail()})).then((function(t){Fa(e,t)}))},pa.getAllBoxes=function(e,t){var n=t.docId,r=t.index;return Oa(n).then((function(e){return e.getAllBoxes(r)})).then((function(t){return Fa(e,t)}))},pa.setAllBoxesByIndexes=function(e,t){var n=t.docId,r=t.indexes,i=t.width,a=t.height,o=t.xOffset,s=t.yOffset,u=t.boxes,c=t.isMoveWhite;return Oa(n).then((function(e){return e.setAllBoxesByIndexes(r,i,a,o,s,u,c)})).then((function(t){return Fa(e,t)}))},pa.getPageFormat=function(t,n){var r=n.docId,i=n.type,a=n.previewWidth,o=n.previewHeight,s=n.fileName,c=void 0===s?"":s,l=n.newDocId,d=void 0===l?"":l,f=n.localFormat,h=void 0===f?void 0:f;return lr.ZP.loadWasmModule(lr.LQ).then((function(){return Oa(r)})).then(function(){var t=(0,e._)((function(e){var t;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return d.length>1?[4,Oa(d)]:[3,2];case 1:t=(t=n.sent()).doc,n.label=2;case 2:return[2,e.getPageFormat(i,a,o,c,t,h)]}}))}));return function(e){return t.apply(this,arguments)}}()).then((function(e){return Fa(t,e)}))},pa.addPageFormat=function(t,n){var r=n.docId,i=n.type,a=n.data,o=n.isUpdate;return Oa(r).then(function(){var t=(0,e._)((function(e){var t,n,r,s;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return a&&a.sourceDoc&&a.sourceDoc.docId&&"currentDoc"!==a.sourceDoc.docId?[4,Oa(a.sourceDoc.docId)]:[3,2];case 1:t=u.sent(),a.sourceDoc.newDoc=t.doc,u.label=2;case 2:return a&&2===a.sourceType?a.file?(n=Ua(a.file),r=Wa(a.file),a.file={size:n,getBuffer:function(e,t){return r(e,t)}},a.doc=null,[3,5]):[3,3]:[3,5];case 3:return a.docId?[4,Oa(a.docId)]:[3,5];case 4:s=u.sent(),a.doc=s,a.file=null,u.label=5;case 5:return[2,e.addPageFormat(i,a,o)]}}))}));return function(e){return t.apply(this,arguments)}}()).then((function(e){return Fa(t,e)}))},pa.getPageFormatThumb=function(t,n){var r=n.docId,i=n.type,a=n.pageIndex,o=n.data,s=n.isUpdate,c=n.bitmapWidth,l=n.bitmapHeight,d=n.rotate;return Oa(r).then(function(){var t=(0,e._)((function(e){var t,n,r;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return o&&2===o.sourceType?o.file?(t=Ua(o.file),n=Wa(o.file),o.file={size:t,getBuffer:function(e,t){return n(e,t)}},o.doc=null,[3,3]):[3,1]:[3,3];case 1:return o.docId?[4,Oa(o.docId)]:[3,3];case 2:r=u.sent(),o.doc=r,o.file=null,u.label=3;case 3:return[2,e.getPageFormatThumb(i,a,o,s,c,l,d)]}}))}));return function(e){return t.apply(this,arguments)}}()).then((function(e){return Fa(t,e)}))},pa.removeAllPageFormat=function(e,t){var n=t.docId,r=t.type;return lr.ZP.loadWasmModule(lr.LQ).then((function(){return Oa(n)})).then((function(e){return e.removeAllPageFormat(r)})).then((function(t){return Fa(e,t)}))},pa.extractPrintPages=function(t,n){var r=n.docId,i=n.data;return lr.ZP.loadWasmModule(lr.LQ).then((function(){return Oa(r)})).then(function(){var t=(0,e._)((function(e){var t,n,r,a;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return"selectedPDF"!==i.rangeType&&"allPDF"!==i.rangeType?[3,8]:(t=[],"allPDF"!==i.rangeType?[3,2]:[4,e.pdfPortfolio.getFolioNodePDFDoc()]);case 1:return t=o.sent(),[3,3];case 2:"selectedPDF"===i.rangeType&&(t=i.selectedIds),o.label=3;case 3:n=[],r=0,o.label=4;case 4:return r<t.length?[4,Oa(t[r])]:[3,7];case 5:a=o.sent(),n.push(a),o.label=6;case 6:return r++,[3,4];case 7:i.docs=n,o.label=8;case 8:return[2,e.extractPrintPages(i)]}}))}));return function(e){return t.apply(this,arguments)}}()).then((function(e){return Fa(t,e)}))},pa.encryptLicense=function(e,t){return sa.then((function(n){return t=n.encryptLicense(t),Fa(e,t)}))},pa.getHeaderFooter=function(e,t){return Oa(t).then((function(e){return e.getHeaderFooter()})).then((function(t){return Fa(e,t)}))},pa.addHeaderFooter=function(e,t){var n=t.docId,r=t.headerFooter;return Oa(n).then((function(e){return e.addHeaderFooter(r)})).then((function(t){return Fa(e,t)}),(function(t){return Ta(e,t,[],t)}))},pa.updateHeaderFooter=function(e,t){var n=t.docId,r=t.headerFooter;return Oa(n).then((function(e){return e.updateHeaderFooter(r)})).then((function(t){return Fa(e,t)}),(function(t){return Ta(e,t,[],t)}))},pa.removeHeaderFooter=function(e,t){return Oa(t).then((function(e){return e.removeHeaderFooter()})).then((function(t){return Fa(e,t)}))},pa.setFontMap=function(e,t){return sa.then((function(n){return n.setFontMap(t),Fa(e)}),(function(){return Ta(e)}))},pa.addFontMap=function(e,t){return sa.then((function(n){return n.addFontMap(t),Fa(e)}),(function(){return Ta(e)}))},pa.setWatermarkFontMap=function(e,t){return sa.then((function(n){return n.setWatermarkFontMap(t),Fa(e)}))},pa.getCharBBox=function(e,t){var n=t.fontId,r=t.unicode;return sa.then((function(e){return e.getCharBBox(n,r)})).then((function(t){return Fa(e,t)}))},pa.getCharWidthByFontID=function(e,t){var n=t.fontId,r=t.unicode;return sa.then((function(e){return e.getCharWidthByFontID(n,r)})).then((function(t){return Fa(e,t)}))},pa.getFontToneByFontID=function(e,t){var n=t.fontId;return sa.then((function(e){return e.getFontToneByFontID(n)})).then((function(t){return Fa(e,t)}))},pa.paste=function(e,t){var n=t.docId,r=t.pageId,i=t.srcPageId,a=t.type,s=t.objectId,u=t.position;switch(a){case"annot":return Promise.all([Ba(n,r),Ba(n,i)]).then((function(e){var t=(0,o._)(e,2),n=t[0],r=t[1],i=r._getAnnotIndexById(s),a=r.page.GetAnnot(i);return n.pasteAnnot(a,u)})).then((function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i?t[n]=i.toJson():t[n]=null}return t})).then((function(t){return Fa(e,t)}));case"graphicObject":return Promise.all([Ba(n,r),Ba(n,i)]).then((function(t){var r=(0,o._)(t,2),i=r[0],a=r[1];return pa.pasteGraphicObject(e,n,i,a,s,u)})).then((function(e){}))}},pa.getAnnotsRawData=function(e,t){var n=t.docId,r=t.rawAnnots;return Oa(n).then((function(e){return e.getAnnotsRawData(r)})).then((function(t){return Fa(e,t)}))},pa.attachFile=function(e,t){var n=t.docId,r=t.blob;return Oa(n).then((function(e){return e.attachFile(r)})).then((function(t){return Fa(e,t)}))},pa.signDoc=function(e,t){var n=t.docId,r=t.signInfo,i=t.ap;Oa(n).then((function(e){return e.sign(r,i)})).then((function(t){if(r.native)return Fa(e,t,[t]);t?Fa(e,t,[t.buffer]):Fa(e)}))},pa.signDocForESignCN=function(e,t){var n=t.docId,r=t.signInfo;Oa(n).then((function(e){return e.signForESignCN(r)})).then((function(t){return Fa(e,t,[t.buffer])}))},pa.isESignCNSignature=function(e,t){var n=t.docId,r=t.fieldId,i=t.pageIndex;Oa(n).then((function(e){return e.isESignCNSignature(r,i)})).then((function(t){return Fa(e,t)}))},pa.addPagingSealSignature=function(e,t){var n=t.docId,r=t.pagingSigConfig;Oa(n).then((function(e){return e.addPagingSealSignature(r)})).then((function(t){return Fa(e,t)}))},pa.updatePagingSealSignature=function(e,t){var n=t.docId,r=t.pagingSigConfig,i=t.pagingSigObjNum;Oa(n).then((function(e){return e.updatePagingSealSignature(r,i)})).then((function(t){return Fa(e,t)}))},pa.getAllPagingSealSignatures=function(e,t){var n=t.docId,r=t.pagingSigObjNum;Oa(n).then((function(e){return e.getAllPagingSealSignatures(r)})).then((function(t){return Fa(e,t)}))},pa.getAllPagingSigsInfo=function(e,t){var n=t.docId,r=t.pagingSigObjNum;Oa(n).then((function(e){return e.getAllPagingSigsInfo(r)})).then((function(t){return Fa(e,t)}))},pa.removePagingSealSignature=function(e,t){var n=t.docId,r=t.pagingSigObjNum;Oa(n).then((function(e){return e.removePagingSealSignature(r)})).then((function(t){return Fa(e,t)}))},pa.getFontsInfo=function(e,t){Oa(t.docId).then((function(e){return e.getFontsInfo()})).then((function(t){return Fa(e,t)}))},pa.getDocAdditionalActions=function(e,t){Oa(t.docId).then((function(e){return e.getAdditionalActions()})).then((function(t){return Fa(e,t)}))},pa.calcPageContentBBox=function(e,t){var n=t.docId,r=t.pageIndex,i=t.mode;xa(n,r).then((function(e){return e.calcContentBBox(i)})).then((function(t){Fa(e,t)}))},pa.getPageBox=function(e,t){var n=t.docId,r=t.pageIndex,i=t.boxType;xa(n,r).then((function(t){return Fa(e,t.getBox(i))}))},pa.setPageBox=function(e,t){var n=t.docId,r=t.pageIndex,i=t.boxType,a=t.rect;xa(n,r).then((function(t){return Fa(e,t.setBox(i,a))}))},pa.setPageSize=function(e,t){var n=t.docId,r=t.pageIndex,i=t.width,a=t.height;xa(n,r).then((function(t){return Fa(e,t.setSize(i,a))}))},pa.getPageAction=function(e,t){var n=t.docId,r=t.pageId,i=t.trigger;return Ba(n,r).then((function(e){return e.getAction(i)})).then((function(t){Fa(e,t)}))},pa.removePageAction=function(e,t){var n=t.docId,r=t.pageId,i=t.trigger,a=t.action;return Ba(n,r).then((function(e){return e.removeAction(i,a)})).then((function(t){Fa(e,t)}))},pa.movePageAction=function(e,t){var n=t.docId,r=t.pageId,i=t.moveInfo;return Ba(n,r).then((function(e){return e.moveAction(i)})).then((function(t){Fa(e,t)}))},pa.setPageAction=function(e,t){var n=t.docId,r=t.pageId,i=t.trigger,a=t.action;Ba(n,r).then((function(e){return e.setAction(i,a)})).then((function(){Fa(e,a)}))},pa.syncDataCache=function(e,t){var n=t.docId,r=t.pageIdMap;Oa(n).then((function(e){return e.syncDataCache(r)})).then((function(){return Fa(e)}))},pa.moveAnnotsToPage=function(e,t){var n=t.docId,r=t.srcPageId,i=t.dstPageId,a=t.annotInfos;return Oa(n).then((function(e){return e.moveAnnotsToPage(r,i,a)})).then((function(e){return e.map((function(e){return e&&e.toJson()}))})).then((function(t){Fa(e,t)}))},pa.getOriginalStream=function(e,t){Oa(t.docId).then((function(e){return e.getOriginalStream()})).then((function(t){return Fa(e,t,[t])}))},pa.setDocColors=function(e,t){var n=t.docId,r=t.colors;Oa(n).then((function(t){return t.setColors(r),Fa(e)}))},pa.setPageDisplayPreferences=function(e,t){var n=t.docId,r=t.pageDisplayPreferences;Oa(n).then((function(t){return t.setPageDisplayPreferences(r),Fa(e)}))},pa.getWidgetMkOption=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){var n=t.getWidgetMkOption();Fa(e,n)}))},pa.setWidgetIconCaptionRelation=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.relation;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){t.setWidgetIconCaptionRelation(a),Fa(e)}))},pa.setWidgetHighlighting=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.mode;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){t.setWidgetHighlighting(a),Fa(e)}))},pa.setWidgetMkCaption=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.position,o=t.caption;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){var n=t.setWidgetMkCaption(a,o);Fa(e,n)}))},pa.setWidgetMkIcon=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.position,o=t.buffer;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){var n=t.setWidgetMkIcon(a,o);Fa(e,n)}))},pa.getWidgetIconFitOption=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){var n=t.getWidgetIconFitOption();Fa(e,n)}))},pa.setWidgetIconFitOption=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.option;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){var n=t.setWidgetIconFitOption(a);Fa(e,n)}))},pa.setTabOrder=function(e,t){var n=t.docId,r=t.pageIndex,i=t.type;Oa(n).then((function(e){return e.setTabOrder(r,i)})).then((function(t){return Fa(e,t)}))},pa.getTabOrder=function(e,t){var n=t.docId,r=t.pageIndex;Oa(n).then((function(e){return e.getTabOrder(r)})).then((function(t){return Fa(e,t)}))},pa.setStructureOrder=function(e,t){var n=t.docId,r=t.pageIndex,i=t.idList;Oa(n).then((function(e){return e.setStructureOrder(r,i)})).then((function(){return Fa(e)}))},pa.getAnnotIdArrayByOrder=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getAnnotIdArrayByOrder()})).then((function(t){return Fa(e,t)}))},pa.renderTemplatesByObjNum=function(e,t){var n=t.docId,r=t.objNum;return Oa(n).then((function(t){Fa(e,t.renderTemplatesByObjNum(r))}))},pa.getNameTree=function(e,t){var n=t.docId,r=t.type;return Oa(n).then((function(t){Fa(e,t.getNameTree(r))}))},pa.addNameTreeObj=function(e,t){var n=t.docId,r=t.type,i=t.name,a=t.objNum;return Oa(n).then((function(t){Fa(e,t.addNameTreeObj(r,i,a))}))},pa.removeNameTreeObj=function(e,t){var n=t.docId,r=t.type,i=t.name;return Oa(n).then((function(t){Fa(e,t.removeNameTreeObj(r,i))}))},pa.replaceNameTreeObj=function(e,t){var n=t.docId,r=t.type,i=t.name,a=t.objNum;return Oa(n).then((function(t){Fa(e,t.replaceNameTreeObj(r,i,a))}))},pa.renameNameTreeObj=function(e,t){var n=t.docId,r=t.type,i=t.oldName,a=t.newName;return Oa(n).then((function(t){Fa(e,t.renameNameTreeObj(r,i,a))}))},pa.getPageIndexByObjNum=function(e,t){var n=t.docId,r=t.objNum;return Oa(n).then((function(t){Fa(e,t.getPageIndexByObjNum(r))}))},pa.nameTreeTemplatesToPages=function(e,t){var n=t.docId,r=t.name;return Oa(n).then((function(t){Fa(e,t.nameTreeTemplatesToPages(r))}))},pa.nameTreePagesToTemplates=function(e,t){var n=t.docId,r=t.name;return Oa(n).then((function(t){Fa(e,t.nameTreePagesToTemplates(r))}))},pa.showNameTreePageAtTheEnd=function(e,t){return Oa(t.docId).then((function(e){return e.showNameTreePageAtTheEnd()})).then((function(t){Fa(e,t)}))},pa.hideNameTreePage=function(e,t){var n=t.docId,r=t.pageIndex;return Oa(n).then((function(t){Fa(e,t.hideNameTreePage(r))}))},pa.addFileSpec=function(e,t){var n=t.docId,r=t.fileName,i=t.fileBuffer,a=t.modifiedDateTime;return Oa(n).then((function(t){Fa(e,t.addFileSpec(r,i,a))}))},pa.setFileSpecDesc=function(e,t){var n=t.docId,r=t.desc,i=t.objNum;return Oa(n).then((function(t){Fa(e,t.setFileSpecDesc(r,i))}))},pa.getFileSpecStream=function(e,t){var n=t.docId,r=t.fileSpecObjNum,i=t.writeStreamCall;return Oa(n).then((function(e){return e.getFileSpecStream(r,(function(e,t,n){Ra(i,{arrayBuffer:e,offset:t,size:n},[e])}))})).then((function(t){Fa(e,t)}))},pa.getFileSpecStreamByName=function(e,t){var n=t.docId,r=t.name,i=t.writeStreamCall;return Oa(n).then((function(e){return e.getFileSpecStreamByName(r,(function(e,t,n){Ra(i,{arrayBuffer:e,offset:t,size:n},[e])}))})).then((function(t){Fa(e,t)}))},pa.addEmbeddedFileByAttachments=function(e,t){var n=t.docId,r=t.name,i=t.objNum;return Oa(n).then((function(t){Fa(e,t.attachments.addEmbeddedFile(r,i))}))},pa.setEmbeddedFileByAttachments=function(e,t){var n=t.docId,r=t.name,i=t.objNum;return Oa(n).then((function(t){Fa(e,t.attachments.setEmbeddedFile(r,i))}))},pa.removeEmbeddedFileByAttachments=function(e,t){var n=t.docId,r=t.name;return Oa(n).then((function(t){Fa(e,t.attachments.removeEmbeddedFile(r))}))},pa.getPageDictionary=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getPageDictionary()})).then((function(t){return Fa(e,t)}))},pa.getSuggestedFormDesignerRect=function(e,t){var n=t.docId,r=t.pageId,i=t.point;return Ba(n,r).then((function(e){return e.getSuggestedFormDesignerRect(i)})).then((function(t){return Fa(e,t)}))},pa.clearDesignerAssitCache=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e&&e.clearDesignerAssitCache()})).then((function(t){return Fa(e)}))},pa.getPDFDictInfo=Xa,pa.startFormDesignerAssit=function(e,t){Oa(t.docId).then((function(e){return e.startFormDesignerAssit()})).then((function(t){return Fa(e)}))},pa.stopFormDesignerAssit=function(e,t){Oa(t.docId).then((function(e){return e.stopFormDesignerAssit()})).then((function(t){return Fa(e)}))},pa.getPDFDictInfo=Xa,pa.getPageLabels=function(e,t){var n=t.docId,r=t.indexes;Oa(n).then((function(e){return e.getPageLabels(r)})).then((function(t){return Fa(e,t)}))},pa.hasKey=function(e,t){var n=t.docId,r=t.id,i=t.key;Oa(n).then((function(e){return e.hasKey(r,i)})).then((function(t){return Fa(e,t)}))},pa.setAt=function(e,t){var n=t.docId,r=t.id,i=t.key,a=t.value;Oa(n).then((function(e){return e.setAt(r,i,a)})).then((function(t){return Fa(e,t)}))},pa.getAt=function(e,t){var n=t.docId,r=t.id,i=t.key;Oa(n).then((function(e){return e.getAt(r,i)})).then((function(t){return Fa(e,t)}))},pa.setJPXDownSample=function(e,t){return sa.then((function(n){return n.setJPXDownSample(t),Fa(e)}),(function(){return Ta(e)}))},pa.autoRecognitionForm=function(e,t){var n=t.docId;lr.ZP.loadWasmModule(lr.ed).then((function(e){return Oa(n)})).then((function(e){return e.autoRecognitionForm()})).then((function(t){return Fa(e,t)}))},pa.isStaticXFA=function(e,t){return Oa(t.docId).then((function(e){return e.isStaticXFA()})).then((function(t){return Fa(e,t)}))},pa.isXFA=function(e,t){return Oa(t.docId).then((function(e){return e.isXFA()})).then((function(t){Fa(e,t)}))},pa.removeXFA=function(e,t){return Oa(t.docId).then((function(e){return e.removeXFA()})).then((function(t){return Fa(e,t)}))},pa.getAllXFAWidgetsByPageIndex=function(e,t){return xa(t.docId,t.pageIndex).then((function(e){var t;return null===(t=e.xfaWidgetHandler)||void 0===t?void 0:t.getAllXFAWidgets()})).then((function(t){return Fa(e,t)}))},pa.triggerXFAWidgetEvent=function(e,t){var n=t.docId,r=t.pageIndex,i=t.info;return xa(n,r).then((function(e){var t;return null===(t=e.xfaWidgetHandler)||void 0===t?void 0:t.triggerXFAWidgetEvent(i)})).then((function(t){return Fa(e,t)}))},pa.createWebLinks=function(e,t){var n=t.docId,r=t.pageId,i=t.paramPages;return Ba(n,r).then((function(e){return e.createWebLinks(i)})).then((function(t){return Fa(e,t)}))},pa.removeWebLinks=function(e,t){var n=t.docId,r=t.pageId,i=t.paramPages;return Ba(n,r).then((function(e){return e.removeWebLinks(i)})).then((function(t){Fa(e,t)}))},pa.linkHasPA=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){Fa(e,t.hasPA())}))},pa.linkResetAByPA=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(t){Fa(e,t.resetAByPA())}))},pa.getDestinationsArray=function(e,t){return Oa(t.docId).then((function(e){return e.getDestinationsArray()})).then((function(t){Fa(e,t)}))},pa.deleteDestination=function(e,t){var n=t.docId,r=t.pageId,i=t.name;return Ba(n,r).then((function(e){return e.deleteDestination(i)})).then((function(t){Fa(e,t)}))},pa.renameDestination=function(e,t){var n=t.docId,r=t.pageId,i=t.oldName,a=t.newName;return Ba(n,r).then((function(t){var n=t.renameDestination(i,a);Fa(e,n)}))},pa.createDestination=function(e,t){var n=t.docId,r=t.pageId,i=t.title,a=t.pageNum;return Ba(n,r).then((function(t){var n=t.createDestination(i,a);Fa(e,n)}))},pa.resetDestination=function(e,t){var n=t.docId,r=t.pageId,i=t.title,a=t.pageNum;return Ba(n,r).then((function(e){return e.resetDestination(i,a)})).then((function(t){Fa(e,t)}))},pa.moveBookmark=function(e,t){var n=t.docId,r=t.targetBookmarkId,i=t.destBookmarkId,a=t.position,o=t.isOldVersion;return Oa(n).then((function(e){return e.moveBookmark(r,i,a,o)})).then((function(t){return Fa(e,t)}))},pa.combineFormsToCSV=function(e,t){var n=t.filesArray,r=t.writeStreamCall;return sa.then((function(e){var t=e.engine,i=0,a=(0,l.dD)(),o=new t.FormFileInfoArray;n.forEach((function(e){var n=e.file,r=e.name,i=Ja(n),a=t.ReaderCallback.implement({Release:function(){},GetSize:function(){return i.size},ReadBlock:function(e,n,r){var a=new Uint8Array(function(e,t){return i.read(e,t)}(n,r));return t.HEAPU8.set(a,e),!0}}),s=new t.FormFileInfo(a,(0,W.Dp)(t,""),(0,W.Dp)(t,r));o.Add(s)}));var s=t.StreamCallback.implement({Release:function(){s.delete()},Flush:function(){return a.resolve(i),!0},IsEOF:function(){return!1},GetPosition:function(){return i},GetSize:function(){return i},WriteBlock:function(e,n,a){i+=a;var o=t.HEAPU8.buffer;return function(e,t,n){Ra(r,{arrayBuffer:e,offset:t,size:n},[e])}(o.slice?o.slice(e,e+a):new Uint8Array(o,e,a).buffer,n,a),!0},ReadBlock:function(e,t,n){return!0}});return t.FormCombination.CombineFormsToCSV(o,s,!1),o.delete(),a.promise})).then((function(t){Fa(e,t)}))},pa.reversePages=function(e,t){var n=t.docId,r=t.pageRanges;return Oa(n).then((function(e){return e.reversePages(r)})).then((function(t){return Fa(e,t)}))},pa.movePagesTo=function(e,t){var n=t.docId,r=t.pageRange,i=t.destIndex;return Oa(n).then((function(e){return e.movePagesTo(r,i)})).then((function(t){Fa(e,t)}))},pa.removePages=function(e,t){var n,r=t.docId,i=t.pageRange;return Oa(r).then((function(e){try{var t=function(e){return JSON.parse(JSON.stringify(e)).reduce((function(e,t){if(2===t.length){for(var n=[],r=t[0];r<t[1];r++)n.push(r);t=n}return e.concat(t)}),[])}(i).sort((function(e,t){return t-e}));n=t.map((function(t){return e.pageIndexMap[t]&&e.pageIndexMap[t].id}))}catch(e){}return e.removePages(i)})).then((function(t){try{n&&t&&n.forEach((function(e){ya.clearObjectFromCache(r,e)}))}catch(e){}Fa(e,t)}))},pa.insertBlankPages=function(e,t){var n=t.docId,r=t.pageRange,i=t.width,a=t.height;return Oa(n).then((function(e){return e.insertBlankPages(r,i,a)})).then((function(t){Fa(e,t)}))},pa.insertBlankPages2=function(e,t){var n=t.docId,r=t.pageRange,i=t.width,a=t.height;return Oa(n).then((function(e){return e.insertBlankPages2(r,i,a)})).then((function(t){Fa(e,t)}))},pa.rotatePages=function(e,t){var n=t.docId,r=t.pageRange,i=t.rotation;return Oa(n).then((function(e){return e.rotatePages(r,i)})).then((function(t){Fa(e,t)}))},pa.getPageIndexByLabelText=function(e,t){var n=t.docId,r=t.text;return Oa(n).then((function(e){return function(e,t){for(var n=e.doc,r=new e.engine.PageLabels(n),i=n.GetPageCount(),a=0;a<i;a++)if(r.GetPageLabelTitle(a).toString()===t)return a;return-1}(e,r)})).then((function(t){Fa(e,t)}))},pa.getCurrentPageLabelInfo=function(e,t){var n=t.docId,r=t.pageIndex;return Oa(n).then((function(e){return function(e,t){for(var n=new e.engine.PageLabels(e.doc),r=n.GetPageLabelPrefix(t),i=n.GetPageLabelTitle(t);!n.HasPageLabel(t)&&t>0;)t--;var a=n.GetPageLabelStyle(t),o=n.GetPageLabelStart(t);return{hasLabel:n.HasPageLabel(t),style:gi(e,a),firstNumber:o,prefix:r.toString(),title:i.toString()}}(e,r)})).then((function(t){Fa(e,t)}))},pa.checkDocIsUseLogicPage=function(e,t){return Oa(t.docId).then((function(e){return function(e){var t=e.engine,n=e.doc,r=new t.PageLabels(n);if(!r.HasPageLabel(0))return!1;for(var i=n.GetPageCount(),a=0;a<i;a++)if(r.HasPageLabel(a)&&(r.GetPageLabelStyle(a)!==t.PageLabelsStyle.e_DecimalNums||""!==r.GetPageLabelPrefix(a).toString()))return!0;return!1}(e)})).then((function(t){Fa(e,t)}))},pa.formatPageNumbers=function(e,t){var n=t.docId,r=t.isExtendNumbering,i=t.pageRange,a=t.numberingInfo;return Oa(n).then((function(e){return pi(e,r,i,a)})).then((function(t){Fa(e,t)}))},pa.updatePageLabelsByAction=function(e,t){var n=t.docId,r=t.action,i=t.args;return Oa(n).then((function(e){var t;return(t=vi)[r].apply(t,[e].concat((0,s._)(i)))})).then((function(t){Fa(e,t)}))},pa.getPortfolioTreeNode=function(e,t){return Oa(t.docId).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.getTreeNode()})).then((function(t){return Fa(e,t)}))},pa.getPortfolioInitialNodePath=function(e,t){return Oa(t.docId).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.getInitialNodePath()})).then((function(t){return Fa(e,t)}))},pa.sendSortFolioParam=function(e,t){var n=t.docId,r=t.target,i=t.order;return Oa(n).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.sendSortFolioParam(r,i)})).then((function(t){return Fa(e,t)}))},pa.recordPDFFileByPortFolioNode=function(e,t){var n=t.docId,r=t.handle;return Oa(n).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.recordPDFFileByPortFolioNode(r)})).then((function(t){return Fa(e,t)}))},pa.getFolioNodePDFDoc=function(e,t){return Oa(t.docId).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.getFolioNodePDFDoc()})).then((function(t){return Fa(e,t)}))},pa.getPortfolioFileStream=function(e,t){var n=t.docId,r=t.nodeHandle,i=t.writeStream;return Oa(n).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.getFileStream(r,{writeStream:function(e,t,n){Ra(i,{arrayBuffer:e,offset:t,size:n},[e])}})})).then((function(t){Fa(e,t)}))},pa.getPortfolioStream=function(e,t){var n=t.docId,r=t.nodeHandles;return Oa(n).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.getStream(r)})).then((function(t){Fa(e,t)}))},pa.getPortfolioSubNodes=function(e,t){var n=t.docId,r=t.nodeHandle;return Oa(n).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.getPortfolioSubNodes(r)})).then((function(t){Fa(e,t)}))},pa.changePortfolioSubNodesOrder=function(e,t){var n=t.docId,r=t.nodeHandle,i=t.sourceIndexes,a=t.targetIndex;return Oa(n).then((function(e){e.pdfPortfolio&&e.pdfPortfolio.changeSubNodesOrder(r,i,a)})).then((function(){Fa(e)}))},pa.portfolioMoveSubNodeToSubFolderNode=function(e,t){var n=t.docId,r=t.nodeHandle,i=t.sourceHandles,a=t.targetHandle;return Oa(n).then((function(e){e.pdfPortfolio&&e.pdfPortfolio.moveSubNodeToSubFolderNode(r,i,a)})).then((function(){Fa(e)}))},pa.portfolioHasSameNameSubNode=function(e,t){var n=t.docId,r=t.name,i=t.type,a=t.targetHandle;return Oa(n).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.hasSameNameSubNode(r,i,a)})).then((function(t){Fa(e,t)}))},pa.getPortfolioInfo=function(e,t){return Oa(t.docId).then((function(t){var n=t.pdfPortfolio?t.pdfPortfolio.getInfo():{};Fa(e,n)}))},pa.setPortfolioInfo=function(e,t){var n=t.docId,r=t.info;return Oa(n).then((function(t){t.pdfPortfolio&&t.pdfPortfolio.setInfo(r),Fa(e)}))},pa.portfolioAddFiles=function(e,t){var n=t.docId,r=t.files,i=t.targetIndex,a=t.folderNodeHandle;return Oa(n).then((function(t){t.pdfPortfolio&&t.pdfPortfolio.addFiles(r,i,a),Fa(e)}))},pa.portfolioCreateFolder=function(e,t){var n=t.docId,r=t.name,i=t.folderNodeHandle;return Oa(n).then((function(t){var n=t.pdfPortfolio?t.pdfPortfolio.createFolder(r,i):{};Fa(e,n)}))},pa.portfolioRemoveSubNodes=function(e,t){var n=t.docId,r=t.folderNodeHandle,i=t.subNodeHandles;return Oa(n).then((function(t){t.pdfPortfolio&&t.pdfPortfolio.removeSubNodes(r,i),Fa(e)}))},pa.portfolioRegenerateTOC=function(e,t){var n=t.docId,r=t.title;return Oa(n).then((function(e){return e.pdfPortfolio&&e.pdfPortfolio.regenerateTOC(r)})).then((function(t){Fa(e,t)}))},pa.getSnappedPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.point,a=t.mode;return Ba(n,r).then((function(e){return e.getSnappedPoint(i,a)})).then((function(t){Fa(e,t)}))},pa.getPageTextRectCount=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getTextRectCount()})).then((function(t){return Fa(e,t),t}))},pa.getPageTextByRectIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.rectIndex;return Ba(n,r).then((function(e){return e.getTextByRectIndex(i)})).then((function(t){return Fa(e,t),t}))},pa.isCPDF=function(e,t){return Oa(t.docId).then((function(t){return Fa(e,t.isCPDF())}))},pa.getDocURI=function(e,t){return Oa(t.docId).then((function(t){return Fa(e,t.getDocURI())}))},pa.convertToCPDF=function(e,t){var n=t.docId,r=t.cPDFFileName,i=t.cPDFEndPoint,a=t.cPDFUserToken,o=t.cPDFUserIDFromToken;return Oa(n).then((function(t){return t.convertToCPDF(r,i,a,o).then((function(){return Fa(e)}))}))},pa.removeCDocId=function(e,t){var n=t.docId,r=t.cPDFFileName,i=t.cPDFEndPoint,a=t.cPDFUserToken,o=t.cPDFUserIDFromToken;return console.log(e),Oa(n).then((function(t){return t.removeCDocId(r,i,a,o).then((function(){return Fa(e)}))}))},pa.removeLayerNode=function(e,t){var n=t.docId,r=t.layerId;return Oa(n).then((function(e){return!!e.pdfLayer&&e.pdfLayer.removeLayerNode(r,e)})).then((function(t){return Fa(e,t)}))},pa.getLayersByPage=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.pdfDoc.pdfLayer.getLayersByPage(e)})).then((function(t){return Fa(e,t)}))},pa.updateLayerInfo=function(e,t){var n=t.docId,r=t.layerInfo;return Oa(n).then((function(t){var n=r.id;if(!n&&0!==n)return Fa(e,!1);for(var i in r){var a=r[i];switch(i){case"name":t.pdfLayer.setLayerName(n,a);break;case"intent":t.pdfLayer.setLayerIntent(n,a,r.isSingle);break;case"state":t.pdfLayer.setLayerDefaultState(n,a);break;case"isLocked":t.pdfLayer.setLayerLocked(n,a);break;case"viewUsage":t.pdfLayer.setLayerViewUsage(n,a);break;case"printUsage":t.pdfLayer.setLayerPrintUsage(n,a);break;case"exportUsage":t.pdfLayer.setLayerExportUsage(n,a)}}return Fa(e,!0)}))},pa.flattenLayers=function(e,t){return Oa(t.docId).then((function(e){return!!e.pdfLayer&&e.pdfLayer.flattenLayers(e)})).then((function(t){return Fa(e,t)}))},pa.mergeLayers=function(e,t){var n=t.docId,r=t.layerIds,i=t.mergeTo;return Oa(n).then((function(e){return!!e.pdfLayer&&e.pdfLayer.mergeLayers(e,r,i)})).then((function(t){return Fa(e,t)}))},pa.getLayerRelatedAnnots=function(e,t){var n=t.docId,r=t.layerId;return Oa(n).then((function(e){return!!e.pdfLayer&&e.pdfLayer.getLayerNodeById(r).getRelatedAnnots().map((function(e){return e.GetDict().GetObjNum()}))})).then((function(t){return Fa(e,t)}))},pa.layerMoveTo=function(e,t){var n=t.docId,r=t.layerId,i=t.parentLayerId,a=t.index;return Oa(n).then((function(e){return!!e.pdfLayer&&e.pdfLayer.moveTo(r,i,a)})).then((function(t){return Fa(e,t)}))},pa.getInfos=function(e,t){return Oa(t.docId).then((function(t){Fa(e,t.getInfos())}))},pa.hasDocIsWrapped=function(e,t){return Oa(t.docId).then((function(t){Fa(e,t.doc.IsWrapper())}))},pa.removeMetadata=function(e,t){var n=t.id,r=t.key;return Oa(n).then((function(t){return Fa(e,t.removeMetadata(r))}))},pa.addAnnotObjects=Qa,pa.normalizePage=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.normalize()})).then((function(t){return Fa(e,t),t}))},pa.addAnnotObjects=Qa,pa.getViewerPreference=function(e,t){return Oa(t.docId).then((function(t){return Fa(e,t.getViewerPreference())}))},pa.setViewPreference=function(e,t){var n=t.docId,r=t.key,i=t.value;return Oa(n).then((function(t){return Fa(e,t.setViewPreference(r,i))}))},pa.getEmbeddedFontData=function(e,t){return Oa(t.docId).then((function(t){return Fa(e,t.getEmbeddedFontData())}))},pa.computeAuditSpace=function(e,t){return Oa(t.docId).then((function(e){return e.computeAuditSpace()})).then((function(t){return Fa(e,t)}))},pa.optimizer=function(e,t){var n=t.docId,r=t.option,i=t.portfolioNodeHandle;return lr.ZP.loadWasmModule(lr.sg).then((function(){return Oa(n)})).then((function(e){return e.optimizer(r,i)})).then((function(t){return Fa(e,t)}))},pa.optimizeScannedPDF=function(e,t){var n=t.docId,r=t.option,i=t.callback;return Oa(n).then((function(e){return e.optimizeScannedPDF(r,(function(e){Ra(i,e)}))})).then((function(t){return Fa(e,t)}))},pa.startReplacePages=function(e,t){var n=t.docId,r=t.startIndex,i=t.count,a=t.srcPdfDocId,o=t.srcPageindexRange;return Oa(n).then((function(t){return Oa(a).then((function(n){return Fa(e,t.startReplacePages(r,i,n,o))}))}))},pa.importAsLayer=function(e,t){var n=t.docId,r=t.args;return Oa(n).then((function(t){return Oa(r.sourcePdfDocId).then((function(e){return r.sourcePdfDoc=e.doc,t.importAsLayer(r)})).then((function(t){return Fa(e,t)}))}))},pa.previewImportLayer=function(e,t){var n=t.docId,r=t.args;return Oa(n).then((function(t){return r.sourcePdfDocId?Oa(r.sourcePdfDocId).then((function(n){return r.sourcePdfDoc=n.doc,Fa(e,t.previewImportLayer(r))})):Fa(e,t.previewImportLayer(r))}))},pa.comparePDFDocuments=function(e,t){var n=t.docId,r=t.otherDocId,i=t.params,a=t.progressId;return lr.ZP.loadWasmModule(lr.oJ).then((function(){return Promise.all([Oa(n),Oa(r),sa])})).then((function(e){var t=(0,o._)(e,3),n=t[0],r=t[1],s=t[2],u=s.engine,c=a?u.ComparisonProgresssCallback.implement({Release:function(){},UpdateCurrentStateData:function(e,t){Ma(a,e)},ShouldCancel:function(){}}):null;return a&&Ma(a,0),n.compareWith(r,i,c).then((function(e){var t=s.getPDFDoc({doc:e});return t.setMetadataValue("CreationDate",Date.now()),t.setMetadataValue("Author",s.getUserName()),{docId:t.id,parameters:{}}}))})).then((function(t){Fa(e,t)}))},pa.reloadLayer=function(e,t){return Oa(t.docId).then((function(t){Fa(e,t.reloadLayer())}))},pa.getViewportRect=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getViewportRect()})).then((function(t){return Fa(e,t),t}))},pa.getMeasureScaleRatio=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getMeasureScaleRatio()})).then((function(t){return Fa(e,t),t}))},pa.exportMeasureData=function(e,t){var n=t.docId,r=t.columnNames;return Oa(n).then((function(e){return e.exportMeasureData(r)})).then((function(t){return Fa(e,t)}))},pa.setMeasureScaleRatio=function(e,t){var n=t.docId,r=t.pageId,i=t.storeInPage,a=t.measureInfo;return Ba(n,r).then((function(e){return e.setMeasureRatio(i,a)})).then((function(t){return Fa(e,t),t}))},pa.searchDoc=function(e,t){var n=t.docId,r=t.type,i=t.words,a=t.flag,o=t.isForRedact;return Oa(n).then((function(e){return e.searchDoc(r,i,a,o)})).then((function(t){return Fa(e,t)}))},pa.generateDocHash=function(e,t){var n=t.docId,r=t.buffer;return Oa(n).then((function(e){return e.generateDocHash(r)})).then((function(t){return Fa(e,t)}))},pa.getSignIdForEvidence=function(e,t){return Oa(t.docId).then((function(e){return e.getSignIdForEvidence()})).then((function(t){return Fa(e,t)}))},pa.assignSignerForESignCN=function(e,t){var n=t.docId,r=t.data;return Oa(n).then((function(e){return e.assignSignerForESignCN(r)})).then((function(t){return Fa(e,t)}))},pa.setESignCNFlowSignMode=function(e,t){var n=t.docId,r=t.type;return Oa(n).then((function(e){return e.setESignCNFlowSignMode(r)})).then((function(t){return Fa(e,t)}))},pa.getESignCNFlowSignMode=function(e,t){return Oa(t.docId).then((function(e){return e.getESignCNFlowSignMode()})).then((function(t){return Fa(e,t)}))},pa.isESignCNFile=function(e,t){return Oa(t.docId).then((function(e){return e.isESignCNFile()})).then((function(t){return Fa(e,t)}))},pa.getESignCNMode=function(e,t){var n=t.docId,r=t.fieldName;return Oa(n).then((function(e){var t=e.loadForm().getField(r);return e.getESignCNMode(t.engineField)})).then((function(t){return Fa(e,t)}))},pa.addAuditTrail=function(e,t){return Oa(t.docId).then((function(e){return e.addAuditTrail()})).then((function(t){return Fa(e,t)}))},pa.getDocAuditTrail=function(e,t){var n=t.docId,r=t.buffer,i=t.flowSignAnnots;return Oa(n).then((function(e){return e.getDocAuditTrail(r,i)})).then((function(t){return Fa(e,t)}))},pa.updatePropAuthDictForESignCN=function(e,t){var n=t.docId,r=t.fieldName,i=t.willingnessInfo;return Oa(n).then((function(e){return e.updatePropAuthDictForESignCN({fieldName:r,willingnessInfo:i})})).then((function(t){return Fa(e,t)}))},pa.getAssignInfoForESignCN=function(e,t){return Oa(t.docId).then((function(e){return e.getAssignInfoForESignCN()})).then((function(t){return Fa(e,t)}))},pa.getOrderOfSignFlowFile=function(e,t){return Oa(t.docId).then((function(e){return e.getOrderOfSignFlowFile()})).then((function(t){return Fa(e,t)}))},pa.checkFieldWhetherFill=function(e,t){var n=t.docId,r=t.emailValue;return Oa(n).then((function(e){return e.checkFieldWhetherFill(r)})).then((function(t){return Fa(e,t)}))},pa.setSignatureAP=function(e,t){var n=t.docId,r=t.pageIndex,i=t.annotId,a=t.inkSignBuffer,o=t.pagingSigObjNum;return Oa(n).then((function(e){return e.setSignatureAP({pageIndex:r,annotId:i,inkSignBuffer:a,pagingSigObjNum:o})})).then((function(t){return Fa(e,t)}))},pa.getFlowSignInfo=function(e,t){return Oa(t.docId).then((function(e){return e.getFlowSignInfo()})).then((function(t){return Fa(e,t)}))},pa.convertToTextMarkup=function(e,t){var n=t.docId,r=t.findResults;return Oa(n).then((function(e){return e.convertToTextMarkup(r)})).then((function(t){return Fa(e,t)}))},pa.redactSearch=function(e,t){var n=t.docId,r=t.findResults,i=t.start,a=t.count,o=t.overlayTexts,s=t.opts;return Oa(n).then((function(e){return e.redactSearch(r,i,a,o,s)})).then((function(t){return Fa(e,t)}))},pa.setRenderConfigLineWeight=function(e,t){var n=t.docId,r=t.lineWeight;return Oa(n).then((function(t){return t.setRenderConfigLineWeight(r),Fa(e)}))},pa.isScannedDoc=function(e,t){return Oa(t.docId).then((function(e){return e.isScannedDoc()})).then((function(t){return Fa(e,t)}))},pa.getCompareFileFilterNums=function(e,t){return Oa(t.docId).then((function(t){var n=t.getCompareFileFilterNums();return Fa(e,n)}))},pa.removePDFAID=function(e,t){return Oa(t.docId).then((function(t){return t.removePDFAID(),Fa(e)}))},pa.setPageTransition=function(e,t){var n=t.docId,r=t.transName,i=t.direction,a=t.speed,o=t.range;return Oa(n).then((function(t){return Fa(e,t.setPageTransition(r,i,a,o))}))},pa.getPageTransitionByIndex=function(e,t){var n=t.docId,r=t.pageIndex;return Oa(n).then((function(t){return Fa(e,t.getPageTransitionByIndex(r))}))},pa.getStampTypeByPageIndex=function(e,t){var n=t.docId,r=t.pageIndex;return Oa(n).then((function(t){return Fa(e,t.getStampTypeByPageIndex(r))}))},pa.getPageTransition=function(e,t){var n=t.docId,r=t.pageId;return Ba(n,r).then((function(t){return Fa(e,t.getPageTransition(r))}))},pa.isScannedPage=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.isScannedPage()})).then((function(t){return Fa(e,t)}))},pa.getPureTexts=function(e,t){var n=t.docId,r=t.pageId,i=t.lr;return Ba(n,r).then((function(t){t.getPureTexts(i).then((function(t){Fa(e,t)}))}))},pa.getLRContentForChatWithDoc=function(t,n){var r=n.docId,i=n.options;return Oa(r).then(function(){var n=(0,e._)((function(e){var n;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,Mi(e,i)];case 1:return n=r.sent(),[2,Fa(t,n)]}}))}));return function(e){return n.apply(this,arguments)}}())},pa.fetchContentByType=function(t,n){var r=n.docId,i=n.options;return Oa(r).then(function(){var n=(0,e._)((function(e){var n;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,sa];case 1:return[4,Xi(r.sent().engine,e,i)];case 2:return n=r.sent(),[2,Fa(t,n)]}}))}));return function(e){return n.apply(this,arguments)}}())},pa.getDocPurText=function(e,t){return Oa(t.docId).then((function(t){return function(e){return xi.apply(this,arguments)}(t).then((function(t){return Fa(e,t)}))}))},pa.docCanDoOcr=function(e,t){return Oa(t.docId).then((function(t){return function(e){return Bi.apply(this,arguments)}(t).then((function(t){return Fa(e,t)}))}))},pa.hiddenDataSanitizeDocument=function(e,t){return Oa(t.docId).then((function(t){return function(e){return _i.apply(this,arguments)}(t).then((function(t){return Fa(e,t)}))}))},pa.hiddenDataRemoveHiddenInfo=function(e,t){var n=t.docId,r=t.options;return Oa(n).then((function(t){return function(e,t){return yi.apply(this,arguments)}(t,r).then((function(t){return Fa(e,t)}))}))},pa.handleGroupMarkup=function(e,t){var n=t.docId,r=t.pageId,i=t.annotIds,a=t.isGroup;return Ba(n,r).then((function(e){return e.handleGroupMarkup(i,a)})).then((function(t){return Fa(e,t)}))},pa.setRedactAppearance=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.option;return Ba(n,r).then((function(e){return e.getAnnotById(i)})).then((function(e){return e.setRedactAppearance(a)})).then((function(t){Fa(e,t)}))},pa.getText=function(e,t){var n=t.docId,r=t.pageRange,i=t.taskId,a=t.taskProgress;return lr.ZP.loadWasmModule(lr.sg).then((function(){return Oa(n)})).then((function(e){return e.getText(r,i,{taskProgress:function(e){Ra(a,e,[])}})})).then((function(t){Fa(e,t)}))},pa.cancelTaskProgress=function(e,t){var n=t.docId,r=t.taskId;return Oa(n).then((function(e){return e.cancelTaskProgress(r)})).then((function(t){Fa(e,t)}))},pa.getPageTexts=function(e,t){var n=t.docId,r=t.pageId,i=t.settings,a=t.minWidth,o=t.eol;return Ba(n,r).then((function(t){var n=t.getPageTexts(i,a,o);return Fa(e,n)}))},pa.cacheFontConfig=function(e,t){sa.then((function(e){return e.cacheFontConfig(t)})).then((function(){Fa(e)}))},pa.getFxcoreFontList=function(e,t){sa.then((function(e){return e.getFxcoreFontList(t)})).then((function(t){Fa(e,t)}))},pa.getFATLAndEUTLList=function(e,t){var n=t.urls,r=t.isUpdate;ga&&!(void 0!==r&&r)?ha.then((function(t){Fa(e,t)})):(ga=!1,lr.ZP.loadWasmModule(lr.v6).then((function(){return sa})).then((function(e){return e.getFATLAndEUTLList(n)})).then((function(t){fa.resolve(t),ga=!0,Fa(e,t)})))},pa.getTextInRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect,a=t.type;return Ba(n,r).then((function(e){return e.getTextInRect(i,a)})).then((function(t){return Fa(e,t)}))},pa.getAnnotRects=function(e,t){return Ba(t.docId,t.pageId).then((function(e){return e.getAnnots()})).then((function(e){return e.map((function(e){return e.getRectJson()}))})).then((function(t){Fa(e,t)}))},pa.transformPage=function(e,t){var n=t.docId,r=t.pageId,i=t.options;return Ba(n,r).then((function(t){var n=t.transform(i.scaleX,i.scaleY,i.translateX,i.translateY);Fa(e,n)}))},pa.clearAllDesignerAssistCache=function(e,t){return Oa(t.docId).then((function(t){t.clearAllDesignerAssistCache(),Fa(e)}))},pa.removeAllEmbeddedFiles=function(e,t){return Oa(t.docId).then((function(t){var n=t.attachments.removeAllEmbeddedFiles();Fa(e,n)}))},pa.getEmbeddedFileNames=function(e,t){return Oa(t.docId).then((function(t){var n=t.attachments.getEmbeddedFileNames();Fa(e,n)}))},pa.hasFixedPageFields=function(e,t){var n=t.docId,r=t.pageIndex;return Oa(n).then((function(t){var n=!0==!!t.fixPages[r];Fa(e,n)}))},pa.drawTextString=function(e,t){var n=t.docId,r=t.font;return Oa(n).then((function(e){return e.drawTextString(r)})).then((function(t){return Fa(e,t)}))},pa.clearPageRenderCache=function(e,t){Ba(t.docId,t.pageId).then((function(e){e&&!e.isVirtual&&e.clearRenderCache()})),Fa(e)},pa.addAnnots=function(e,t){var n=t.docId,r=t.annotJsonArray,i=t.progress;return Oa(n).then((function(t){return t.addAnnots(r,(function(e){Ra(i,e)})).then((function(t){Fa(e,t)}))}))}})(),__webpack_exports__})()));